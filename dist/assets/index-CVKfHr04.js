var pI=Object.defineProperty;var gI=(t,e,n)=>e in t?pI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ks=(t,e,n)=>gI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Bo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Bp={exports:{}},ju={},zp={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function vI(){if(Yw)return Fe;Yw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function A(z,ne,fe){this.props=z,this.context=ne,this.refs=O,this.updater=fe||b}A.prototype.isReactComponent={},A.prototype.setState=function(z,ne){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ne,"setState")},A.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function D(){}D.prototype=A.prototype;function V(z,ne,fe){this.props=z,this.context=ne,this.refs=O,this.updater=fe||b}var $=V.prototype=new D;$.constructor=V,k($,A.prototype),$.isPureReactComponent=!0;var W=Array.isArray,B=Object.prototype.hasOwnProperty,K={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(z,ne,fe){var Te,je={},ie=null,oe=null;if(ne!=null)for(Te in ne.ref!==void 0&&(oe=ne.ref),ne.key!==void 0&&(ie=""+ne.key),ne)B.call(ne,Te)&&!I.hasOwnProperty(Te)&&(je[Te]=ne[Te]);var he=arguments.length-2;if(he===1)je.children=fe;else if(1<he){for(var Z=Array(he),q=0;q<he;q++)Z[q]=arguments[q+2];je.children=Z}if(z&&z.defaultProps)for(Te in he=z.defaultProps,he)je[Te]===void 0&&(je[Te]=he[Te]);return{$$typeof:t,type:z,key:ie,ref:oe,props:je,_owner:K.current}}function T(z,ne){return{$$typeof:t,type:z.type,key:ne,ref:z.ref,props:z.props,_owner:z._owner}}function R(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function j(z){var ne={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(fe){return ne[fe]})}var F=/\/+/g;function L(z,ne){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):ne.toString(36)}function ge(z,ne,fe,Te,je){var ie=typeof z;(ie==="undefined"||ie==="boolean")&&(z=null);var oe=!1;if(z===null)oe=!0;else switch(ie){case"string":case"number":oe=!0;break;case"object":switch(z.$$typeof){case t:case e:oe=!0}}if(oe)return oe=z,je=je(oe),z=Te===""?"."+L(oe,0):Te,W(je)?(fe="",z!=null&&(fe=z.replace(F,"$&/")+"/"),ge(je,ne,fe,"",function(q){return q})):je!=null&&(R(je)&&(je=T(je,fe+(!je.key||oe&&oe.key===je.key?"":(""+je.key).replace(F,"$&/")+"/")+z)),ne.push(je)),1;if(oe=0,Te=Te===""?".":Te+":",W(z))for(var he=0;he<z.length;he++){ie=z[he];var Z=Te+L(ie,he);oe+=ge(ie,ne,fe,Z,je)}else if(Z=x(z),typeof Z=="function")for(z=Z.call(z),he=0;!(ie=z.next()).done;)ie=ie.value,Z=Te+L(ie,he++),oe+=ge(ie,ne,fe,Z,je);else if(ie==="object")throw ne=String(z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return oe}function $e(z,ne,fe){if(z==null)return z;var Te=[],je=0;return ge(z,Te,"","",function(ie){return ne.call(fe,ie,je++)}),Te}function Ge(z){if(z._status===-1){var ne=z._result;ne=ne(),ne.then(function(fe){(z._status===0||z._status===-1)&&(z._status=1,z._result=fe)},function(fe){(z._status===0||z._status===-1)&&(z._status=2,z._result=fe)}),z._status===-1&&(z._status=0,z._result=ne)}if(z._status===1)return z._result.default;throw z._result}var be={current:null},ce={transition:null},J={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ce,ReactCurrentOwner:K};function te(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:$e,forEach:function(z,ne,fe){$e(z,function(){ne.apply(this,arguments)},fe)},count:function(z){var ne=0;return $e(z,function(){ne++}),ne},toArray:function(z){return $e(z,function(ne){return ne})||[]},only:function(z){if(!R(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Fe.Component=A,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=V,Fe.StrictMode=r,Fe.Suspense=c,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Fe.act=te,Fe.cloneElement=function(z,ne,fe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Te=k({},z.props),je=z.key,ie=z.ref,oe=z._owner;if(ne!=null){if(ne.ref!==void 0&&(ie=ne.ref,oe=K.current),ne.key!==void 0&&(je=""+ne.key),z.type&&z.type.defaultProps)var he=z.type.defaultProps;for(Z in ne)B.call(ne,Z)&&!I.hasOwnProperty(Z)&&(Te[Z]=ne[Z]===void 0&&he!==void 0?he[Z]:ne[Z])}var Z=arguments.length-2;if(Z===1)Te.children=fe;else if(1<Z){he=Array(Z);for(var q=0;q<Z;q++)he[q]=arguments[q+2];Te.children=he}return{$$typeof:t,type:z.type,key:je,ref:ie,props:Te,_owner:oe}},Fe.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Fe.createElement=S,Fe.createFactory=function(z){var ne=S.bind(null,z);return ne.type=z,ne},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(z){return{$$typeof:u,render:z}},Fe.isValidElement=R,Fe.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:Ge}},Fe.memo=function(z,ne){return{$$typeof:h,type:z,compare:ne===void 0?null:ne}},Fe.startTransition=function(z){var ne=ce.transition;ce.transition={};try{z()}finally{ce.transition=ne}},Fe.unstable_act=te,Fe.useCallback=function(z,ne){return be.current.useCallback(z,ne)},Fe.useContext=function(z){return be.current.useContext(z)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(z){return be.current.useDeferredValue(z)},Fe.useEffect=function(z,ne){return be.current.useEffect(z,ne)},Fe.useId=function(){return be.current.useId()},Fe.useImperativeHandle=function(z,ne,fe){return be.current.useImperativeHandle(z,ne,fe)},Fe.useInsertionEffect=function(z,ne){return be.current.useInsertionEffect(z,ne)},Fe.useLayoutEffect=function(z,ne){return be.current.useLayoutEffect(z,ne)},Fe.useMemo=function(z,ne){return be.current.useMemo(z,ne)},Fe.useReducer=function(z,ne,fe){return be.current.useReducer(z,ne,fe)},Fe.useRef=function(z){return be.current.useRef(z)},Fe.useState=function(z){return be.current.useState(z)},Fe.useSyncExternalStore=function(z,ne,fe){return be.current.useSyncExternalStore(z,ne,fe)},Fe.useTransition=function(){return be.current.useTransition()},Fe.version="18.3.1",Fe}var Xw;function H0(){return Xw||(Xw=1,zp.exports=vI()),zp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function xI(){if(Zw)return ju;Zw=1;var t=H0(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,h){var g,v={},x=null,b=null;h!==void 0&&(x=""+h),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(b=c.ref);for(g in c)r.call(c,g)&&!o.hasOwnProperty(g)&&(v[g]=c[g]);if(u&&u.defaultProps)for(g in c=u.defaultProps,c)v[g]===void 0&&(v[g]=c[g]);return{$$typeof:e,type:u,key:x,ref:b,props:v,_owner:s.current}}return ju.Fragment=n,ju.jsx=l,ju.jsxs=l,ju}var e_;function wI(){return e_||(e_=1,Bp.exports=xI()),Bp.exports}var f=wI(),P=H0();const nt=Bo(P);var dh={},Wp={exports:{}},In={},Hp={exports:{}},qp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function _I(){return t_||(t_=1,function(t){function e(ce,J){var te=ce.length;ce.push(J);e:for(;0<te;){var z=te-1>>>1,ne=ce[z];if(0<s(ne,J))ce[z]=J,ce[te]=ne,te=z;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var J=ce[0],te=ce.pop();if(te!==J){ce[0]=te;e:for(var z=0,ne=ce.length,fe=ne>>>1;z<fe;){var Te=2*(z+1)-1,je=ce[Te],ie=Te+1,oe=ce[ie];if(0>s(je,te))ie<ne&&0>s(oe,je)?(ce[z]=oe,ce[ie]=te,z=ie):(ce[z]=je,ce[Te]=te,z=Te);else if(ie<ne&&0>s(oe,te))ce[z]=oe,ce[ie]=te,z=ie;else break e}}return J}function s(ce,J){var te=ce.sortIndex-J.sortIndex;return te!==0?te:ce.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],h=[],g=1,v=null,x=3,b=!1,k=!1,O=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(ce){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=ce)r(h),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(h)}}function W(ce){if(O=!1,$(ce),!k)if(n(c)!==null)k=!0,Ge(B);else{var J=n(h);J!==null&&be(W,J.startTime-ce)}}function B(ce,J){k=!1,O&&(O=!1,D(S),S=-1),b=!0;var te=x;try{for($(J),v=n(c);v!==null&&(!(v.expirationTime>J)||ce&&!j());){var z=v.callback;if(typeof z=="function"){v.callback=null,x=v.priorityLevel;var ne=z(v.expirationTime<=J);J=t.unstable_now(),typeof ne=="function"?v.callback=ne:v===n(c)&&r(c),$(J)}else r(c);v=n(c)}if(v!==null)var fe=!0;else{var Te=n(h);Te!==null&&be(W,Te.startTime-J),fe=!1}return fe}finally{v=null,x=te,b=!1}}var K=!1,I=null,S=-1,T=5,R=-1;function j(){return!(t.unstable_now()-R<T)}function F(){if(I!==null){var ce=t.unstable_now();R=ce;var J=!0;try{J=I(!0,ce)}finally{J?L():(K=!1,I=null)}}else K=!1}var L;if(typeof V=="function")L=function(){V(F)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,$e=ge.port2;ge.port1.onmessage=F,L=function(){$e.postMessage(null)}}else L=function(){A(F,0)};function Ge(ce){I=ce,K||(K=!0,L())}function be(ce,J){S=A(function(){ce(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,Ge(B))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(ce){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var te=x;x=J;try{return ce()}finally{x=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,J){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var te=x;x=ce;try{return J()}finally{x=te}},t.unstable_scheduleCallback=function(ce,J,te){var z=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?z+te:z):te=z,ce){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=te+ne,ce={id:g++,callback:J,priorityLevel:ce,startTime:te,expirationTime:ne,sortIndex:-1},te>z?(ce.sortIndex=te,e(h,ce),n(c)===null&&ce===n(h)&&(O?(D(S),S=-1):O=!0,be(W,te-z))):(ce.sortIndex=ne,e(c,ce),k||b||(k=!0,Ge(B))),ce},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(ce){var J=x;return function(){var te=x;x=J;try{return ce.apply(this,arguments)}finally{x=te}}}}(qp)),qp}var n_;function bI(){return n_||(n_=1,Hp.exports=_I()),Hp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function EI(){if(r_)return In;r_=1;var t=H0(),e=bI();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function x(i){return c.call(v,i)?!0:c.call(g,i)?!1:h.test(i)?v[i]=!0:(g[i]=!0,!1)}function b(i,a,d,p){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,a,d,p){if(a===null||typeof a>"u"||b(i,a,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function O(i,a,d,p,y,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new O(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];A[a]=new O(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new O(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new O(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new O(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new O(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new O(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new O(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new O(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(D,V);A[a]=new O(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(D,V);A[a]=new O(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(D,V);A[a]=new O(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new O(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new O(i,1,!1,i.toLowerCase(),null,!0,!0)});function $(i,a,d,p){var y=A.hasOwnProperty(a)?A[a]:null;(y!==null?y.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,d,y,p)&&(d=null),p||y===null?x(a)&&(d===null?i.removeAttribute(a):i.setAttribute(a,""+d)):y.mustUseProperty?i[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,p=y.attributeNamespace,d===null?i.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,p?i.setAttributeNS(p,a,d):i.setAttribute(a,d))))}var W=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),K=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),j=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ce=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=ce&&i[ce]||i["@@iterator"],typeof i=="function"?i:null)}var te=Object.assign,z;function ne(i){if(z===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var fe=!1;function Te(i,a){if(!i||fe)return"";fe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var p=X}Reflect.construct(i,[],a)}else{try{a.call()}catch(X){p=X}i.call(a.prototype)}else{try{throw Error()}catch(X){p=X}i()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var y=X.stack.split(`
`),_=p.stack.split(`
`),C=y.length-1,M=_.length-1;1<=C&&0<=M&&y[C]!==_[M];)M--;for(;1<=C&&0<=M;C--,M--)if(y[C]!==_[M]){if(C!==1||M!==1)do if(C--,M--,0>M||y[C]!==_[M]){var U=`
`+y[C].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=C&&0<=M);break}}}finally{fe=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?ne(i):""}function je(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=Te(i.type,!1),i;case 11:return i=Te(i.type.render,!1),i;case 1:return i=Te(i.type,!0),i;default:return""}}function ie(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case K:return"Portal";case T:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case ge:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case $e:return a=i.displayName||null,a!==null?a:ie(i.type)||"Memo";case Ge:a=i._payload,i=i._init;try{return ie(i(a))}catch{}}return null}function oe(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(a);case 8:return a===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function he(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Z(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function q(i){var a=Z(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){p=""+C,_.call(this,C)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function re(i){i._valueTracker||(i._valueTracker=q(i))}function ye(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),p="";return i&&(p=Z(i)?i.checked?"true":"false":i.value),i=p,i!==d?(a.setValue(i),!0):!1}function We(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function St(i,a){var d=a.checked;return te({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function hr(i,a){var d=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;d=he(a.value!=null?a.value:d),i._wrapperState={initialChecked:p,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Fs(i,a){a=a.checked,a!=null&&$(i,"checked",a,!1)}function Us(i,a){Fs(i,a);var d=he(a.value),p=a.type;if(d!=null)p==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?us(i,a.type,d):a.hasOwnProperty("defaultValue")&&us(i,a.type,he(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Bs(i,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,d||a===i.value||(i.value=a),i.defaultValue=a}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function us(i,a,d){(a!=="number"||We(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var xt=Array.isArray;function on(i,a,d,p){if(i=i.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<i.length;d++)y=a.hasOwnProperty("$"+i[d].value),i[d].selected!==y&&(i[d].selected=y),y&&p&&(i[d].defaultSelected=!0)}else{for(d=""+he(d),a=null,y=0;y<i.length;y++){if(i[y].value===d){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function qi(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return te({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function cs(i,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(xt(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}i._wrapperState={initialValue:he(d)}}function Jo(i,a){var d=he(a.value),p=he(a.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),a.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),p!=null&&(i.defaultValue=""+p)}function Bl(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Dt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ot(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Dt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ds,zl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,p,y){MSApp.execUnsafeLocalFunction(function(){return i(a,d,p,y)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(ds=ds||document.createElement("div"),ds.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ds.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function zs(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gi=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(i){Gi.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Ki[a]=Ki[i]})});function Wl(i,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Ki.hasOwnProperty(i)&&Ki[i]?(""+a).trim():a+"px"}function Hl(i,a){i=i.style;for(var d in a)if(a.hasOwnProperty(d)){var p=d.indexOf("--")===0,y=Wl(d,a[d],p);d==="float"&&(d="cssFloat"),p?i.setProperty(d,y):i[d]=y}}var ql=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kl(i,a){if(a){if(ql[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Gl(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qi=null;function Yo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Xo=null,Qn=null,Lr=null;function Zo(i){if(i=vu(i)){if(typeof Xo!="function")throw Error(n(280));var a=i.stateNode;a&&(a=kd(a),Xo(i.stateNode,i.type,a))}}function Mr(i){Qn?Lr?Lr.push(i):Lr=[i]:Qn=i}function Ql(){if(Qn){var i=Qn,a=Lr;if(Lr=Qn=null,Zo(i),a)for(i=0;i<a.length;i++)Zo(a[i])}}function Ji(i,a){return i(a)}function Jl(){}var hs=!1;function Yl(i,a,d){if(hs)return i(a,d);hs=!0;try{return Ji(i,a,d)}finally{hs=!1,(Qn!==null||Lr!==null)&&(Jl(),Ql())}}function kt(i,a){var d=i.stateNode;if(d===null)return null;var p=kd(d);if(p===null)return null;d=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var ea=!1;if(u)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){ea=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{ea=!1}function Yi(i,a,d,p,y,_,C,M,U){var X=Array.prototype.slice.call(arguments,3);try{a.apply(d,X)}catch(le){this.onError(le)}}var Xi=!1,ta=null,mr=!1,Xl=null,gm={onError:function(i){Xi=!0,ta=i}};function na(i,a,d,p,y,_,C,M,U){Xi=!1,ta=null,Yi.apply(gm,arguments)}function Yc(i,a,d,p,y,_,C,M,U){if(na.apply(this,arguments),Xi){if(Xi){var X=ta;Xi=!1,ta=null}else throw Error(n(198));mr||(mr=!0,Xl=X)}}function pr(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function Zi(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function gr(i){if(pr(i)!==i)throw Error(n(188))}function Xc(i){var a=i.alternate;if(!a){if(a=pr(i),a===null)throw Error(n(188));return a!==i?null:i}for(var d=i,p=a;;){var y=d.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){d=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===d)return gr(y),i;if(_===p)return gr(y),a;_=_.sibling}throw Error(n(188))}if(d.return!==p.return)d=y,p=_;else{for(var C=!1,M=y.child;M;){if(M===d){C=!0,d=y,p=_;break}if(M===p){C=!0,p=y,d=_;break}M=M.sibling}if(!C){for(M=_.child;M;){if(M===d){C=!0,d=_,p=y;break}if(M===p){C=!0,p=_,d=y;break}M=M.sibling}if(!C)throw Error(n(189))}}if(d.alternate!==p)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:a}function Zl(i){return i=Xc(i),i!==null?ra(i):null}function ra(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=ra(i);if(a!==null)return a;i=i.sibling}return null}var sa=e.unstable_scheduleCallback,eu=e.unstable_cancelCallback,Zc=e.unstable_shouldYield,ym=e.unstable_requestPaint,rt=e.unstable_now,ed=e.unstable_getCurrentPriorityLevel,eo=e.unstable_ImmediatePriority,Ws=e.unstable_UserBlockingPriority,Jn=e.unstable_NormalPriority,tu=e.unstable_LowPriority,td=e.unstable_IdlePriority,to=null,Mn=null;function nd(i){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(to,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:sd,nu=Math.log,rd=Math.LN2;function sd(i){return i>>>=0,i===0?32:31-(nu(i)/rd|0)|0}var ia=64,oa=4194304;function Hs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function no(i,a){var d=i.pendingLanes;if(d===0)return 0;var p=0,y=i.suspendedLanes,_=i.pingedLanes,C=d&268435455;if(C!==0){var M=C&~y;M!==0?p=Hs(M):(_&=C,_!==0&&(p=Hs(_)))}else C=d&~y,C!==0?p=Hs(C):_!==0&&(p=Hs(_));if(p===0)return 0;if(a!==0&&a!==p&&!(a&y)&&(y=p&-p,_=a&-a,y>=_||y===16&&(_&4194240)!==0))return a;if(p&4&&(p|=d&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)d=31-yn(a),y=1<<d,p|=i[d],a&=~y;return p}function vm(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(i,a){for(var d=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes;0<_;){var C=31-yn(_),M=1<<C,U=y[C];U===-1?(!(M&d)||M&p)&&(y[C]=vm(M,a)):U<=a&&(i.expiredLanes|=M),_&=~M}}function Vn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ro(){var i=ia;return ia<<=1,!(ia&4194240)&&(ia=64),i}function qs(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function Ks(i,a,d){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-yn(a),i[a]=d}function tt(i,a){var d=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<d;){var y=31-yn(d),_=1<<y;a[y]=0,p[y]=-1,i[y]=-1,d&=~_}}function Gs(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var p=31-yn(d),y=1<<p;y&a|i[p]&a&&(i[p]|=a),d&=~y}}var He=0;function Qs(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var id,aa,od,ad,ld,ru=!1,Vr=[],Jt=null,yr=null,vr=null,Js=new Map,Yn=new Map,$r=[],xm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ud(i,a){switch(i){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Js.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(a.pointerId)}}function En(i,a,d,p,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:d,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},a!==null&&(a=vu(a),a!==null&&aa(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function wm(i,a,d,p,y){switch(a){case"focusin":return Jt=En(Jt,i,a,d,p,y),!0;case"dragenter":return yr=En(yr,i,a,d,p,y),!0;case"mouseover":return vr=En(vr,i,a,d,p,y),!0;case"pointerover":var _=y.pointerId;return Js.set(_,En(Js.get(_)||null,i,a,d,p,y)),!0;case"gotpointercapture":return _=y.pointerId,Yn.set(_,En(Yn.get(_)||null,i,a,d,p,y)),!0}return!1}function cd(i){var a=lo(i.target);if(a!==null){var d=pr(a);if(d!==null){if(a=d.tag,a===13){if(a=Zi(d),a!==null){i.blockedOn=a,ld(i.priority,function(){od(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ms(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=la(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var p=new d.constructor(d.type,d);Qi=p,d.target.dispatchEvent(p),Qi=null}else return a=vu(d),a!==null&&aa(a),i.blockedOn=d,!1;a.shift()}return!0}function so(i,a,d){ms(i)&&d.delete(a)}function dd(){ru=!1,Jt!==null&&ms(Jt)&&(Jt=null),yr!==null&&ms(yr)&&(yr=null),vr!==null&&ms(vr)&&(vr=null),Js.forEach(so),Yn.forEach(so)}function xr(i,a){i.blockedOn===a&&(i.blockedOn=null,ru||(ru=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dd)))}function wr(i){function a(y){return xr(y,i)}if(0<Vr.length){xr(Vr[0],i);for(var d=1;d<Vr.length;d++){var p=Vr[d];p.blockedOn===i&&(p.blockedOn=null)}}for(Jt!==null&&xr(Jt,i),yr!==null&&xr(yr,i),vr!==null&&xr(vr,i),Js.forEach(a),Yn.forEach(a),d=0;d<$r.length;d++)p=$r[d],p.blockedOn===i&&(p.blockedOn=null);for(;0<$r.length&&(d=$r[0],d.blockedOn===null);)cd(d),d.blockedOn===null&&$r.shift()}var ps=W.ReactCurrentBatchConfig,Ys=!0;function dt(i,a,d,p){var y=He,_=ps.transition;ps.transition=null;try{He=1,su(i,a,d,p)}finally{He=y,ps.transition=_}}function _m(i,a,d,p){var y=He,_=ps.transition;ps.transition=null;try{He=4,su(i,a,d,p)}finally{He=y,ps.transition=_}}function su(i,a,d,p){if(Ys){var y=la(i,a,d,p);if(y===null)Nm(i,a,p,io,d),ud(i,p);else if(wm(y,i,a,d,p))p.stopPropagation();else if(ud(i,p),a&4&&-1<xm.indexOf(i)){for(;y!==null;){var _=vu(y);if(_!==null&&id(_),_=la(i,a,d,p),_===null&&Nm(i,a,p,io,d),_===y)break;y=_}y!==null&&p.stopPropagation()}else Nm(i,a,p,null,d)}}var io=null;function la(i,a,d,p){if(io=null,i=Yo(p),i=lo(i),i!==null)if(a=pr(i),a===null)i=null;else if(d=a.tag,d===13){if(i=Zi(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return io=i,null}function iu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ed()){case eo:return 1;case Ws:return 4;case Jn:case tu:return 16;case td:return 536870912;default:return 16}default:return 16}}var $n=null,ua=null,Tn=null;function ou(){if(Tn)return Tn;var i,a=ua,d=a.length,p,y="value"in $n?$n.value:$n.textContent,_=y.length;for(i=0;i<d&&a[i]===y[i];i++);var C=d-i;for(p=1;p<=C&&a[d-p]===y[_-p];p++);return Tn=y.slice(i,1<p?1-p:void 0)}function ca(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Fr(){return!0}function au(){return!1}function Yt(i){function a(d,p,y,_,C){this._reactName=d,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(d=i[M],this[M]=d?d(_):_[M]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Fr:au,this.isPropagationStopped=au,this}return te(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Fr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Fr)},persist:function(){},isPersistent:Fr}),a}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=Yt(_r),Ur=te({},_r,{view:0,detail:0}),bm=Yt(Ur),ha,gs,Xs,oo=te({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Br,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xs&&(Xs&&i.type==="mousemove"?(ha=i.screenX-Xs.screenX,gs=i.screenY-Xs.screenY):gs=ha=0,Xs=i),ha)},movementY:function(i){return"movementY"in i?i.movementY:gs}}),fa=Yt(oo),lu=te({},oo,{dataTransfer:0}),hd=Yt(lu),ma=te({},Ur,{relatedTarget:0}),pa=Yt(ma),fd=te({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),ys=Yt(fd),md=te({},_r,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),pd=Yt(md),gd=te({},_r,{data:0}),uu=Yt(gd),ga={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=yd[i])?!!a[i]:!1}function Br(){return vd}var m=te({},Ur,{key:function(i){if(i.key){var a=ga[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ca(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Br,charCode:function(i){return i.type==="keypress"?ca(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ca(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),w=Yt(m),E=te({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Yt(E),G=te({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Br}),ee=Yt(G),pe=te({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=Yt(pe),Lt=te({},oo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Yt(Lt),Bt=[9,13,27,32],It=u&&"CompositionEvent"in window,Xn=null;u&&"documentMode"in document&&(Xn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Xn,ao=u&&(!It||Xn&&8<Xn&&11>=Xn),ya=" ",Hv=!1;function qv(i,a){switch(i){case"keyup":return Bt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var va=!1;function hA(i,a){switch(i){case"compositionend":return Kv(a);case"keypress":return a.which!==32?null:(Hv=!0,ya);case"textInput":return i=a.data,i===ya&&Hv?null:i;default:return null}}function fA(i,a){if(va)return i==="compositionend"||!It&&qv(i,a)?(i=ou(),Tn=ua=$n=null,va=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ao&&a.locale!=="ko"?null:a.data;default:return null}}var mA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!mA[i.type]:a==="textarea"}function Qv(i,a,d,p){Mr(p),a=Ed(a,"onChange"),0<a.length&&(d=new da("onChange","change",null,d,p),i.push({event:d,listeners:a}))}var cu=null,du=null;function pA(i){fx(i,0)}function xd(i){var a=Ea(i);if(ye(a))return i}function gA(i,a){if(i==="change")return a}var Jv=!1;if(u){var Em;if(u){var Tm="oninput"in document;if(!Tm){var Yv=document.createElement("div");Yv.setAttribute("oninput","return;"),Tm=typeof Yv.oninput=="function"}Em=Tm}else Em=!1;Jv=Em&&(!document.documentMode||9<document.documentMode)}function Xv(){cu&&(cu.detachEvent("onpropertychange",Zv),du=cu=null)}function Zv(i){if(i.propertyName==="value"&&xd(du)){var a=[];Qv(a,du,i,Yo(i)),Yl(pA,a)}}function yA(i,a,d){i==="focusin"?(Xv(),cu=a,du=d,cu.attachEvent("onpropertychange",Zv)):i==="focusout"&&Xv()}function vA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return xd(du)}function xA(i,a){if(i==="click")return xd(a)}function wA(i,a){if(i==="input"||i==="change")return xd(a)}function _A(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var br=typeof Object.is=="function"?Object.is:_A;function hu(i,a){if(br(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),p=Object.keys(a);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var y=d[p];if(!c.call(a,y)||!br(i[y],a[y]))return!1}return!0}function ex(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tx(i,a){var d=ex(i);i=0;for(var p;d;){if(d.nodeType===3){if(p=i+d.textContent.length,i<=a&&p>=a)return{node:d,offset:a-i};i=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ex(d)}}function nx(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?nx(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function rx(){for(var i=window,a=We();a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=We(i.document)}return a}function Sm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function bA(i){var a=rx(),d=i.focusedElem,p=i.selectionRange;if(a!==d&&d&&d.ownerDocument&&nx(d.ownerDocument.documentElement,d)){if(p!==null&&Sm(d)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(i,d.value.length);else if(i=(a=d.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=d.textContent.length,_=Math.min(p.start,y);p=p.end===void 0?_:Math.min(p.end,y),!i.extend&&_>p&&(y=p,p=_,_=y),y=tx(d,_);var C=tx(d,p);y&&C&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),_>p?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=d;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)i=a[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var EA=u&&"documentMode"in document&&11>=document.documentMode,xa=null,km=null,fu=null,Cm=!1;function sx(i,a,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Cm||xa==null||xa!==We(p)||(p=xa,"selectionStart"in p&&Sm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),fu&&hu(fu,p)||(fu=p,p=Ed(km,"onSelect"),0<p.length&&(a=new da("onSelect","select",null,a,d),i.push({event:a,listeners:p}),a.target=xa)))}function wd(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var wa={animationend:wd("Animation","AnimationEnd"),animationiteration:wd("Animation","AnimationIteration"),animationstart:wd("Animation","AnimationStart"),transitionend:wd("Transition","TransitionEnd")},Pm={},ix={};u&&(ix=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function _d(i){if(Pm[i])return Pm[i];if(!wa[i])return i;var a=wa[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in ix)return Pm[i]=a[d];return i}var ox=_d("animationend"),ax=_d("animationiteration"),lx=_d("animationstart"),ux=_d("transitionend"),cx=new Map,dx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(i,a){cx.set(i,a),o(a,[i])}for(var Am=0;Am<dx.length;Am++){var Im=dx[Am],TA=Im.toLowerCase(),SA=Im[0].toUpperCase()+Im.slice(1);Zs(TA,"on"+SA)}Zs(ox,"onAnimationEnd"),Zs(ax,"onAnimationIteration"),Zs(lx,"onAnimationStart"),Zs("dblclick","onDoubleClick"),Zs("focusin","onFocus"),Zs("focusout","onBlur"),Zs(ux,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kA=new Set("cancel close invalid load scroll toggle".split(" ").concat(mu));function hx(i,a,d){var p=i.type||"unknown-event";i.currentTarget=d,Yc(p,a,void 0,i),i.currentTarget=null}function fx(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var p=i[d],y=p.event;p=p.listeners;e:{var _=void 0;if(a)for(var C=p.length-1;0<=C;C--){var M=p[C],U=M.instance,X=M.currentTarget;if(M=M.listener,U!==_&&y.isPropagationStopped())break e;hx(y,M,X),_=U}else for(C=0;C<p.length;C++){if(M=p[C],U=M.instance,X=M.currentTarget,M=M.listener,U!==_&&y.isPropagationStopped())break e;hx(y,M,X),_=U}}}if(mr)throw i=Xl,mr=!1,Xl=null,i}function lt(i,a){var d=a[Vm];d===void 0&&(d=a[Vm]=new Set);var p=i+"__bubble";d.has(p)||(mx(a,i,2,!1),d.add(p))}function Rm(i,a,d){var p=0;a&&(p|=4),mx(d,i,p,a)}var bd="_reactListening"+Math.random().toString(36).slice(2);function pu(i){if(!i[bd]){i[bd]=!0,r.forEach(function(d){d!=="selectionchange"&&(kA.has(d)||Rm(d,!1,i),Rm(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[bd]||(a[bd]=!0,Rm("selectionchange",!1,a))}}function mx(i,a,d,p){switch(iu(a)){case 1:var y=dt;break;case 4:y=_m;break;default:y=su}d=y.bind(null,a,d,i),y=void 0,!ea||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(a,d,{capture:!0,passive:y}):i.addEventListener(a,d,!0):y!==void 0?i.addEventListener(a,d,{passive:y}):i.addEventListener(a,d,!1)}function Nm(i,a,d,p,y){var _=p;if(!(a&1)&&!(a&2)&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var M=p.stateNode.containerInfo;if(M===y||M.nodeType===8&&M.parentNode===y)break;if(C===4)for(C=p.return;C!==null;){var U=C.tag;if((U===3||U===4)&&(U=C.stateNode.containerInfo,U===y||U.nodeType===8&&U.parentNode===y))return;C=C.return}for(;M!==null;){if(C=lo(M),C===null)return;if(U=C.tag,U===5||U===6){p=_=C;continue e}M=M.parentNode}}p=p.return}Yl(function(){var X=_,le=Yo(d),de=[];e:{var ae=cx.get(i);if(ae!==void 0){var ve=da,_e=i;switch(i){case"keypress":if(ca(d)===0)break e;case"keydown":case"keyup":ve=w;break;case"focusin":_e="focus",ve=pa;break;case"focusout":_e="blur",ve=pa;break;case"beforeblur":case"afterblur":ve=pa;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ee;break;case ox:case ax:case lx:ve=ys;break;case ux:ve=et;break;case"scroll":ve=bm;break;case"wheel":ve=qe;break;case"copy":case"cut":case"paste":ve=pd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=N}var Ee=(a&4)!==0,Ct=!Ee&&i==="scroll",Q=Ee?ae!==null?ae+"Capture":null:ae;Ee=[];for(var H=X,Y;H!==null;){Y=H;var me=Y.stateNode;if(Y.tag===5&&me!==null&&(Y=me,Q!==null&&(me=kt(H,Q),me!=null&&Ee.push(gu(H,me,Y)))),Ct)break;H=H.return}0<Ee.length&&(ae=new ve(ae,_e,null,d,le),de.push({event:ae,listeners:Ee}))}}if(!(a&7)){e:{if(ae=i==="mouseover"||i==="pointerover",ve=i==="mouseout"||i==="pointerout",ae&&d!==Qi&&(_e=d.relatedTarget||d.fromElement)&&(lo(_e)||_e[vs]))break e;if((ve||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,ve?(_e=d.relatedTarget||d.toElement,ve=X,_e=_e?lo(_e):null,_e!==null&&(Ct=pr(_e),_e!==Ct||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(ve=null,_e=X),ve!==_e)){if(Ee=fa,me="onMouseLeave",Q="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=N,me="onPointerLeave",Q="onPointerEnter",H="pointer"),Ct=ve==null?ae:Ea(ve),Y=_e==null?ae:Ea(_e),ae=new Ee(me,H+"leave",ve,d,le),ae.target=Ct,ae.relatedTarget=Y,me=null,lo(le)===X&&(Ee=new Ee(Q,H+"enter",_e,d,le),Ee.target=Y,Ee.relatedTarget=Ct,me=Ee),Ct=me,ve&&_e)t:{for(Ee=ve,Q=_e,H=0,Y=Ee;Y;Y=_a(Y))H++;for(Y=0,me=Q;me;me=_a(me))Y++;for(;0<H-Y;)Ee=_a(Ee),H--;for(;0<Y-H;)Q=_a(Q),Y--;for(;H--;){if(Ee===Q||Q!==null&&Ee===Q.alternate)break t;Ee=_a(Ee),Q=_a(Q)}Ee=null}else Ee=null;ve!==null&&px(de,ae,ve,Ee,!1),_e!==null&&Ct!==null&&px(de,Ct,_e,Ee,!0)}}e:{if(ae=X?Ea(X):window,ve=ae.nodeName&&ae.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ae.type==="file")var Se=gA;else if(Gv(ae))if(Jv)Se=wA;else{Se=vA;var Ce=yA}else(ve=ae.nodeName)&&ve.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Se=xA);if(Se&&(Se=Se(i,X))){Qv(de,Se,d,le);break e}Ce&&Ce(i,ae,X),i==="focusout"&&(Ce=ae._wrapperState)&&Ce.controlled&&ae.type==="number"&&us(ae,"number",ae.value)}switch(Ce=X?Ea(X):window,i){case"focusin":(Gv(Ce)||Ce.contentEditable==="true")&&(xa=Ce,km=X,fu=null);break;case"focusout":fu=km=xa=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,sx(de,d,le);break;case"selectionchange":if(EA)break;case"keydown":case"keyup":sx(de,d,le)}var Pe;if(It)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else va?qv(i,d)&&(De="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(De="onCompositionStart");De&&(ao&&d.locale!=="ko"&&(va||De!=="onCompositionStart"?De==="onCompositionEnd"&&va&&(Pe=ou()):($n=le,ua="value"in $n?$n.value:$n.textContent,va=!0)),Ce=Ed(X,De),0<Ce.length&&(De=new uu(De,i,null,d,le),de.push({event:De,listeners:Ce}),Pe?De.data=Pe:(Pe=Kv(d),Pe!==null&&(De.data=Pe)))),(Pe=Fn?hA(i,d):fA(i,d))&&(X=Ed(X,"onBeforeInput"),0<X.length&&(le=new uu("onBeforeInput","beforeinput",null,d,le),de.push({event:le,listeners:X}),le.data=Pe))}fx(de,a)})}function gu(i,a,d){return{instance:i,listener:a,currentTarget:d}}function Ed(i,a){for(var d=a+"Capture",p=[];i!==null;){var y=i,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=kt(i,d),_!=null&&p.unshift(gu(i,_,y)),_=kt(i,a),_!=null&&p.push(gu(i,_,y))),i=i.return}return p}function _a(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function px(i,a,d,p,y){for(var _=a._reactName,C=[];d!==null&&d!==p;){var M=d,U=M.alternate,X=M.stateNode;if(U!==null&&U===p)break;M.tag===5&&X!==null&&(M=X,y?(U=kt(d,_),U!=null&&C.unshift(gu(d,U,M))):y||(U=kt(d,_),U!=null&&C.push(gu(d,U,M)))),d=d.return}C.length!==0&&i.push({event:a,listeners:C})}var CA=/\r\n?/g,PA=/\u0000|\uFFFD/g;function gx(i){return(typeof i=="string"?i:""+i).replace(CA,`
`).replace(PA,"")}function Td(i,a,d){if(a=gx(a),gx(i)!==a&&d)throw Error(n(425))}function Sd(){}var jm=null,Dm=null;function Om(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Lm=typeof setTimeout=="function"?setTimeout:void 0,AA=typeof clearTimeout=="function"?clearTimeout:void 0,yx=typeof Promise=="function"?Promise:void 0,IA=typeof queueMicrotask=="function"?queueMicrotask:typeof yx<"u"?function(i){return yx.resolve(null).then(i).catch(RA)}:Lm;function RA(i){setTimeout(function(){throw i})}function Mm(i,a){var d=a,p=0;do{var y=d.nextSibling;if(i.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(p===0){i.removeChild(y),wr(a);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=y}while(d);wr(a)}function ei(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function vx(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}var ba=Math.random().toString(36).slice(2),zr="__reactFiber$"+ba,yu="__reactProps$"+ba,vs="__reactContainer$"+ba,Vm="__reactEvents$"+ba,NA="__reactListeners$"+ba,jA="__reactHandles$"+ba;function lo(i){var a=i[zr];if(a)return a;for(var d=i.parentNode;d;){if(a=d[vs]||d[zr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=vx(i);i!==null;){if(d=i[zr])return d;i=vx(i)}return a}i=d,d=i.parentNode}return null}function vu(i){return i=i[zr]||i[vs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ea(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function kd(i){return i[yu]||null}var $m=[],Ta=-1;function ti(i){return{current:i}}function ut(i){0>Ta||(i.current=$m[Ta],$m[Ta]=null,Ta--)}function st(i,a){Ta++,$m[Ta]=i.current,i.current=a}var ni={},an=ti(ni),Sn=ti(!1),uo=ni;function Sa(i,a){var d=i.type.contextTypes;if(!d)return ni;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in d)y[_]=a[_];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function kn(i){return i=i.childContextTypes,i!=null}function Cd(){ut(Sn),ut(an)}function xx(i,a,d){if(an.current!==ni)throw Error(n(168));st(an,a),st(Sn,d)}function wx(i,a,d){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var y in p)if(!(y in a))throw Error(n(108,oe(i)||"Unknown",y));return te({},d,p)}function Pd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ni,uo=an.current,st(an,i),st(Sn,Sn.current),!0}function _x(i,a,d){var p=i.stateNode;if(!p)throw Error(n(169));d?(i=wx(i,a,uo),p.__reactInternalMemoizedMergedChildContext=i,ut(Sn),ut(an),st(an,i)):ut(Sn),st(Sn,d)}var xs=null,Ad=!1,Fm=!1;function bx(i){xs===null?xs=[i]:xs.push(i)}function DA(i){Ad=!0,bx(i)}function ri(){if(!Fm&&xs!==null){Fm=!0;var i=0,a=He;try{var d=xs;for(He=1;i<d.length;i++){var p=d[i];do p=p(!0);while(p!==null)}xs=null,Ad=!1}catch(y){throw xs!==null&&(xs=xs.slice(i+1)),sa(eo,ri),y}finally{He=a,Fm=!1}}return null}var ka=[],Ca=0,Id=null,Rd=0,Zn=[],er=0,co=null,ws=1,_s="";function ho(i,a){ka[Ca++]=Rd,ka[Ca++]=Id,Id=i,Rd=a}function Ex(i,a,d){Zn[er++]=ws,Zn[er++]=_s,Zn[er++]=co,co=i;var p=ws;i=_s;var y=32-yn(p)-1;p&=~(1<<y),d+=1;var _=32-yn(a)+y;if(30<_){var C=y-y%5;_=(p&(1<<C)-1).toString(32),p>>=C,y-=C,ws=1<<32-yn(a)+y|d<<y|p,_s=_+i}else ws=1<<_|d<<y|p,_s=i}function Um(i){i.return!==null&&(ho(i,1),Ex(i,1,0))}function Bm(i){for(;i===Id;)Id=ka[--Ca],ka[Ca]=null,Rd=ka[--Ca],ka[Ca]=null;for(;i===co;)co=Zn[--er],Zn[er]=null,_s=Zn[--er],Zn[er]=null,ws=Zn[--er],Zn[er]=null}var Un=null,Bn=null,ht=!1,Er=null;function Tx(i,a){var d=sr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=i,a=i.deletions,a===null?(i.deletions=[d],i.flags|=16):a.push(d)}function Sx(i,a){switch(i.tag){case 5:var d=i.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Un=i,Bn=ei(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Un=i,Bn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=co!==null?{id:ws,overflow:_s}:null,i.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=sr(18,null,null,0),d.stateNode=a,d.return=i,i.child=d,Un=i,Bn=null,!0):!1;default:return!1}}function zm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Wm(i){if(ht){var a=Bn;if(a){var d=a;if(!Sx(i,a)){if(zm(i))throw Error(n(418));a=ei(d.nextSibling);var p=Un;a&&Sx(i,a)?Tx(p,d):(i.flags=i.flags&-4097|2,ht=!1,Un=i)}}else{if(zm(i))throw Error(n(418));i.flags=i.flags&-4097|2,ht=!1,Un=i}}}function kx(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Un=i}function Nd(i){if(i!==Un)return!1;if(!ht)return kx(i),ht=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Om(i.type,i.memoizedProps)),a&&(a=Bn)){if(zm(i))throw Cx(),Error(n(418));for(;a;)Tx(i,a),a=ei(a.nextSibling)}if(kx(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(a===0){Bn=ei(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}i=i.nextSibling}Bn=null}}else Bn=Un?ei(i.stateNode.nextSibling):null;return!0}function Cx(){for(var i=Bn;i;)i=ei(i.nextSibling)}function Pa(){Bn=Un=null,ht=!1}function Hm(i){Er===null?Er=[i]:Er.push(i)}var OA=W.ReactCurrentBatchConfig;function xu(i,a,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var p=d.stateNode}if(!p)throw Error(n(147,i));var y=p,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var M=y.refs;C===null?delete M[_]:M[_]=C},a._stringRef=_,a)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function jd(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Px(i){var a=i._init;return a(i._payload)}function Ax(i){function a(Q,H){if(i){var Y=Q.deletions;Y===null?(Q.deletions=[H],Q.flags|=16):Y.push(H)}}function d(Q,H){if(!i)return null;for(;H!==null;)a(Q,H),H=H.sibling;return null}function p(Q,H){for(Q=new Map;H!==null;)H.key!==null?Q.set(H.key,H):Q.set(H.index,H),H=H.sibling;return Q}function y(Q,H){return Q=di(Q,H),Q.index=0,Q.sibling=null,Q}function _(Q,H,Y){return Q.index=Y,i?(Y=Q.alternate,Y!==null?(Y=Y.index,Y<H?(Q.flags|=2,H):Y):(Q.flags|=2,H)):(Q.flags|=1048576,H)}function C(Q){return i&&Q.alternate===null&&(Q.flags|=2),Q}function M(Q,H,Y,me){return H===null||H.tag!==6?(H=Lp(Y,Q.mode,me),H.return=Q,H):(H=y(H,Y),H.return=Q,H)}function U(Q,H,Y,me){var Se=Y.type;return Se===I?le(Q,H,Y.props.children,me,Y.key):H!==null&&(H.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ge&&Px(Se)===H.type)?(me=y(H,Y.props),me.ref=xu(Q,H,Y),me.return=Q,me):(me=rh(Y.type,Y.key,Y.props,null,Q.mode,me),me.ref=xu(Q,H,Y),me.return=Q,me)}function X(Q,H,Y,me){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=Mp(Y,Q.mode,me),H.return=Q,H):(H=y(H,Y.children||[]),H.return=Q,H)}function le(Q,H,Y,me,Se){return H===null||H.tag!==7?(H=wo(Y,Q.mode,me,Se),H.return=Q,H):(H=y(H,Y),H.return=Q,H)}function de(Q,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Lp(""+H,Q.mode,Y),H.return=Q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case B:return Y=rh(H.type,H.key,H.props,null,Q.mode,Y),Y.ref=xu(Q,null,H),Y.return=Q,Y;case K:return H=Mp(H,Q.mode,Y),H.return=Q,H;case Ge:var me=H._init;return de(Q,me(H._payload),Y)}if(xt(H)||J(H))return H=wo(H,Q.mode,Y,null),H.return=Q,H;jd(Q,H)}return null}function ae(Q,H,Y,me){var Se=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Se!==null?null:M(Q,H,""+Y,me);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:return Y.key===Se?U(Q,H,Y,me):null;case K:return Y.key===Se?X(Q,H,Y,me):null;case Ge:return Se=Y._init,ae(Q,H,Se(Y._payload),me)}if(xt(Y)||J(Y))return Se!==null?null:le(Q,H,Y,me,null);jd(Q,Y)}return null}function ve(Q,H,Y,me,Se){if(typeof me=="string"&&me!==""||typeof me=="number")return Q=Q.get(Y)||null,M(H,Q,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case B:return Q=Q.get(me.key===null?Y:me.key)||null,U(H,Q,me,Se);case K:return Q=Q.get(me.key===null?Y:me.key)||null,X(H,Q,me,Se);case Ge:var Ce=me._init;return ve(Q,H,Y,Ce(me._payload),Se)}if(xt(me)||J(me))return Q=Q.get(Y)||null,le(H,Q,me,Se,null);jd(H,me)}return null}function _e(Q,H,Y,me){for(var Se=null,Ce=null,Pe=H,De=H=0,Ht=null;Pe!==null&&De<Y.length;De++){Pe.index>De?(Ht=Pe,Pe=null):Ht=Pe.sibling;var Je=ae(Q,Pe,Y[De],me);if(Je===null){Pe===null&&(Pe=Ht);break}i&&Pe&&Je.alternate===null&&a(Q,Pe),H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je,Pe=Ht}if(De===Y.length)return d(Q,Pe),ht&&ho(Q,De),Se;if(Pe===null){for(;De<Y.length;De++)Pe=de(Q,Y[De],me),Pe!==null&&(H=_(Pe,H,De),Ce===null?Se=Pe:Ce.sibling=Pe,Ce=Pe);return ht&&ho(Q,De),Se}for(Pe=p(Q,Pe);De<Y.length;De++)Ht=ve(Pe,Q,De,Y[De],me),Ht!==null&&(i&&Ht.alternate!==null&&Pe.delete(Ht.key===null?De:Ht.key),H=_(Ht,H,De),Ce===null?Se=Ht:Ce.sibling=Ht,Ce=Ht);return i&&Pe.forEach(function(hi){return a(Q,hi)}),ht&&ho(Q,De),Se}function Ee(Q,H,Y,me){var Se=J(Y);if(typeof Se!="function")throw Error(n(150));if(Y=Se.call(Y),Y==null)throw Error(n(151));for(var Ce=Se=null,Pe=H,De=H=0,Ht=null,Je=Y.next();Pe!==null&&!Je.done;De++,Je=Y.next()){Pe.index>De?(Ht=Pe,Pe=null):Ht=Pe.sibling;var hi=ae(Q,Pe,Je.value,me);if(hi===null){Pe===null&&(Pe=Ht);break}i&&Pe&&hi.alternate===null&&a(Q,Pe),H=_(hi,H,De),Ce===null?Se=hi:Ce.sibling=hi,Ce=hi,Pe=Ht}if(Je.done)return d(Q,Pe),ht&&ho(Q,De),Se;if(Pe===null){for(;!Je.done;De++,Je=Y.next())Je=de(Q,Je.value,me),Je!==null&&(H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je);return ht&&ho(Q,De),Se}for(Pe=p(Q,Pe);!Je.done;De++,Je=Y.next())Je=ve(Pe,Q,De,Je.value,me),Je!==null&&(i&&Je.alternate!==null&&Pe.delete(Je.key===null?De:Je.key),H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je);return i&&Pe.forEach(function(mI){return a(Q,mI)}),ht&&ho(Q,De),Se}function Ct(Q,H,Y,me){if(typeof Y=="object"&&Y!==null&&Y.type===I&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:e:{for(var Se=Y.key,Ce=H;Ce!==null;){if(Ce.key===Se){if(Se=Y.type,Se===I){if(Ce.tag===7){d(Q,Ce.sibling),H=y(Ce,Y.props.children),H.return=Q,Q=H;break e}}else if(Ce.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ge&&Px(Se)===Ce.type){d(Q,Ce.sibling),H=y(Ce,Y.props),H.ref=xu(Q,Ce,Y),H.return=Q,Q=H;break e}d(Q,Ce);break}else a(Q,Ce);Ce=Ce.sibling}Y.type===I?(H=wo(Y.props.children,Q.mode,me,Y.key),H.return=Q,Q=H):(me=rh(Y.type,Y.key,Y.props,null,Q.mode,me),me.ref=xu(Q,H,Y),me.return=Q,Q=me)}return C(Q);case K:e:{for(Ce=Y.key;H!==null;){if(H.key===Ce)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){d(Q,H.sibling),H=y(H,Y.children||[]),H.return=Q,Q=H;break e}else{d(Q,H);break}else a(Q,H);H=H.sibling}H=Mp(Y,Q.mode,me),H.return=Q,Q=H}return C(Q);case Ge:return Ce=Y._init,Ct(Q,H,Ce(Y._payload),me)}if(xt(Y))return _e(Q,H,Y,me);if(J(Y))return Ee(Q,H,Y,me);jd(Q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,H!==null&&H.tag===6?(d(Q,H.sibling),H=y(H,Y),H.return=Q,Q=H):(d(Q,H),H=Lp(Y,Q.mode,me),H.return=Q,Q=H),C(Q)):d(Q,H)}return Ct}var Aa=Ax(!0),Ix=Ax(!1),Dd=ti(null),Od=null,Ia=null,qm=null;function Km(){qm=Ia=Od=null}function Gm(i){var a=Dd.current;ut(Dd),i._currentValue=a}function Qm(i,a,d){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===d)break;i=i.return}}function Ra(i,a){Od=i,qm=Ia=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(Cn=!0),i.firstContext=null)}function tr(i){var a=i._currentValue;if(qm!==i)if(i={context:i,memoizedValue:a,next:null},Ia===null){if(Od===null)throw Error(n(308));Ia=i,Od.dependencies={lanes:0,firstContext:i}}else Ia=Ia.next=i;return a}var fo=null;function Jm(i){fo===null?fo=[i]:fo.push(i)}function Rx(i,a,d,p){var y=a.interleaved;return y===null?(d.next=d,Jm(a)):(d.next=y.next,y.next=d),a.interleaved=d,bs(i,p)}function bs(i,a){i.lanes|=a;var d=i.alternate;for(d!==null&&(d.lanes|=a),d=i,i=i.return;i!==null;)i.childLanes|=a,d=i.alternate,d!==null&&(d.childLanes|=a),d=i,i=i.return;return d.tag===3?d.stateNode:null}var si=!1;function Ym(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nx(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Es(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function ii(i,a,d){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,Qe&2){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,bs(i,d)}return y=p.interleaved,y===null?(a.next=a,Jm(p)):(a.next=y.next,y.next=a),p.interleaved=a,bs(i,d)}function Ld(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,d|=p,a.lanes=d,Gs(i,d)}}function jx(i,a){var d=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var y=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var C={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?y=_=C:_=_.next=C,d=d.next}while(d!==null);_===null?y=_=a:_=_.next=a}else y=_=a;d={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,effects:p.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}function Md(i,a,d,p){var y=i.updateQueue;si=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var U=M,X=U.next;U.next=null,C===null?_=X:C.next=X,C=U;var le=i.alternate;le!==null&&(le=le.updateQueue,M=le.lastBaseUpdate,M!==C&&(M===null?le.firstBaseUpdate=X:M.next=X,le.lastBaseUpdate=U))}if(_!==null){var de=y.baseState;C=0,le=X=U=null,M=_;do{var ae=M.lane,ve=M.eventTime;if((p&ae)===ae){le!==null&&(le=le.next={eventTime:ve,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var _e=i,Ee=M;switch(ae=a,ve=d,Ee.tag){case 1:if(_e=Ee.payload,typeof _e=="function"){de=_e.call(ve,de,ae);break e}de=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ee.payload,ae=typeof _e=="function"?_e.call(ve,de,ae):_e,ae==null)break e;de=te({},de,ae);break e;case 2:si=!0}}M.callback!==null&&M.lane!==0&&(i.flags|=64,ae=y.effects,ae===null?y.effects=[M]:ae.push(M))}else ve={eventTime:ve,lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},le===null?(X=le=ve,U=de):le=le.next=ve,C|=ae;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);if(le===null&&(U=de),y.baseState=U,y.firstBaseUpdate=X,y.lastBaseUpdate=le,a=y.shared.interleaved,a!==null){y=a;do C|=y.lane,y=y.next;while(y!==a)}else _===null&&(y.shared.lanes=0);go|=C,i.lanes=C,i.memoizedState=de}}function Dx(i,a,d){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],y=p.callback;if(y!==null){if(p.callback=null,p=d,typeof y!="function")throw Error(n(191,y));y.call(p)}}}var wu={},Wr=ti(wu),_u=ti(wu),bu=ti(wu);function mo(i){if(i===wu)throw Error(n(174));return i}function Xm(i,a){switch(st(bu,a),st(_u,i),st(Wr,wu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ot(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Ot(a,i)}ut(Wr),st(Wr,a)}function Na(){ut(Wr),ut(_u),ut(bu)}function Ox(i){mo(bu.current);var a=mo(Wr.current),d=Ot(a,i.type);a!==d&&(st(_u,i),st(Wr,d))}function Zm(i){_u.current===i&&(ut(Wr),ut(_u))}var pt=ti(0);function Vd(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ep=[];function tp(){for(var i=0;i<ep.length;i++)ep[i]._workInProgressVersionPrimary=null;ep.length=0}var $d=W.ReactCurrentDispatcher,np=W.ReactCurrentBatchConfig,po=0,gt=null,Mt=null,zt=null,Fd=!1,Eu=!1,Tu=0,LA=0;function ln(){throw Error(n(321))}function rp(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!br(i[d],a[d]))return!1;return!0}function sp(i,a,d,p,y,_){if(po=_,gt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,$d.current=i===null||i.memoizedState===null?FA:UA,i=d(p,y),Eu){_=0;do{if(Eu=!1,Tu=0,25<=_)throw Error(n(301));_+=1,zt=Mt=null,a.updateQueue=null,$d.current=BA,i=d(p,y)}while(Eu)}if($d.current=zd,a=Mt!==null&&Mt.next!==null,po=0,zt=Mt=gt=null,Fd=!1,a)throw Error(n(300));return i}function ip(){var i=Tu!==0;return Tu=0,i}function Hr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?gt.memoizedState=zt=i:zt=zt.next=i,zt}function nr(){if(Mt===null){var i=gt.alternate;i=i!==null?i.memoizedState:null}else i=Mt.next;var a=zt===null?gt.memoizedState:zt.next;if(a!==null)zt=a,Mt=i;else{if(i===null)throw Error(n(310));Mt=i,i={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},zt===null?gt.memoizedState=zt=i:zt=zt.next=i}return zt}function Su(i,a){return typeof a=="function"?a(i):a}function op(i){var a=nr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var p=Mt,y=p.baseQueue,_=d.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}p.baseQueue=y=_,d.pending=null}if(y!==null){_=y.next,p=p.baseState;var M=C=null,U=null,X=_;do{var le=X.lane;if((po&le)===le)U!==null&&(U=U.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:i(p,X.action);else{var de={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};U===null?(M=U=de,C=p):U=U.next=de,gt.lanes|=le,go|=le}X=X.next}while(X!==null&&X!==_);U===null?C=p:U.next=M,br(p,a.memoizedState)||(Cn=!0),a.memoizedState=p,a.baseState=C,a.baseQueue=U,d.lastRenderedState=p}if(i=d.interleaved,i!==null){y=i;do _=y.lane,gt.lanes|=_,go|=_,y=y.next;while(y!==i)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function ap(i){var a=nr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var p=d.dispatch,y=d.pending,_=a.memoizedState;if(y!==null){d.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);br(_,a.memoizedState)||(Cn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),d.lastRenderedState=_}return[_,p]}function Lx(){}function Mx(i,a){var d=gt,p=nr(),y=a(),_=!br(p.memoizedState,y);if(_&&(p.memoizedState=y,Cn=!0),p=p.queue,lp(Fx.bind(null,d,p,i),[i]),p.getSnapshot!==a||_||zt!==null&&zt.memoizedState.tag&1){if(d.flags|=2048,ku(9,$x.bind(null,d,p,y,a),void 0,null),Wt===null)throw Error(n(349));po&30||Vx(d,a,y)}return y}function Vx(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function $x(i,a,d,p){a.value=d,a.getSnapshot=p,Ux(a)&&Bx(i)}function Fx(i,a,d){return d(function(){Ux(a)&&Bx(i)})}function Ux(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!br(i,d)}catch{return!0}}function Bx(i){var a=bs(i,1);a!==null&&Cr(a,i,1,-1)}function zx(i){var a=Hr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:i},a.queue=i,i=i.dispatch=$A.bind(null,gt,i),[a.memoizedState,i]}function ku(i,a,d,p){return i={tag:i,create:a,destroy:d,deps:p,next:null},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.lastEffect=i.next=i):(d=a.lastEffect,d===null?a.lastEffect=i.next=i:(p=d.next,d.next=i,i.next=p,a.lastEffect=i)),i}function Wx(){return nr().memoizedState}function Ud(i,a,d,p){var y=Hr();gt.flags|=i,y.memoizedState=ku(1|a,d,void 0,p===void 0?null:p)}function Bd(i,a,d,p){var y=nr();p=p===void 0?null:p;var _=void 0;if(Mt!==null){var C=Mt.memoizedState;if(_=C.destroy,p!==null&&rp(p,C.deps)){y.memoizedState=ku(a,d,_,p);return}}gt.flags|=i,y.memoizedState=ku(1|a,d,_,p)}function Hx(i,a){return Ud(8390656,8,i,a)}function lp(i,a){return Bd(2048,8,i,a)}function qx(i,a){return Bd(4,2,i,a)}function Kx(i,a){return Bd(4,4,i,a)}function Gx(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Qx(i,a,d){return d=d!=null?d.concat([i]):null,Bd(4,4,Gx.bind(null,a,i),d)}function up(){}function Jx(i,a){var d=nr();a=a===void 0?null:a;var p=d.memoizedState;return p!==null&&a!==null&&rp(a,p[1])?p[0]:(d.memoizedState=[i,a],i)}function Yx(i,a){var d=nr();a=a===void 0?null:a;var p=d.memoizedState;return p!==null&&a!==null&&rp(a,p[1])?p[0]:(i=i(),d.memoizedState=[i,a],i)}function Xx(i,a,d){return po&21?(br(d,a)||(d=ro(),gt.lanes|=d,go|=d,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,Cn=!0),i.memoizedState=d)}function MA(i,a){var d=He;He=d!==0&&4>d?d:4,i(!0);var p=np.transition;np.transition={};try{i(!1),a()}finally{He=d,np.transition=p}}function Zx(){return nr().memoizedState}function VA(i,a,d){var p=ui(i);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},ew(i))tw(a,d);else if(d=Rx(i,a,d,p),d!==null){var y=wn();Cr(d,i,p,y),nw(d,a,p)}}function $A(i,a,d){var p=ui(i),y={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(ew(i))tw(a,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,M=_(C,d);if(y.hasEagerState=!0,y.eagerState=M,br(M,C)){var U=a.interleaved;U===null?(y.next=y,Jm(a)):(y.next=U.next,U.next=y),a.interleaved=y;return}}catch{}finally{}d=Rx(i,a,y,p),d!==null&&(y=wn(),Cr(d,i,p,y),nw(d,a,p))}}function ew(i){var a=i.alternate;return i===gt||a!==null&&a===gt}function tw(i,a){Eu=Fd=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function nw(i,a,d){if(d&4194240){var p=a.lanes;p&=i.pendingLanes,d|=p,a.lanes=d,Gs(i,d)}}var zd={readContext:tr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},FA={readContext:tr,useCallback:function(i,a){return Hr().memoizedState=[i,a===void 0?null:a],i},useContext:tr,useEffect:Hx,useImperativeHandle:function(i,a,d){return d=d!=null?d.concat([i]):null,Ud(4194308,4,Gx.bind(null,a,i),d)},useLayoutEffect:function(i,a){return Ud(4194308,4,i,a)},useInsertionEffect:function(i,a){return Ud(4,2,i,a)},useMemo:function(i,a){var d=Hr();return a=a===void 0?null:a,i=i(),d.memoizedState=[i,a],i},useReducer:function(i,a,d){var p=Hr();return a=d!==void 0?d(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=VA.bind(null,gt,i),[p.memoizedState,i]},useRef:function(i){var a=Hr();return i={current:i},a.memoizedState=i},useState:zx,useDebugValue:up,useDeferredValue:function(i){return Hr().memoizedState=i},useTransition:function(){var i=zx(!1),a=i[0];return i=MA.bind(null,i[1]),Hr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,d){var p=gt,y=Hr();if(ht){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),Wt===null)throw Error(n(349));po&30||Vx(p,a,d)}y.memoizedState=d;var _={value:d,getSnapshot:a};return y.queue=_,Hx(Fx.bind(null,p,_,i),[i]),p.flags|=2048,ku(9,$x.bind(null,p,_,d,a),void 0,null),d},useId:function(){var i=Hr(),a=Wt.identifierPrefix;if(ht){var d=_s,p=ws;d=(p&~(1<<32-yn(p)-1)).toString(32)+d,a=":"+a+"R"+d,d=Tu++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=LA++,a=":"+a+"r"+d.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},UA={readContext:tr,useCallback:Jx,useContext:tr,useEffect:lp,useImperativeHandle:Qx,useInsertionEffect:qx,useLayoutEffect:Kx,useMemo:Yx,useReducer:op,useRef:Wx,useState:function(){return op(Su)},useDebugValue:up,useDeferredValue:function(i){var a=nr();return Xx(a,Mt.memoizedState,i)},useTransition:function(){var i=op(Su)[0],a=nr().memoizedState;return[i,a]},useMutableSource:Lx,useSyncExternalStore:Mx,useId:Zx,unstable_isNewReconciler:!1},BA={readContext:tr,useCallback:Jx,useContext:tr,useEffect:lp,useImperativeHandle:Qx,useInsertionEffect:qx,useLayoutEffect:Kx,useMemo:Yx,useReducer:ap,useRef:Wx,useState:function(){return ap(Su)},useDebugValue:up,useDeferredValue:function(i){var a=nr();return Mt===null?a.memoizedState=i:Xx(a,Mt.memoizedState,i)},useTransition:function(){var i=ap(Su)[0],a=nr().memoizedState;return[i,a]},useMutableSource:Lx,useSyncExternalStore:Mx,useId:Zx,unstable_isNewReconciler:!1};function Tr(i,a){if(i&&i.defaultProps){a=te({},a),i=i.defaultProps;for(var d in i)a[d]===void 0&&(a[d]=i[d]);return a}return a}function cp(i,a,d,p){a=i.memoizedState,d=d(p,a),d=d==null?a:te({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Wd={isMounted:function(i){return(i=i._reactInternals)?pr(i)===i:!1},enqueueSetState:function(i,a,d){i=i._reactInternals;var p=wn(),y=ui(i),_=Es(p,y);_.payload=a,d!=null&&(_.callback=d),a=ii(i,_,y),a!==null&&(Cr(a,i,y,p),Ld(a,i,y))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var p=wn(),y=ui(i),_=Es(p,y);_.tag=1,_.payload=a,d!=null&&(_.callback=d),a=ii(i,_,y),a!==null&&(Cr(a,i,y,p),Ld(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=wn(),p=ui(i),y=Es(d,p);y.tag=2,a!=null&&(y.callback=a),a=ii(i,y,p),a!==null&&(Cr(a,i,p,d),Ld(a,i,p))}};function rw(i,a,d,p,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,_,C):a.prototype&&a.prototype.isPureReactComponent?!hu(d,p)||!hu(y,_):!0}function sw(i,a,d){var p=!1,y=ni,_=a.contextType;return typeof _=="object"&&_!==null?_=tr(_):(y=kn(a)?uo:an.current,p=a.contextTypes,_=(p=p!=null)?Sa(i,y):ni),a=new a(d,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Wd,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=_),a}function iw(i,a,d,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,p),a.state!==i&&Wd.enqueueReplaceState(a,a.state,null)}function dp(i,a,d,p){var y=i.stateNode;y.props=d,y.state=i.memoizedState,y.refs={},Ym(i);var _=a.contextType;typeof _=="object"&&_!==null?y.context=tr(_):(_=kn(a)?uo:an.current,y.context=Sa(i,_)),y.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(cp(i,a,_,d),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Wd.enqueueReplaceState(y,y.state,null),Md(i,d,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function ja(i,a){try{var d="",p=a;do d+=je(p),p=p.return;while(p);var y=d}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:y,digest:null}}function hp(i,a,d){return{value:i,source:null,stack:d??null,digest:a??null}}function fp(i,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var zA=typeof WeakMap=="function"?WeakMap:Map;function ow(i,a,d){d=Es(-1,d),d.tag=3,d.payload={element:null};var p=a.value;return d.callback=function(){Yd||(Yd=!0,Pp=p),fp(i,a)},d}function aw(i,a,d){d=Es(-1,d),d.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=a.value;d.payload=function(){return p(y)},d.callback=function(){fp(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){fp(i,a),typeof p!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),d}function lw(i,a,d){var p=i.pingCache;if(p===null){p=i.pingCache=new zA;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(d)||(y.add(d),i=rI.bind(null,i,a,d),a.then(i,i))}function uw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function cw(i,a,d,p,y){return i.mode&1?(i.flags|=65536,i.lanes=y,i):(i===a?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Es(-1,1),a.tag=2,ii(d,a,1))),d.lanes|=1),i)}var WA=W.ReactCurrentOwner,Cn=!1;function xn(i,a,d,p){a.child=i===null?Ix(a,null,d,p):Aa(a,i.child,d,p)}function dw(i,a,d,p,y){d=d.render;var _=a.ref;return Ra(a,y),p=sp(i,a,d,p,_,y),d=ip(),i!==null&&!Cn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Ts(i,a,y)):(ht&&d&&Um(a),a.flags|=1,xn(i,a,p,y),a.child)}function hw(i,a,d,p,y){if(i===null){var _=d.type;return typeof _=="function"&&!Op(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=_,fw(i,a,_,p,y)):(i=rh(d.type,null,p,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!(i.lanes&y)){var C=_.memoizedProps;if(d=d.compare,d=d!==null?d:hu,d(C,p)&&i.ref===a.ref)return Ts(i,a,y)}return a.flags|=1,i=di(_,p),i.ref=a.ref,i.return=a,a.child=i}function fw(i,a,d,p,y){if(i!==null){var _=i.memoizedProps;if(hu(_,p)&&i.ref===a.ref)if(Cn=!1,a.pendingProps=p=_,(i.lanes&y)!==0)i.flags&131072&&(Cn=!0);else return a.lanes=i.lanes,Ts(i,a,y)}return mp(i,a,d,p,y)}function mw(i,a,d){var p=a.pendingProps,y=p.children,_=i!==null?i.memoizedState:null;if(p.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Oa,zn),zn|=d;else{if(!(d&1073741824))return i=_!==null?_.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,st(Oa,zn),zn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:d,st(Oa,zn),zn|=p}else _!==null?(p=_.baseLanes|d,a.memoizedState=null):p=d,st(Oa,zn),zn|=p;return xn(i,a,y,d),a.child}function pw(i,a){var d=a.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function mp(i,a,d,p,y){var _=kn(d)?uo:an.current;return _=Sa(a,_),Ra(a,y),d=sp(i,a,d,p,_,y),p=ip(),i!==null&&!Cn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Ts(i,a,y)):(ht&&p&&Um(a),a.flags|=1,xn(i,a,d,y),a.child)}function gw(i,a,d,p,y){if(kn(d)){var _=!0;Pd(a)}else _=!1;if(Ra(a,y),a.stateNode===null)qd(i,a),sw(a,d,p),dp(a,d,p,y),p=!0;else if(i===null){var C=a.stateNode,M=a.memoizedProps;C.props=M;var U=C.context,X=d.contextType;typeof X=="object"&&X!==null?X=tr(X):(X=kn(d)?uo:an.current,X=Sa(a,X));var le=d.getDerivedStateFromProps,de=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==p||U!==X)&&iw(a,C,p,X),si=!1;var ae=a.memoizedState;C.state=ae,Md(a,p,C,y),U=a.memoizedState,M!==p||ae!==U||Sn.current||si?(typeof le=="function"&&(cp(a,d,le,p),U=a.memoizedState),(M=si||rw(a,d,M,p,ae,U,X))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=U),C.props=p,C.state=U,C.context=X,p=M):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{C=a.stateNode,Nx(i,a),M=a.memoizedProps,X=a.type===a.elementType?M:Tr(a.type,M),C.props=X,de=a.pendingProps,ae=C.context,U=d.contextType,typeof U=="object"&&U!==null?U=tr(U):(U=kn(d)?uo:an.current,U=Sa(a,U));var ve=d.getDerivedStateFromProps;(le=typeof ve=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==de||ae!==U)&&iw(a,C,p,U),si=!1,ae=a.memoizedState,C.state=ae,Md(a,p,C,y);var _e=a.memoizedState;M!==de||ae!==_e||Sn.current||si?(typeof ve=="function"&&(cp(a,d,ve,p),_e=a.memoizedState),(X=si||rw(a,d,X,p,ae,_e,U)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,_e,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,_e,U)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=_e),C.props=p,C.state=_e,C.context=U,p=X):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),p=!1)}return pp(i,a,d,p,_,y)}function pp(i,a,d,p,y,_){pw(i,a);var C=(a.flags&128)!==0;if(!p&&!C)return y&&_x(a,d,!1),Ts(i,a,_);p=a.stateNode,WA.current=a;var M=C&&typeof d.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&C?(a.child=Aa(a,i.child,null,_),a.child=Aa(a,null,M,_)):xn(i,a,M,_),a.memoizedState=p.state,y&&_x(a,d,!0),a.child}function yw(i){var a=i.stateNode;a.pendingContext?xx(i,a.pendingContext,a.pendingContext!==a.context):a.context&&xx(i,a.context,!1),Xm(i,a.containerInfo)}function vw(i,a,d,p,y){return Pa(),Hm(y),a.flags|=256,xn(i,a,d,p),a.child}var gp={dehydrated:null,treeContext:null,retryLane:0};function yp(i){return{baseLanes:i,cachePool:null,transitions:null}}function xw(i,a,d){var p=a.pendingProps,y=pt.current,_=!1,C=(a.flags&128)!==0,M;if((M=C)||(M=i!==null&&i.memoizedState===null?!1:(y&2)!==0),M?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),st(pt,y&1),i===null)return Wm(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?i.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(C=p.children,i=p.fallback,_?(p=a.mode,_=a.child,C={mode:"hidden",children:C},!(p&1)&&_!==null?(_.childLanes=0,_.pendingProps=C):_=sh(C,p,0,null),i=wo(i,p,d,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=yp(d),a.memoizedState=gp,i):vp(a,C));if(y=i.memoizedState,y!==null&&(M=y.dehydrated,M!==null))return HA(i,a,C,p,M,y,d);if(_){_=p.fallback,C=a.mode,y=i.child,M=y.sibling;var U={mode:"hidden",children:p.children};return!(C&1)&&a.child!==y?(p=a.child,p.childLanes=0,p.pendingProps=U,a.deletions=null):(p=di(y,U),p.subtreeFlags=y.subtreeFlags&14680064),M!==null?_=di(M,_):(_=wo(_,C,d,null),_.flags|=2),_.return=a,p.return=a,p.sibling=_,a.child=p,p=_,_=a.child,C=i.child.memoizedState,C=C===null?yp(d):{baseLanes:C.baseLanes|d,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=i.childLanes&~d,a.memoizedState=gp,p}return _=i.child,i=_.sibling,p=di(_,{mode:"visible",children:p.children}),!(a.mode&1)&&(p.lanes=d),p.return=a,p.sibling=null,i!==null&&(d=a.deletions,d===null?(a.deletions=[i],a.flags|=16):d.push(i)),a.child=p,a.memoizedState=null,p}function vp(i,a){return a=sh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Hd(i,a,d,p){return p!==null&&Hm(p),Aa(a,i.child,null,d),i=vp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function HA(i,a,d,p,y,_,C){if(d)return a.flags&256?(a.flags&=-257,p=hp(Error(n(422))),Hd(i,a,C,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=p.fallback,y=a.mode,p=sh({mode:"visible",children:p.children},y,0,null),_=wo(_,y,C,null),_.flags|=2,p.return=a,_.return=a,p.sibling=_,a.child=p,a.mode&1&&Aa(a,i.child,null,C),a.child.memoizedState=yp(C),a.memoizedState=gp,_);if(!(a.mode&1))return Hd(i,a,C,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var M=p.dgst;return p=M,_=Error(n(419)),p=hp(_,p,void 0),Hd(i,a,C,p)}if(M=(C&i.childLanes)!==0,Cn||M){if(p=Wt,p!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(p.suspendedLanes|C)?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,bs(i,y),Cr(p,i,y,-1))}return Dp(),p=hp(Error(n(421))),Hd(i,a,C,p)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=sI.bind(null,i),y._reactRetry=a,null):(i=_.treeContext,Bn=ei(y.nextSibling),Un=a,ht=!0,Er=null,i!==null&&(Zn[er++]=ws,Zn[er++]=_s,Zn[er++]=co,ws=i.id,_s=i.overflow,co=a),a=vp(a,p.children),a.flags|=4096,a)}function ww(i,a,d){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),Qm(i.return,a,d)}function xp(i,a,d,p,y){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:y}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=d,_.tailMode=y)}function _w(i,a,d){var p=a.pendingProps,y=p.revealOrder,_=p.tail;if(xn(i,a,p.children,d),p=pt.current,p&2)p=p&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ww(i,d,a);else if(i.tag===19)ww(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(st(pt,p),!(a.mode&1))a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)i=d.alternate,i!==null&&Vd(i)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),xp(a,!1,y,d,_);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Vd(i)===null){a.child=y;break}i=y.sibling,y.sibling=d,d=y,y=i}xp(a,!0,d,null,_);break;case"together":xp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function qd(i,a){!(a.mode&1)&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ts(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),go|=a.lanes,!(d&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,d=di(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=di(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function qA(i,a,d){switch(a.tag){case 3:yw(a),Pa();break;case 5:Ox(a);break;case 1:kn(a.type)&&Pd(a);break;case 4:Xm(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,y=a.memoizedProps.value;st(Dd,p._currentValue),p._currentValue=y;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(st(pt,pt.current&1),a.flags|=128,null):d&a.child.childLanes?xw(i,a,d):(st(pt,pt.current&1),i=Ts(i,a,d),i!==null?i.sibling:null);st(pt,pt.current&1);break;case 19:if(p=(d&a.childLanes)!==0,i.flags&128){if(p)return _w(i,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),st(pt,pt.current),p)break;return null;case 22:case 23:return a.lanes=0,mw(i,a,d)}return Ts(i,a,d)}var bw,wp,Ew,Tw;bw=function(i,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},wp=function(){},Ew=function(i,a,d,p){var y=i.memoizedProps;if(y!==p){i=a.stateNode,mo(Wr.current);var _=null;switch(d){case"input":y=St(i,y),p=St(i,p),_=[];break;case"select":y=te({},y,{value:void 0}),p=te({},p,{value:void 0}),_=[];break;case"textarea":y=qi(i,y),p=qi(i,p),_=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Sd)}Kl(d,p);var C;d=null;for(X in y)if(!p.hasOwnProperty(X)&&y.hasOwnProperty(X)&&y[X]!=null)if(X==="style"){var M=y[X];for(C in M)M.hasOwnProperty(C)&&(d||(d={}),d[C]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in p){var U=p[X];if(M=y!=null?y[X]:void 0,p.hasOwnProperty(X)&&U!==M&&(U!=null||M!=null))if(X==="style")if(M){for(C in M)!M.hasOwnProperty(C)||U&&U.hasOwnProperty(C)||(d||(d={}),d[C]="");for(C in U)U.hasOwnProperty(C)&&M[C]!==U[C]&&(d||(d={}),d[C]=U[C])}else d||(_||(_=[]),_.push(X,d)),d=U;else X==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,M=M?M.__html:void 0,U!=null&&M!==U&&(_=_||[]).push(X,U)):X==="children"?typeof U!="string"&&typeof U!="number"||(_=_||[]).push(X,""+U):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(U!=null&&X==="onScroll"&&lt("scroll",i),_||M===U||(_=[])):(_=_||[]).push(X,U))}d&&(_=_||[]).push("style",d);var X=_;(a.updateQueue=X)&&(a.flags|=4)}},Tw=function(i,a,d,p){d!==p&&(a.flags|=4)};function Cu(i,a){if(!ht)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function un(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,p=0;if(a)for(var y=i.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=d,a}function KA(i,a,d){var p=a.pendingProps;switch(Bm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(a),null;case 1:return kn(a.type)&&Cd(),un(a),null;case 3:return p=a.stateNode,Na(),ut(Sn),ut(an),tp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Nd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Er!==null&&(Rp(Er),Er=null))),wp(i,a),un(a),null;case 5:Zm(a);var y=mo(bu.current);if(d=a.type,i!==null&&a.stateNode!=null)Ew(i,a,d,p,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(n(166));return un(a),null}if(i=mo(Wr.current),Nd(a)){p=a.stateNode,d=a.type;var _=a.memoizedProps;switch(p[zr]=a,p[yu]=_,i=(a.mode&1)!==0,d){case"dialog":lt("cancel",p),lt("close",p);break;case"iframe":case"object":case"embed":lt("load",p);break;case"video":case"audio":for(y=0;y<mu.length;y++)lt(mu[y],p);break;case"source":lt("error",p);break;case"img":case"image":case"link":lt("error",p),lt("load",p);break;case"details":lt("toggle",p);break;case"input":hr(p,_),lt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},lt("invalid",p);break;case"textarea":cs(p,_),lt("invalid",p)}Kl(d,_),y=null;for(var C in _)if(_.hasOwnProperty(C)){var M=_[C];C==="children"?typeof M=="string"?p.textContent!==M&&(_.suppressHydrationWarning!==!0&&Td(p.textContent,M,i),y=["children",M]):typeof M=="number"&&p.textContent!==""+M&&(_.suppressHydrationWarning!==!0&&Td(p.textContent,M,i),y=["children",""+M]):s.hasOwnProperty(C)&&M!=null&&C==="onScroll"&&lt("scroll",p)}switch(d){case"input":re(p),Bs(p,_,!0);break;case"textarea":re(p),Bl(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=Sd)}p=y,a.updateQueue=p,p!==null&&(a.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Dt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(d,{is:p.is}):(i=C.createElement(d),d==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,d),i[zr]=a,i[yu]=p,bw(i,a,!1,!1),a.stateNode=i;e:{switch(C=Gl(d,p),d){case"dialog":lt("cancel",i),lt("close",i),y=p;break;case"iframe":case"object":case"embed":lt("load",i),y=p;break;case"video":case"audio":for(y=0;y<mu.length;y++)lt(mu[y],i);y=p;break;case"source":lt("error",i),y=p;break;case"img":case"image":case"link":lt("error",i),lt("load",i),y=p;break;case"details":lt("toggle",i),y=p;break;case"input":hr(i,p),y=St(i,p),lt("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=te({},p,{value:void 0}),lt("invalid",i);break;case"textarea":cs(i,p),y=qi(i,p),lt("invalid",i);break;default:y=p}Kl(d,y),M=y;for(_ in M)if(M.hasOwnProperty(_)){var U=M[_];_==="style"?Hl(i,U):_==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&zl(i,U)):_==="children"?typeof U=="string"?(d!=="textarea"||U!=="")&&zs(i,U):typeof U=="number"&&zs(i,""+U):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?U!=null&&_==="onScroll"&&lt("scroll",i):U!=null&&$(i,_,U,C))}switch(d){case"input":re(i),Bs(i,p,!1);break;case"textarea":re(i),Bl(i);break;case"option":p.value!=null&&i.setAttribute("value",""+he(p.value));break;case"select":i.multiple=!!p.multiple,_=p.value,_!=null?on(i,!!p.multiple,_,!1):p.defaultValue!=null&&on(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Sd)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return un(a),null;case 6:if(i&&a.stateNode!=null)Tw(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(n(166));if(d=mo(bu.current),mo(Wr.current),Nd(a)){if(p=a.stateNode,d=a.memoizedProps,p[zr]=a,(_=p.nodeValue!==d)&&(i=Un,i!==null))switch(i.tag){case 3:Td(p.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Td(p.nodeValue,d,(i.mode&1)!==0)}_&&(a.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[zr]=a,a.stateNode=p}return un(a),null;case 13:if(ut(pt),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ht&&Bn!==null&&a.mode&1&&!(a.flags&128))Cx(),Pa(),a.flags|=98560,_=!1;else if(_=Nd(a),p!==null&&p.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[zr]=a}else Pa(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;un(a),_=!1}else Er!==null&&(Rp(Er),Er=null),_=!0;if(!_)return a.flags&65536?a:null}return a.flags&128?(a.lanes=d,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,a.mode&1&&(i===null||pt.current&1?Vt===0&&(Vt=3):Dp())),a.updateQueue!==null&&(a.flags|=4),un(a),null);case 4:return Na(),wp(i,a),i===null&&pu(a.stateNode.containerInfo),un(a),null;case 10:return Gm(a.type._context),un(a),null;case 17:return kn(a.type)&&Cd(),un(a),null;case 19:if(ut(pt),_=a.memoizedState,_===null)return un(a),null;if(p=(a.flags&128)!==0,C=_.rendering,C===null)if(p)Cu(_,!1);else{if(Vt!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(C=Vd(i),C!==null){for(a.flags|=128,Cu(_,!1),p=C.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=d,d=a.child;d!==null;)_=d,i=p,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,i=C.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return st(pt,pt.current&1|2),a.child}i=i.sibling}_.tail!==null&&rt()>La&&(a.flags|=128,p=!0,Cu(_,!1),a.lanes=4194304)}else{if(!p)if(i=Vd(C),i!==null){if(a.flags|=128,p=!0,d=i.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Cu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!ht)return un(a),null}else 2*rt()-_.renderingStartTime>La&&d!==1073741824&&(a.flags|=128,p=!0,Cu(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(d=_.last,d!==null?d.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=rt(),a.sibling=null,d=pt.current,st(pt,p?d&1|2:d&1),a):(un(a),null);case 22:case 23:return jp(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&a.mode&1?zn&1073741824&&(un(a),a.subtreeFlags&6&&(a.flags|=8192)):un(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function GA(i,a){switch(Bm(a),a.tag){case 1:return kn(a.type)&&Cd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Na(),ut(Sn),ut(an),tp(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return Zm(a),null;case 13:if(ut(pt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Pa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ut(pt),null;case 4:return Na(),null;case 10:return Gm(a.type._context),null;case 22:case 23:return jp(),null;case 24:return null;default:return null}}var Kd=!1,cn=!1,QA=typeof WeakSet=="function"?WeakSet:Set,we=null;function Da(i,a){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){wt(i,a,p)}else d.current=null}function _p(i,a,d){try{d()}catch(p){wt(i,a,p)}}var Sw=!1;function JA(i,a){if(jm=Ys,i=rx(),Sm(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var C=0,M=-1,U=-1,X=0,le=0,de=i,ae=null;t:for(;;){for(var ve;de!==d||y!==0&&de.nodeType!==3||(M=C+y),de!==_||p!==0&&de.nodeType!==3||(U=C+p),de.nodeType===3&&(C+=de.nodeValue.length),(ve=de.firstChild)!==null;)ae=de,de=ve;for(;;){if(de===i)break t;if(ae===d&&++X===y&&(M=C),ae===_&&++le===p&&(U=C),(ve=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=ve}d=M===-1||U===-1?null:{start:M,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(Dm={focusedElem:i,selectionRange:d},Ys=!1,we=a;we!==null;)if(a=we,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,we=i;else for(;we!==null;){a=we;try{var _e=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var Ee=_e.memoizedProps,Ct=_e.memoizedState,Q=a.stateNode,H=Q.getSnapshotBeforeUpdate(a.elementType===a.type?Ee:Tr(a.type,Ee),Ct);Q.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(me){wt(a,a.return,me)}if(i=a.sibling,i!==null){i.return=a.return,we=i;break}we=a.return}return _e=Sw,Sw=!1,_e}function Pu(i,a,d){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var _=y.destroy;y.destroy=void 0,_!==void 0&&_p(a,d,_)}y=y.next}while(y!==p)}}function Gd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&i)===i){var p=d.create;d.destroy=p()}d=d.next}while(d!==a)}}function bp(i){var a=i.ref;if(a!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof a=="function"?a(i):a.current=i}}function kw(i){var a=i.alternate;a!==null&&(i.alternate=null,kw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[zr],delete a[yu],delete a[Vm],delete a[NA],delete a[jA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Cw(i){return i.tag===5||i.tag===3||i.tag===4}function Pw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Cw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ep(i,a,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(i,a):d.insertBefore(i,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(i,d)):(a=d,a.appendChild(i)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Sd));else if(p!==4&&(i=i.child,i!==null))for(Ep(i,a,d),i=i.sibling;i!==null;)Ep(i,a,d),i=i.sibling}function Tp(i,a,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Tp(i,a,d),i=i.sibling;i!==null;)Tp(i,a,d),i=i.sibling}var Xt=null,Sr=!1;function oi(i,a,d){for(d=d.child;d!==null;)Aw(i,a,d),d=d.sibling}function Aw(i,a,d){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(to,d)}catch{}switch(d.tag){case 5:cn||Da(d,a);case 6:var p=Xt,y=Sr;Xt=null,oi(i,a,d),Xt=p,Sr=y,Xt!==null&&(Sr?(i=Xt,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Xt.removeChild(d.stateNode));break;case 18:Xt!==null&&(Sr?(i=Xt,d=d.stateNode,i.nodeType===8?Mm(i.parentNode,d):i.nodeType===1&&Mm(i,d),wr(i)):Mm(Xt,d.stateNode));break;case 4:p=Xt,y=Sr,Xt=d.stateNode.containerInfo,Sr=!0,oi(i,a,d),Xt=p,Sr=y;break;case 0:case 11:case 14:case 15:if(!cn&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var _=y,C=_.destroy;_=_.tag,C!==void 0&&(_&2||_&4)&&_p(d,a,C),y=y.next}while(y!==p)}oi(i,a,d);break;case 1:if(!cn&&(Da(d,a),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(M){wt(d,a,M)}oi(i,a,d);break;case 21:oi(i,a,d);break;case 22:d.mode&1?(cn=(p=cn)||d.memoizedState!==null,oi(i,a,d),cn=p):oi(i,a,d);break;default:oi(i,a,d)}}function Iw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new QA),a.forEach(function(p){var y=iI.bind(null,i,p);d.has(p)||(d.add(p),p.then(y,y))})}}function kr(i,a){var d=a.deletions;if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];try{var _=i,C=a,M=C;e:for(;M!==null;){switch(M.tag){case 5:Xt=M.stateNode,Sr=!1;break e;case 3:Xt=M.stateNode.containerInfo,Sr=!0;break e;case 4:Xt=M.stateNode.containerInfo,Sr=!0;break e}M=M.return}if(Xt===null)throw Error(n(160));Aw(_,C,y),Xt=null,Sr=!1;var U=y.alternate;U!==null&&(U.return=null),y.return=null}catch(X){wt(y,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Rw(a,i),a=a.sibling}function Rw(i,a){var d=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(kr(a,i),qr(i),p&4){try{Pu(3,i,i.return),Gd(3,i)}catch(Ee){wt(i,i.return,Ee)}try{Pu(5,i,i.return)}catch(Ee){wt(i,i.return,Ee)}}break;case 1:kr(a,i),qr(i),p&512&&d!==null&&Da(d,d.return);break;case 5:if(kr(a,i),qr(i),p&512&&d!==null&&Da(d,d.return),i.flags&32){var y=i.stateNode;try{zs(y,"")}catch(Ee){wt(i,i.return,Ee)}}if(p&4&&(y=i.stateNode,y!=null)){var _=i.memoizedProps,C=d!==null?d.memoizedProps:_,M=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{M==="input"&&_.type==="radio"&&_.name!=null&&Fs(y,_),Gl(M,C);var X=Gl(M,_);for(C=0;C<U.length;C+=2){var le=U[C],de=U[C+1];le==="style"?Hl(y,de):le==="dangerouslySetInnerHTML"?zl(y,de):le==="children"?zs(y,de):$(y,le,de,X)}switch(M){case"input":Us(y,_);break;case"textarea":Jo(y,_);break;case"select":var ae=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var ve=_.value;ve!=null?on(y,!!_.multiple,ve,!1):ae!==!!_.multiple&&(_.defaultValue!=null?on(y,!!_.multiple,_.defaultValue,!0):on(y,!!_.multiple,_.multiple?[]:"",!1))}y[yu]=_}catch(Ee){wt(i,i.return,Ee)}}break;case 6:if(kr(a,i),qr(i),p&4){if(i.stateNode===null)throw Error(n(162));y=i.stateNode,_=i.memoizedProps;try{y.nodeValue=_}catch(Ee){wt(i,i.return,Ee)}}break;case 3:if(kr(a,i),qr(i),p&4&&d!==null&&d.memoizedState.isDehydrated)try{wr(a.containerInfo)}catch(Ee){wt(i,i.return,Ee)}break;case 4:kr(a,i),qr(i);break;case 13:kr(a,i),qr(i),y=i.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(Cp=rt())),p&4&&Iw(i);break;case 22:if(le=d!==null&&d.memoizedState!==null,i.mode&1?(cn=(X=cn)||le,kr(a,i),cn=X):kr(a,i),qr(i),p&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!le&&i.mode&1)for(we=i,le=i.child;le!==null;){for(de=we=le;we!==null;){switch(ae=we,ve=ae.child,ae.tag){case 0:case 11:case 14:case 15:Pu(4,ae,ae.return);break;case 1:Da(ae,ae.return);var _e=ae.stateNode;if(typeof _e.componentWillUnmount=="function"){p=ae,d=ae.return;try{a=p,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(Ee){wt(p,d,Ee)}}break;case 5:Da(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Dw(de);continue}}ve!==null?(ve.return=ae,we=ve):Dw(de)}le=le.sibling}e:for(le=null,de=i;;){if(de.tag===5){if(le===null){le=de;try{y=de.stateNode,X?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(M=de.stateNode,U=de.memoizedProps.style,C=U!=null&&U.hasOwnProperty("display")?U.display:null,M.style.display=Wl("display",C))}catch(Ee){wt(i,i.return,Ee)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=X?"":de.memoizedProps}catch(Ee){wt(i,i.return,Ee)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===i)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===i)break e;for(;de.sibling===null;){if(de.return===null||de.return===i)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:kr(a,i),qr(i),p&4&&Iw(i);break;case 21:break;default:kr(a,i),qr(i)}}function qr(i){var a=i.flags;if(a&2){try{e:{for(var d=i.return;d!==null;){if(Cw(d)){var p=d;break e}d=d.return}throw Error(n(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(zs(y,""),p.flags&=-33);var _=Pw(i);Tp(i,_,y);break;case 3:case 4:var C=p.stateNode.containerInfo,M=Pw(i);Ep(i,M,C);break;default:throw Error(n(161))}}catch(U){wt(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function YA(i,a,d){we=i,Nw(i)}function Nw(i,a,d){for(var p=(i.mode&1)!==0;we!==null;){var y=we,_=y.child;if(y.tag===22&&p){var C=y.memoizedState!==null||Kd;if(!C){var M=y.alternate,U=M!==null&&M.memoizedState!==null||cn;M=Kd;var X=cn;if(Kd=C,(cn=U)&&!X)for(we=y;we!==null;)C=we,U=C.child,C.tag===22&&C.memoizedState!==null?Ow(y):U!==null?(U.return=C,we=U):Ow(y);for(;_!==null;)we=_,Nw(_),_=_.sibling;we=y,Kd=M,cn=X}jw(i)}else y.subtreeFlags&8772&&_!==null?(_.return=y,we=_):jw(i)}}function jw(i){for(;we!==null;){var a=we;if(a.flags&8772){var d=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:cn||Gd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!cn)if(d===null)p.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:Tr(a.type,d.memoizedProps);p.componentDidUpdate(y,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Dx(a,_,p);break;case 3:var C=a.updateQueue;if(C!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Dx(a,C,d)}break;case 5:var M=a.stateNode;if(d===null&&a.flags&4){d=M;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&d.focus();break;case"img":U.src&&(d.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&wr(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}cn||a.flags&512&&bp(a)}catch(ae){wt(a,a.return,ae)}}if(a===i){we=null;break}if(d=a.sibling,d!==null){d.return=a.return,we=d;break}we=a.return}}function Dw(i){for(;we!==null;){var a=we;if(a===i){we=null;break}var d=a.sibling;if(d!==null){d.return=a.return,we=d;break}we=a.return}}function Ow(i){for(;we!==null;){var a=we;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{Gd(4,a)}catch(U){wt(a,d,U)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var y=a.return;try{p.componentDidMount()}catch(U){wt(a,y,U)}}var _=a.return;try{bp(a)}catch(U){wt(a,_,U)}break;case 5:var C=a.return;try{bp(a)}catch(U){wt(a,C,U)}}}catch(U){wt(a,a.return,U)}if(a===i){we=null;break}var M=a.sibling;if(M!==null){M.return=a.return,we=M;break}we=a.return}}var XA=Math.ceil,Qd=W.ReactCurrentDispatcher,Sp=W.ReactCurrentOwner,rr=W.ReactCurrentBatchConfig,Qe=0,Wt=null,Rt=null,Zt=0,zn=0,Oa=ti(0),Vt=0,Au=null,go=0,Jd=0,kp=0,Iu=null,Pn=null,Cp=0,La=1/0,Ss=null,Yd=!1,Pp=null,ai=null,Xd=!1,li=null,Zd=0,Ru=0,Ap=null,eh=-1,th=0;function wn(){return Qe&6?rt():eh!==-1?eh:eh=rt()}function ui(i){return i.mode&1?Qe&2&&Zt!==0?Zt&-Zt:OA.transition!==null?(th===0&&(th=ro()),th):(i=He,i!==0||(i=window.event,i=i===void 0?16:iu(i.type)),i):1}function Cr(i,a,d,p){if(50<Ru)throw Ru=0,Ap=null,Error(n(185));Ks(i,d,p),(!(Qe&2)||i!==Wt)&&(i===Wt&&(!(Qe&2)&&(Jd|=d),Vt===4&&ci(i,Zt)),An(i,p),d===1&&Qe===0&&!(a.mode&1)&&(La=rt()+500,Ad&&ri()))}function An(i,a){var d=i.callbackNode;fs(i,a);var p=no(i,i===Wt?Zt:0);if(p===0)d!==null&&eu(d),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(d!=null&&eu(d),a===1)i.tag===0?DA(Mw.bind(null,i)):bx(Mw.bind(null,i)),IA(function(){!(Qe&6)&&ri()}),d=null;else{switch(Qs(p)){case 1:d=eo;break;case 4:d=Ws;break;case 16:d=Jn;break;case 536870912:d=td;break;default:d=Jn}d=Hw(d,Lw.bind(null,i))}i.callbackPriority=a,i.callbackNode=d}}function Lw(i,a){if(eh=-1,th=0,Qe&6)throw Error(n(327));var d=i.callbackNode;if(Ma()&&i.callbackNode!==d)return null;var p=no(i,i===Wt?Zt:0);if(p===0)return null;if(p&30||p&i.expiredLanes||a)a=nh(i,p);else{a=p;var y=Qe;Qe|=2;var _=$w();(Wt!==i||Zt!==a)&&(Ss=null,La=rt()+500,vo(i,a));do try{tI();break}catch(M){Vw(i,M)}while(!0);Km(),Qd.current=_,Qe=y,Rt!==null?a=0:(Wt=null,Zt=0,a=Vt)}if(a!==0){if(a===2&&(y=Vn(i),y!==0&&(p=y,a=Ip(i,y))),a===1)throw d=Au,vo(i,0),ci(i,p),An(i,rt()),d;if(a===6)ci(i,p);else{if(y=i.current.alternate,!(p&30)&&!ZA(y)&&(a=nh(i,p),a===2&&(_=Vn(i),_!==0&&(p=_,a=Ip(i,_))),a===1))throw d=Au,vo(i,0),ci(i,p),An(i,rt()),d;switch(i.finishedWork=y,i.finishedLanes=p,a){case 0:case 1:throw Error(n(345));case 2:xo(i,Pn,Ss);break;case 3:if(ci(i,p),(p&130023424)===p&&(a=Cp+500-rt(),10<a)){if(no(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){wn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Lm(xo.bind(null,i,Pn,Ss),a);break}xo(i,Pn,Ss);break;case 4:if(ci(i,p),(p&4194240)===p)break;for(a=i.eventTimes,y=-1;0<p;){var C=31-yn(p);_=1<<C,C=a[C],C>y&&(y=C),p&=~_}if(p=y,p=rt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*XA(p/1960))-p,10<p){i.timeoutHandle=Lm(xo.bind(null,i,Pn,Ss),p);break}xo(i,Pn,Ss);break;case 5:xo(i,Pn,Ss);break;default:throw Error(n(329))}}}return An(i,rt()),i.callbackNode===d?Lw.bind(null,i):null}function Ip(i,a){var d=Iu;return i.current.memoizedState.isDehydrated&&(vo(i,a).flags|=256),i=nh(i,a),i!==2&&(a=Pn,Pn=d,a!==null&&Rp(a)),i}function Rp(i){Pn===null?Pn=i:Pn.push.apply(Pn,i)}function ZA(i){for(var a=i;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var y=d[p],_=y.getSnapshot;y=y.value;try{if(!br(_(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ci(i,a){for(a&=~kp,a&=~Jd,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var d=31-yn(a),p=1<<d;i[d]=-1,a&=~p}}function Mw(i){if(Qe&6)throw Error(n(327));Ma();var a=no(i,0);if(!(a&1))return An(i,rt()),null;var d=nh(i,a);if(i.tag!==0&&d===2){var p=Vn(i);p!==0&&(a=p,d=Ip(i,p))}if(d===1)throw d=Au,vo(i,0),ci(i,a),An(i,rt()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,xo(i,Pn,Ss),An(i,rt()),null}function Np(i,a){var d=Qe;Qe|=1;try{return i(a)}finally{Qe=d,Qe===0&&(La=rt()+500,Ad&&ri())}}function yo(i){li!==null&&li.tag===0&&!(Qe&6)&&Ma();var a=Qe;Qe|=1;var d=rr.transition,p=He;try{if(rr.transition=null,He=1,i)return i()}finally{He=p,rr.transition=d,Qe=a,!(Qe&6)&&ri()}}function jp(){zn=Oa.current,ut(Oa)}function vo(i,a){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,AA(d)),Rt!==null)for(d=Rt.return;d!==null;){var p=d;switch(Bm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Cd();break;case 3:Na(),ut(Sn),ut(an),tp();break;case 5:Zm(p);break;case 4:Na();break;case 13:ut(pt);break;case 19:ut(pt);break;case 10:Gm(p.type._context);break;case 22:case 23:jp()}d=d.return}if(Wt=i,Rt=i=di(i.current,null),Zt=zn=a,Vt=0,Au=null,kp=Jd=go=0,Pn=Iu=null,fo!==null){for(a=0;a<fo.length;a++)if(d=fo[a],p=d.interleaved,p!==null){d.interleaved=null;var y=p.next,_=d.pending;if(_!==null){var C=_.next;_.next=y,p.next=C}d.pending=p}fo=null}return i}function Vw(i,a){do{var d=Rt;try{if(Km(),$d.current=zd,Fd){for(var p=gt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Fd=!1}if(po=0,zt=Mt=gt=null,Eu=!1,Tu=0,Sp.current=null,d===null||d.return===null){Vt=1,Au=a,Rt=null;break}e:{var _=i,C=d.return,M=d,U=a;if(a=Zt,M.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=U,le=M,de=le.tag;if(!(le.mode&1)&&(de===0||de===11||de===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var ve=uw(C);if(ve!==null){ve.flags&=-257,cw(ve,C,M,_,a),ve.mode&1&&lw(_,X,a),a=ve,U=X;var _e=a.updateQueue;if(_e===null){var Ee=new Set;Ee.add(U),a.updateQueue=Ee}else _e.add(U);break e}else{if(!(a&1)){lw(_,X,a),Dp();break e}U=Error(n(426))}}else if(ht&&M.mode&1){var Ct=uw(C);if(Ct!==null){!(Ct.flags&65536)&&(Ct.flags|=256),cw(Ct,C,M,_,a),Hm(ja(U,M));break e}}_=U=ja(U,M),Vt!==4&&(Vt=2),Iu===null?Iu=[_]:Iu.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var Q=ow(_,U,a);jx(_,Q);break e;case 1:M=U;var H=_.type,Y=_.stateNode;if(!(_.flags&128)&&(typeof H.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ai===null||!ai.has(Y)))){_.flags|=65536,a&=-a,_.lanes|=a;var me=aw(_,M,a);jx(_,me);break e}}_=_.return}while(_!==null)}Uw(d)}catch(Se){a=Se,Rt===d&&d!==null&&(Rt=d=d.return);continue}break}while(!0)}function $w(){var i=Qd.current;return Qd.current=zd,i===null?zd:i}function Dp(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Wt===null||!(go&268435455)&&!(Jd&268435455)||ci(Wt,Zt)}function nh(i,a){var d=Qe;Qe|=2;var p=$w();(Wt!==i||Zt!==a)&&(Ss=null,vo(i,a));do try{eI();break}catch(y){Vw(i,y)}while(!0);if(Km(),Qe=d,Qd.current=p,Rt!==null)throw Error(n(261));return Wt=null,Zt=0,Vt}function eI(){for(;Rt!==null;)Fw(Rt)}function tI(){for(;Rt!==null&&!Zc();)Fw(Rt)}function Fw(i){var a=Ww(i.alternate,i,zn);i.memoizedProps=i.pendingProps,a===null?Uw(i):Rt=a,Sp.current=null}function Uw(i){var a=i;do{var d=a.alternate;if(i=a.return,a.flags&32768){if(d=GA(d,a),d!==null){d.flags&=32767,Rt=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Vt=6,Rt=null;return}}else if(d=KA(d,a,zn),d!==null){Rt=d;return}if(a=a.sibling,a!==null){Rt=a;return}Rt=a=i}while(a!==null);Vt===0&&(Vt=5)}function xo(i,a,d){var p=He,y=rr.transition;try{rr.transition=null,He=1,nI(i,a,d,p)}finally{rr.transition=y,He=p}return null}function nI(i,a,d,p){do Ma();while(li!==null);if(Qe&6)throw Error(n(327));d=i.finishedWork;var y=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=d.lanes|d.childLanes;if(tt(i,_),i===Wt&&(Rt=Wt=null,Zt=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Xd||(Xd=!0,Hw(Jn,function(){return Ma(),null})),_=(d.flags&15990)!==0,d.subtreeFlags&15990||_){_=rr.transition,rr.transition=null;var C=He;He=1;var M=Qe;Qe|=4,Sp.current=null,JA(i,d),Rw(d,i),bA(Dm),Ys=!!jm,Dm=jm=null,i.current=d,YA(d),ym(),Qe=M,He=C,rr.transition=_}else i.current=d;if(Xd&&(Xd=!1,li=i,Zd=y),_=i.pendingLanes,_===0&&(ai=null),nd(d.stateNode),An(i,rt()),a!==null)for(p=i.onRecoverableError,d=0;d<a.length;d++)y=a[d],p(y.value,{componentStack:y.stack,digest:y.digest});if(Yd)throw Yd=!1,i=Pp,Pp=null,i;return Zd&1&&i.tag!==0&&Ma(),_=i.pendingLanes,_&1?i===Ap?Ru++:(Ru=0,Ap=i):Ru=0,ri(),null}function Ma(){if(li!==null){var i=Qs(Zd),a=rr.transition,d=He;try{if(rr.transition=null,He=16>i?16:i,li===null)var p=!1;else{if(i=li,li=null,Zd=0,Qe&6)throw Error(n(331));var y=Qe;for(Qe|=4,we=i.current;we!==null;){var _=we,C=_.child;if(we.flags&16){var M=_.deletions;if(M!==null){for(var U=0;U<M.length;U++){var X=M[U];for(we=X;we!==null;){var le=we;switch(le.tag){case 0:case 11:case 15:Pu(8,le,_)}var de=le.child;if(de!==null)de.return=le,we=de;else for(;we!==null;){le=we;var ae=le.sibling,ve=le.return;if(kw(le),le===X){we=null;break}if(ae!==null){ae.return=ve,we=ae;break}we=ve}}}var _e=_.alternate;if(_e!==null){var Ee=_e.child;if(Ee!==null){_e.child=null;do{var Ct=Ee.sibling;Ee.sibling=null,Ee=Ct}while(Ee!==null)}}we=_}}if(_.subtreeFlags&2064&&C!==null)C.return=_,we=C;else e:for(;we!==null;){if(_=we,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Pu(9,_,_.return)}var Q=_.sibling;if(Q!==null){Q.return=_.return,we=Q;break e}we=_.return}}var H=i.current;for(we=H;we!==null;){C=we;var Y=C.child;if(C.subtreeFlags&2064&&Y!==null)Y.return=C,we=Y;else e:for(C=H;we!==null;){if(M=we,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:Gd(9,M)}}catch(Se){wt(M,M.return,Se)}if(M===C){we=null;break e}var me=M.sibling;if(me!==null){me.return=M.return,we=me;break e}we=M.return}}if(Qe=y,ri(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(to,i)}catch{}p=!0}return p}finally{He=d,rr.transition=a}}return!1}function Bw(i,a,d){a=ja(d,a),a=ow(i,a,1),i=ii(i,a,1),a=wn(),i!==null&&(Ks(i,1,a),An(i,a))}function wt(i,a,d){if(i.tag===3)Bw(i,i,d);else for(;a!==null;){if(a.tag===3){Bw(a,i,d);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ai===null||!ai.has(p))){i=ja(d,i),i=aw(a,i,1),a=ii(a,i,1),i=wn(),a!==null&&(Ks(a,1,i),An(a,i));break}}a=a.return}}function rI(i,a,d){var p=i.pingCache;p!==null&&p.delete(a),a=wn(),i.pingedLanes|=i.suspendedLanes&d,Wt===i&&(Zt&d)===d&&(Vt===4||Vt===3&&(Zt&130023424)===Zt&&500>rt()-Cp?vo(i,0):kp|=d),An(i,a)}function zw(i,a){a===0&&(i.mode&1?(a=oa,oa<<=1,!(oa&130023424)&&(oa=4194304)):a=1);var d=wn();i=bs(i,a),i!==null&&(Ks(i,a,d),An(i,d))}function sI(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),zw(i,d)}function iI(i,a){var d=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(d=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(a),zw(i,d)}var Ww;Ww=function(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps||Sn.current)Cn=!0;else{if(!(i.lanes&d)&&!(a.flags&128))return Cn=!1,qA(i,a,d);Cn=!!(i.flags&131072)}else Cn=!1,ht&&a.flags&1048576&&Ex(a,Rd,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;qd(i,a),i=a.pendingProps;var y=Sa(a,an.current);Ra(a,d),y=sp(null,a,p,i,y,d);var _=ip();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,kn(p)?(_=!0,Pd(a)):_=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Ym(a),y.updater=Wd,a.stateNode=y,y._reactInternals=a,dp(a,p,i,d),a=pp(null,a,p,!0,_,d)):(a.tag=0,ht&&_&&Um(a),xn(null,a,y,d),a=a.child),a;case 16:p=a.elementType;e:{switch(qd(i,a),i=a.pendingProps,y=p._init,p=y(p._payload),a.type=p,y=a.tag=aI(p),i=Tr(p,i),y){case 0:a=mp(null,a,p,i,d);break e;case 1:a=gw(null,a,p,i,d);break e;case 11:a=dw(null,a,p,i,d);break e;case 14:a=hw(null,a,p,Tr(p.type,i),d);break e}throw Error(n(306,p,""))}return a;case 0:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Tr(p,y),mp(i,a,p,y,d);case 1:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Tr(p,y),gw(i,a,p,y,d);case 3:e:{if(yw(a),i===null)throw Error(n(387));p=a.pendingProps,_=a.memoizedState,y=_.element,Nx(i,a),Md(a,p,null,d);var C=a.memoizedState;if(p=C.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){y=ja(Error(n(423)),a),a=vw(i,a,p,d,y);break e}else if(p!==y){y=ja(Error(n(424)),a),a=vw(i,a,p,d,y);break e}else for(Bn=ei(a.stateNode.containerInfo.firstChild),Un=a,ht=!0,Er=null,d=Ix(a,null,p,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Pa(),p===y){a=Ts(i,a,d);break e}xn(i,a,p,d)}a=a.child}return a;case 5:return Ox(a),i===null&&Wm(a),p=a.type,y=a.pendingProps,_=i!==null?i.memoizedProps:null,C=y.children,Om(p,y)?C=null:_!==null&&Om(p,_)&&(a.flags|=32),pw(i,a),xn(i,a,C,d),a.child;case 6:return i===null&&Wm(a),null;case 13:return xw(i,a,d);case 4:return Xm(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=Aa(a,null,p,d):xn(i,a,p,d),a.child;case 11:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Tr(p,y),dw(i,a,p,y,d);case 7:return xn(i,a,a.pendingProps,d),a.child;case 8:return xn(i,a,a.pendingProps.children,d),a.child;case 12:return xn(i,a,a.pendingProps.children,d),a.child;case 10:e:{if(p=a.type._context,y=a.pendingProps,_=a.memoizedProps,C=y.value,st(Dd,p._currentValue),p._currentValue=C,_!==null)if(br(_.value,C)){if(_.children===y.children&&!Sn.current){a=Ts(i,a,d);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var M=_.dependencies;if(M!==null){C=_.child;for(var U=M.firstContext;U!==null;){if(U.context===p){if(_.tag===1){U=Es(-1,d&-d),U.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?U.next=U:(U.next=le.next,le.next=U),X.pending=U}}_.lanes|=d,U=_.alternate,U!==null&&(U.lanes|=d),Qm(_.return,d,a),M.lanes|=d;break}U=U.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(n(341));C.lanes|=d,M=C.alternate,M!==null&&(M.lanes|=d),Qm(C,d,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}xn(i,a,y.children,d),a=a.child}return a;case 9:return y=a.type,p=a.pendingProps.children,Ra(a,d),y=tr(y),p=p(y),a.flags|=1,xn(i,a,p,d),a.child;case 14:return p=a.type,y=Tr(p,a.pendingProps),y=Tr(p.type,y),hw(i,a,p,y,d);case 15:return fw(i,a,a.type,a.pendingProps,d);case 17:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Tr(p,y),qd(i,a),a.tag=1,kn(p)?(i=!0,Pd(a)):i=!1,Ra(a,d),sw(a,p,y),dp(a,p,y,d),pp(null,a,p,!0,i,d);case 19:return _w(i,a,d);case 22:return mw(i,a,d)}throw Error(n(156,a.tag))};function Hw(i,a){return sa(i,a)}function oI(i,a,d,p){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(i,a,d,p){return new oI(i,a,d,p)}function Op(i){return i=i.prototype,!(!i||!i.isReactComponent)}function aI(i){if(typeof i=="function")return Op(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===$e)return 14}return 2}function di(i,a){var d=i.alternate;return d===null?(d=sr(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function rh(i,a,d,p,y,_){var C=2;if(p=i,typeof i=="function")Op(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case I:return wo(d.children,y,_,a);case S:C=8,y|=8;break;case T:return i=sr(12,d,a,y|2),i.elementType=T,i.lanes=_,i;case L:return i=sr(13,d,a,y),i.elementType=L,i.lanes=_,i;case ge:return i=sr(19,d,a,y),i.elementType=ge,i.lanes=_,i;case be:return sh(d,y,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:C=10;break e;case j:C=9;break e;case F:C=11;break e;case $e:C=14;break e;case Ge:C=16,p=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=sr(C,d,a,y),a.elementType=i,a.type=p,a.lanes=_,a}function wo(i,a,d,p){return i=sr(7,i,p,a),i.lanes=d,i}function sh(i,a,d,p){return i=sr(22,i,p,a),i.elementType=be,i.lanes=d,i.stateNode={isHidden:!1},i}function Lp(i,a,d){return i=sr(6,i,null,a),i.lanes=d,i}function Mp(i,a,d){return a=sr(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function lI(i,a,d,p,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qs(0),this.expirationTimes=qs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qs(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Vp(i,a,d,p,y,_,C,M,U){return i=new lI(i,a,d,M,U),a===1?(a=1,_===!0&&(a|=8)):a=0,_=sr(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ym(_),i}function uI(i,a,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:p==null?null:""+p,children:i,containerInfo:a,implementation:d}}function qw(i){if(!i)return ni;i=i._reactInternals;e:{if(pr(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(kn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(kn(d))return wx(i,d,a)}return a}function Kw(i,a,d,p,y,_,C,M,U){return i=Vp(d,p,!0,i,y,_,C,M,U),i.context=qw(null),d=i.current,p=wn(),y=ui(d),_=Es(p,y),_.callback=a??null,ii(d,_,y),i.current.lanes=y,Ks(i,y,p),An(i,p),i}function ih(i,a,d,p){var y=a.current,_=wn(),C=ui(y);return d=qw(d),a.context===null?a.context=d:a.pendingContext=d,a=Es(_,C),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=ii(y,a,C),i!==null&&(Cr(i,y,C,_),Ld(i,y,C)),C}function oh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Gw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function $p(i,a){Gw(i,a),(i=i.alternate)&&Gw(i,a)}function cI(){return null}var Qw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Fp(i){this._internalRoot=i}ah.prototype.render=Fp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));ih(i,a,null,null)},ah.prototype.unmount=Fp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;yo(function(){ih(null,i,null,null)}),a[vs]=null}};function ah(i){this._internalRoot=i}ah.prototype.unstable_scheduleHydration=function(i){if(i){var a=ad();i={blockedOn:null,target:i,priority:a};for(var d=0;d<$r.length&&a!==0&&a<$r[d].priority;d++);$r.splice(d,0,i),d===0&&cd(i)}};function Up(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function lh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Jw(){}function dI(i,a,d,p,y){if(y){if(typeof p=="function"){var _=p;p=function(){var X=oh(C);_.call(X)}}var C=Kw(a,p,i,0,null,!1,!1,"",Jw);return i._reactRootContainer=C,i[vs]=C.current,pu(i.nodeType===8?i.parentNode:i),yo(),C}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var M=p;p=function(){var X=oh(U);M.call(X)}}var U=Vp(i,0,!1,null,null,!1,!1,"",Jw);return i._reactRootContainer=U,i[vs]=U.current,pu(i.nodeType===8?i.parentNode:i),yo(function(){ih(a,U,d,p)}),U}function uh(i,a,d,p,y){var _=d._reactRootContainer;if(_){var C=_;if(typeof y=="function"){var M=y;y=function(){var U=oh(C);M.call(U)}}ih(a,C,i,y)}else C=dI(d,a,i,y,p);return oh(C)}id=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var d=Hs(a.pendingLanes);d!==0&&(Gs(a,d|1),An(a,rt()),!(Qe&6)&&(La=rt()+500,ri()))}break;case 13:yo(function(){var p=bs(i,1);if(p!==null){var y=wn();Cr(p,i,1,y)}}),$p(i,1)}},aa=function(i){if(i.tag===13){var a=bs(i,134217728);if(a!==null){var d=wn();Cr(a,i,134217728,d)}$p(i,134217728)}},od=function(i){if(i.tag===13){var a=ui(i),d=bs(i,a);if(d!==null){var p=wn();Cr(d,i,a,p)}$p(i,a)}},ad=function(){return He},ld=function(i,a){var d=He;try{return He=i,a()}finally{He=d}},Xo=function(i,a,d){switch(a){case"input":if(Us(i,d),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var p=d[a];if(p!==i&&p.form===i.form){var y=kd(p);if(!y)throw Error(n(90));ye(p),Us(p,y)}}}break;case"textarea":Jo(i,d);break;case"select":a=d.value,a!=null&&on(i,!!d.multiple,a,!1)}},Ji=Np,Jl=yo;var hI={usingClientEntryPoint:!1,Events:[vu,Ea,kd,Mr,Ql,Np]},Nu={findFiberByHostInstance:lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fI={bundleType:Nu.bundleType,version:Nu.version,rendererPackageName:Nu.rendererPackageName,rendererConfig:Nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zl(i),i===null?null:i.stateNode},findFiberByHostInstance:Nu.findFiberByHostInstance||cI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{to=ch.inject(fI),Mn=ch}catch{}}return In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hI,In.createPortal=function(i,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Up(a))throw Error(n(200));return uI(i,a,null,d)},In.createRoot=function(i,a){if(!Up(i))throw Error(n(299));var d=!1,p="",y=Qw;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Vp(i,1,!1,null,null,d,!1,p,y),i[vs]=a.current,pu(i.nodeType===8?i.parentNode:i),new Fp(a)},In.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Zl(a),i=i===null?null:i.stateNode,i},In.flushSync=function(i){return yo(i)},In.hydrate=function(i,a,d){if(!lh(a))throw Error(n(200));return uh(null,i,a,!0,d)},In.hydrateRoot=function(i,a,d){if(!Up(i))throw Error(n(405));var p=d!=null&&d.hydratedSources||null,y=!1,_="",C=Qw;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(C=d.onRecoverableError)),a=Kw(a,null,i,1,d??null,y,!1,_,C),i[vs]=a.current,pu(i),p)for(i=0;i<p.length;i++)d=p[i],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new ah(a)},In.render=function(i,a,d){if(!lh(a))throw Error(n(200));return uh(null,i,a,!1,d)},In.unmountComponentAtNode=function(i){if(!lh(i))throw Error(n(40));return i._reactRootContainer?(yo(function(){uh(null,null,i,!1,function(){i._reactRootContainer=null,i[vs]=null})}),!0):!1},In.unstable_batchedUpdates=Np,In.unstable_renderSubtreeIntoContainer=function(i,a,d,p){if(!lh(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return uh(i,a,d,!1,p)},In.version="18.3.1-next-f1338f8080-20240426",In}var s_;function KT(){if(s_)return Wp.exports;s_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wp.exports=EI(),Wp.exports}var i_;function TI(){if(i_)return dh;i_=1;var t=KT();return dh.createRoot=t.createRoot,dh.hydrateRoot=t.hydrateRoot,dh}var SI=TI();const kI=Bo(SI);var Du={},o_;function CI(){if(o_)return Du;o_=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.parse=l,Du.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function l(x,b){const k=new o,O=x.length;if(O<2)return k;const A=(b==null?void 0:b.decode)||g;let D=0;do{const V=x.indexOf("=",D);if(V===-1)break;const $=x.indexOf(";",D),W=$===-1?O:$;if(V>W){D=x.lastIndexOf(";",V-1)+1;continue}const B=u(x,D,V),K=c(x,V,B),I=x.slice(B,K);if(k[I]===void 0){let S=u(x,V+1,W),T=c(x,W,S);const R=A(x.slice(S,T));k[I]=R}D=W+1}while(D<O);return k}function u(x,b,k){do{const O=x.charCodeAt(b);if(O!==32&&O!==9)return b}while(++b<k);return k}function c(x,b,k){for(;b>k;){const O=x.charCodeAt(--b);if(O!==32&&O!==9)return b+1}return k}function h(x,b,k){const O=(k==null?void 0:k.encode)||encodeURIComponent;if(!t.test(x))throw new TypeError(`argument name is invalid: ${x}`);const A=O(b);if(!e.test(A))throw new TypeError(`argument val is invalid: ${b}`);let D=x+"="+A;if(!k)return D;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);D+="; Max-Age="+k.maxAge}if(k.domain){if(!n.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);D+="; Domain="+k.domain}if(k.path){if(!r.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);D+="; Path="+k.path}if(k.expires){if(!v(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);D+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&(D+="; HttpOnly"),k.secure&&(D+="; Secure"),k.partitioned&&(D+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return D}function g(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function v(x){return s.call(x)==="[object Date]"}return Du}CI();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var a_="popstate";function PI(t={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return Lg("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:dc(s)}return II(e,n,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AI(){return Math.random().toString(36).substring(2,10)}function l_(t,e){return{usr:t.state,key:t.key,idx:e}}function Lg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Pl(e):e,state:n,key:e&&e.key||r||AI()}}function dc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Pl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function II(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",c=null,h=g();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let A=g(),D=A==null?null:A-h;h=A,c&&c({action:u,location:O.location,delta:D})}function x(A,D){u="PUSH";let V=Lg(O.location,A,D);h=g()+1;let $=l_(V,h),W=O.createHref(V);try{l.pushState($,"",W)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(W)}o&&c&&c({action:u,location:O.location,delta:1})}function b(A,D){u="REPLACE";let V=Lg(O.location,A,D);h=g();let $=l_(V,h),W=O.createHref(V);l.replaceState($,"",W),o&&c&&c({action:u,location:O.location,delta:0})}function k(A){let D=s.location.origin!=="null"?s.location.origin:s.location.href,V=typeof A=="string"?A:dc(A);return V=V.replace(/ $/,"%20"),mt(D,`No window.location.(origin|href) available to create URL for href: ${V}`),new URL(V,D)}let O={get action(){return u},get location(){return t(s,l)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(a_,v),c=A,()=>{s.removeEventListener(a_,v),c=null}},createHref(A){return e(s,A)},createURL:k,encodeLocation(A){let D=k(A);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:x,replace:b,go(A){return l.go(A)}};return O}function GT(t,e,n="/"){return RI(t,e,n,!1)}function RI(t,e,n,r){let s=typeof e=="string"?Pl(e):e,o=Ii(s.pathname||"/",n);if(o==null)return null;let l=QT(t);NI(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let h=zI(o);u=UI(l[c],h,r)}return u}function QT(t,e=[],n=[],r=""){let s=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(mt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let h=Rs([r,c.relativePath]),g=n.concat(c);o.children&&o.children.length>0&&(mt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),QT(o.children,e,g,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:$I(h,o.index),routesMeta:g})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let c of JT(o.path))s(o,l,c)}),e}function JT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=JT(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&u.push(...l),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function NI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var jI=/^:[\w-]+$/,DI=3,OI=2,LI=1,MI=10,VI=-2,u_=t=>t==="*";function $I(t,e){let n=t.split("/"),r=n.length;return n.some(u_)&&(r+=VI),e&&(r+=OI),n.filter(s=>!u_(s)).reduce((s,o)=>s+(jI.test(o)?DI:o===""?LI:MI),r)}function FI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function UI(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Qh({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},g),x=c.route;if(!v&&h&&n&&!r[r.length-1].route.index&&(v=Qh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Rs([o,v.pathname]),pathnameBase:KI(Rs([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=Rs([o,v.pathnameBase]))}return l}function Qh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:v},x)=>{if(g==="*"){let k=u[x]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=u[x];return v&&!b?h[g]=void 0:h[g]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function BI(t,e=!1,n=!0){Rr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function zI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ii(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WI(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Pl(t):t;return{pathname:n?n.startsWith("/")?n:HI(n,e):e,search:GI(r),hash:QI(s)}}function HI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Kp(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function q0(t){let e=qI(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function K0(t,e,n,r=!1){let s;typeof t=="string"?s=Pl(t):(s={...t},mt(!s.pathname||!s.pathname.includes("?"),Kp("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),Kp("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),Kp("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=n;else{let v=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}u=v>=0?e[v]:"/"}let c=WI(s,u),h=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||g)&&(c.pathname+="/"),c}var Rs=t=>t.join("/").replace(/\/\/+/g,"/"),KI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var YT=["POST","PUT","PATCH","DELETE"];new Set(YT);var YI=["GET",...YT];new Set(YI);var Al=P.createContext(null);Al.displayName="DataRouter";var Nf=P.createContext(null);Nf.displayName="DataRouterState";var XT=P.createContext({isTransitioning:!1});XT.displayName="ViewTransition";var XI=P.createContext(new Map);XI.displayName="Fetchers";var ZI=P.createContext(null);ZI.displayName="Await";var Dr=P.createContext(null);Dr.displayName="Navigation";var Nc=P.createContext(null);Nc.displayName="Location";var dr=P.createContext({outlet:null,matches:[],isDataRoute:!1});dr.displayName="Route";var G0=P.createContext(null);G0.displayName="RouteError";function eR(t,{relative:e}={}){mt(Il(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(Dr),{hash:s,pathname:o,search:l}=Dc(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Rs([n,o])),r.createHref({pathname:u,search:l,hash:s})}function Il(){return P.useContext(Nc)!=null}function Or(){return mt(Il(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Nc).location}var ZT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eS(t){P.useContext(Dr).static||P.useLayoutEffect(t)}function Qt(){let{isDataRoute:t}=P.useContext(dr);return t?pR():tR()}function tR(){mt(Il(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(Al),{basename:e,navigator:n}=P.useContext(Dr),{matches:r}=P.useContext(dr),{pathname:s}=Or(),o=JSON.stringify(q0(r)),l=P.useRef(!1);return eS(()=>{l.current=!0}),P.useCallback((c,h={})=>{if(Rr(l.current,ZT),!l.current)return;if(typeof c=="number"){n.go(c);return}let g=K0(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Rs([e,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[e,n,o,s,t])}var nR=P.createContext(null);function rR(t){let e=P.useContext(dr).outlet;return e&&P.createElement(nR.Provider,{value:t},e)}function jc(){let{matches:t}=P.useContext(dr),e=t[t.length-1];return e?e.params:{}}function Dc(t,{relative:e}={}){let{matches:n}=P.useContext(dr),{pathname:r}=Or(),s=JSON.stringify(q0(n));return P.useMemo(()=>K0(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function sR(t,e){return tS(t,e)}function tS(t,e,n,r){var V;mt(Il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=P.useContext(Dr),{matches:l}=P.useContext(dr),u=l[l.length-1],c=u?u.params:{},h=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let $=v&&v.path||"";nS(h,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let x=Or(),b;if(e){let $=typeof e=="string"?Pl(e):e;mt(g==="/"||((V=$.pathname)==null?void 0:V.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),b=$}else b=x;let k=b.pathname||"/",O=k;if(g!=="/"){let $=g.replace(/^\//,"").split("/");O="/"+k.replace(/^\//,"").split("/").slice($.length).join("/")}let A=!o&&n&&n.matches&&n.matches.length>0?n.matches:GT(t,{pathname:O});Rr(v||A!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Rr(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=uR(A&&A.map($=>Object.assign({},$,{params:Object.assign({},c,$.params),pathname:Rs([g,s.encodeLocation?s.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Rs([g,s.encodeLocation?s.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,n,r);return e&&D?P.createElement(Nc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},D):D}function iR(){let t=mR(),e=JI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,l)}var oR=P.createElement(iR,null),aR=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?P.createElement(dr.Provider,{value:this.props.routeContext},P.createElement(G0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lR({routeContext:t,match:e,children:n}){let r=P.useContext(Al);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(dr.Provider,{value:t},n)}function uR(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);mt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(n)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:g,errors:v}=n,x=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||x){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,h,g)=>{let v,x=!1,b=null,k=null;n&&(v=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||oR,l&&(u<0&&g===0?(nS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,k=null):u===g&&(x=!0,k=h.route.hydrateFallbackElement||null)));let O=e.concat(s.slice(0,g+1)),A=()=>{let D;return v?D=b:x?D=k:h.route.Component?D=P.createElement(h.route.Component,null):h.route.element?D=h.route.element:D=c,P.createElement(lR,{match:h,routeContext:{outlet:c,matches:O,isDataRoute:n!=null},children:D})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?P.createElement(aR,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:A(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):A()},null)}function Q0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cR(t){let e=P.useContext(Al);return mt(e,Q0(t)),e}function dR(t){let e=P.useContext(Nf);return mt(e,Q0(t)),e}function hR(t){let e=P.useContext(dr);return mt(e,Q0(t)),e}function J0(t){let e=hR(t),n=e.matches[e.matches.length-1];return mt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function fR(){return J0("useRouteId")}function mR(){var r;let t=P.useContext(G0),e=dR("useRouteError"),n=J0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function pR(){let{router:t}=cR("useNavigate"),e=J0("useNavigate"),n=P.useRef(!1);return eS(()=>{n.current=!0}),P.useCallback(async(s,o={})=>{Rr(n.current,ZT),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var c_={};function nS(t,e,n){!e&&!c_[t]&&(c_[t]=!0,Rr(!1,n))}P.memo(gR);function gR({routes:t,future:e,state:n}){return tS(t,void 0,n,e)}function yR({to:t,replace:e,state:n,relative:r}){mt(Il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(Dr);Rr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=P.useContext(dr),{pathname:l}=Or(),u=Qt(),c=K0(t,q0(o),l,r==="path"),h=JSON.stringify(c);return P.useEffect(()=>{u(JSON.parse(h),{replace:e,state:n,relative:r})},[u,h,r,e,n]),null}function rS(t){return rR(t.context)}function Ye(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){mt(!Il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof n=="string"&&(n=Pl(n));let{pathname:c="/",search:h="",hash:g="",state:v=null,key:x="default"}=n,b=P.useMemo(()=>{let k=Ii(c,l);return k==null?null:{location:{pathname:k,search:h,hash:g,state:v,key:x},navigationType:r}},[l,c,h,g,v,x,r]);return Rr(b!=null,`<Router basename="${l}"> is not able to match the URL "${c}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:P.createElement(Dr.Provider,{value:u},P.createElement(Nc.Provider,{children:e,value:b}))}function xR({children:t,location:e}){return sR(Mg(t),e)}function Mg(t,e=[]){let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let o=[...e,s];if(r.type===P.Fragment){n.push.apply(n,Mg(r.props.children,o));return}mt(r.type===Ye,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Mg(r.props.children,o)),n.push(l)}),n}var Nh="get",jh="application/x-www-form-urlencoded";function jf(t){return t!=null&&typeof t.tagName=="string"}function wR(t){return jf(t)&&t.tagName.toLowerCase()==="button"}function _R(t){return jf(t)&&t.tagName.toLowerCase()==="form"}function bR(t){return jf(t)&&t.tagName.toLowerCase()==="input"}function ER(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TR(t,e){return t.button===0&&(!e||e==="_self")&&!ER(t)}var hh=null;function SR(){if(hh===null)try{new FormData(document.createElement("form"),0),hh=!1}catch{hh=!0}return hh}var kR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gp(t){return t!=null&&!kR.has(t)?(Rr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jh}"`),null):t}function CR(t,e){let n,r,s,o,l;if(_R(t)){let u=t.getAttribute("action");r=u?Ii(u,e):null,n=t.getAttribute("method")||Nh,s=Gp(t.getAttribute("enctype"))||jh,o=new FormData(t)}else if(wR(t)||bR(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||u.getAttribute("action");if(r=c?Ii(c,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Nh,s=Gp(t.getAttribute("formenctype"))||Gp(u.getAttribute("enctype"))||jh,o=new FormData(u,t),!SR()){let{name:h,type:g,value:v}=t;if(g==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,v)}}else{if(jf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Nh,r=null,s=jh,l=t}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:l}}function Y0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function PR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function IR(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await PR(o,n);return l.links?l.links():[]}return[]}));return DR(r.flat(1).filter(AR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function d_(t,e,n,r,s,o){let l=(c,h)=>n[h]?c.route.id!==n[h].route.id:!0,u=(c,h)=>{var g;return n[h].pathname!==c.pathname||((g=n[h].route.path)==null?void 0:g.endsWith("*"))&&n[h].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,h)=>l(c,h)||u(c,h)):o==="data"?e.filter((c,h)=>{var v;let g=r.routes[c.route.id];if(!g||!g.hasLoader)return!1;if(l(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let x=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function RR(t,e){return NR(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function NR(t){return[...new Set(t)]}function jR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function DR(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(jR(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function OR(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function LR(){let t=P.useContext(Al);return Y0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function MR(){let t=P.useContext(Nf);return Y0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var X0=P.createContext(void 0);X0.displayName="FrameworkContext";function sS(){let t=P.useContext(X0);return Y0(t,"You must render this element inside a <HydratedRouter> element"),t}function VR(t,e){let n=P.useContext(X0),[r,s]=P.useState(!1),[o,l]=P.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:g,onTouchStart:v}=e,x=P.useRef(null);P.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let O=D=>{D.forEach(V=>{l(V.isIntersecting)})},A=new IntersectionObserver(O,{threshold:.5});return x.current&&A.observe(x.current),()=>{A.disconnect()}}},[t]),P.useEffect(()=>{if(r){let O=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(O)}}},[r]);let b=()=>{s(!0)},k=()=>{s(!1),l(!1)};return n?t!=="intent"?[o,x,{}]:[o,x,{onFocus:Ou(u,b),onBlur:Ou(c,k),onMouseEnter:Ou(h,b),onMouseLeave:Ou(g,k),onTouchStart:Ou(v,b)}]:[!1,x,{}]}function Ou(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $R({page:t,...e}){let{router:n}=LR(),r=P.useMemo(()=>GT(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(UR,{page:t,matches:r,...e}):null}function FR(t){let{manifest:e,routeModules:n}=sS(),[r,s]=P.useState([]);return P.useEffect(()=>{let o=!1;return IR(t,e,n).then(l=>{o||s(l)}),()=>{o=!0}},[t,e,n]),r}function UR({page:t,matches:e,...n}){let r=Or(),{manifest:s,routeModules:o}=sS(),{loaderData:l,matches:u}=MR(),c=P.useMemo(()=>d_(t,e,u,s,r,"data"),[t,e,u,s,r]),h=P.useMemo(()=>d_(t,e,u,s,r,"assets"),[t,e,u,s,r]),g=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,k=!1;if(e.forEach(A=>{var V;let D=s.routes[A.route.id];!D||!D.hasLoader||(!c.some($=>$.route.id===A.route.id)&&A.route.id in l&&((V=o[A.route.id])!=null&&V.shouldRevalidate)||D.hasClientLoader?k=!0:b.add(A.route.id))}),b.size===0)return[];let O=OR(t);return k&&b.size>0&&O.searchParams.set("_routes",e.filter(A=>b.has(A.route.id)).map(A=>A.route.id).join(",")),[O.pathname+O.search]},[l,r,s,c,e,t,o]),v=P.useMemo(()=>RR(h,s),[h,s]),x=FR(h);return P.createElement(P.Fragment,null,g.map(b=>P.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),v.map(b=>P.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:k})=>P.createElement("link",{key:b,...k})))}function BR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var iS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iS&&(window.__reactRouterVersion="7.1.5")}catch{}function zR({basename:t,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=PI({window:n,v5Compat:!0}));let s=r.current,[o,l]=P.useState({action:s.action,location:s.location}),u=P.useCallback(c=>{P.startTransition(()=>l(c))},[l]);return P.useLayoutEffect(()=>s.listen(u),[s,u]),P.createElement(vR,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var oS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ot=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:c,to:h,preventScrollReset:g,viewTransition:v,...x},b){let{basename:k}=P.useContext(Dr),O=typeof h=="string"&&oS.test(h),A,D=!1;if(typeof h=="string"&&O&&(A=h,iS))try{let T=new URL(window.location.href),R=h.startsWith("//")?new URL(T.protocol+h):new URL(h),j=Ii(R.pathname,k);R.origin===T.origin&&j!=null?h=j+R.search+R.hash:D=!0}catch{Rr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=eR(h,{relative:s}),[$,W,B]=VR(r,x),K=KR(h,{replace:l,state:u,target:c,preventScrollReset:g,relative:s,viewTransition:v});function I(T){e&&e(T),T.defaultPrevented||K(T)}let S=P.createElement("a",{...x,...B,href:A||V,onClick:D||o?e:I,ref:BR(b,W),target:c,"data-discover":!O&&n==="render"?"true":void 0});return $&&!O?P.createElement(P.Fragment,null,S,P.createElement($R,{page:V})):S});ot.displayName="Link";var WR=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:c,...h},g){let v=Dc(l,{relative:h.relative}),x=Or(),b=P.useContext(Nf),{navigator:k,basename:O}=P.useContext(Dr),A=b!=null&&XR(v)&&u===!0,D=k.encodeLocation?k.encodeLocation(v).pathname:v.pathname,V=x.pathname,$=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(V=V.toLowerCase(),$=$?$.toLowerCase():null,D=D.toLowerCase()),$&&O&&($=Ii($,O)||$);const W=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let B=V===D||!s&&V.startsWith(D)&&V.charAt(W)==="/",K=$!=null&&($===D||!s&&$.startsWith(D)&&$.charAt(D.length)==="/"),I={isActive:B,isPending:K,isTransitioning:A},S=B?e:void 0,T;typeof r=="function"?T=r(I):T=[r,B?"active":null,K?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(I):o;return P.createElement(ot,{...h,"aria-current":S,className:T,ref:g,style:R,to:l,viewTransition:u},typeof c=="function"?c(I):c)});WR.displayName="NavLink";var HR=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:l=Nh,action:u,onSubmit:c,relative:h,preventScrollReset:g,viewTransition:v,...x},b)=>{let k=JR(),O=YR(u,{relative:h}),A=l.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&oS.test(u),V=$=>{if(c&&c($),$.defaultPrevented)return;$.preventDefault();let W=$.nativeEvent.submitter,B=(W==null?void 0:W.getAttribute("formmethod"))||l;k(W||$.currentTarget,{fetcherKey:e,method:B,navigate:n,replace:s,state:o,relative:h,preventScrollReset:g,viewTransition:v})};return P.createElement("form",{ref:b,method:A,action:O,onSubmit:r?c:V,...x,"data-discover":!D&&t==="render"?"true":void 0})});HR.displayName="Form";function qR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aS(t){let e=P.useContext(Al);return mt(e,qR(t)),e}function KR(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=Qt(),c=Or(),h=Dc(t,{relative:o});return P.useCallback(g=>{if(TR(g,e)){g.preventDefault();let v=n!==void 0?n:dc(c)===dc(h);u(t,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,n,r,e,t,s,o,l])}var GR=0,QR=()=>`__${String(++GR)}__`;function JR(){let{router:t}=aS("useSubmit"),{basename:e}=P.useContext(Dr),n=fR();return P.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:c,body:h}=CR(r,e);if(s.navigate===!1){let g=s.fetcherKey||QR();await t.fetch(g,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function YR(t,{relative:e}={}){let{basename:n}=P.useContext(Dr),r=P.useContext(dr);mt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Dc(t||".",{relative:e})},l=Or();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(g=>g==="")){u.delete("index"),c.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Rs([n,o.pathname])),dc(o)}function XR(t,e={}){let n=P.useContext(XT);mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=aS("useViewTransitionState"),s=Dc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ii(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Ii(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qh(s.pathname,l)!=null||Qh(s.pathname,o)!=null}new TextEncoder;var ZR=KT();const fh=Bo(ZR);var Qp,h_;function eN(){if(h_)return Qp;h_=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var u,c,h;if(Array.isArray(o)){if(u=o.length,u!=l.length)return!1;for(c=u;c--!==0;)if(!s(o[c],l[c]))return!1;return!0}var g;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(g=o.entries();!(c=g.next()).done;)if(!l.has(c.value[0]))return!1;for(g=o.entries();!(c=g.next()).done;)if(!s(c.value[1],l.get(c.value[0])))return!1;return!0}if(n&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(g=o.entries();!(c=g.next()).done;)if(!l.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(u=o.length,u!=l.length)return!1;for(c=u;c--!==0;)if(o[c]!==l[c])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(h=Object.keys(o),u=h.length,u!==Object.keys(l).length)return!1;for(c=u;c--!==0;)if(!Object.prototype.hasOwnProperty.call(l,h[c]))return!1;if(t&&o instanceof Element)return!1;for(c=u;c--!==0;)if(!((h[c]==="_owner"||h[c]==="__v"||h[c]==="__o")&&o.$$typeof)&&!s(o[h[c]],l[h[c]]))return!1;return!0}return o!==o&&l!==l}return Qp=function(l,u){try{return s(l,u)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},Qp}var tN=eN();const nN=Bo(tN);var Jp,f_;function rN(){if(f_)return Jp;f_=1;var t=function(e,n,r,s,o,l,u,c){if(!e){var h;if(n===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[r,s,o,l,u,c],v=0;h=new Error(n.replace(/%s/g,function(){return g[v++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return Jp=t,Jp}var sN=rN();const m_=Bo(sN);var Yp,p_;function iN(){return p_||(p_=1,Yp=function(e,n,r,s){var o=r?r.call(s,e,n):void 0;if(o!==void 0)return!!o;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(n),h=0;h<l.length;h++){var g=l[h];if(!c(g))return!1;var v=e[g],x=n[g];if(o=r?r.call(s,v,x,g):void 0,o===!1||o===void 0&&v!==x)return!1}return!0}),Yp}var oN=iN();const aN=Bo(oN);var lS=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(lS||{}),Xp={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},g_=Object.values(lS),Z0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},lN=Object.entries(Z0).reduce((t,[e,n])=>(t[n]=e,t),{}),Ir="data-rh",ol={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},al=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},uN=t=>{let e=al(t,"title");const n=al(t,ol.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=al(t,ol.DEFAULT_TITLE);return e||r||void 0},cN=t=>al(t,ol.ON_CHANGE_CLIENT_STATE)||(()=>{}),Zp=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),dN=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let o=0;o<s.length;o+=1){const u=s[o].toLowerCase();if(t.indexOf(u)!==-1&&r[u])return n.concat(r)}}return n},[]),hN=t=>console&&typeof console.warn=="function"&&console.warn(t),Lu=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&hN(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,o)=>{const l={};o.filter(c=>{let h;const g=Object.keys(c);for(let x=0;x<g.length;x+=1){const b=g[x],k=b.toLowerCase();e.indexOf(k)!==-1&&!(h==="rel"&&c[h].toLowerCase()==="canonical")&&!(k==="rel"&&c[k].toLowerCase()==="stylesheet")&&(h=k),e.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(h=b)}if(!h||!c[h])return!1;const v=c[h].toLowerCase();return r[h]||(r[h]={}),l[h]||(l[h]={}),r[h][v]?!1:(l[h][v]=!0,!0)}).reverse().forEach(c=>s.push(c));const u=Object.keys(l);for(let c=0;c<u.length;c+=1){const h=u[c],g={...r[h],...l[h]};r[h]=g}return s},[]).reverse()},fN=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},mN=t=>({baseTag:dN(["href"],t),bodyAttributes:Zp("bodyAttributes",t),defer:al(t,ol.DEFER),encode:al(t,ol.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Zp("htmlAttributes",t),linkTags:Lu("link",["rel","href"],t),metaTags:Lu("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Lu("noscript",["innerHTML"],t),onChangeClientState:cN(t),scriptTags:Lu("script",["src","innerHTML"],t),styleTags:Lu("style",["cssText"],t),title:uN(t),titleAttributes:Zp("titleAttributes",t),prioritizeSeoTags:fN(t,ol.PRIORITIZE_SEO_TAGS)}),uS=t=>Array.isArray(t)?t.join(""):t,pN=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},eg=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(pN(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},y_=(t,e)=>({...t,[e]:void 0}),gN=["noscript","script","style"],Vg=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),cS=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),yN=(t,e,n,r)=>{const s=cS(n),o=uS(e);return s?`<${t} ${Ir}="true" ${s}>${Vg(o,r)}</${t}>`:`<${t} ${Ir}="true">${Vg(o,r)}</${t}>`},vN=(t,e,n=!0)=>e.reduce((r,s)=>{const o=s,l=Object.keys(o).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,g)=>{const v=typeof o[g]>"u"?g:`${g}="${Vg(o[g],n)}"`;return h?`${h} ${v}`:v},""),u=o.innerHTML||o.cssText||"",c=gN.indexOf(t)===-1;return`${r}<${t} ${Ir}="true" ${l}${c?"/>":`>${u}</${t}>`}`},""),dS=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Z0[r];return n[s||r]=t[r],n},e),xN=(t,e,n)=>{const r={key:e,[Ir]:!0},s=dS(n,r);return[nt.createElement("title",s,e)]},Dh=(t,e)=>e.map((n,r)=>{const s={key:r,[Ir]:!0};return Object.keys(n).forEach(o=>{const u=Z0[o]||o;if(u==="innerHTML"||u==="cssText"){const c=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[u]=n[o]}),nt.createElement(t,s)}),ar=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>xN(t,e.title,e.titleAttributes),toString:()=>yN(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>dS(e),toString:()=>cS(e)};default:return{toComponent:()=>Dh(t,e),toString:()=>vN(t,e,n)}}},wN=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=eg(t,Xp.meta),o=eg(e,Xp.link),l=eg(n,Xp.script);return{priorityMethods:{toComponent:()=>[...Dh("meta",s.priority),...Dh("link",o.priority),...Dh("script",l.priority)],toString:()=>`${ar("meta",s.priority,r)} ${ar("link",o.priority,r)} ${ar("script",l.priority,r)}`},metaTags:s.default,linkTags:o.default,scriptTags:l.default}},_N=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:o,styleTags:l,title:u="",titleAttributes:c,prioritizeSeoTags:h}=t;let{linkTags:g,metaTags:v,scriptTags:x}=t,b={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:b,linkTags:g,metaTags:v,scriptTags:x}=wN(t)),{priority:b,base:ar("base",e,r),bodyAttributes:ar("bodyAttributes",n,r),htmlAttributes:ar("htmlAttributes",s,r),link:ar("link",g,r),meta:ar("meta",v,r),noscript:ar("noscript",o,r),script:ar("script",x,r),style:ar("style",l,r),title:ar("title",{title:u,titleAttributes:c},r)}},$g=_N,mh=[],hS=!!(typeof window<"u"&&window.document&&window.document.createElement),Fg=class{constructor(t,e){ks(this,"instances",[]);ks(this,"canUseDOM",hS);ks(this,"context");ks(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?mh:this.instances,add:t=>{(this.canUseDOM?mh:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?mh:this.instances).indexOf(t);(this.canUseDOM?mh:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=$g({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},bN={},fS=nt.createContext(bN),jo,mS=(jo=class extends P.Component{constructor(n){super(n);ks(this,"helmetData");this.helmetData=new Fg(this.props.context||{},jo.canUseDOM)}render(){return nt.createElement(fS.Provider,{value:this.helmetData.value},this.props.children)}},ks(jo,"canUseDOM",hS),jo),Va=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${Ir}]`),s=[].slice.call(r),o=[];let l;return e&&e.length&&e.forEach(u=>{const c=document.createElement(t);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h))if(h==="innerHTML")c.innerHTML=u.innerHTML;else if(h==="cssText")c.styleSheet?c.styleSheet.cssText=u.cssText:c.appendChild(document.createTextNode(u.cssText));else{const g=h,v=typeof u[g]>"u"?"":u[g];c.setAttribute(h,v)}c.setAttribute(Ir,"true"),s.some((h,g)=>(l=g,c.isEqualNode(h)))?s.splice(l,1):o.push(c)}),s.forEach(u=>{var c;return(c=u.parentNode)==null?void 0:c.removeChild(u)}),o.forEach(u=>n.appendChild(u)),{oldTags:s,newTags:o}},Ug=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(Ir),s=r?r.split(","):[],o=[...s],l=Object.keys(e);for(const u of l){const c=e[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),s.indexOf(u)===-1&&s.push(u);const h=o.indexOf(u);h!==-1&&o.splice(h,1)}for(let u=o.length-1;u>=0;u-=1)n.removeAttribute(o[u]);s.length===o.length?n.removeAttribute(Ir):n.getAttribute(Ir)!==l.join(",")&&n.setAttribute(Ir,l.join(","))},EN=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=uS(t)),Ug("title",e)},v_=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:o,metaTags:l,noscriptTags:u,onChangeClientState:c,scriptTags:h,styleTags:g,title:v,titleAttributes:x}=t;Ug("body",r),Ug("html",s),EN(v,x);const b={baseTag:Va("base",n),linkTags:Va("link",o),metaTags:Va("meta",l),noscriptTags:Va("noscript",u),scriptTags:Va("script",h),styleTags:Va("style",g)},k={},O={};Object.keys(b).forEach(A=>{const{newTags:D,oldTags:V}=b[A];D.length&&(k[A]=D),V.length&&(O[A]=b[A].oldTags)}),e&&e(),c(t,k,O)},Mu=null,TN=t=>{Mu&&cancelAnimationFrame(Mu),t.defer?Mu=requestAnimationFrame(()=>{v_(t,()=>{Mu=null})}):(v_(t),Mu=null)},SN=TN,x_=class extends P.Component{constructor(){super(...arguments);ks(this,"rendered",!1)}shouldComponentUpdate(e){return!aN(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=mN(e.get().map(o=>{const l={...o.props};return delete l.context,l}));mS.canUseDOM?SN(s):$g&&(r=$g(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Og,kN=(Og=class extends P.Component{shouldComponentUpdate(t){return!nN(y_(this.props,"helmetData"),y_(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return m_(g_.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${g_.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),m_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return nt.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...o}=r.props,l=Object.keys(o).reduce((c,h)=>(c[lN[h]||h]=o[h],c),{});let{type:u}=r;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(r,s),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,l,s);break;default:e=this.mapObjectTypeChildren(r,e,l,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof Fg)){const s=r;r=new Fg(s.context,!0),delete n.helmetData}return r?nt.createElement(x_,{...n,context:r.value}):nt.createElement(fS.Consumer,null,s=>nt.createElement(x_,{...n,context:s}))}},ks(Og,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Og);function Jh(){return Jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jh.apply(null,arguments)}function ey(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Bg(t,e){return Bg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Bg(t,e)}function ty(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Bg(t,e)}function CN(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function PN(t,e){t.classList?t.classList.add(e):CN(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function w_(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function AN(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=w_(t.className,e):t.setAttribute("class",w_(t.className&&t.className.baseVal||"",e))}const __={disabled:!1},Yh=nt.createContext(null);var pS=function(e){return e.scrollTop},Bu="unmounted",Eo="exited",To="entering",Ga="entered",zg="exiting",Vs=function(t){ty(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var l=s,u=l&&!l.isMounting?r.enter:r.appear,c;return o.appearStatus=null,r.in?u?(c=Eo,o.appearStatus=To):c=Ga:r.unmountOnExit||r.mountOnEnter?c=Bu:c=Eo,o.state={status:c},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Bu?{status:Eo}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==To&&l!==Ga&&(o=To):(l===To||l===Ga)&&(o=zg)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===To){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:fh.findDOMNode(this);l&&pS(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Eo&&this.setState({status:Bu})},n.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,c=this.props.nodeRef?[u]:[fh.findDOMNode(this),u],h=c[0],g=c[1],v=this.getTimeouts(),x=u?v.appear:v.enter;if(!s&&!l||__.disabled){this.safeSetState({status:Ga},function(){o.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:To},function(){o.props.onEntering(h,g),o.onTransitionEnd(x,function(){o.safeSetState({status:Ga},function(){o.props.onEntered(h,g)})})})},n.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:fh.findDOMNode(this);if(!o||__.disabled){this.safeSetState({status:Eo},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:zg},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:Eo},function(){s.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:fh.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=c[0],g=c[1];this.props.addEndListener(h,g)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Bu)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=ey(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return nt.createElement(Yh.Provider,{value:null},typeof l=="function"?l(s,u):nt.cloneElement(nt.Children.only(l),u))},e}(nt.Component);Vs.contextType=Yh;Vs.propTypes={};function $a(){}Vs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:$a,onEntering:$a,onEntered:$a,onExit:$a,onExiting:$a,onExited:$a};Vs.UNMOUNTED=Bu;Vs.EXITED=Eo;Vs.ENTERING=To;Vs.ENTERED=Ga;Vs.EXITING=zg;var IN=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return PN(e,r)})},tg=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return AN(e,r)})},Df=function(t){ty(e,t);function e(){for(var r,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r=t.call.apply(t,[this].concat(o))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1];r.removeClasses(g,"exit"),r.addClass(g,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(u,c)},r.onEntering=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1],x=v?"appear":"enter";r.addClass(g,x,"active"),r.props.onEntering&&r.props.onEntering(u,c)},r.onEntered=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1],x=v?"appear":"enter";r.removeClasses(g,x),r.addClass(g,x,"done"),r.props.onEntered&&r.props.onEntered(u,c)},r.onExit=function(u){var c=r.resolveArguments(u),h=c[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(u)},r.onExiting=function(u){var c=r.resolveArguments(u),h=c[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(u)},r.onExited=function(u){var c=r.resolveArguments(u),h=c[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(u)},r.resolveArguments=function(u,c){return r.props.nodeRef?[r.props.nodeRef.current,u]:[u,c]},r.getClassNames=function(u){var c=r.props.classNames,h=typeof c=="string",g=h&&c?c+"-":"",v=h?""+g+u:c[u],x=h?v+"-active":c[u+"Active"],b=h?v+"-done":c[u+"Done"];return{baseClassName:v,activeClassName:x,doneClassName:b}},r}var n=e.prototype;return n.addClass=function(s,o,l){var u=this.getClassNames(o)[l+"ClassName"],c=this.getClassNames("enter"),h=c.doneClassName;o==="appear"&&l==="done"&&h&&(u+=" "+h),l==="active"&&s&&pS(s),u&&(this.appliedClasses[o][l]=u,IN(s,u))},n.removeClasses=function(s,o){var l=this.appliedClasses[o],u=l.base,c=l.active,h=l.done;this.appliedClasses[o]={},u&&tg(s,u),c&&tg(s,c),h&&tg(s,h)},n.render=function(){var s=this.props;s.classNames;var o=ey(s,["classNames"]);return nt.createElement(Vs,Jh({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(nt.Component);Df.defaultProps={classNames:""};Df.propTypes={};function RN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ny(t,e){var n=function(o){return e&&P.isValidElement(o)?e(o):o},r=Object.create(null);return t&&P.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function NN(t,e){t=t||{},e=e||{};function n(g){return g in e?e[g]:t[g]}var r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,u={};for(var c in e){if(r[c])for(l=0;l<r[c].length;l++){var h=r[c][l];u[r[c][l]]=n(h)}u[c]=n(c)}for(l=0;l<s.length;l++)u[s[l]]=n(s[l]);return u}function Ao(t,e,n){return n[e]!=null?n[e]:t.props[e]}function jN(t,e){return ny(t.children,function(n){return P.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Ao(n,"appear",t),enter:Ao(n,"enter",t),exit:Ao(n,"exit",t)})})}function DN(t,e,n){var r=ny(t.children),s=NN(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(P.isValidElement(l)){var u=o in e,c=o in r,h=e[o],g=P.isValidElement(h)&&!h.props.in;c&&(!u||g)?s[o]=P.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:Ao(l,"exit",t),enter:Ao(l,"enter",t)}):!c&&u&&!g?s[o]=P.cloneElement(l,{in:!1}):c&&u&&P.isValidElement(h)&&(s[o]=P.cloneElement(l,{onExited:n.bind(null,l),in:h.props.in,exit:Ao(l,"exit",t),enter:Ao(l,"enter",t)}))}}),s}var ON=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},LN={component:"div",childFactory:function(e){return e}},Of=function(t){ty(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var l=o.handleExited.bind(RN(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,c=o.firstRender;return{children:c?jN(s,u):DN(s,l,u),firstRender:!1}},n.handleExited=function(s,o){var l=ny(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var c=Jh({},u.children);return delete c[s.key],{children:c}}))},n.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=ey(s,["component","childFactory"]),c=this.state.contextValue,h=ON(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?nt.createElement(Yh.Provider,{value:c},h):nt.createElement(Yh.Provider,{value:c},nt.createElement(o,u,h))},e}(nt.Component);Of.propTypes={};Of.defaultProps=LN;const MN="modulepreload",VN=function(t){return"/"+t},b_={},pl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=VN(c),c in b_)return;b_[c]=!0;const h=c.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":MN,h||(v.as="script"),v.crossOrigin="",v.href=c,u&&v.setAttribute("nonce",u),document.head.appendChild(v),h)return new Promise((x,b)=>{v.addEventListener("load",x),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},$N=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Rl);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ry extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class FN extends ry{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class UN extends ry{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class BN extends ry{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Wg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Wg||(Wg={}));var zN=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class WN{constructor(e,{headers:n={},customFetch:r,region:s=Wg.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=$N(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return zN(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=n;let u={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(u["x-region"]=c);let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h}).catch(k=>{throw new FN(k)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new UN(g);if(!g.ok)throw new BN(g);let x=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield g.json():x==="application/octet-stream"?b=yield g.blob():x==="text/event-stream"?b=g:x==="multipart/form-data"?b=yield g.formData():b=yield g.text(),{data:b,error:null}}catch(s){return{data:null,error:s}}})}}var qt={},Fa={},Ua={},Ba={},za={},Wa={},HN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gl=HN();const qN=gl.fetch,gS=gl.fetch.bind(gl),yS=gl.Headers,KN=gl.Request,GN=gl.Response,Rl=Object.freeze(Object.defineProperty({__proto__:null,Headers:yS,Request:KN,Response:GN,default:gS,fetch:qN},Symbol.toStringTag,{value:"Module"})),QN=yI(Rl);var ph={},E_;function vS(){if(E_)return ph;E_=1,Object.defineProperty(ph,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return ph.default=t,ph}var T_;function xS(){if(T_)return Wa;T_=1;var t=Wa&&Wa.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Wa,"__esModule",{value:!0});const e=t(QN),n=t(vS());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var g,v,x;let b=null,k=null,O=null,A=h.status,D=h.statusText;if(h.ok){if(this.method!=="HEAD"){const B=await h.text();B===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=B:k=JSON.parse(B))}const $=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),W=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");$&&W&&W.length>1&&(O=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,O=null,A=406,D="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const $=await h.text();try{b=JSON.parse($),Array.isArray(b)&&h.status===404&&(k=[],b=null,A=200,D="OK")}catch{h.status===404&&$===""?(A=204,D="No Content"):b={message:$}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,A=200,D="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:k,count:O,status:A,statusText:D}});return this.shouldThrowOnError||(c=c.catch(h=>{var g,v,x;return{error:{message:`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(v=h==null?void 0:h.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(x=h==null?void 0:h.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return Wa.default=r,Wa}var S_;function wS(){if(S_)return za;S_=1;var t=za&&za.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(za,"__esModule",{value:!0});const e=t(xS());class n extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const h=c?`${c}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(h,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:h="text"}={}){var g;const v=[s?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),x=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${x}"; options=${v};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return za.default=n,za}var k_;function sy(){if(k_)return Ba;k_=1;var t=Ba&&Ba.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ba,"__esModule",{value:!0});const e=t(wS());class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${c}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return Ba.default=n,Ba}var C_;function _S(){if(C_)return Ua;C_=1;var t=Ua&&Ua.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ua,"__esModule",{value:!0});const e=t(sy());class n{constructor(s,{headers:o={},schema:l,fetch:u}){this.url=s,this.headers=o,this.schema=l,this.fetch=u}select(s,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let c=!1;const h=(s??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const u="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const h=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(h.length>0){const g=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){const h="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),c||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(s)){const v=s.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(v.length>0){const x=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ua.default=n,Ua}var Vu={},$u={},P_;function JN(){return P_||(P_=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.version=void 0,$u.version="0.0.0-automated"),$u}var A_;function YN(){if(A_)return Vu;A_=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.DEFAULT_HEADERS=void 0;const t=JN();return Vu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Vu}var I_;function XN(){if(I_)return Fa;I_=1;var t=Fa&&Fa.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Fa,"__esModule",{value:!0});const e=t(_S()),n=t(sy()),r=YN();class s{constructor(l,{headers:u={},schema:c,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=c,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:c=!1,get:h=!1,count:g}={}){let v;const x=new URL(`${this.url}/rpc/${l}`);let b;c||h?(v=c?"HEAD":"GET",Object.entries(u).filter(([O,A])=>A!==void 0).map(([O,A])=>[O,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([O,A])=>{x.searchParams.append(O,A)})):(v="POST",b=u);const k=Object.assign({},this.headers);return g&&(k.Prefer=`count=${g}`),new n.default({method:v,url:x,headers:k,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Fa.default=s,Fa}var R_;function ZN(){if(R_)return qt;R_=1;var t=qt&&qt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.PostgrestError=qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const e=t(XN());qt.PostgrestClient=e.default;const n=t(_S());qt.PostgrestQueryBuilder=n.default;const r=t(sy());qt.PostgrestFilterBuilder=r.default;const s=t(wS());qt.PostgrestTransformBuilder=s.default;const o=t(xS());qt.PostgrestBuilder=o.default;const l=t(vS());return qt.PostgrestError=l.default,qt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},qt}var e2=ZN();const t2=Bo(e2),{PostgrestClient:n2,PostgrestQueryBuilder:sB,PostgrestFilterBuilder:iB,PostgrestTransformBuilder:oB,PostgrestBuilder:aB,PostgrestError:lB}=t2,r2="2.11.2",s2={"X-Client-Info":`realtime-js/${r2}`},i2="1.0.0",bS=1e4,o2=1e3;var ll;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ll||(ll={}));var Wn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Wn||(Wn={}));var Ar;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ar||(Ar={}));var Hg;(function(t){t.websocket="websocket"})(Hg||(Hg={}));var Po;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Po||(Po={}));class a2{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+o));l=l+o;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:c,payload:h}}}class ES{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const N_=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=l2(l,t,e,s),o),{})},l2=(t,e,n,r)=>{const s=e.find(u=>u.name===t),o=s==null?void 0:s.type,l=n[t];return o&&!r.includes(o)?TS(o,l):qg(l)},TS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return h2(e,n)}switch(t){case it.bool:return u2(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return c2(e);case it.json:case it.jsonb:return d2(e);case it.timestamp:return f2(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return qg(e);default:return qg(e)}},qg=t=>t,u2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},c2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},d2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},h2=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>TS(e,u))}return t},f2=t=>typeof t=="string"?t.replace(" ","T"):t,SS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ng{constructor(e,n,r={},s=bS){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var j_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(j_||(j_={}));class Xu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(c=>{this.state=Xu.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Xu.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),l=this.transformState(n),u={},c={};return this.map(o,(h,g)=>{l[h]||(c[h]=g)}),this.map(l,(h,g)=>{const v=o[h];if(v){const x=g.map(A=>A.presence_ref),b=v.map(A=>A.presence_ref),k=g.filter(A=>b.indexOf(A.presence_ref)<0),O=v.filter(A=>x.indexOf(A.presence_ref)<0);k.length>0&&(u[h]=k),O.length>0&&(c[h]=O)}else u[h]=g}),this.syncDiff(o,{joins:u,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(u,c)=>{var h;const g=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(c),g.length>0){const v=e[u].map(b=>b.presence_ref),x=g.filter(b=>v.indexOf(b.presence_ref)<0);e[u].unshift(...x)}r(u,g,c)}),this.map(l,(u,c)=>{let h=e[u];if(!h)return;const g=c.map(v=>v.presence_ref);h=h.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=h,s(u,h,c),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var D_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(D_||(D_={}));var O_;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(O_||(O_={}));var Cs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Cs||(Cs={}));class iy{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ng(this,Ar.join,this.params,this.timeout),this.rejoinTimer=new ES(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ar.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Xu(this),this.broadcastEndpointURL=SS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:u}}=this.params;this._onError(g=>e==null?void 0:e(Cs.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Cs.CLOSED));const c={},h={broadcast:o,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(Cs.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,k=[];for(let O=0;O<b;O++){const A=x[O],{filter:{event:D,schema:V,table:$,filter:W}}=A,B=g&&g[O];if(B&&B.event===D&&B.schema===V&&B.table===$&&B.filter===W)k.push(Object.assign(Object.assign({},A),{id:B.id}));else{this.unsubscribe(),e==null||e(Cs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(Cs.SUBSCRIBED);return}}).receive("error",g=>{e==null||e(Cs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Cs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ar.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new ng(this,Ar.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ng(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const l=e.toLocaleLowerCase(),{close:u,error:c,leave:h,join:g}=Ar;if(r&&[u,c,h,g].indexOf(l)>=0&&r!==this._joinRef())return;let x=this._onMessage(l,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var k,O,A;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((A=(O=b.filter)===null||O===void 0?void 0:O.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===l}).map(b=>b.callback(x,r)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var k,O,A,D,V,$;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const W=b.id,B=(k=b.filter)===null||k===void 0?void 0:k.event;return W&&((O=n.ids)===null||O===void 0?void 0:O.includes(W))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const W=(V=(D=b==null?void 0:b.filter)===null||D===void 0?void 0:D.event)===null||V===void 0?void 0:V.toLocaleLowerCase();return W==="*"||W===(($=n==null?void 0:n.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:O,table:A,commit_timestamp:D,type:V,errors:$}=k;x=Object.assign(Object.assign({},{schema:O,table:A,commit_timestamp:D,eventType:V,new:{},old:{},errors:$}),this._getPayloadRecords(k))}b.callback(x,r)})}_isClosed(){return this.state===Wn.closed}_isJoined(){return this.state===Wn.joined}_isJoining(){return this.state===Wn.joining}_isLeaving(){return this.state===Wn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&iy.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ar.close,{},e)}_onError(e){this._on(Ar.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=N_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=N_(e.columns,e.old_record)),n}}const m2=()=>{},p2=typeof WebSocket<"u",g2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class y2{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=s2,this.params={},this.timeout=bS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=m2,this.conn=null,this.sendBuffer=[],this.serializer=new a2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>pl(async()=>{const{default:c}=await Promise.resolve().then(()=>Rl);return{default:c}},void 0).then(({default:c})=>c(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${Hg.websocket}`,this.httpEndpoint=SS(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,l)=>l(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ES(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(p2){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new v2(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),pl(async()=>{const{default:e}=await import("./browser-CdSsLV5g.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:i2}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ll.connecting:return Po.Connecting;case ll.open:return Po.Open;case ll.closing:return Po.Closing;default:return Po.Closed}}isConnected(){return this.connectionState()===Po.Open}channel(e,n={config:{}}){const r=new iy(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Ar.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(o2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:o,ref:l}=n;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,l)),this.stateChangeCallbacks.message.forEach(u=>u(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ar.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([g2],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class v2{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ll.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let oy=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Kt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class x2 extends oy{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Kg extends oy{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var w2=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const kS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Rl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},_2=()=>w2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pl(()=>Promise.resolve().then(()=>Rl),void 0)).Response:Response}),Gg=t=>{if(Array.isArray(t))return t.map(n=>Gg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Gg(r)}),e};var zo=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const rg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b2=(t,e,n)=>zo(void 0,void 0,void 0,function*(){const r=yield _2();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new x2(rg(s),t.status||500))}).catch(s=>{e(new Kg(rg(s),s))}):e(new Kg(rg(t),t))}),E2=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Oc(t,e,n,r,s,o){return zo(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,E2(e,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>b2(c,u,r))})})}function Xh(t,e,n,r){return zo(this,void 0,void 0,function*(){return Oc(t,"GET",e,n,r)})}function yi(t,e,n,r,s){return zo(this,void 0,void 0,function*(){return Oc(t,"POST",e,r,s,n)})}function T2(t,e,n,r,s){return zo(this,void 0,void 0,function*(){return Oc(t,"PUT",e,r,s,n)})}function S2(t,e,n,r){return zo(this,void 0,void 0,function*(){return Oc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function CS(t,e,n,r,s){return zo(this,void 0,void 0,function*(){return Oc(t,"DELETE",e,r,s,n)})}var Rn=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const k2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},L_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C2{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=kS(s)}uploadOrUpdate(e,n,r,s){return Rn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},L_),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const h=this._removeEmptyFolders(n),g=this._getFinalPath(h),v=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:o,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),x=yield v.json();return v.ok?{data:{path:h,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(o){if(Kt(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Rn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:L_.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const v=yield this.fetch(u.toString(),{method:"PUT",body:c,headers:g}),x=yield v.json();return v.ok?{data:{path:o,fullPath:x.Key},error:null}:{data:null,error:x}}catch(c){if(Kt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Rn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield yi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new oy("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Rn(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Rn(this,void 0,void 0,function*(){try{return{data:{path:(yield yi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Rn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield yi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Rn(this,void 0,void 0,function*(){try{const s=yield yi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}download(e,n){return Rn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Xh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Kt(u))return{data:null,error:u};throw u}})}info(e){return Rn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Xh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Gg(r),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}exists(e){return Rn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield S2(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Kt(r)&&r instanceof Kg){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return Rn(this,void 0,void 0,function*(){try{return{data:yield CS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Rn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},k2),n),{prefix:e||""});return{data:yield yi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const P2="2.7.1",A2={"X-Client-Info":`storage-js/${P2}`};var Ha=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class I2{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},A2),n),this.fetch=kS(r)}listBuckets(){return Ha(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Kt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ha(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ha(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ha(this,void 0,void 0,function*(){try{return{data:yield T2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ha(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ha(this,void 0,void 0,function*(){try{return{data:yield CS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}}class R2 extends I2{constructor(e,n={},r){super(e,n,r)}from(e){return new C2(this.url,this.headers,e,this.fetch)}}const N2="2.49.4";let zu="";typeof Deno<"u"?zu="deno":typeof document<"u"?zu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zu="react-native":zu="node";const j2={"X-Client-Info":`supabase-js-${zu}/${N2}`},D2={headers:j2},O2={schema:"public"},L2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M2={};var V2=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const $2=t=>{let e;return t?e=t:typeof fetch>"u"?e=gS:e=fetch,(...n)=>e(...n)},F2=()=>typeof Headers>"u"?yS:Headers,U2=(t,e,n)=>{const r=$2(n),s=F2();return(o,l)=>V2(void 0,void 0,void 0,function*(){var u;const c=(u=yield e())!==null&&u!==void 0?u:t;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:h}))})};var B2=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};function z2(t){return t.replace(/\/$/,"")}function W2(t,e){const{db:n,auth:r,realtime:s,global:o}=t,{db:l,auth:u,realtime:c,global:h}=e,g={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},h),o),accessToken:()=>B2(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const PS="2.69.1",Qa=30*1e3,Qg=3,sg=Qg*Qa,H2="http://localhost:9999",q2="supabase.auth.token",K2={"X-Client-Info":`gotrue-js/${PS}`},Jg="X-Supabase-Api-Version",AS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},G2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q2=6e5;class ay extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class J2 extends ay{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Y2(t){return Me(t)&&t.name==="AuthApiError"}class IS extends ay{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ui extends ay{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class mi extends Ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function X2(t){return Me(t)&&t.name==="AuthSessionMissingError"}class ig extends Ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gh extends Ui{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class yh extends Ui{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Z2(t){return Me(t)&&t.name==="AuthImplicitGrantRedirectError"}class M_ extends Ui{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yg extends Ui{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function og(t){return Me(t)&&t.name==="AuthRetryableFetchError"}class V_ extends Ui{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Zu extends Ui{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),F_=` 	
\r=`.split(""),ej=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<F_.length;e+=1)t[F_[e].charCodeAt(0)]=-2;for(let e=0;e<$_.length;e+=1)t[$_[e].charCodeAt(0)]=e;return t})();function RS(t,e,n){const r=ej[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function U_(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{rj(l,r,n)};for(let l=0;l<t.length;l+=1)RS(t.charCodeAt(l),s,o);return e.join("")}function tj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nj(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}tj(r,e)}}function rj(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function sj(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)RS(t.charCodeAt(s),n,r);return new Uint8Array(e)}function ij(t){const e=[];return nj(t,n=>e.push(n)),new Uint8Array(e)}function oj(t){return Math.round(Date.now()/1e3)+t}function aj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Kr=()=>typeof window<"u"&&typeof document<"u",_o={tested:!1,writable:!1},ec=()=>{if(!Kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_o.tested)return _o.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_o.tested=!0,_o.writable=!0}catch{_o.tested=!0,_o.writable=!1}return _o.writable};function lj(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const NS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Rl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",jS=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},vh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},xh=async(t,e)=>{await t.removeItem(e)};let DS=class OS{constructor(){this.promise=new OS.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};DS.promiseConstructor=Promise;function ag(t){const e=t.split(".");if(e.length!==3)throw new Zu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!G2.test(e[r]))throw new Zu("JWT not in base64url format");return{header:JSON.parse(U_(e[0])),payload:JSON.parse(U_(e[1])),signature:sj(e[2]),raw:{header:e[0],payload:e[1]}}}async function cj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function dj(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function hj(t){return("0"+t.toString(16)).substr(-2)}function fj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,hj).join("")}async function mj(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function pj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await mj(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qa(t,e,n=!1){const r=fj();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await jS(t,`${e}-code-verifier`,s);const o=await pj(r);return[o,r===o?"plain":"s256"]}const gj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yj(t){const e=t.headers.get(Jg);if(!e||!e.match(gj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function xj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var wj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const So=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_j=[502,503,504];async function B_(t){var e;if(!uj(t))throw new Yg(So(t),0);if(_j.includes(t.status))throw new Yg(So(t),t.status);let n;try{n=await t.json()}catch(o){throw new IS(So(o),o)}let r;const s=yj(t);if(s&&s.getTime()>=AS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new V_(So(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new mi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new V_(So(n),t.status,n.weak_password.reasons);throw new J2(So(n),t.status||500,r)}const bj=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[Jg]||(o[Jg]=AS["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Ej(t,e,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Ej(t,e,n,r,s,o){const l=bj(e,r,s,o);let u;try{u=await t(n,Object.assign({},l))}catch(c){throw console.error(c),new Yg(So(c),0)}if(u.ok||await B_(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await B_(c)}}function pi(t){var e;let n=null;Cj(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=oj(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function z_(t){const e=pi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function vi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Tj(t){return{data:t,error:null}}function Sj(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,l=wj(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function kj(t){return t}function Cj(t){return t.access_token&&t.refresh_token&&t.expires_in}var Pj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Aj{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=NS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:vi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Pj(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Sj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Me(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:vi})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,l,u,c;try{const h={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:kj});if(g.error)throw g.error;const v=await g.json(),x=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(c=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(k=>{const O=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(k.split(";")[1].split("=")[1]);h[`${A}Page`]=O}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Me(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:vi})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:vi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:vi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}const Ij={getItem:t=>ec()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ec()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ec()&&globalThis.localStorage.removeItem(t)}};function W_(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Rj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ka={debug:!!(globalThis&&ec()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nj extends LS{}async function jj(t,e,n){Ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ka.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Nj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ka.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Rj();const Dj={url:H2,storageKey:q2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function H_(t,e,n){return await n()}class hc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=hc.nextInstanceID,hc.nextInstanceID+=1,this.instanceID>0&&Kr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Dj),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Aj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=NS(s.fetch),this.lock=s.lock||H_,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Kr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=jj:this.lock=H_,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ec()?this.storage=Ij:(this.memoryStorage={},this.storage=W_(this.memoryStorage)):(this.memoryStorage={},this.storage=W_(this.memoryStorage)),Kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${PS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=lj(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Kr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Z2(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Me(n)?{error:n}:{error:new IS("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:pi}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:g,password:v,options:x}=e;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await qa(this.storage,this.storageKey)),o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:g,password:v,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:k},xform:pi})}else if("phone"in e){const{phone:g,password:v,options:x}=e;o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:pi})}else throw new gh("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:z_})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:z_})}else throw new gh("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ig}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await vh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:l}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:pi});if(await xh(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new ig}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(Me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:l}=e,u=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:pi}),{data:c,error:h}=u;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ig}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,l;try{if("email"in e){const{email:u,options:c}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await qa(this.storage,this.storageKey));const{error:v}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:c}=e,{data:h,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g}}throw new gh("You must provide either an email or phone number.")}catch(u){if(Me(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:pi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,h=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(Me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await qa(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Tj})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new mi;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:u}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new gh("You must provide either an email or phone number and a type")}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await vh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<sg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,g)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,g))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:vi}):await this._useSession(async n=>{var r,s,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mi}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:vi})})}catch(n){if(Me(n))return X2(n)&&(await this._removeSession(),await xh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new mi;const l=s.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await qa(this.storage,this.storageKey));const{data:h,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:vi});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new mi;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:l}=ag(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{session:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Me(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new mi;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Kr())throw new yh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new M_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new M_("No code detected.");const{data:V,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:V.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:h}=e;if(!o||!u||!l||!h)throw new yh("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let x=g+v;c&&(x=parseInt(c));const b=x-g;b*1e3<=Qa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const k=x-v;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,g);const{data:O,error:A}=await this._getUser(o);if(A)throw A;const D={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:v,expires_at:x,refresh_token:l,token_type:h,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(r){if(Me(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await vh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(Y2(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await xh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=aj(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await qa(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var l,u,c,h,g;const{data:v,error:x}=o;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Kr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Me(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)throw l;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await dj(async s=>(s>0&&await cj(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:pi})),(s,o)=>{const l=200*Math.pow(2,s);return o&&og(o)&&Date.now()+l-r<Qa})}catch(r){if(this._debug(n,"error",r),Me(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Kr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await vh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<sg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${sg}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),og(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new mi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new DS;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new mi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),Me(o)){const l={session:null,error:o};return og(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await jS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await xh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Qa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qa}ms, refresh threshold is ${Qg} ticks`),s<=Qg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await qa(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:u}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ag(s.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Q2>Date.now()))return r;const{data:s,error:o}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new Zu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(l=>l.kid===e),!r)throw new Zu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:b,error:k}=await this.getSession();if(k||!b.session)return{data:null,error:k};r=b.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:c}}=ag(r);if(vj(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:s,signature:l},error:null}}const h=xj(s.alg),g=await this.fetchJwk(s.kid,n),v=await crypto.subtle.importKey("jwk",g,h,!0,["verify"]);if(!await crypto.subtle.verify(h,v,l,ij(`${u}.${c}`)))throw new Zu("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}}hc.nextInstanceID=0;const Oj=hc;class Lj extends Oj{constructor(e){super(e)}}var Mj=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class Vj{constructor(e,n,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=z2(e);this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`,this.functionsUrl=`${u}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:O2,realtime:M2,auth:Object.assign(Object.assign({},L2),{storageKey:c}),global:D2},g=W2(r??{},h);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=U2(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new n2(`${u}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new WN(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new R2(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Mj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:u,debug:c},h,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lj({url:this.authUrl,headers:Object.assign(Object.assign({},v),h),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:l,lock:u,debug:c,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new y2(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $j=(t,e,n)=>new Vj(t,e,n),MS=void 0,VS=void 0;console.log("Supabase URL:",MS);console.log("Supabase Anon Key:",VS);throw new Error("VITE_SUPABASE_URL is not defined in environment variables");const Hn=$j(MS,VS),$s=P.createContext(),Fj=({children:t})=>{const[e,n]=P.useState(null),[r,s]=P.useState(!0);P.useEffect(()=>{(async()=>{const{data:{session:x}}=await Hn.auth.getSession();n((x==null?void 0:x.user)??null),s(!1)})();const{data:{subscription:v}}=Hn.auth.onAuthStateChange((x,b)=>{n((b==null?void 0:b.user)??null),s(!1)});return()=>{v==null||v.unsubscribe()}},[]);const h={user:e,loading:r,signup:async(g,v)=>{console.log("Signup attempt with:",{email:g,password:v});const{data:x,error:b}=await Hn.auth.signUp({email:g,password:v,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(x,null,2)),b)throw console.error("Signup error:",b.message),b;if(x.user&&x.user.identities&&x.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const k=await Hn.auth.resend({type:"signup",email:g});throw console.log("Resend response:",JSON.stringify(k,null,2)),k.error?(console.error("Error resending confirmation email:",k.error.message),k.error):new Error("User already exists. A confirmation email has been resent.")}return x},login:async(g,v)=>{console.log("Login attempt with:",{email:g,password:v});const{data:x,error:b}=await Hn.auth.signInWithPassword({email:g,password:v});if(b)throw console.error("Login error:",b.message),b.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):b;return n(x.user),x},logout:async()=>{const{error:g}=await Hn.auth.signOut();if(g)throw console.error("Logout error:",g.message),g;n(null)},refreshUser:async()=>{const{data:{user:g}}=await Hn.auth.getUser();n(g)}};return f.jsx($s.Provider,{value:h,children:t})},Uj=({location:t})=>{var O;const[e,n]=P.useState(!1),{isDarkMode:r,toggleTheme:s}=P.useContext(Ze),{user:o,logout:l,loading:u}=P.useContext($s),c=Qt(),h=P.useRef(null),g=P.useRef(null);console.log("Rendering Navigation component. isMenuOpen:",e);const v=async()=>{try{await l(),c("/login")}catch(A){console.error("Logout error:",A.message)}},x=()=>{var A;e?(n(!1),(A=h.current)==null||A.focus()):(n(!0),setTimeout(()=>{var D;return(D=g.current)==null?void 0:D.focus()},100))};P.useEffect(()=>{const A=D=>{var V;D.key==="Escape"&&e&&(n(!1),(V=h.current)==null||V.focus())};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[e]);const b=A=>t.pathname===A,k=((O=o==null?void 0:o.user_metadata)==null?void 0:O.displayName)||"User";return f.jsxs(f.Fragment,{children:[f.jsx("a",{href:"#main-content",className:"fixed top-0 left-0 p-2 bg-red-600 text-white focus:top-4 focus:left-4 z-50 transition-all duration-200",children:"Skip to Content"}),f.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${r?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,"aria-label":"Main navigation",children:[f.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center relative z-50",children:[f.jsx(ot,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Aussie Gut Pack"}),f.jsxs("div",{className:"hidden lg:flex space-x-6 items-center",children:[f.jsx(ot,{to:"/",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/")?"text-red-600 font-semibold":""}`,children:"Home"}),f.jsx(ot,{to:"/products",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),f.jsx(ot,{to:"/blog",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),f.jsx(ot,{to:"/contact",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),u?f.jsx("span",{children:"Loading..."}):o?f.jsxs(f.Fragment,{children:[f.jsxs(ot,{to:"/profile",className:`nav-link text-sm hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",k]}),f.jsx("button",{onClick:v,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Logout"})]}):f.jsx(ot,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Login"}),f.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200","aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"☀️":"🌙"})]}),f.jsx("button",{ref:h,onClick:x,"aria-expanded":e,"aria-label":e?"Close menu":"Open menu",className:"lg:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 text-xl z-60",children:f.jsx("i",{className:e?"fas fa-times":"fas fa-bars"})})]}),e&&f.jsx("div",{className:"mobile-menu-backdrop active lg:hidden",onClick:x,tabIndex:0,onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&x()},"aria-label":"Close mobile menu"}),f.jsxs("div",{className:`lg:hidden px-4 py-4 ${e?"mobile-menu-open":"mobile-menu-closed"} ${r?"bg-stone-800 border-t border-stone-700":"bg-red-50 border-t border-red-200"} shadow-md`,children:[f.jsx(ot,{ref:g,to:"/",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Home"}),f.jsx(ot,{to:"/products",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/products")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Products"}),f.jsx(ot,{to:"/blog",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/blog")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Blog"}),f.jsx(ot,{to:"/faq",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/faq")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"FAQ"}),f.jsx(ot,{to:"/contact",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/contact")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Contact"}),f.jsx(ot,{to:"/nutrition",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/nutrition")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Nutrition"}),o&&f.jsx(ot,{to:"/profile",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/profile")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Profile"}),f.jsx("button",{onClick:()=>{s(),x()},className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${r?"text-red-400":"text-red-800"}`,"aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"☀️ Light Mode":"🌙 Dark Mode"}),u?f.jsx("span",{className:"block py-2 px-3",children:"Loading..."}):o?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:`block py-2 px-3 text-sm ${r?"text-red-400":"text-red-800"}`,children:["Welcome, ",k]}),f.jsx("button",{onClick:()=>{v(),x()},className:"block py-2 px-3 text-left w-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Logout"})]}):f.jsx(ot,{to:"/login",onClick:x,className:"block py-2 px-3 text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Login"})]})]})]})};var $S={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q_=nt.createContext&&nt.createContext($S),Bj=["attr","size","title"];function zj(t,e){if(t==null)return{};var n=Wj(t,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Zh(){return Zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zh.apply(this,arguments)}function K_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ef(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K_(Object(n),!0).forEach(function(r){Hj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hj(t,e,n){return e=qj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qj(t){var e=Kj(t,"string");return typeof e=="symbol"?e:e+""}function Kj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FS(t){return t&&t.map((e,n)=>nt.createElement(e.tag,ef({key:n},e.attr),FS(e.child)))}function Nl(t){return e=>nt.createElement(Gj,Zh({attr:ef({},t.attr)},e),FS(t.child))}function Gj(t){var e=n=>{var{attr:r,size:s,title:o}=t,l=zj(t,Bj),u=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),nt.createElement("svg",Zh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:c,style:ef(ef({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&nt.createElement("title",null,o),t.children)};return q_!==void 0?nt.createElement(q_.Consumer,null,n=>e(n)):e($S)}function Qj(t){return Nl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function Jj(t){return Nl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function Yj(t){return Nl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function Xj(t){return Nl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function Zj(t){return Nl({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function eD(t){return Nl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}const tD=()=>{const{isDarkMode:t}=P.useContext(Ze),{user:e,logout:n}=P.useContext($s),r=Or();return f.jsx("div",{className:`${t?"dark":""}`,children:f.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[f.jsx(Uj,{location:r}),f.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:f.jsx(rS,{})}),f.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[f.jsx("div",{className:"mb-4",children:f.jsxs("div",{className:"flex justify-center space-x-4",children:[f.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:f.jsx(Qj,{size:24})}),f.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:f.jsx(Xj,{size:24})}),f.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:f.jsx(Jj,{size:24})}),f.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:f.jsx(Yj,{size:24})}),f.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:f.jsx(Zj,{size:24})})]})}),f.jsxs("p",{children:["© ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function Dn({to:t,children:e,variant:n,className:r,...s}){const o="px-4 py-2 rounded transition-colors duration-300 ease-in-out",l=n==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return t?f.jsx(ot,{to:t,className:`${o} ${l} ${r}`,...s,children:e}):f.jsx("button",{className:`${o} ${l} ${r}`,...s,children:e})}const nD="/assets/aussie-BleX4DhZ.png",rD="/assets/goggins-BJp9afAd.png",G_=[{src:nD,alt:"Australian Shepherd dog"},{src:rD,alt:"David Goggins running"}],sD=({className:t})=>{const[e,n]=P.useState(0);return P.useEffect(()=>{const r=setInterval(()=>{n(s=>(s+1)%G_.length)},5e3);return()=>clearInterval(r)},[]),f.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:G_.map((r,s)=>f.jsx("img",{src:r.src,alt:r.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${s===e?"opacity-100":"opacity-0"} ${t||""}`},s))})},ly=P.createContext({});function uy(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const cy=typeof window<"u",US=cy?P.useLayoutEffect:P.useEffect,Lf=P.createContext(null),dy=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class iD extends P.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oD({children:t,isPresent:e,anchorX:n}){const r=P.useId(),s=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=P.useContext(dy);return P.useInsertionEffect(()=>{const{width:u,height:c,top:h,left:g,right:v}=o.current;if(e||!s.current||!u||!c)return;const x=n==="left"?`left: ${g}`:`right: ${v}`;s.current.dataset.motionPopId=r;const b=document.createElement("style");return l&&(b.nonce=l),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.removeChild(b)}},[e]),f.jsx(iD,{isPresent:e,childRef:s,sizeRef:o,children:P.cloneElement(t,{ref:s})})}const aD=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const c=uy(lD),h=P.useId(),g=P.useCallback(x=>{c.set(x,!0);for(const b of c.values())if(!b)return;r&&r()},[c,r]),v=P.useMemo(()=>({id:h,initial:e,isPresent:n,custom:s,onExitComplete:g,register:x=>(c.set(x,!1),()=>c.delete(x))}),o?[Math.random(),g]:[n,g]);return P.useMemo(()=>{c.forEach((x,b)=>c.set(b,!1))},[n]),P.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),l==="popLayout"&&(t=f.jsx(oD,{isPresent:n,anchorX:u,children:t})),f.jsx(Lf.Provider,{value:v,children:t})};function lD(){return new Map}function BS(t=!0){const e=P.useContext(Lf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=P.useId();P.useEffect(()=>{if(t)return s(o)},[t]);const l=P.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const wh=t=>t.key||"";function Q_(t){const e=[];return P.Children.forEach(t,n=>{P.isValidElement(n)&&e.push(n)}),e}const Xg=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[c,h]=BS(l),g=P.useMemo(()=>Q_(t),[t]),v=l&&!c?[]:g.map(wh),x=P.useRef(!0),b=P.useRef(g),k=uy(()=>new Map),[O,A]=P.useState(g),[D,V]=P.useState(g);US(()=>{x.current=!1,b.current=g;for(let B=0;B<D.length;B++){const K=wh(D[B]);v.includes(K)?k.delete(K):k.get(K)!==!0&&k.set(K,!1)}},[D,v.length,v.join("-")]);const $=[];if(g!==O){let B=[...g];for(let K=0;K<D.length;K++){const I=D[K],S=wh(I);v.includes(S)||(B.splice(K,0,I),$.push(I))}return o==="wait"&&$.length&&(B=$),V(Q_(B)),A(g),null}const{forceRender:W}=P.useContext(ly);return f.jsx(f.Fragment,{children:D.map(B=>{const K=wh(B),I=l&&!c?!1:g===D||v.includes(K),S=()=>{if(k.has(K))k.set(K,!0);else return;let T=!0;k.forEach(R=>{R||(T=!1)}),T&&(W==null||W(),V(b.current),l&&(h==null||h()),r&&r())};return f.jsx(aD,{isPresent:I,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,onExitComplete:I?void 0:S,anchorX:u,children:B},K)})})};function hy(t,e){t.indexOf(e)===-1&&t.push(e)}function fy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let zS=()=>{};const Zg={useManualTiming:!1};function my(t){let e;return()=>(e===void 0&&(e=t()),e)}const ur=t=>t,fc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class py{constructor(){this.subscriptions=[]}add(e){return hy(this.subscriptions,e),()=>fy(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Jr=t=>t*1e3,Yr=t=>t/1e3;function WS(t,e){return e?t*(1e3/e):0}const uD=my(()=>window.ScrollTimeline!==void 0);class cD{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(uD()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class dD extends cD{then(e,n){return this.finished.finally(e).then(()=>{})}}const J_={value:null},gy=t=>Array.isArray(t)&&typeof t[0]=="number",hD={};function fD(t,e){const n=my(t);return()=>hD[e]??n()}const mc=fD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),HS=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(o/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Wu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,e0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wu([0,.65,.55,1]),circOut:Wu([.55,0,1,.45]),backIn:Wu([.31,.01,.66,-.59]),backOut:Wu([.33,1.53,.69,.99])};function qS(t,e){if(t)return typeof t=="function"&&mc()?HS(t,e):gy(t)?Wu(t):Array.isArray(t)?t.map(n=>qS(n,e)||e0.easeOut):e0[t]}function mD(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:c}={},h=void 0){const g={[e]:n};c&&(g.offset=c);const v=qS(u,s);return Array.isArray(v)&&(g.easing=v),t.animate(g,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal",pseudoElement:h})}function yy(t){return typeof t=="function"&&"applyToOptions"in t}function vy(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const tf=2e4;function xy(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<tf;)e+=n,r=t.next(e);return e>=tf?1/0:e}function pD(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(xy(r),tf);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:Yr(s)}}function KS(t){return!!(typeof t=="function"&&mc()||!t||typeof t=="string"&&(t in e0||mc())||gy(t)||Array.isArray(t)&&t.every(KS))}function Y_(t,e){t.timeline=e,t.onfinish=null}const _h=["read","resolveKeyframes","update","preRender","render","postRender"];function gD(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},c=0;function h(v){l.has(v)&&(g.schedule(v),t()),c++,v(u)}const g={schedule:(v,x=!1,b=!1)=>{const O=b&&s?n:r;return x&&l.add(v),O.has(v)||O.add(v),v},cancel:v=>{r.delete(v),l.delete(v)},process:v=>{if(u=v,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(h),e&&J_.value&&J_.value.frameloop[e].push(c),c=0,n.clear(),s=!1,o&&(o=!1,g.process(v))}};return g}const yD=40;function GS(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=_h.reduce((D,V)=>(D[V]=gD(o,e?V:void 0),D),{}),{read:u,resolveKeyframes:c,update:h,preRender:g,render:v,postRender:x}=l,b=()=>{const D=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(D-s.timestamp,yD),1),s.timestamp=D,s.isProcessing=!0,u.process(s),c.process(s),h.process(s),g.process(s),v.process(s),x.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(b))},k=()=>{n=!0,r=!0,s.isProcessing||t(b)};return{schedule:_h.reduce((D,V)=>{const $=l[V];return D[V]=(W,B=!1,K=!1)=>(n||k(),$.schedule(W,B,K)),D},{}),cancel:D=>{for(let V=0;V<_h.length;V++)l[_h[V]].cancel(D)},state:s,steps:l}}const{schedule:wy}=GS(queueMicrotask,!1),{schedule:at,cancel:Ri,state:en,steps:lg}=GS(typeof requestAnimationFrame<"u"?requestAnimationFrame:ur,!0);let Oh;function vD(){Oh=void 0}const Xr={now:()=>(Oh===void 0&&Xr.set(en.isProcessing||Zg.useManualTiming?en.timestamp:performance.now()),Oh),set:t=>{Oh=t,queueMicrotask(vD)}},Pr={x:!1,y:!1};function QS(){return Pr.x||Pr.y}function xD(t){return t==="x"||t==="y"?Pr[t]?null:(Pr[t]=!0,()=>{Pr[t]=!1}):Pr.x||Pr.y?null:(Pr.x=Pr.y=!0,()=>{Pr.x=Pr.y=!1})}function wD(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function JS(t,e){const n=wD(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function X_(t){return!(t.pointerType==="touch"||QS())}function _D(t,e,n={}){const[r,s,o]=JS(t,n),l=u=>{if(!X_(u))return;const{target:c}=u,h=e(c,u);if(typeof h!="function"||!c)return;const g=v=>{X_(v)&&(h(v),c.removeEventListener("pointerleave",g))};c.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}const YS=(t,e)=>e?t===e?!0:YS(t,e.parentElement):!1,_y=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,bD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ED(t){return bD.has(t.tagName)||t.tabIndex!==-1}const Hu=new WeakSet;function Z_(t){return e=>{e.key==="Enter"&&t(e)}}function ug(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const TD=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Z_(()=>{if(Hu.has(n))return;ug(n,"down");const s=Z_(()=>{ug(n,"up")}),o=()=>ug(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function eb(t){return _y(t)&&!QS()}function SD(t,e,n={}){const[r,s,o]=JS(t,n),l=u=>{const c=u.currentTarget;if(!eb(u)||Hu.has(c))return;Hu.add(c);const h=e(c,u),g=(b,k)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",x),!(!eb(b)||!Hu.has(c))&&(Hu.delete(c),typeof h=="function"&&h(b,{success:k}))},v=b=>{g(b,c===window||c===document||n.useGlobalTarget||YS(c,b.target))},x=b=>{g(b,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",x,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),u instanceof HTMLElement&&(u.addEventListener("focus",h=>TD(h,s)),!ED(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}const tb=30,kD=t=>!isNaN(parseFloat(t));class CD{constructor(e,n={}){this.version="12.7.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Xr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=kD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new py);const r=this.events[e].add(n);return e==="change"?()=>{r(),at.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tb);return WS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pc(t,e){return new CD(t,e)}const XS=P.createContext({strict:!1}),nb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yl={};for(const t in nb)yl[t]={isEnabled:e=>nb[t].some(n=>!!e[n])};function PD(t){for(const e in t)yl[e]={...yl[e],...t[e]}}const AD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||AD.has(t)}let ZS=t=>!nf(t);function ID(t){t&&(ZS=e=>e.startsWith("on")?!nf(e):t(e))}try{ID(require("@emotion/is-prop-valid").default)}catch{}function RD(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(ZS(s)||n===!0&&nf(s)||!e&&!nf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function ND(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Mf=P.createContext({});function Vf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function gc(t){return typeof t=="string"||Array.isArray(t)}const by=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ey=["initial",...by];function $f(t){return Vf(t.animate)||Ey.some(e=>gc(t[e]))}function ek(t){return!!($f(t)||t.variants)}function jD(t,e){if($f(t)){const{initial:n,animate:r}=t;return{initial:n===!1||gc(n)?n:void 0,animate:gc(r)?r:void 0}}return t.inherit!==!1?e:{}}function DD(t){const{initial:e,animate:n}=jD(t,P.useContext(Mf));return P.useMemo(()=>({initial:e,animate:n}),[rb(e),rb(n)])}function rb(t){return Array.isArray(t)?t.join(" "):t}const OD=Symbol.for("motionComponentSymbol");function el(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function LD(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):el(n)&&(n.current=r))},[e])}const Ty=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MD="framerAppearId",tk="data-"+Ty(MD),nk=P.createContext({});function VD(t,e,n,r,s){var O,A;const{visualElement:o}=P.useContext(Mf),l=P.useContext(XS),u=P.useContext(Lf),c=P.useContext(dy).reducedMotion,h=P.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const g=h.current,v=P.useContext(nk);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&$D(h.current,n,s,v);const x=P.useRef(!1);P.useInsertionEffect(()=>{g&&x.current&&g.update(n,u)});const b=n[tk],k=P.useRef(!!b&&!((O=window.MotionHandoffIsComplete)!=null&&O.call(window,b))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,b)));return US(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),wy.render(g.render),k.current&&g.animationState&&g.animationState.animateChanges())}),P.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)==null||D.call(window,b)}),k.current=!1))}),g}function $D(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:c,layoutRoot:h,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:rk(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&el(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:c,layoutRoot:h})}function rk(t){if(t)return t.options.allowProjection!==!1?t.projection:rk(t.parent)}function FD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&PD(t);function o(u,c){let h;const g={...P.useContext(dy),...u,layoutId:UD(u)},{isStatic:v}=g,x=DD(u),b=r(u,v);if(!v&&cy){BD();const k=zD(g);h=k.MeasureLayout,x.visualElement=VD(s,b,g,e,k.ProjectionNode)}return f.jsxs(Mf.Provider,{value:x,children:[h&&x.visualElement?f.jsx(h,{visualElement:x.visualElement,...g}):null,n(s,u,LD(b,x.visualElement,c),b,v,x.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const l=P.forwardRef(o);return l[OD]=s,l}function UD({layoutId:t}){const e=P.useContext(ly).id;return e&&t!==void 0?e+"-"+t:t}function BD(t,e){P.useContext(XS).strict}function zD(t){const{drag:e,layout:n}=yl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const sk=t=>e=>typeof e=="string"&&e.startsWith(t),Sy=sk("--"),WD=sk("var(--"),ky=t=>WD(t)?HD.test(t.split("/*")[0].trim()):!1,HD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yc={};function qD(t){for(const e in t)yc[e]=t[e],Sy(e)&&(yc[e].isCSSVariable=!0)}const jl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wo=new Set(jl);function ik(t,{layout:e,layoutId:n}){return Wo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!yc[t]||t==="opacity")}const pn=t=>!!(t&&t.getVelocity),ok=(t,e)=>e&&typeof t=="number"?e.transform(t):t,js=(t,e,n)=>n>e?e:n<t?t:n,Dl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},vc={...Dl,transform:t=>js(0,1,t)},bh={...Dl,default:1},Lc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),gi=Lc("deg"),Zr=Lc("%"),Ie=Lc("px"),KD=Lc("vh"),GD=Lc("vw"),sb={...Zr,parse:t=>Zr.parse(t)/100,transform:t=>Zr.transform(t*100)},QD={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie},JD={rotate:gi,rotateX:gi,rotateY:gi,rotateZ:gi,scale:bh,scaleX:bh,scaleY:bh,scaleZ:bh,skew:gi,skewX:gi,skewY:gi,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:vc,originX:sb,originY:sb,originZ:Ie},ib={...Dl,transform:Math.round},Cy={...QD,...JD,zIndex:ib,size:Ie,fillOpacity:vc,strokeOpacity:vc,numOctaves:ib},YD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XD=jl.length;function ZD(t,e,n){let r="",s=!0;for(let o=0;o<XD;o++){const l=jl[o],u=t[l];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(l.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const h=ok(u,Cy[l]);if(!c){s=!1;const g=YD[l]||l;r+=`${g}(${h}) `}n&&(e[l]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Py(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,u=!1;for(const c in e){const h=e[c];if(Wo.has(c)){l=!0;continue}else if(Sy(c)){s[c]=h;continue}else{const g=ok(h,Cy[c]);c.startsWith("origin")?(u=!0,o[c]=g):r[c]=g}}if(e.transform||(l||n?r.transform=ZD(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:h="50%",originZ:g=0}=o;r.transformOrigin=`${c} ${h} ${g}`}}const Ay=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ak(t,e,n){for(const r in e)!pn(e[r])&&!ik(r,n)&&(t[r]=e[r])}function eO({transformTemplate:t},e){return P.useMemo(()=>{const n=Ay();return Py(n,e,t),Object.assign({},n.vars,n.style)},[e])}function tO(t,e){const n=t.style||{},r={};return ak(r,n,t),Object.assign(r,eO(t,e)),r}function nO(t,e){const n={},r=tO(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const rO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Iy(t){return typeof t!="string"||t.includes("-")?!1:!!(rO.indexOf(t)>-1||/[A-Z]/u.test(t))}const sO={offset:"stroke-dashoffset",array:"stroke-dasharray"},iO={offset:"strokeDashoffset",array:"strokeDasharray"};function oO(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?sO:iO;t[o.offset]=Ie.transform(-r);const l=Ie.transform(e),u=Ie.transform(n);t[o.array]=`${l} ${u}`}function ob(t,e,n){return typeof t=="string"?t:Ie.transform(e+n*t)}function aO(t,e,n){const r=ob(e,t.x,t.width),s=ob(n,t.y,t.height);return`${r} ${s}`}function Ry(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:c=0,...h},g,v){if(Py(t,h,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:b,dimensions:k}=t;x.transform&&(k&&(b.transform=x.transform),delete x.transform),k&&(s!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=aO(k,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),l!==void 0&&oO(x,l,u,c,!1)}const lk=()=>({...Ay(),attrs:{}}),Ny=t=>typeof t=="string"&&t.toLowerCase()==="svg";function lO(t,e,n,r){const s=P.useMemo(()=>{const o=lk();return Ry(o,e,Ny(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};ak(o,t.style,t),s.style={...o,...s.style}}return s}function uO(t=!1){return(n,r,s,{latestValues:o},l)=>{const c=(Iy(n)?lO:nO)(r,o,l,n),h=RD(r,typeof n=="string",t),g=n!==P.Fragment?{...h,...c,ref:s}:{},{children:v}=r,x=P.useMemo(()=>pn(v)?v.get():v,[v]);return P.createElement(n,{...g,children:x})}}function ab(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function jy(t,e,n,r){if(typeof e=="function"){const[s,o]=ab(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=ab(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const t0=t=>Array.isArray(t),cO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),dO=t=>t0(t)?t[t.length-1]||0:t;function Lh(t){const e=pn(t)?t.get():t;return cO(e)?e.toValue():e}function hO({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const l={latestValues:fO(r,s,o,t),renderState:e()};return n&&(l.onMount=u=>n({props:r,current:u,...l}),l.onUpdate=u=>n(u)),l}const uk=t=>(e,n)=>{const r=P.useContext(Mf),s=P.useContext(Lf),o=()=>hO(t,e,r,s);return n?o():uy(o)};function fO(t,e,n,r){const s={},o=r(t,{});for(const x in o)s[x]=Lh(o[x]);let{initial:l,animate:u}=t;const c=$f(t),h=ek(t);e&&h&&!c&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!Vf(v)){const x=Array.isArray(v)?v:[v];for(let b=0;b<x.length;b++){const k=jy(t,x[b]);if(k){const{transitionEnd:O,transition:A,...D}=k;for(const V in D){let $=D[V];if(Array.isArray($)){const W=g?$.length-1:0;$=$[W]}$!==null&&(s[V]=$)}for(const V in O)s[V]=O[V]}}}return s}function Dy(t,e,n){var o;const{style:r}=t,s={};for(const l in r)(pn(r[l])||e.style&&pn(e.style[l])||ik(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(s[l]=r[l]);return s}const mO={useVisualState:uk({scrapeMotionValuesFromProps:Dy,createRenderState:Ay})};function ck(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function dk(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const hk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fk(t,e,n,r){dk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(hk.has(s)?s:Ty(s),e.attrs[s])}function mk(t,e,n){const r=Dy(t,e,n);for(const s in t)if(pn(t[s])||pn(e[s])){const o=jl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const lb=["x","y","width","height","cx","cy","r"],pO={useVisualState:uk({scrapeMotionValuesFromProps:mk,createRenderState:lk,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in s)if(Wo.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<lb.length;u++){const c=lb[u];t[c]!==e[c]&&(l=!0)}l&&at.read(()=>{ck(n,r),at.render(()=>{Ry(r,s,Ny(n.tagName),t.transformTemplate),fk(n,r)})})}})};function gO(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...Iy(r)?pO:mO,preloadedFeatures:t,useRender:uO(s),createVisualElement:e,Component:r};return FD(l)}}function xc(t,e,n){const r=t.getProps();return jy(r,e,n!==void 0?n:r.custom,t)}const pk=new Set(["width","height","top","left","right","bottom",...jl]);function yO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pc(n))}function vO(t,e){const n=xc(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const u=dO(o[l]);yO(t,l,u)}}function xO(t){return!!(pn(t)&&t.add)}function n0(t,e){const n=t.getValue("willChange");if(xO(n))return n.add(e);if(!n&&Zg.WillChange){const r=new Zg.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function gk(t){return t.props[tk]}const yk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,wO=1e-7,_O=12;function bO(t,e,n,r,s){let o,l,u=0;do l=e+(n-e)/2,o=yk(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>wO&&++u<_O);return l}function Mc(t,e,n,r){if(t===e&&n===r)return ur;const s=o=>bO(o,0,1,t,n);return o=>o===0||o===1?o:yk(s(o),e,r)}const vk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xk=t=>e=>1-t(1-e),wk=Mc(.33,1.53,.69,.99),Oy=xk(wk),_k=vk(Oy),bk=t=>(t*=2)<1?.5*Oy(t):.5*(2-Math.pow(2,-10*(t-1))),Ly=t=>1-Math.sin(Math.acos(t)),Ek=xk(Ly),Tk=vk(Ly),Sk=t=>/^0[^.\s]+$/u.test(t);function EO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Sk(t):!0}const tc=t=>Math.round(t*1e5)/1e5,My=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TO(t){return t==null}const SO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Vy=(t,e)=>n=>!!(typeof n=="string"&&SO.test(n)&&n.startsWith(t)||e&&!TO(n)&&Object.prototype.hasOwnProperty.call(n,e)),kk=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,u]=r.match(My);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},kO=t=>js(0,255,t),cg={...Dl,transform:t=>Math.round(kO(t))},Io={test:Vy("rgb","red"),parse:kk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+cg.transform(t)+", "+cg.transform(e)+", "+cg.transform(n)+", "+tc(vc.transform(r))+")"};function CO(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const r0={test:Vy("#"),parse:CO,transform:Io.transform},tl={test:Vy("hsl","hue"),parse:kk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Zr.transform(tc(e))+", "+Zr.transform(tc(n))+", "+tc(vc.transform(r))+")"},hn={test:t=>Io.test(t)||r0.test(t)||tl.test(t),parse:t=>Io.test(t)?Io.parse(t):tl.test(t)?tl.parse(t):r0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Io.transform(t):tl.transform(t)},PO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function AO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(My))==null?void 0:e.length)||0)+(((n=t.match(PO))==null?void 0:n.length)||0)>0}const Ck="number",Pk="color",IO="var",RO="var(",ub="${}",NO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(NO,c=>(hn.test(c)?(r.color.push(o),s.push(Pk),n.push(hn.parse(c))):c.startsWith(RO)?(r.var.push(o),s.push(IO),n.push(c)):(r.number.push(o),s.push(Ck),n.push(parseFloat(c))),++o,ub)).split(ub);return{values:n,split:u,indexes:r,types:s}}function Ak(t){return wc(t).values}function Ik(t){const{split:e,types:n}=wc(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const u=n[l];u===Ck?o+=tc(s[l]):u===Pk?o+=hn.transform(s[l]):o+=s[l]}return o}}const jO=t=>typeof t=="number"?0:t;function DO(t){const e=Ak(t);return Ik(t)(e.map(jO))}const Ni={test:AO,parse:Ak,createTransformer:Ik,getAnimatableNone:DO},OO=new Set(["brightness","contrast","saturate","opacity"]);function LO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(My)||[];if(!r)return t;const s=n.replace(r,"");let o=OO.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const MO=/\b([a-z-]*)\(.*?\)/gu,s0={...Ni,getAnimatableNone:t=>{const e=t.match(MO);return e?e.map(LO).join(" "):t}},VO={...Cy,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:s0,WebkitFilter:s0},Rk=t=>VO[t];function Nk(t,e){let n=Rk(t);return n!==s0&&(n=Ni),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $O=new Set(["auto","none","0"]);function FO(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!$O.has(o)&&wc(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=Nk(n,s)}const Ro=t=>t*180/Math.PI,i0=t=>{const e=Ro(Math.atan2(t[1],t[0]));return o0(e)},UO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:i0,rotateZ:i0,skewX:t=>Ro(Math.atan(t[1])),skewY:t=>Ro(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},o0=t=>(t=t%360,t<0&&(t+=360),t),cb=i0,db=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),hb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),BO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:db,scaleY:hb,scale:t=>(db(t)+hb(t))/2,rotateX:t=>o0(Ro(Math.atan2(t[6],t[5]))),rotateY:t=>o0(Ro(Math.atan2(-t[2],t[0]))),rotateZ:cb,rotate:cb,skewX:t=>Ro(Math.atan(t[4])),skewY:t=>Ro(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function fb(t){return t.includes("scale")?1:0}function a0(t,e){if(!t||t==="none")return fb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=BO,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=UO,s=u}if(!s)return fb(e);const o=r[e],l=s[1].split(",").map(WO);return typeof o=="function"?o(l):l[o]}const zO=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return a0(n,e)};function WO(t){return parseFloat(t.trim())}const mb=t=>t===Dl||t===Ie,HO=new Set(["x","y","z"]),qO=jl.filter(t=>!HO.has(t));function KO(t){const e=[];return qO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const vl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>a0(e,"x"),y:(t,{transform:e})=>a0(e,"y")};vl.translateX=vl.x;vl.translateY=vl.y;const Do=new Set;let l0=!1,u0=!1;function jk(){if(u0){const t=Array.from(Do).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=KO(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{var u;(u=r.getValue(o))==null||u.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}u0=!1,l0=!1,Do.forEach(t=>t.complete()),Do.clear()}function Dk(){Do.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(u0=!0)})}function GO(){Dk(),jk()}class $y{constructor(e,n,r,s,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Do.add(this),l0||(l0=!0,at.read(Dk),at.resolveKeyframes(jk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=s==null?void 0:s.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&n){const c=r.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),s&&l===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Do.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Do.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ok=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),QO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JO(t){const e=QO.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Lk(t,e,n=1){const[r,s]=JO(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return Ok(l)?parseFloat(l):l}return ky(s)?Lk(s,e,n+1):s}const Mk=t=>e=>e.test(t),YO={test:t=>t==="auto",parse:t=>t},Vk=[Dl,Ie,Zr,gi,GD,KD,YO],pb=t=>Vk.find(Mk(t));class $k extends $y{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),ky(h))){const g=Lk(h,n.current);g!==void 0&&(e[c]=g),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!pk.has(r)||e.length!==2)return;const[s,o]=e,l=pb(s),u=pb(o);if(l!==u)if(mb(l)&&mb(u))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)EO(e[s])&&r.push(s);r.length&&FO(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=vl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([c,h])=>{e.getValue(c).set(h)}),this.resolveNoneKeyframes()}}const gb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ni.test(t)||t==="0")&&!t.startsWith("url("));function XO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ZO(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=gb(s,e),u=gb(o,e);return!l||!u?!1:XO(t)||(n==="spring"||yy(n))&&r}const e4=t=>t!==null;function Ff(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(e4),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const t4=40;class Fk{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Xr.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>t4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&GO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Xr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:l,onComplete:u,onUpdate:c,isGenerator:h}=this.options;if(!h&&!ZO(e,r,s,o))if(l)this.options.duration=0;else{c&&c(Ff(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const yt=(t,e,n)=>t+(e-t)*n;function dg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function n4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;s=dg(c,u,t+1/3),o=dg(c,u,t),l=dg(c,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function rf(t,e){return n=>n>0?e:t}const hg=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},r4=[r0,Io,tl],s4=t=>r4.find(e=>e.test(t));function yb(t){const e=s4(t);if(!e)return!1;let n=e.parse(t);return e===tl&&(n=n4(n)),n}const vb=(t,e)=>{const n=yb(t),r=yb(e);if(!n||!r)return rf(t,e);const s={...n};return o=>(s.red=hg(n.red,r.red,o),s.green=hg(n.green,r.green,o),s.blue=hg(n.blue,r.blue,o),s.alpha=yt(n.alpha,r.alpha,o),Io.transform(s))},i4=(t,e)=>n=>e(t(n)),Vc=(...t)=>t.reduce(i4),c0=new Set(["none","hidden"]);function o4(t,e){return c0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function a4(t,e){return n=>yt(t,e,n)}function Fy(t){return typeof t=="number"?a4:typeof t=="string"?ky(t)?rf:hn.test(t)?vb:c4:Array.isArray(t)?Uk:typeof t=="object"?hn.test(t)?vb:l4:rf}function Uk(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>Fy(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function l4(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Fy(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function u4(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],u=t.values[l]??0;n[s]=u,r[o]++}return n}const c4=(t,e)=>{const n=Ni.createTransformer(e),r=wc(t),s=wc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?c0.has(t)&&!s.values.length||c0.has(e)&&!r.values.length?o4(t,e):Vc(Uk(u4(r,s),s.values),n):rf(t,e)};function Bk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yt(t,e,n):Fy(t)(t,e)}const d4=5;function zk(t,e,n){const r=Math.max(e-d4,0);return WS(n-t(r),e-r)}const _t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xb=.001;function h4({duration:t=_t.duration,bounce:e=_t.bounce,velocity:n=_t.velocity,mass:r=_t.mass}){let s,o,l=1-e;l=js(_t.minDamping,_t.maxDamping,l),t=js(_t.minDuration,_t.maxDuration,Yr(t)),l<1?(s=h=>{const g=h*l,v=g*t,x=g-n,b=d0(h,l),k=Math.exp(-v);return xb-x/b*k},o=h=>{const v=h*l*t,x=v*n+n,b=Math.pow(l,2)*Math.pow(h,2)*t,k=Math.exp(-v),O=d0(Math.pow(h,2),l);return(-s(h)+xb>0?-1:1)*((x-b)*k)/O}):(s=h=>{const g=Math.exp(-h*t),v=(h-n)*t+1;return-.001+g*v},o=h=>{const g=Math.exp(-h*t),v=(n-h)*(t*t);return g*v});const u=5/t,c=m4(s,o,u);if(t=Jr(t),isNaN(c))return{stiffness:_t.stiffness,damping:_t.damping,duration:t};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const f4=12;function m4(t,e,n){let r=n;for(let s=1;s<f4;s++)r=r-t(r)/e(r);return r}function d0(t,e){return t*Math.sqrt(1-e*e)}const p4=["duration","bounce"],g4=["stiffness","damping","mass"];function wb(t,e){return e.some(n=>t[n]!==void 0)}function y4(t){let e={velocity:_t.velocity,stiffness:_t.stiffness,damping:_t.damping,mass:_t.mass,isResolvedFromDuration:!1,...t};if(!wb(t,g4)&&wb(t,p4))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*js(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:_t.mass,stiffness:s,damping:o}}else{const n=h4(t);e={...e,...n,mass:_t.mass},e.isResolvedFromDuration=!0}return e}function sf(t=_t.visualDuration,e=_t.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:h,mass:g,duration:v,velocity:x,isResolvedFromDuration:b}=y4({...n,velocity:-Yr(n.velocity||0)}),k=x||0,O=h/(2*Math.sqrt(c*g)),A=l-o,D=Yr(Math.sqrt(c/g)),V=Math.abs(A)<5;r||(r=V?_t.restSpeed.granular:_t.restSpeed.default),s||(s=V?_t.restDelta.granular:_t.restDelta.default);let $;if(O<1){const B=d0(D,O);$=K=>{const I=Math.exp(-O*D*K);return l-I*((k+O*D*A)/B*Math.sin(B*K)+A*Math.cos(B*K))}}else if(O===1)$=B=>l-Math.exp(-D*B)*(A+(k+D*A)*B);else{const B=D*Math.sqrt(O*O-1);$=K=>{const I=Math.exp(-O*D*K),S=Math.min(B*K,300);return l-I*((k+O*D*A)*Math.sinh(S)+B*A*Math.cosh(S))/B}}const W={calculatedDuration:b&&v||null,next:B=>{const K=$(B);if(b)u.done=B>=v;else{let I=0;O<1&&(I=B===0?Jr(k):zk($,B,K));const S=Math.abs(I)<=r,T=Math.abs(l-K)<=s;u.done=S&&T}return u.value=u.done?l:K,u},toString:()=>{const B=Math.min(xy(W),tf),K=HS(I=>W.next(B*I).value,B,30);return B+"ms "+K},toTransition:()=>{}};return W}sf.applyToOptions=t=>{const e=pD(t,100,sf);return t.ease=mc()?e.ease:"easeOut",t.duration=Jr(e.duration),t.type="keyframes",t};function _b({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:c,restDelta:h=.5,restSpeed:g}){const v=t[0],x={done:!1,value:v},b=S=>u!==void 0&&S<u||c!==void 0&&S>c,k=S=>u===void 0?c:c===void 0||Math.abs(u-S)<Math.abs(c-S)?u:c;let O=n*e;const A=v+O,D=l===void 0?A:l(A);D!==A&&(O=D-v);const V=S=>-O*Math.exp(-S/r),$=S=>D+V(S),W=S=>{const T=V(S),R=$(S);x.done=Math.abs(T)<=h,x.value=x.done?D:R};let B,K;const I=S=>{b(x.value)&&(B=S,K=sf({keyframes:[x.value,k(x.value)],velocity:zk($,S,x.value),damping:s,stiffness:o,restDelta:h,restSpeed:g}))};return I(0),{calculatedDuration:null,next:S=>{let T=!1;return!K&&B===void 0&&(T=!0,W(S),I(S)),B!==void 0&&S>=B?K.next(S-B):(!T&&W(S),x)}}}const v4=Mc(.42,0,1,1),x4=Mc(0,0,.58,1),Wk=Mc(.42,0,.58,1),w4=t=>Array.isArray(t)&&typeof t[0]!="number",_4={linear:ur,easeIn:v4,easeInOut:Wk,easeOut:x4,circIn:Ly,circInOut:Tk,circOut:Ek,backIn:Oy,backInOut:_k,backOut:wk,anticipate:bk},bb=t=>{if(gy(t)){zS(t.length===4);const[e,n,r,s]=t;return Mc(e,n,r,s)}else if(typeof t=="string")return _4[t];return t};function b4(t,e,n){const r=[],s=n||Bk,o=t.length-1;for(let l=0;l<o;l++){let u=s(t[l],t[l+1]);if(e){const c=Array.isArray(e)?e[l]||ur:e;u=Vc(c,u)}r.push(u)}return r}function E4(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(zS(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=b4(e,r,s),c=u.length,h=g=>{if(l&&g<t[0])return e[0];let v=0;if(c>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const x=fc(t[v],t[v+1],g);return u[v](x)};return n?g=>h(js(t[0],t[o-1],g)):h}function T4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=fc(0,e,r);t.push(yt(n,1,s))}}function S4(t){const e=[0];return T4(e,t.length-1),e}function k4(t,e){return t.map(n=>n*e)}function C4(t,e){return t.map(()=>e||Wk).splice(0,t.length-1)}function of({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=w4(r)?r.map(bb):bb(r),o={done:!1,value:e[0]},l=k4(n&&n.length===e.length?n:S4(e),t),u=E4(l,e,{ease:Array.isArray(s)?s:C4(e,s)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}const P4=t=>{const e=({timestamp:n})=>t(n);return{start:()=>at.update(e,!0),stop:()=>Ri(e),now:()=>en.isProcessing?en.timestamp:Xr.now()}},A4={decay:_b,inertia:_b,tween:of,keyframes:of,spring:sf},I4=t=>t/100;class Uy extends Fk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,l=(s==null?void 0:s.KeyframeResolver)||$y,u=(c,h)=>this.onKeyframesResolved(c,h);this.resolver=new l(o,u,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=this.options,u=yy(n)?n:A4[n]||of;let c,h;u!==of&&typeof e[0]!="number"&&(c=Vc(I4,Bk(e[0],e[1])),e=[0,100]);const g=u({...this.options,keyframes:e});o==="mirror"&&(h=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=xy(g));const{calculatedDuration:v}=g,x=v+s,b=x*(r+1)-s;return{generator:g,mirroredGenerator:h,mapPercentToKeyframes:c,calculatedDuration:v,resolvedDuration:x,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:h,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:x,repeat:b,repeatType:k,repeatDelay:O,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const D=this.currentTime-x*(this.speed>=0?1:-1),V=this.speed>=0?D<0:D>g;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let $=this.currentTime,W=o;if(b){const S=Math.min(this.currentTime,g)/v;let T=Math.floor(S),R=S%1;!R&&S>=1&&(R=1),R===1&&T--,T=Math.min(T,b+1),!!(T%2)&&(k==="reverse"?(R=1-R,O&&(R-=O/v)):k==="mirror"&&(W=l)),$=js(0,1,R)*v}const B=V?{done:!1,value:c[0]}:W.next($);u&&(B.value=u(B.value));let{done:K}=B;!V&&h!==null&&(K=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return I&&s!==void 0&&(B.value=Ff(c,this.options,s)),A&&A(B.value),I&&this.finish(),B}get duration(){const{resolved:e}=this;return e?Yr(e.calculatedDuration):0}get time(){return Yr(this.currentTime)}set time(e){e=Jr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Yr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=P4,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const R4=new Set(["opacity","clipPath","filter","transform"]),N4=my(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),af=10,j4=2e4;function D4(t){return yy(t.type)||t.type==="spring"||!KS(t.ease)}function O4(t,e){const n=new Uy({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<j4;)r=n.sample(o),s.push(r.value),o+=af;return{times:void 0,keyframes:s,duration:o-af,ease:"linear"}}const Hk={anticipate:bk,backInOut:_k,circInOut:Tk};function L4(t){return t in Hk}class Eb extends Fk{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new $k(o,(l,u)=>this.onKeyframesResolved(l,u),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:l,motionValue:u,name:c,startTime:h}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&mc()&&L4(o)&&(o=Hk[o]),D4(this.options)){const{onComplete:v,onUpdate:x,motionValue:b,element:k,...O}=this.options,A=O4(e,O);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,s=A.times,o=A.ease,l="keyframes"}const g=mD(u.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return g.startTime=h??this.calcStartTime(),this.pendingTimeline?(Y_(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;u.set(Ff(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Yr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Yr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Jr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ur;const{animation:r}=n;Y_(r,e)}return ur}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:l,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:g,onComplete:v,element:x,...b}=this.options,k=new Uy({...b,keyframes:r,duration:s,type:o,ease:l,times:u,isGenerator:!0}),O=Jr(this.time);h.setWithVelocity(k.sample(O-af).value,k.sample(O).value,af)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:l,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=n.owner.getProps();return N4()&&r&&R4.has(r)&&(r!=="transform"||!h)&&!c&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}}const M4={type:"spring",stiffness:500,damping:25,restSpeed:10},V4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$4={type:"keyframes",duration:.8},F4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},U4=(t,{keyframes:e})=>e.length>2?$4:Wo.has(t)?t.startsWith("scale")?V4(e[1]):M4:F4;function B4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:c,elapsed:h,...g}){return!!Object.keys(g).length}const By=(t,e,n,r={},s,o)=>l=>{const u=vy(r,t)||{},c=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Jr(c);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:s};B4(u)||(g={...g,...U4(t,g)}),g.duration&&(g.duration=Jr(g.duration)),g.repeatDelay&&(g.repeatDelay=Jr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const x=Ff(g.keyframes,u);if(x!==void 0)return at.update(()=>{g.onUpdate(x),g.onComplete()}),new dD([])}return!o&&Eb.supports(g)?new Eb(g):new Uy(g)};function z4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function qk(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(o=r);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const g in u){const v=t.getValue(g,t.latestValues[g]??null),x=u[g];if(x===void 0||h&&z4(h,g))continue;const b={delay:n,...vy(o||{},g)};let k=!1;if(window.MotionHandoffAnimation){const A=gk(t);if(A){const D=window.MotionHandoffAnimation(A,g,at);D!==null&&(b.startTime=D,k=!0)}}n0(t,g),v.start(By(g,v,x,t.shouldReduceMotion&&pk.has(g)?{type:!1}:b,t,k));const O=v.animation;O&&c.push(O)}return l&&Promise.all(c).then(()=>{at.update(()=>{l&&vO(t,l)})}),c}function h0(t,e,n={}){var c;const r=xc(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(qk(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:x}=s;return W4(t,e,g+h,v,x,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[h,g]=u==="beforeChildren"?[o,l]:[l,o];return h().then(()=>g())}else return Promise.all([o(),l(n.delay)])}function W4(t,e,n=0,r=0,s=1,o){const l=[],u=(t.variantChildren.size-1)*r,c=s===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(t.variantChildren).sort(H4).forEach((h,g)=>{h.notify("AnimationStart",e),l.push(h0(h,e,{...o,delay:n+c(g)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function H4(t,e){return t.sortNodePosition(e)}function q4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>h0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=h0(t,e,n);else{const s=typeof e=="function"?xc(t,e,n.custom):e;r=Promise.all(qk(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Kk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const K4=Ey.length;function Gk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Gk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<K4;n++){const r=Ey[n],s=t.props[r];(gc(s)||s===!1)&&(e[r]=s)}return e}const G4=[...by].reverse(),Q4=by.length;function J4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>q4(t,n,r)))}function Y4(t){let e=J4(t),n=Tb(),r=!0;const s=c=>(h,g)=>{var x;const v=xc(t,g,c==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(v){const{transition:b,transitionEnd:k,...O}=v;h={...h,...O,...k}}return h};function o(c){e=c(t)}function l(c){const{props:h}=t,g=Gk(t.parent)||{},v=[],x=new Set;let b={},k=1/0;for(let A=0;A<Q4;A++){const D=G4[A],V=n[D],$=h[D]!==void 0?h[D]:g[D],W=gc($),B=D===c?V.isActive:null;B===!1&&(k=A);let K=$===g[D]&&$!==h[D]&&W;if(K&&r&&t.manuallyAnimateOnMount&&(K=!1),V.protectedKeys={...b},!V.isActive&&B===null||!$&&!V.prevProp||Vf($)||typeof $=="boolean")continue;const I=X4(V.prevProp,$);let S=I||D===c&&V.isActive&&!K&&W||A>k&&W,T=!1;const R=Array.isArray($)?$:[$];let j=R.reduce(s(D),{});B===!1&&(j={});const{prevResolvedValues:F={}}=V,L={...F,...j},ge=be=>{S=!0,x.has(be)&&(T=!0,x.delete(be)),V.needsAnimating[be]=!0;const ce=t.getValue(be);ce&&(ce.liveStyle=!1)};for(const be in L){const ce=j[be],J=F[be];if(b.hasOwnProperty(be))continue;let te=!1;t0(ce)&&t0(J)?te=!Kk(ce,J):te=ce!==J,te?ce!=null?ge(be):x.add(be):ce!==void 0&&x.has(be)?ge(be):V.protectedKeys[be]=!0}V.prevProp=$,V.prevResolvedValues=j,V.isActive&&(b={...b,...j}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(K&&I)||T)&&v.push(...R.map(be=>({animation:be,options:{type:D}})))}if(x.size){const A={};if(typeof h.initial!="boolean"){const D=xc(t,Array.isArray(h.initial)?h.initial[0]:h.initial);D&&D.transition&&(A.transition=D.transition)}x.forEach(D=>{const V=t.getBaseTarget(D),$=t.getValue(D);$&&($.liveStyle=!0),A[D]=V??null}),v.push({animation:A})}let O=!!v.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(O=!1),r=!1,O?e(v):Promise.resolve()}function u(c,h){var v;if(n[c].isActive===h)return Promise.resolve();(v=t.variantChildren)==null||v.forEach(x=>{var b;return(b=x.animationState)==null?void 0:b.setActive(c,h)}),n[c].isActive=h;const g=l(c);for(const x in n)n[x].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Tb(),r=!0}}}function X4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Kk(e,t):!1}function bo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tb(){return{animate:bo(!0),whileInView:bo(),whileHover:bo(),whileTap:bo(),whileDrag:bo(),whileFocus:bo(),exit:bo()}}class Bi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Z4 extends Bi{constructor(e){super(e),e.animationState||(e.animationState=Y4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let eL=0;class tL extends Bi{constructor(){super(...arguments),this.id=eL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const nL={animation:{Feature:Z4},exit:{Feature:tL}};function _c(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function $c(t){return{point:{x:t.pageX,y:t.pageY}}}const rL=t=>e=>_y(e)&&t(e,$c(e));function nc(t,e,n,r){return _c(t,e,rL(n),r)}function Qk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function sL({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iL(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Jk=1e-4,oL=1-Jk,aL=1+Jk,Yk=.01,lL=0-Yk,uL=0+Yk;function bn(t){return t.max-t.min}function cL(t,e,n){return Math.abs(t-e)<=n}function Sb(t,e,n,r=.5){t.origin=r,t.originPoint=yt(e.min,e.max,t.origin),t.scale=bn(n)/bn(e),t.translate=yt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=oL&&t.scale<=aL||isNaN(t.scale))&&(t.scale=1),(t.translate>=lL&&t.translate<=uL||isNaN(t.translate))&&(t.translate=0)}function rc(t,e,n,r){Sb(t.x,e.x,n.x,r?r.originX:void 0),Sb(t.y,e.y,n.y,r?r.originY:void 0)}function kb(t,e,n){t.min=n.min+e.min,t.max=t.min+bn(e)}function dL(t,e,n){kb(t.x,e.x,n.x),kb(t.y,e.y,n.y)}function Cb(t,e,n){t.min=e.min-n.min,t.max=t.min+bn(e)}function sc(t,e,n){Cb(t.x,e.x,n.x),Cb(t.y,e.y,n.y)}const Pb=()=>({translate:0,scale:1,origin:0,originPoint:0}),nl=()=>({x:Pb(),y:Pb()}),Ab=()=>({min:0,max:0}),Pt=()=>({x:Ab(),y:Ab()});function or(t){return[t("x"),t("y")]}function fg(t){return t===void 0||t===1}function f0({scale:t,scaleX:e,scaleY:n}){return!fg(t)||!fg(e)||!fg(n)}function ko(t){return f0(t)||Xk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Xk(t){return Ib(t.x)||Ib(t.y)}function Ib(t){return t&&t!=="0%"}function lf(t,e,n){const r=t-n,s=e*r;return n+s}function Rb(t,e,n,r,s){return s!==void 0&&(t=lf(t,s,r)),lf(t,n,r)+e}function m0(t,e=0,n=1,r,s){t.min=Rb(t.min,e,n,r,s),t.max=Rb(t.max,e,n,r,s)}function Zk(t,{x:e,y:n}){m0(t.x,e.translate,e.scale,e.originPoint),m0(t.y,n.translate,n.scale,n.originPoint)}const Nb=.999999999999,jb=1.0000000000001;function hL(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=n[u],l=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&sl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,Zk(t,l)),r&&ko(o.latestValues)&&sl(t,o.latestValues))}e.x<jb&&e.x>Nb&&(e.x=1),e.y<jb&&e.y>Nb&&(e.y=1)}function rl(t,e){t.min=t.min+e,t.max=t.max+e}function Db(t,e,n,r,s=.5){const o=yt(t.min,t.max,s);m0(t,e,n,o,r)}function sl(t,e){Db(t.x,e.x,e.scaleX,e.scale,e.originX),Db(t.y,e.y,e.scaleY,e.scale,e.originY)}function eC(t,e){return Qk(iL(t.getBoundingClientRect(),e))}function fL(t,e,n){const r=eC(t,n),{scroll:s}=e;return s&&(rl(r.x,s.offset.x),rl(r.y,s.offset.y)),r}const tC=({current:t})=>t?t.ownerDocument.defaultView:null,Ob=(t,e)=>Math.abs(t-e);function mL(t,e){const n=Ob(t.x,e.x),r=Ob(t.y,e.y);return Math.sqrt(n**2+r**2)}class nC{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=pg(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=mL(v.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:k}=v,{timestamp:O}=en;this.history.push({...k,timestamp:O});const{onStart:A,onMove:D}=this.handlers;x||(A&&A(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=mg(x,this.transformPagePoint),at.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{this.end();const{onEnd:b,onSessionEnd:k,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=pg(v.type==="pointercancel"?this.lastMoveEventInfo:mg(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,A),k&&k(v,A)},!_y(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const l=$c(e),u=mg(l,this.transformPagePoint),{point:c}=u,{timestamp:h}=en;this.history=[{...c,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,pg(u,this.history)),this.removeListeners=Vc(nc(this.contextWindow,"pointermove",this.handlePointerMove),nc(this.contextWindow,"pointerup",this.handlePointerUp),nc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ri(this.updatePoint)}}function mg(t,e){return e?{point:e(t.point)}:t}function Lb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function pg({point:t},e){return{point:t,delta:Lb(t,rC(e)),offset:Lb(t,pL(e)),velocity:gL(e,.1)}}function pL(t){return t[0]}function rC(t){return t[t.length-1]}function gL(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=rC(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Jr(e)));)n--;if(!r)return{x:0,y:0};const o=Yr(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function yL(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yt(n,t,r.max):Math.min(t,n)),t}function Mb(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vL(t,{top:e,left:n,bottom:r,right:s}){return{x:Mb(t.x,n,s),y:Mb(t.y,e,r)}}function Vb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function xL(t,e){return{x:Vb(t.x,e.x),y:Vb(t.y,e.y)}}function wL(t,e){let n=.5;const r=bn(t),s=bn(e);return s>r?n=fc(e.min,e.max-r,t.min):r>s&&(n=fc(t.min,t.max-s,e.min)),js(0,1,n)}function _L(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const p0=.35;function bL(t=p0){return t===!1?t=0:t===!0&&(t=p0),{x:$b(t,"left","right"),y:$b(t,"top","bottom")}}function $b(t,e,n){return{min:Fb(t,e),max:Fb(t,n)}}function Fb(t,e){return typeof t=="number"?t:t[e]||0}const EL=new WeakMap;class TL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor($c(g).point)},o=(g,v)=>{const{drag:x,dragPropagation:b,onDragStart:k}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xD(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),or(A=>{let D=this.getAxisMotionValue(A).get()||0;if(Zr.test(D)){const{projection:V}=this.visualElement;if(V&&V.layout){const $=V.layout.layoutBox[A];$&&(D=bn($)*(parseFloat(D)/100))}}this.originPoint[A]=D}),k&&at.postRender(()=>k(g,v)),n0(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:k,onDrag:O}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:A}=v;if(b&&this.currentDirection===null){this.currentDirection=SL(A),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",v.point,A),this.updateAxis("y",v.point,A),this.visualElement.render(),O&&O(g,v)},u=(g,v)=>this.stop(g,v),c=()=>or(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)==null?void 0:v.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new nC(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:tC(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&at.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Eh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=yL(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&el(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=vL(r.layoutBox,e):this.constraints=!1,this.elastic=bL(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&or(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=_L(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!el(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=fL(r,s.root,this.visualElement.getTransformPagePoint());let l=xL(s.layout.layoutBox,o);if(n){const u=n(sL(l));this.hasMutatedConstraints=!!u,u&&(l=Qk(u))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},h=or(g=>{if(!Eh(g,n,this.currentDirection))return;let v=c&&c[g]||{};l&&(v={min:0,max:0});const x=s?200:1e6,b=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,k)});return Promise.all(h).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return n0(this.visualElement,e),r.start(By(e,r,0,n,this.visualElement,!1))}stopAnimation(){or(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){or(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){or(n=>{const{drag:r}=this.getProps();if(!Eh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n];o.set(e[n]-yt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!el(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};or(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const c=u.get();s[l]=wL({min:c,max:c},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),or(l=>{if(!Eh(l,e,null))return;const u=this.getAxisMotionValue(l),{min:c,max:h}=this.constraints[l];u.set(yt(c,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;EL.set(this.visualElement,this);const e=this.visualElement.current,n=nc(e,"pointerdown",c=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();el(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),at.read(r);const l=_c(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(or(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=c[g].translate,v.set(v.get()+c[g].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=p0,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function Eh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function SL(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kL extends Bi{constructor(e){super(e),this.removeGroupControls=ur,this.removeListeners=ur,this.controls=new TL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ur}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ub=t=>(e,n)=>{t&&at.postRender(()=>t(e,n))};class CL extends Bi{constructor(){super(...arguments),this.removePointerDownListener=ur}onPointerDown(e){this.session=new nC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Ub(e),onStart:Ub(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&at.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=nc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Mh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ie.test(t))t=parseFloat(t);else return t;const n=Bb(t,e.target.x),r=Bb(t,e.target.y);return`${n}% ${r}%`}},PL={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ni.parse(t);if(s.length>5)return r;const o=Ni.createTransformer(t),l=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;s[0+l]/=u,s[1+l]/=c;const h=yt(u,c,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};class AL extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;qD(IL),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Mh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||at.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sC(t){const[e,n]=BS(),r=P.useContext(ly);return f.jsx(AL,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(nk),isPresent:e,safeToRemove:n})}const IL={borderRadius:{...Fu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fu,borderTopRightRadius:Fu,borderBottomLeftRadius:Fu,borderBottomRightRadius:Fu,boxShadow:PL};function RL(t,e,n){const r=pn(t)?t:pc(t);return r.start(By("",r,e,n)),r.animation}function NL(t){return t instanceof SVGElement&&t.tagName!=="svg"}const jL=(t,e)=>t.depth-e.depth;class DL{constructor(){this.children=[],this.isDirty=!1}add(e){hy(this.children,e),this.isDirty=!0}remove(e){fy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jL),this.isDirty=!1,this.children.forEach(e)}}function OL(t,e){const n=Xr.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Ri(r),t(o-e))};return at.read(r,!0),()=>Ri(r)}const iC=["TopLeft","TopRight","BottomLeft","BottomRight"],LL=iC.length,zb=t=>typeof t=="string"?parseFloat(t):t,Wb=t=>typeof t=="number"||Ie.test(t);function ML(t,e,n,r,s,o){s?(t.opacity=yt(0,n.opacity??1,VL(r)),t.opacityExit=yt(e.opacity??1,0,$L(r))):o&&(t.opacity=yt(e.opacity??1,n.opacity??1,r));for(let l=0;l<LL;l++){const u=`border${iC[l]}Radius`;let c=Hb(e,u),h=Hb(n,u);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||Wb(c)===Wb(h)?(t[u]=Math.max(yt(zb(c),zb(h),r),0),(Zr.test(h)||Zr.test(c))&&(t[u]+="%")):t[u]=h}(e.rotate||n.rotate)&&(t.rotate=yt(e.rotate||0,n.rotate||0,r))}function Hb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const VL=oC(0,.5,Ek),$L=oC(.5,.95,ur);function oC(t,e,n){return r=>r<t?0:r>e?1:n(fc(t,e,r))}function qb(t,e){t.min=e.min,t.max=e.max}function ir(t,e){qb(t.x,e.x),qb(t.y,e.y)}function Kb(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Gb(t,e,n,r,s){return t-=e,t=lf(t,1/n,r),s!==void 0&&(t=lf(t,1/s,r)),t}function FL(t,e=0,n=1,r=.5,s,o=t,l=t){if(Zr.test(e)&&(e=parseFloat(e),e=yt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=yt(o.min,o.max,r);t===o&&(u-=e),t.min=Gb(t.min,e,n,u,s),t.max=Gb(t.max,e,n,u,s)}function Qb(t,e,[n,r,s],o,l){FL(t,e[n],e[r],e[s],e.scale,o,l)}const UL=["x","scaleX","originX"],BL=["y","scaleY","originY"];function Jb(t,e,n,r){Qb(t.x,e,UL,n?n.x:void 0,r?r.x:void 0),Qb(t.y,e,BL,n?n.y:void 0,r?r.y:void 0)}function Yb(t){return t.translate===0&&t.scale===1}function aC(t){return Yb(t.x)&&Yb(t.y)}function Xb(t,e){return t.min===e.min&&t.max===e.max}function zL(t,e){return Xb(t.x,e.x)&&Xb(t.y,e.y)}function Zb(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function lC(t,e){return Zb(t.x,e.x)&&Zb(t.y,e.y)}function eE(t){return bn(t.x)/bn(t.y)}function tE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class WL{constructor(){this.members=[]}add(e){hy(this.members,e),e.scheduleRender()}remove(e){if(fy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HL(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:g,rotateX:v,rotateY:x,skewX:b,skewY:k}=n;h&&(r=`perspective(${h}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),x&&(r+=`rotateY(${x}deg) `),b&&(r+=`skewX(${b}deg) `),k&&(r+=`skewY(${k}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const gg=["","X","Y","Z"],qL={visibility:"hidden"},nE=1e3;let KL=0;function yg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function uC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=gk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",at,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&uC(r)}function cC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e==null?void 0:e()){this.id=KL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(JL),this.nodes.forEach(tM),this.nodes.forEach(nM),this.nodes.forEach(YL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new DL)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new py),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const c=this.eventHandlers.get(l);c&&c.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=NL(l),this.instance=l;const{layoutId:c,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||c)&&(this.isLayoutDirty=!0),t){let v;const x=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=OL(x,250),Mh.hasAnimatedSinceResize&&(Mh.hasAnimatedSinceResize=!1,this.nodes.forEach(sE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&g&&(c||h)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:x,hasRelativeLayoutChanged:b,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||g.getDefaultTransition()||aM,{onLayoutAnimationStart:A,onLayoutAnimationComplete:D}=g.getProps(),V=!this.targetLayout||!lC(this.targetLayout,k),$=!x&&b;if(this.options.layoutRoot||this.resumeFrom||$||x&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,$);const W={...vy(O,"layout"),onPlay:A,onComplete:D};(g.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else x||sE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ri(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rM),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rE);return}this.isUpdating||this.nodes.forEach(ZL),this.isUpdating=!1,this.nodes.forEach(eM),this.nodes.forEach(GL),this.nodes.forEach(QL),this.clearAllSnapshots();const u=Xr.now();en.delta=js(0,1e3/60,u-en.timestamp),en.timestamp=u,en.isProcessing=!0,lg.update.process(en),lg.preRender.process(en),lg.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XL),this.sharedNodes.forEach(sM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,at.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){at.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!aC(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;l&&(u||ko(this.latestValues)||g)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return l&&(c=this.removeTransform(c)),lM(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:l}=this.options;if(!l)return Pt();const u=l.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(uM))){const{scroll:g}=this.root;g&&(rl(u.x,g.offset.x),rl(u.y,g.offset.y))}return u}removeElementScroll(l){var c;const u=Pt();if(ir(u,l),(c=this.scroll)!=null&&c.wasRoot)return u;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:v,options:x}=g;g!==this.root&&v&&x.layoutScroll&&(v.wasRoot&&ir(u,l),rl(u.x,v.offset.x),rl(u.y,v.offset.y))}return u}applyTransform(l,u=!1){const c=Pt();ir(c,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&sl(c,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),ko(g.latestValues)&&sl(c,g.latestValues)}return ko(this.latestValues)&&sl(c,this.latestValues),c}removeTransform(l){const u=Pt();ir(u,l);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!ko(h.latestValues))continue;f0(h.latestValues)&&h.updateSnapshot();const g=Pt(),v=h.measurePageBox();ir(g,v),Jb(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return ko(this.latestValues)&&Jb(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(l||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),sc(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),ir(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ir(this.target,this.layout.layoutBox),Zk(this.target,this.targetDelta)):ir(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),sc(this.relativeTargetOrigin,this.target,b.target),ir(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||f0(this.parent.latestValues)||Xk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===en.timestamp&&(c=!1),c)return;const{layout:h,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||g))return;ir(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,x=this.treeScale.y;hL(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Pt());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Kb(this.prevProjectionDelta.x,this.projectionDelta.x),Kb(this.prevProjectionDelta.y,this.projectionDelta.y)),rc(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==x||!tE(this.projectionDelta.x,this.prevProjectionDelta.x)||!tE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nl(),this.projectionDelta=nl(),this.projectionDeltaWithTransform=nl()}setAnimationOrigin(l,u=!1){const c=this.snapshot,h=c?c.latestValues:{},g={...this.latestValues},v=nl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=Pt(),b=c?c.source:void 0,k=this.layout?this.layout.source:void 0,O=b!==k,A=this.getStack(),D=!A||A.members.length<=1,V=!!(O&&!D&&this.options.crossfade===!0&&!this.path.some(oM));this.animationProgress=0;let $;this.mixTargetDelta=W=>{const B=W/1e3;iE(v.x,l.x,B),iE(v.y,l.y,B),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sc(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iM(this.relativeTarget,this.relativeTargetOrigin,x,B),$&&zL(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=Pt()),ir($,this.relativeTarget)),O&&(this.animationValues=g,ML(g,h,this.latestValues,B,V,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ri(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=at.update(()=>{Mh.hasAnimatedSinceResize=!0,this.currentAnimation=RL(0,nE,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:c,layout:h,latestValues:g}=l;if(!(!u||!c||!h)){if(this!==l&&this.layout&&h&&dC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||Pt();const v=bn(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+v;const x=bn(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+x}ir(u,c),sl(u,g),rc(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new WL),this.sharedNodes.get(l).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const h={};c.z&&yg("z",l,h,this.animationValues);for(let g=0;g<gg.length;g++)yg(`rotate${gg[g]}`,l,h,this.animationValues),yg(`skew${gg[g]}`,l,h,this.animationValues);l.render();for(const g in h)l.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return qL;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Lh(l==null?void 0:l.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Lh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ko(this.latestValues)&&(b.transform=c?c({},""):"none",this.hasProjected=!1),b}const g=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=HL(this.projectionDeltaWithTransform,this.treeScale,g),c&&(u.transform=c(g,u.transform));const{x:v,y:x}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,h.animationValues?u.opacity=h===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const b in yc){if(g[b]===void 0)continue;const{correct:k,applyTo:O,isCSSVariable:A}=yc[b],D=u.transform==="none"?g[b]:k(g[b],h);if(O){const V=O.length;for(let $=0;$<V;$++)u[O[$]]=D}else A?this.options.visualElement.renderState.vars[b]=D:u[b]=D}return this.options.layoutId&&(u.pointerEvents=h===this?Lh(l==null?void 0:l.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(rE),this.root.sharedNodes.clear()}}}function GL(t){t.updateLayout()}function QL(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?or(v=>{const x=l?e.measuredBox[v]:e.layoutBox[v],b=bn(x);x.min=r[v].min,x.max=x.min+b}):dC(o,e.layoutBox,r)&&or(v=>{const x=l?e.measuredBox[v]:e.layoutBox[v],b=bn(r[v]);x.max=x.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+b)});const u=nl();rc(u,r,e.layoutBox);const c=nl();l?rc(c,t.applyTransform(s,!0),e.measuredBox):rc(c,r,e.layoutBox);const h=!aC(u);let g=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:x,layout:b}=v;if(x&&b){const k=Pt();sc(k,e.layoutBox,x.layoutBox);const O=Pt();sc(O,r,b.layoutBox),lC(k,O)||(g=!0),v.options.layoutRoot&&(t.relativeTarget=O,t.relativeTargetOrigin=k,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function JL(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YL(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XL(t){t.clearSnapshot()}function rE(t){t.clearMeasurements()}function ZL(t){t.isLayoutDirty=!1}function eM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function sE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function tM(t){t.resolveTargetDelta()}function nM(t){t.calcProjection()}function rM(t){t.resetSkewAndRotation()}function sM(t){t.removeLeadSnapshot()}function iE(t,e,n){t.translate=yt(e.translate,0,n),t.scale=yt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function oE(t,e,n,r){t.min=yt(e.min,n.min,r),t.max=yt(e.max,n.max,r)}function iM(t,e,n,r){oE(t.x,e.x,n.x,r),oE(t.y,e.y,n.y,r)}function oM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const aM={duration:.45,ease:[.4,0,.1,1]},aE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),lE=aE("applewebkit/")&&!aE("chrome/")?Math.round:ur;function uE(t){t.min=lE(t.min),t.max=lE(t.max)}function lM(t){uE(t.x),uE(t.y)}function dC(t,e,n){return t==="position"||t==="preserve-aspect"&&!cL(eE(e),eE(n),.2)}function uM(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const cM=cC({attachResizeListener:(t,e)=>_c(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vg={current:void 0},hC=cC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vg.current){const t=new cM({});t.mount(window),t.setOptions({layoutScroll:!0}),vg.current=t}return vg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dM={pan:{Feature:CL},drag:{Feature:kL,ProjectionNode:hC,MeasureLayout:sC}};function cE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&at.postRender(()=>o(e,$c(e)))}class hM extends Bi{mount(){const{current:e}=this.node;e&&(this.unmount=_D(e,(n,r)=>(cE(this.node,r,"Start"),s=>cE(this.node,s,"End"))))}unmount(){}}class fM extends Bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vc(_c(this.node.current,"focus",()=>this.onFocus()),_c(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&at.postRender(()=>o(e,$c(e)))}class mM extends Bi{mount(){const{current:e}=this.node;e&&(this.unmount=SD(e,(n,r)=>(dE(this.node,r,"Start"),(s,{success:o})=>dE(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const g0=new WeakMap,xg=new WeakMap,pM=t=>{const e=g0.get(t.target);e&&e(t)},gM=t=>{t.forEach(pM)};function yM({root:t,...e}){const n=t||document;xg.has(n)||xg.set(n,{});const r=xg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(gM,{root:t,...e})),r[s]}function vM(t,e,n){const r=yM(e);return g0.set(t,n),r.observe(t),()=>{g0.delete(t),r.unobserve(t)}}const xM={some:0,all:1};class wM extends Bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:xM[s]},u=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),x=h?g:v;x&&x(c)};return vM(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_M(e,n))&&this.startObserver()}unmount(){}}function _M({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bM={inView:{Feature:wM},tap:{Feature:mM},focus:{Feature:fM},hover:{Feature:hM}},EM={layout:{ProjectionNode:hC,MeasureLayout:sC}},y0={current:null},fC={current:!1};function TM(){if(fC.current=!0,!!cy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>y0.current=t.matches;t.addListener(e),e()}else y0.current=!1}const SM=[...Vk,hn,Ni],kM=t=>SM.find(Mk(t)),CM=new WeakMap;function PM(t,e,n){for(const r in e){const s=e[r],o=n[r];if(pn(s))t.addValue(r,s);else if(pn(o))t.addValue(r,pc(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,pc(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const hE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class AM{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$y,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Xr.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,at.render(this.render,!1,!0))};const{latestValues:c,renderState:h,onUpdate:g}=l;this.onUpdate=g,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=$f(n),this.isVariantNode=ek(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in x){const k=x[b];c[b]!==void 0&&pn(k)&&k.set(c[b],!1)}}mount(e){this.current=e,CM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),fC.current||TM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:y0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ri(this.notifyUpdate),Ri(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Wo.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&at.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yl){const n=yl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<hE.length;r++){const s=hE[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=PM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=pc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Ok(r)||Sk(r))?r=parseFloat(r):!kM(r)&&Ni.test(n)&&(r=Nk(e,n)),this.setBaseTarget(e,pn(r)?r.get():r)),pn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=jy(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!pn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new py),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class mC extends AM{constructor(){super(...arguments),this.KeyframeResolver=$k}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function IM(t){return window.getComputedStyle(t)}class RM extends mC{constructor(){super(...arguments),this.type="html",this.renderInstance=dk}readValueFromInstance(e,n){if(Wo.has(n))return zO(e,n);{const r=IM(e),s=(Sy(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return eC(e,n)}build(e,n,r){Py(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Dy(e,n,r)}}class NM extends mC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&ck(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Wo.has(n)){const r=Rk(n);return r&&r.default||0}return n=hk.has(n)?n:Ty(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return mk(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&at.postRender(this.updateDimensions)}build(e,n,r){Ry(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){fk(e,n,r,s)}mount(e){this.isSVGTag=Ny(e.tagName),super.mount(e)}}const jM=(t,e)=>Iy(t)?new NM(e):new RM(e,{allowProjection:t!==P.Fragment}),DM=gO({...nL,...bM,...dM,...EM},jM),uf=ND(DM),OM=()=>{};var fE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],u=t[n++],c=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},gC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,u=l?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let x=(u&15)<<2|h>>6,b=h&63;c||(b=64,l||(x=64)),r.push(n[g],n[v],n[x],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||h==null||v==null)throw new MM;const x=o<<2|u>>4;if(r.push(x),h!==64){const b=u<<4&240|h>>2;if(r.push(b),v!==64){const k=h<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VM=function(t){const e=pC(t);return gC.encodeByteArray(e,!0)},cf=function(t){return VM(t).replace(/\./g,"")},yC=function(t){try{return gC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=()=>$M().__FIREBASE_DEFAULTS__,UM=()=>{if(typeof process>"u"||typeof fE>"u")return;const t=fE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yC(t[1]);return e&&JSON.parse(e)},Uf=()=>{try{return OM()||FM()||UM()||BM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vC=t=>{var e,n;return(n=(e=Uf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xC=t=>{const e=vC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wC=()=>{var t;return(t=Uf())===null||t===void 0?void 0:t.config},_C=t=>{var e;return(e=Uf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cf(JSON.stringify(n)),cf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function HM(){var t;const e=(t=Uf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QM(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JM(){return!HM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YM(){try{return typeof indexedDB=="object"}catch{return!1}}function XM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="FirebaseError";class ls extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZM,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fc.prototype.create)}}class Fc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?eV(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new ls(s,u,r)}}function eV(t,e){return t.replace(tV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tV=/\{\$([^}]+)}/g;function nV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(mE(o)&&mE(l)){if(!Lo(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function mE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Ku(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rV(t,e){const n=new sV(t,e);return n.subscribe.bind(n)}class sV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=wg),s.error===void 0&&(s.error=wg),s.complete===void 0&&(s.complete=wg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lV(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aV(t){return t===Co?void 0:t}function lV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const cV={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},dV=Be.INFO,hV={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},fV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=hV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zy{constructor(e){this.name=e,this._logLevel=dV,this._logHandler=fV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const mV=(t,e)=>e.some(n=>t instanceof n);let pE,gE;function pV(){return pE||(pE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gV(){return gE||(gE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EC=new WeakMap,v0=new WeakMap,TC=new WeakMap,_g=new WeakMap,Wy=new WeakMap;function yV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Si(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&EC.set(n,t)}).catch(()=>{}),Wy.set(e,t),e}function vV(t){if(v0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});v0.set(t,e)}let x0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return v0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Si(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xV(t){x0=t(x0)}function wV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bg(this),e,...n);return TC.set(r,e.sort?e.sort():[e]),Si(r)}:gV().includes(t)?function(...e){return t.apply(bg(this),e),Si(EC.get(this))}:function(...e){return Si(t.apply(bg(this),e))}}function _V(t){return typeof t=="function"?wV(t):(t instanceof IDBTransaction&&vV(t),mV(t,pV())?new Proxy(t,x0):t)}function Si(t){if(t instanceof IDBRequest)return yV(t);if(_g.has(t))return _g.get(t);const e=_V(t);return e!==t&&(_g.set(t,e),Wy.set(e,t)),e}const bg=t=>Wy.get(t);function bV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),u=Si(l);return r&&l.addEventListener("upgradeneeded",c=>{r(Si(l.result),c.oldVersion,c.newVersion,Si(l.transaction),c)}),n&&l.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const EV=["get","getKey","getAll","getAllKeys","count"],TV=["put","add","delete","clear"],Eg=new Map;function yE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eg.get(e))return Eg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=TV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||EV.includes(n)))return;const o=async function(l,...u){const c=this.transaction(l,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return Eg.set(e,o),o}xV(t=>({...t,get:(e,n,r)=>yE(e,n)||t.get(e,n,r),has:(e,n)=>!!yE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const w0="@firebase/app",vE="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new zy("@firebase/app"),CV="@firebase/app-compat",PV="@firebase/analytics-compat",AV="@firebase/analytics",IV="@firebase/app-check-compat",RV="@firebase/app-check",NV="@firebase/auth",jV="@firebase/auth-compat",DV="@firebase/database",OV="@firebase/data-connect",LV="@firebase/database-compat",MV="@firebase/functions",VV="@firebase/functions-compat",$V="@firebase/installations",FV="@firebase/installations-compat",UV="@firebase/messaging",BV="@firebase/messaging-compat",zV="@firebase/performance",WV="@firebase/performance-compat",HV="@firebase/remote-config",qV="@firebase/remote-config-compat",KV="@firebase/storage",GV="@firebase/storage-compat",QV="@firebase/firestore",JV="@firebase/vertexai",YV="@firebase/firestore-compat",XV="firebase",ZV="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="[DEFAULT]",e$={[w0]:"fire-core",[CV]:"fire-core-compat",[AV]:"fire-analytics",[PV]:"fire-analytics-compat",[RV]:"fire-app-check",[IV]:"fire-app-check-compat",[NV]:"fire-auth",[jV]:"fire-auth-compat",[DV]:"fire-rtdb",[OV]:"fire-data-connect",[LV]:"fire-rtdb-compat",[MV]:"fire-fn",[VV]:"fire-fn-compat",[$V]:"fire-iid",[FV]:"fire-iid-compat",[UV]:"fire-fcm",[BV]:"fire-fcm-compat",[zV]:"fire-perf",[WV]:"fire-perf-compat",[HV]:"fire-rc",[qV]:"fire-rc-compat",[KV]:"fire-gcs",[GV]:"fire-gcs-compat",[QV]:"fire-fst",[YV]:"fire-fst-compat",[JV]:"fire-vertex","fire-js":"fire-js",[XV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new Map,t$=new Map,b0=new Map;function xE(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mo(t){const e=t.name;if(b0.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;b0.set(e,t);for(const n of df.values())xE(n,t);for(const n of t$.values())xE(n,t);return!0}function Bf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new Fc("app","Firebase",n$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=ZV;function Hy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_0,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ki.create("bad-app-name",{appName:String(s)});if(n||(n=wC()),!n)throw ki.create("no-options");const o=df.get(s);if(o){if(Lo(n,o.options)&&Lo(r,o.config))return o;throw ki.create("duplicate-app",{appName:s})}const l=new uV(s);for(const c of b0.values())l.addComponent(c);const u=new r$(n,r,l);return df.set(s,u),u}function qy(t=_0){const e=df.get(t);if(!e&&t===_0&&wC())return Hy();if(!e)throw ki.create("no-app",{appName:t});return e}function es(t,e,n){var r;let s=(r=e$[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(u.join(" "));return}Mo(new ji(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$="firebase-heartbeat-database",i$=1,bc="firebase-heartbeat-store";let Tg=null;function SC(){return Tg||(Tg=bV(s$,i$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ki.create("idb-open",{originalErrorMessage:t.message})})),Tg}async function o$(t){try{const n=(await SC()).transaction(bc),r=await n.objectStore(bc).get(kC(t));return await n.done,r}catch(e){if(e instanceof ls)Ds.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function wE(t,e){try{const r=(await SC()).transaction(bc,"readwrite");await r.objectStore(bc).put(e,kC(t)),await r.done}catch(n){if(n instanceof ls)Ds.warn(n.message);else{const r=ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(r.message)}}}function kC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=1024,l$=30;class u${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=_E();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>l$){const l=h$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_E(),{heartbeatsToSend:r,unsentEntries:s}=c$(this._heartbeatsCache.heartbeats),o=cf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ds.warn(n),""}}}function _E(){return new Date().toISOString().substring(0,10)}function c$(t,e=a$){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),bE(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class d${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YM()?XM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bE(t){return cf(JSON.stringify({version:2,heartbeats:t})).length}function h$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(t){Mo(new ji("platform-logger",e=>new SV(e),"PRIVATE")),Mo(new ji("heartbeat",e=>new u$(e),"PRIVATE")),es(w0,vE,t),es(w0,vE,"esm2017"),es("fire-js","")}f$("");var m$="firebase",p$="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(m$,p$,"app");var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,CC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function T(){}T.prototype=S.prototype,I.D=S.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(R,j,F){for(var L=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)L[ge-2]=arguments[ge];return S.prototype[j].apply(R,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,S,T){T||(T=0);var R=Array(16);if(typeof S=="string")for(var j=0;16>j;++j)R[j]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(j=0;16>j;++j)R[j]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=I.g[0],T=I.g[1],j=I.g[2];var F=I.g[3],L=S+(F^T&(j^F))+R[0]+3614090360&4294967295;S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[1]+3905402710&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[2]+606105819&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[3]+3250441966&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[4]+4118548399&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[5]+1200080426&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[6]+2821735955&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[7]+4249261313&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[8]+1770035416&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[9]+2336552879&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[10]+4294925233&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[11]+2304563134&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[12]+1804603682&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[13]+4254626195&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[14]+2792965006&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[15]+1236535329&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(j^F&(T^j))+R[1]+4129170786&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[6]+3225465664&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[11]+643717713&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[0]+3921069994&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[5]+3593408605&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[10]+38016083&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[15]+3634488961&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[4]+3889429448&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[9]+568446438&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[14]+3275163606&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[3]+4107603335&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[8]+1163531501&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[13]+2850285829&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[2]+4243563512&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[7]+1735328473&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[12]+2368359562&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(T^j^F)+R[5]+4294588738&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[8]+2272392833&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[11]+1839030562&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[14]+4259657740&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[1]+2763975236&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[4]+1272893353&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[7]+4139469664&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[10]+3200236656&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[13]+681279174&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[0]+3936430074&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[3]+3572445317&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[6]+76029189&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[9]+3654602809&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[12]+3873151461&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[15]+530742520&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[2]+3299628645&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(j^(T|~F))+R[0]+4096336452&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[7]+1126891415&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[14]+2878612391&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[5]+4237533241&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[12]+1700485571&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[3]+2399980690&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[10]+4293915773&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[1]+2240044497&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[8]+1873313359&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[15]+4264355552&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[6]+2734768916&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[13]+1309151649&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[4]+4149444226&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[11]+3174756917&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[2]+718787259&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(j+(L<<21&4294967295|L>>>11))&4294967295,I.g[2]=I.g[2]+j&4294967295,I.g[3]=I.g[3]+F&4294967295}r.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var T=S-this.blockSize,R=this.B,j=this.h,F=0;F<S;){if(j==0)for(;F<=T;)s(this,I,F),F+=this.blockSize;if(typeof I=="string"){for(;F<S;)if(R[j++]=I.charCodeAt(F++),j==this.blockSize){s(this,R),j=0;break}}else for(;F<S;)if(R[j++]=I[F++],j==this.blockSize){s(this,R),j=0;break}}this.h=j,this.o+=S},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var T=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=T&255,T/=256;for(this.u(I),I=Array(16),S=T=0;4>S;++S)for(var R=0;32>R;R+=8)I[T++]=this.g[S]>>>R&255;return I};function o(I,S){var T=u;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=S(I)}function l(I,S){this.h=S;for(var T=[],R=!0,j=I.length-1;0<=j;j--){var F=I[j]|0;R&&F==S||(T[j]=F,R=!1)}this.g=T}var u={};function c(I){return-128<=I&&128>I?o(I,function(S){return new l([S|0],0>S?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return A(h(-I));for(var S=[],T=1,R=0;I>=T;R++)S[R]=I/T|0,T*=4294967296;return new l(S,0)}function g(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return A(g(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(S,8)),R=v,j=0;j<I.length;j+=8){var F=Math.min(8,I.length-j),L=parseInt(I.substring(j,j+F),S);8>F?(F=h(Math.pow(S,F)),R=R.j(F).add(h(L))):(R=R.j(T),R=R.add(h(L)))}return R}var v=c(0),x=c(1),b=c(16777216);t=l.prototype,t.m=function(){if(O(this))return-A(this).m();for(var I=0,S=1,T=0;T<this.g.length;T++){var R=this.i(T);I+=(0<=R?R:4294967296+R)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(O(this))return"-"+A(this).toString(I);for(var S=h(Math.pow(I,6)),T=this,R="";;){var j=W(T,S).g;T=D(T,j.j(S));var F=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=j,k(T))return F+R;for(;6>F.length;)F="0"+F;R=F+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function O(I){return I.h==-1}t.l=function(I){return I=D(this,I),O(I)?-1:k(I)?0:1};function A(I){for(var S=I.g.length,T=[],R=0;R<S;R++)T[R]=~I.g[R];return new l(T,~I.h).add(x)}t.abs=function(){return O(this)?A(this):this},t.add=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0,j=0;j<=S;j++){var F=R+(this.i(j)&65535)+(I.i(j)&65535),L=(F>>>16)+(this.i(j)>>>16)+(I.i(j)>>>16);R=L>>>16,F&=65535,L&=65535,T[j]=L<<16|F}return new l(T,T[T.length-1]&-2147483648?-1:0)};function D(I,S){return I.add(A(S))}t.j=function(I){if(k(this)||k(I))return v;if(O(this))return O(I)?A(this).j(A(I)):A(A(this).j(I));if(O(I))return A(this.j(A(I)));if(0>this.l(b)&&0>I.l(b))return h(this.m()*I.m());for(var S=this.g.length+I.g.length,T=[],R=0;R<2*S;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var j=0;j<I.g.length;j++){var F=this.i(R)>>>16,L=this.i(R)&65535,ge=I.i(j)>>>16,$e=I.i(j)&65535;T[2*R+2*j]+=L*$e,V(T,2*R+2*j),T[2*R+2*j+1]+=F*$e,V(T,2*R+2*j+1),T[2*R+2*j+1]+=L*ge,V(T,2*R+2*j+1),T[2*R+2*j+2]+=F*ge,V(T,2*R+2*j+2)}for(R=0;R<S;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=S;R<2*S;R++)T[R]=0;return new l(T,0)};function V(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function $(I,S){this.g=I,this.h=S}function W(I,S){if(k(S))throw Error("division by zero");if(k(I))return new $(v,v);if(O(I))return S=W(A(I),S),new $(A(S.g),A(S.h));if(O(S))return S=W(I,A(S)),new $(A(S.g),S.h);if(30<I.g.length){if(O(I)||O(S))throw Error("slowDivide_ only works with positive integers.");for(var T=x,R=S;0>=R.l(I);)T=B(T),R=B(R);var j=K(T,1),F=K(R,1);for(R=K(R,2),T=K(T,2);!k(R);){var L=F.add(R);0>=L.l(I)&&(j=j.add(T),F=L),R=K(R,1),T=K(T,1)}return S=D(I,j.j(S)),new $(j,S)}for(j=v;0<=I.l(S);){for(T=Math.max(1,Math.floor(I.m()/S.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),F=h(T),L=F.j(S);O(L)||0<L.l(I);)T-=R,F=h(T),L=F.j(S);k(F)&&(F=x),j=j.add(F),I=D(I,L)}return new $(j,I)}t.A=function(I){return W(this,I).h},t.and=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)&I.i(R);return new l(T,this.h&I.h)},t.or=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)|I.i(R);return new l(T,this.h|I.h)},t.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)^I.i(R);return new l(T,this.h^I.h)};function B(I){for(var S=I.g.length+1,T=[],R=0;R<S;R++)T[R]=I.i(R)<<1|I.i(R-1)>>>31;return new l(T,I.h)}function K(I,S){var T=S>>5;S%=32;for(var R=I.g.length-T,j=[],F=0;F<R;F++)j[F]=0<S?I.i(F+T)>>>S|I.i(F+T+1)<<32-S:I.i(F+T);return new l(j,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=g,Ci=l}).apply(typeof EE<"u"?EE:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PC,Gu,AC,Vh,E0,IC,RC,NC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,w,E){return m==Array.prototype||m==Object.prototype||(m[w]=E.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var w=0;w<m.length;++w){var E=m[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(m,w){if(w)e:{var E=r;m=m.split(".");for(var N=0;N<m.length-1;N++){var G=m[N];if(!(G in E))break e;E=E[G]}m=m[m.length-1],N=E[m],w=w(N),w!=N&&w!=null&&e(E,m,{configurable:!0,writable:!0,value:w})}}function o(m,w){m instanceof String&&(m+="");var E=0,N=!1,G={next:function(){if(!N&&E<m.length){var ee=E++;return{value:w(ee,m[ee]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(m){return m||function(){return o(this,function(w,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function c(m){var w=typeof m;return w=w!="object"?w:m?Array.isArray(m)?"array":w:"null",w=="array"||w=="object"&&typeof m.length=="number"}function h(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function g(m,w,E){return m.call.apply(m.bind,arguments)}function v(m,w,E){if(!m)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),m.apply(w,G)}}return function(){return m.apply(w,arguments)}}function x(m,w,E){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,x.apply(null,arguments)}function b(m,w){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),m.apply(this,N)}}function k(m,w){function E(){}E.prototype=w.prototype,m.aa=w.prototype,m.prototype=new E,m.prototype.constructor=m,m.Qb=function(N,G,ee){for(var pe=Array(arguments.length-2),et=2;et<arguments.length;et++)pe[et-2]=arguments[et];return w.prototype[G].apply(N,pe)}}function O(m){const w=m.length;if(0<w){const E=Array(w);for(let N=0;N<w;N++)E[N]=m[N];return E}return[]}function A(m,w){for(let E=1;E<arguments.length;E++){const N=arguments[E];if(c(N)){const G=m.length||0,ee=N.length||0;m.length=G+ee;for(let pe=0;pe<ee;pe++)m[G+pe]=N[pe]}else m.push(N)}}class D{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function V(m){return/^[\s\xa0]*$/.test(m)}function $(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function W(m){return W[" "](m),m}W[" "]=function(){};var B=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function K(m,w,E){for(const N in m)w.call(E,m[N],N,m)}function I(m,w){for(const E in m)w.call(void 0,m[E],E,m)}function S(m){const w={};for(const E in m)w[E]=m[E];return w}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(m,w){let E,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(E in N)m[E]=N[E];for(let ee=0;ee<T.length;ee++)E=T[ee],Object.prototype.hasOwnProperty.call(N,E)&&(m[E]=N[E])}}function j(m){var w=1;m=m.split(":");const E=[];for(;0<w&&m.length;)E.push(m.shift()),w--;return m.length&&E.push(m.join(":")),E}function F(m){u.setTimeout(()=>{throw m},0)}function L(){var m=J;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class ge{constructor(){this.h=this.g=null}add(w,E){const N=$e.get();N.set(w,E),this.h?this.h.next=N:this.g=N,this.h=N}}var $e=new D(()=>new Ge,m=>m.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ce=!1,J=new ge,te=()=>{const m=u.Promise.resolve(void 0);be=()=>{m.then(z)}};var z=()=>{for(var m;m=L();){try{m.h.call(m.g)}catch(E){F(E)}var w=$e;w.j(m),100>w.h&&(w.h++,m.next=w.g,w.g=m)}ce=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const E=()=>{};u.addEventListener("test",E,w),u.removeEventListener("test",E,w)}catch{}return m}();function je(m,w){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var E=this.type=m.type,N=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget){if(B){e:{try{W(w.nodeName);var G=!0;break e}catch{}G=!1}G||(w=null)}}else E=="mouseover"?w=m.fromElement:E=="mouseout"&&(w=m.toElement);this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:ie[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&je.aa.h.call(this)}}k(je,fe);var ie={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),he=0;function Z(m,w,E,N,G){this.listener=m,this.proxy=null,this.src=w,this.type=E,this.capture=!!N,this.ha=G,this.key=++he,this.da=this.fa=!1}function q(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function re(m){this.src=m,this.g={},this.h=0}re.prototype.add=function(m,w,E,N,G){var ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);var pe=We(m,w,N,G);return-1<pe?(w=m[pe],E||(w.fa=!1)):(w=new Z(w,this.src,ee,!!N,G),w.fa=E,m.push(w)),w};function ye(m,w){var E=w.type;if(E in m.g){var N=m.g[E],G=Array.prototype.indexOf.call(N,w,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(N,G,1),ee&&(q(w),m.g[E].length==0&&(delete m.g[E],m.h--))}}function We(m,w,E,N){for(var G=0;G<m.length;++G){var ee=m[G];if(!ee.da&&ee.listener==w&&ee.capture==!!E&&ee.ha==N)return G}return-1}var St="closure_lm_"+(1e6*Math.random()|0),hr={};function Fs(m,w,E,N,G){if(Array.isArray(w)){for(var ee=0;ee<w.length;ee++)Fs(m,w[ee],E,N,G);return null}return E=Bl(E),m&&m[oe]?m.K(w,E,h(N)?!!N.capture:!1,G):Us(m,w,E,!1,N,G)}function Us(m,w,E,N,G,ee){if(!w)throw Error("Invalid event type");var pe=h(G)?!!G.capture:!!G,et=cs(m);if(et||(m[St]=et=new re(m)),E=et.add(w,E,N,pe,ee),E.proxy)return E;if(N=Bs(),E.proxy=N,N.src=m,N.listener=E,m.addEventListener)Te||(G=pe),G===void 0&&(G=!1),m.addEventListener(w.toString(),N,G);else if(m.attachEvent)m.attachEvent(on(w.toString()),N);else if(m.addListener&&m.removeListener)m.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Bs(){function m(E){return w.call(m.src,m.listener,E)}const w=qi;return m}function us(m,w,E,N,G){if(Array.isArray(w))for(var ee=0;ee<w.length;ee++)us(m,w[ee],E,N,G);else N=h(N)?!!N.capture:!!N,E=Bl(E),m&&m[oe]?(m=m.i,w=String(w).toString(),w in m.g&&(ee=m.g[w],E=We(ee,E,N,G),-1<E&&(q(ee[E]),Array.prototype.splice.call(ee,E,1),ee.length==0&&(delete m.g[w],m.h--)))):m&&(m=cs(m))&&(w=m.g[w.toString()],m=-1,w&&(m=We(w,E,N,G)),(E=-1<m?w[m]:null)&&xt(E))}function xt(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[oe])ye(w.i,m);else{var E=m.type,N=m.proxy;w.removeEventListener?w.removeEventListener(E,N,m.capture):w.detachEvent?w.detachEvent(on(E),N):w.addListener&&w.removeListener&&w.removeListener(N),(E=cs(w))?(ye(E,m),E.h==0&&(E.src=null,w[St]=null)):q(m)}}}function on(m){return m in hr?hr[m]:hr[m]="on"+m}function qi(m,w){if(m.da)m=!0;else{w=new je(w,this);var E=m.listener,N=m.ha||m.src;m.fa&&xt(m),m=E.call(N,w)}return m}function cs(m){return m=m[St],m instanceof re?m:null}var Jo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bl(m){return typeof m=="function"?m:(m[Jo]||(m[Jo]=function(w){return m.handleEvent(w)}),m[Jo])}function Dt(){ne.call(this),this.i=new re(this),this.M=this,this.F=null}k(Dt,ne),Dt.prototype[oe]=!0,Dt.prototype.removeEventListener=function(m,w,E,N){us(this,m,w,E,N)};function Ot(m,w){var E,N=m.F;if(N)for(E=[];N;N=N.F)E.push(N);if(m=m.M,N=w.type||w,typeof w=="string")w=new fe(w,m);else if(w instanceof fe)w.target=w.target||m;else{var G=w;w=new fe(N,m),R(w,G)}if(G=!0,E)for(var ee=E.length-1;0<=ee;ee--){var pe=w.g=E[ee];G=ds(pe,N,!0,w)&&G}if(pe=w.g=m,G=ds(pe,N,!0,w)&&G,G=ds(pe,N,!1,w)&&G,E)for(ee=0;ee<E.length;ee++)pe=w.g=E[ee],G=ds(pe,N,!1,w)&&G}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var m=this.i,w;for(w in m.g){for(var E=m.g[w],N=0;N<E.length;N++)q(E[N]);delete m.g[w],m.h--}}this.F=null},Dt.prototype.K=function(m,w,E,N){return this.i.add(String(m),w,!1,E,N)},Dt.prototype.L=function(m,w,E,N){return this.i.add(String(m),w,!0,E,N)};function ds(m,w,E,N){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();for(var G=!0,ee=0;ee<w.length;++ee){var pe=w[ee];if(pe&&!pe.da&&pe.capture==E){var et=pe.listener,Lt=pe.ha||pe.src;pe.fa&&ye(m.i,pe),G=et.call(Lt,N)!==!1&&G}}return G&&!N.defaultPrevented}function zl(m,w,E){if(typeof m=="function")E&&(m=x(m,E));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:u.setTimeout(m,w||0)}function zs(m){m.g=zl(()=>{m.g=null,m.i&&(m.i=!1,zs(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class Ki extends ne{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:zs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(m){ne.call(this),this.h=m,this.g={}}k(Gi,ne);var Wl=[];function Hl(m){K(m.g,function(w,E){this.g.hasOwnProperty(E)&&xt(w)},m),m.g={}}Gi.prototype.N=function(){Gi.aa.N.call(this),Hl(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ql=u.JSON.stringify,Kl=u.JSON.parse,Gl=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Qi(){}Qi.prototype.h=null;function Yo(m){return m.h||(m.h=m.i())}function Xo(){}var Qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lr(){fe.call(this,"d")}k(Lr,fe);function Zo(){fe.call(this,"c")}k(Zo,fe);var Mr={},Ql=null;function Ji(){return Ql=Ql||new Dt}Mr.La="serverreachability";function Jl(m){fe.call(this,Mr.La,m)}k(Jl,fe);function hs(m){const w=Ji();Ot(w,new Jl(w))}Mr.STAT_EVENT="statevent";function Yl(m,w){fe.call(this,Mr.STAT_EVENT,m),this.stat=w}k(Yl,fe);function kt(m){const w=Ji();Ot(w,new Yl(w,m))}Mr.Ma="timingevent";function ea(m,w){fe.call(this,Mr.Ma,m),this.size=w}k(ea,fe);function fr(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},w)}function Yi(){this.g=!0}Yi.prototype.xa=function(){this.g=!1};function Xi(m,w,E,N,G,ee){m.info(function(){if(m.g)if(ee)for(var pe="",et=ee.split("&"),Lt=0;Lt<et.length;Lt++){var qe=et[Lt].split("=");if(1<qe.length){var Bt=qe[0];qe=qe[1];var It=Bt.split("_");pe=2<=It.length&&It[1]=="type"?pe+(Bt+"="+qe+"&"):pe+(Bt+"=redacted&")}}else pe=null;else pe=ee;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+w+`
`+E+`
`+pe})}function ta(m,w,E,N,G,ee,pe){m.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+w+`
`+E+`
`+ee+" "+pe})}function mr(m,w,E,N){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+gm(m,E)+(N?" "+N:"")})}function Xl(m,w){m.info(function(){return"TIMEOUT: "+w})}Yi.prototype.info=function(){};function gm(m,w){if(!m.g)return w;if(!w)return null;try{var E=JSON.parse(w);if(E){for(m=0;m<E.length;m++)if(Array.isArray(E[m])){var N=E[m];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var pe=1;pe<G.length;pe++)G[pe]=""}}}}return ql(E)}catch{return w}}var na={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pr;function Zi(){}k(Zi,Qi),Zi.prototype.g=function(){return new XMLHttpRequest},Zi.prototype.i=function(){return{}},pr=new Zi;function gr(m,w,E,N){this.j=m,this.i=w,this.l=E,this.R=N||1,this.U=new Gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xc}function Xc(){this.i=null,this.g="",this.h=!1}var Zl={},ra={};function sa(m,w,E){m.L=1,m.v=Gs(Vn(w)),m.m=E,m.P=!0,eu(m,null)}function eu(m,w){m.F=Date.now(),rt(m),m.A=Vn(m.v);var E=m.A,N=m.R;Array.isArray(N)||(N=[String(N)]),Js(E.i,"t",N),m.C=0,E=m.j.J,m.h=new Xc,m.g=gd(m.j,E?w:null,!m.m),0<m.O&&(m.M=new Ki(x(m.Y,m,m.g),m.O)),w=m.U,E=m.g,N=m.ca;var G="readystatechange";Array.isArray(G)||(G&&(Wl[0]=G.toString()),G=Wl);for(var ee=0;ee<G.length;ee++){var pe=Fs(E,G[ee],N||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,w)):(m.u="GET",m.g.ea(m.A,m.u,null,w)),hs(),Xi(m.i,m.u,m.A,m.l,m.R,m.m)}gr.prototype.ca=function(m){m=m.target;const w=this.M;w&&Tn(m)==3?w.j():this.Y(m)},gr.prototype.Y=function(m){try{if(m==this.g)e:{const It=Tn(this.g);var w=this.g.Ba();const Xn=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||ou(this.g)))){this.J||It!=4||w==7||(w==8||0>=Xn?hs(3):hs(2)),eo(this);var E=this.g.Z();this.X=E;t:if(Zc(this)){var N=ou(this.g);m="";var G=N.length,ee=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),Ws(this);var pe="";break t}this.h.i=new u.TextDecoder}for(w=0;w<G;w++)this.h.h=!0,m+=this.h.i.decode(N[w],{stream:!(ee&&w==G-1)});N.length=0,this.h.g+=m,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=E==200,ta(this.i,this.u,this.A,this.l,this.R,It,E),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Lt=this.g;if((et=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(et)){var qe=et;break t}}qe=null}if(E=qe)mr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tu(this,E);else{this.o=!1,this.s=3,kt(12),Jn(this),Ws(this);break e}}if(this.P){E=!0;let Fn;for(;!this.J&&this.C<pe.length;)if(Fn=ym(this,pe),Fn==ra){It==4&&(this.s=4,kt(14),E=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==Zl){this.s=4,kt(15),mr(this.i,this.l,pe,"[Invalid Chunk]"),E=!1;break}else mr(this.i,this.l,Fn,null),tu(this,Fn);if(Zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||pe.length!=0||this.h.h||(this.s=1,kt(16),E=!1),this.o=this.o&&E,!E)mr(this.i,this.l,pe,"[Invalid Chunked Response]"),Jn(this),Ws(this);else if(0<pe.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),lu(Bt),Bt.M=!0,kt(11))}}else mr(this.i,this.l,pe,null),tu(this,pe);It==4&&Jn(this),this.o&&!this.J&&(It==4?pa(this.j,this):(this.o=!1,rt(this)))}else ca(this.g),E==400&&0<pe.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Jn(this),Ws(this)}}}catch{}finally{}};function Zc(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function ym(m,w){var E=m.C,N=w.indexOf(`
`,E);return N==-1?ra:(E=Number(w.substring(E,N)),isNaN(E)?Zl:(N+=1,N+E>w.length?ra:(w=w.slice(N,N+E),m.C=N+E,w)))}gr.prototype.cancel=function(){this.J=!0,Jn(this)};function rt(m){m.S=Date.now()+m.I,ed(m,m.I)}function ed(m,w){if(m.B!=null)throw Error("WatchDog timer not null");m.B=fr(x(m.ba,m),w)}function eo(m){m.B&&(u.clearTimeout(m.B),m.B=null)}gr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Xl(this.i,this.A),this.L!=2&&(hs(),kt(17)),Jn(this),this.s=2,Ws(this)):ed(this,this.S-m)};function Ws(m){m.j.G==0||m.J||pa(m.j,m)}function Jn(m){eo(m);var w=m.M;w&&typeof w.ma=="function"&&w.ma(),m.M=null,Hl(m.U),m.g&&(w=m.g,m.g=null,w.abort(),w.ma())}function tu(m,w){try{var E=m.j;if(E.G!=0&&(E.g==m||yn(E.h,m))){if(!m.K&&yn(E.h,m)&&E.G==3){try{var N=E.Da.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<m.F)ma(E),_r(E);else break e;fa(E),kt(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&E.v==0&&!E.C&&(E.C=fr(x(E.Za,E),6e3));if(1>=nd(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ys(E,11)}else if((m.K||E.g==m)&&ma(E),!V(w))for(G=E.Da.g.parse(w),w=0;w<G.length;w++){let qe=G[w];if(E.T=qe[0],qe=qe[1],E.G==2)if(qe[0]=="c"){E.K=qe[1],E.ia=qe[2];const Bt=qe[3];Bt!=null&&(E.la=Bt,E.j.info("VER="+E.la));const It=qe[4];It!=null&&(E.Aa=It,E.j.info("SVER="+E.Aa));const Xn=qe[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(N=1.5*Xn,E.L=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const Fn=m.g;if(Fn){const ao=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var ee=N.h;ee.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(nu(ee,ee.h),ee.h=null))}if(N.D){const ya=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;ya&&(N.ya=ya,tt(N.I,N.D,ya))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-m.F,E.j.info("Handshake RTT: "+E.R+"ms")),N=E;var pe=m;if(N.qa=pd(N,N.J?N.ia:null,N.W),pe.K){rd(N.h,pe);var et=pe,Lt=N.L;Lt&&(et.I=Lt),et.B&&(eo(et),rt(et)),N.g=pe}else oo(N);0<E.i.length&&Ur(E)}else qe[0]!="stop"&&qe[0]!="close"||ys(E,7);else E.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?ys(E,7):Yt(E):qe[0]!="noop"&&E.l&&E.l.ta(qe),E.v=0)}}hs(4)}catch{}}var td=class{constructor(m,w){this.g=m,this.map=w}};function to(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mn(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function nd(m){return m.h?1:m.g?m.g.size:0}function yn(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function nu(m,w){m.g?m.g.add(w):m.h=w}function rd(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}to.prototype.cancel=function(){if(this.i=sd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function sd(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const E of m.g.values())w=w.concat(E.D);return w}return O(m.i)}function ia(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(c(m)){for(var w=[],E=m.length,N=0;N<E;N++)w.push(m[N]);return w}w=[],E=0;for(N in m)w[E++]=m[N];return w}function oa(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(c(m)||typeof m=="string"){var w=[];m=m.length;for(var E=0;E<m;E++)w.push(E);return w}w=[],E=0;for(const N in m)w[E++]=N;return w}}}function Hs(m,w){if(m.forEach&&typeof m.forEach=="function")m.forEach(w,void 0);else if(c(m)||typeof m=="string")Array.prototype.forEach.call(m,w,void 0);else for(var E=oa(m),N=ia(m),G=N.length,ee=0;ee<G;ee++)w.call(void 0,N[ee],E&&E[ee],m)}var no=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vm(m,w){if(m){m=m.split("&");for(var E=0;E<m.length;E++){var N=m[E].indexOf("="),G=null;if(0<=N){var ee=m[E].substring(0,N);G=m[E].substring(N+1)}else ee=m[E];w(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function fs(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof fs){this.h=m.h,ro(this,m.j),this.o=m.o,this.g=m.g,qs(this,m.s),this.l=m.l;var w=m.i,E=new Vr;E.i=w.i,w.g&&(E.g=new Map(w.g),E.h=w.h),Ks(this,E),this.m=m.m}else m&&(w=String(m).match(no))?(this.h=!1,ro(this,w[1]||"",!0),this.o=He(w[2]||""),this.g=He(w[3]||"",!0),qs(this,w[4]),this.l=He(w[5]||"",!0),Ks(this,w[6]||"",!0),this.m=He(w[7]||"")):(this.h=!1,this.i=new Vr(null,this.h))}fs.prototype.toString=function(){var m=[],w=this.j;w&&m.push(Qs(w,aa,!0),":");var E=this.g;return(E||w=="file")&&(m.push("//"),(w=this.o)&&m.push(Qs(w,aa,!0),"@"),m.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&m.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&m.push("/"),m.push(Qs(E,E.charAt(0)=="/"?ad:od,!0))),(E=this.i.toString())&&m.push("?",E),(E=this.m)&&m.push("#",Qs(E,ru)),m.join("")};function Vn(m){return new fs(m)}function ro(m,w,E){m.j=E?He(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function qs(m,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);m.s=w}else m.s=null}function Ks(m,w,E){w instanceof Vr?(m.i=w,$r(m.i,m.h)):(E||(w=Qs(w,ld)),m.i=new Vr(w,m.h))}function tt(m,w,E){m.i.set(w,E)}function Gs(m){return tt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function He(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Qs(m,w,E){return typeof m=="string"?(m=encodeURI(m).replace(w,id),E&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function id(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var aa=/[#\/\?@]/g,od=/[#\?:]/g,ad=/[#\?]/g,ld=/[#\?@]/g,ru=/#/g;function Vr(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function Jt(m){m.g||(m.g=new Map,m.h=0,m.i&&vm(m.i,function(w,E){m.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}t=Vr.prototype,t.add=function(m,w){Jt(this),this.i=null,m=Yn(this,m);var E=this.g.get(m);return E||this.g.set(m,E=[]),E.push(w),this.h+=1,this};function yr(m,w){Jt(m),w=Yn(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function vr(m,w){return Jt(m),w=Yn(m,w),m.g.has(w)}t.forEach=function(m,w){Jt(this),this.g.forEach(function(E,N){E.forEach(function(G){m.call(w,G,N,this)},this)},this)},t.na=function(){Jt(this);const m=Array.from(this.g.values()),w=Array.from(this.g.keys()),E=[];for(let N=0;N<w.length;N++){const G=m[N];for(let ee=0;ee<G.length;ee++)E.push(w[N])}return E},t.V=function(m){Jt(this);let w=[];if(typeof m=="string")vr(this,m)&&(w=w.concat(this.g.get(Yn(this,m))));else{m=Array.from(this.g.values());for(let E=0;E<m.length;E++)w=w.concat(m[E])}return w},t.set=function(m,w){return Jt(this),this.i=null,m=Yn(this,m),vr(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},t.get=function(m,w){return m?(m=this.V(m),0<m.length?String(m[0]):w):w};function Js(m,w,E){yr(m,w),0<E.length&&(m.i=null,m.g.set(Yn(m,w),O(E)),m.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(var E=0;E<w.length;E++){var N=w[E];const ee=encodeURIComponent(String(N)),pe=this.V(N);for(N=0;N<pe.length;N++){var G=ee;pe[N]!==""&&(G+="="+encodeURIComponent(String(pe[N]))),m.push(G)}}return this.i=m.join("&")};function Yn(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function $r(m,w){w&&!m.j&&(Jt(m),m.i=null,m.g.forEach(function(E,N){var G=N.toLowerCase();N!=G&&(yr(this,N),Js(this,G,E))},m)),m.j=w}function xm(m,w){const E=new Yi;if(u.Image){const N=new Image;N.onload=b(En,E,"TestLoadImage: loaded",!0,w,N),N.onerror=b(En,E,"TestLoadImage: error",!1,w,N),N.onabort=b(En,E,"TestLoadImage: abort",!1,w,N),N.ontimeout=b(En,E,"TestLoadImage: timeout",!1,w,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=m}else w(!1)}function ud(m,w){const E=new Yi,N=new AbortController,G=setTimeout(()=>{N.abort(),En(E,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:N.signal}).then(ee=>{clearTimeout(G),ee.ok?En(E,"TestPingServer: ok",!0,w):En(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(G),En(E,"TestPingServer: error",!1,w)})}function En(m,w,E,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(E)}catch{}}function wm(){this.g=new Gl}function cd(m,w,E){const N=E||"";try{Hs(m,function(G,ee){let pe=G;h(G)&&(pe=ql(G)),w.push(N+ee+"="+encodeURIComponent(pe))})}catch(G){throw w.push(N+"type="+encodeURIComponent("_badmap")),G}}function ms(m){this.l=m.Ub||null,this.j=m.eb||!1}k(ms,Qi),ms.prototype.g=function(){return new so(this.l,this.j)},ms.prototype.i=function(m){return function(){return m}}({});function so(m,w){Dt.call(this),this.D=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(so,Dt),t=so.prototype,t.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=w,this.readyState=1,wr(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(w.body=m),(this.D||u).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dd(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function dd(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?xr(this):wr(this),this.readyState==3&&dd(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,xr(this))},t.Qa=function(m){this.g&&(this.response=m,xr(this))},t.ga=function(){this.g&&xr(this)};function xr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,wr(m)}t.setRequestHeader=function(m,w){this.u.append(m,w)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,m.push(E[0]+": "+E[1]),E=w.next();return m.join(`\r
`)};function wr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(so.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ps(m){let w="";return K(m,function(E,N){w+=N,w+=":",w+=E,w+=`\r
`}),w}function Ys(m,w,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=ps(E),typeof m=="string"?E!=null&&encodeURIComponent(String(E)):tt(m,w,E))}function dt(m){Dt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(dt,Dt);var _m=/^https?$/i,su=["POST","PUT"];t=dt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,w,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pr.g(),this.v=this.o?Yo(this.o):Yo(pr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(ee){io(this,ee);return}if(m=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)E.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ee of N.keys())E.set(ee,N.get(ee));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(su,w,void 0))||N||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,pe]of E)this.g.setRequestHeader(ee,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ua(this),this.u=!0,this.g.send(m),this.u=!1}catch(ee){io(this,ee)}};function io(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.m=5,la(m),$n(m)}function la(m){m.A||(m.A=!0,Ot(m,"complete"),Ot(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ot(this,"complete"),Ot(this,"abort"),$n(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$n(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?iu(this):this.bb())},t.bb=function(){iu(this)};function iu(m){if(m.h&&typeof l<"u"&&(!m.v[1]||Tn(m)!=4||m.Z()!=2)){if(m.u&&Tn(m)==4)zl(m.Ea,0,m);else if(Ot(m,"readystatechange"),Tn(m)==4){m.h=!1;try{const pe=m.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var N;if(N=pe===0){var G=String(m.D).match(no)[1]||null;!G&&u.self&&u.self.location&&(G=u.self.location.protocol.slice(0,-1)),N=!_m.test(G?G.toLowerCase():"")}E=N}if(E)Ot(m,"complete"),Ot(m,"success");else{m.m=6;try{var ee=2<Tn(m)?m.g.statusText:""}catch{ee=""}m.l=ee+" ["+m.Z()+"]",la(m)}}finally{$n(m)}}}}function $n(m,w){if(m.g){ua(m);const E=m.g,N=m.v[0]?()=>{}:null;m.g=null,m.v=null,w||Ot(m,"ready");try{E.onreadystatechange=N}catch{}}}function ua(m){m.I&&(u.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Tn(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),Kl(w)}};function ou(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(m){const w={};m=(m.g&&2<=Tn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<m.length;N++){if(V(m[N]))continue;var E=j(m[N]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ee=w[G]||[];w[G]=ee,ee.push(E)}I(w,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(m,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[m]||w}function au(m){this.Aa=0,this.i=[],this.j=new Yi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fr("baseRetryDelayMs",5e3,m),this.cb=Fr("retryDelaySeedMs",1e4,m),this.Wa=Fr("forwardChannelMaxRetries",2,m),this.wa=Fr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new to(m&&m.concurrentRequestLimit),this.Da=new wm,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=au.prototype,t.la=8,t.G=1,t.connect=function(m,w,E,N){kt(0),this.W=m,this.H=w||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.I=pd(this,null,this.W),Ur(this)};function Yt(m){if(da(m),m.G==3){var w=m.U++,E=Vn(m.I);if(tt(E,"SID",m.K),tt(E,"RID",w),tt(E,"TYPE","terminate"),gs(m,E),w=new gr(m,m.j,w),w.L=2,w.v=Gs(Vn(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(w.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=w.v,E=!0),E||(w.g=gd(w.j,null),w.g.ea(w.v)),w.F=Date.now(),rt(w)}md(m)}function _r(m){m.g&&(lu(m),m.g.cancel(),m.g=null)}function da(m){_r(m),m.u&&(u.clearTimeout(m.u),m.u=null),ma(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Ur(m){if(!Mn(m.h)&&!m.s){m.s=!0;var w=m.Ga;be||te(),ce||(be(),ce=!0),J.add(w,m),m.B=0}}function bm(m,w){return nd(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=w.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=fr(x(m.Ga,m,w),fd(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const G=new gr(this,this.j,m);let ee=this.o;if(this.S&&(ee?(ee=S(ee),R(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,4096<w){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=Xs(this,G,w),E=Vn(this.I),tt(E,"RID",m),tt(E,"CVER",22),this.D&&tt(E,"X-HTTP-Session-Id",this.D),gs(this,E),ee&&(this.O?w="headers="+encodeURIComponent(String(ps(ee)))+"&"+w:this.m&&Ys(E,this.m,ee)),nu(this.h,G),this.Ua&&tt(E,"TYPE","init"),this.P?(tt(E,"$req",w),tt(E,"SID","null"),G.T=!0,sa(G,E,null)):sa(G,E,w),this.G=2}}else this.G==3&&(m?ha(this,m):this.i.length==0||Mn(this.h)||ha(this))};function ha(m,w){var E;w?E=w.l:E=m.U++;const N=Vn(m.I);tt(N,"SID",m.K),tt(N,"RID",E),tt(N,"AID",m.T),gs(m,N),m.m&&m.o&&Ys(N,m.m,m.o),E=new gr(m,m.j,E,m.B+1),m.m===null&&(E.H=m.o),w&&(m.i=w.D.concat(m.i)),w=Xs(m,E,1e3),E.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),nu(m.h,E),sa(E,N,w)}function gs(m,w){m.H&&K(m.H,function(E,N){tt(w,N,E)}),m.l&&Hs({},function(E,N){tt(w,N,E)})}function Xs(m,w,E){E=Math.min(m.i.length,E);var N=m.l?x(m.l.Na,m.l,m):null;e:{var G=m.i;let ee=-1;for(;;){const pe=["count="+E];ee==-1?0<E?(ee=G[0].g,pe.push("ofs="+ee)):ee=0:pe.push("ofs="+ee);let et=!0;for(let Lt=0;Lt<E;Lt++){let qe=G[Lt].g;const Bt=G[Lt].map;if(qe-=ee,0>qe)ee=Math.max(0,G[Lt].g-100),et=!1;else try{cd(Bt,pe,"req"+qe+"_")}catch{N&&N(Bt)}}if(et){N=pe.join("&");break e}}}return m=m.i.splice(0,E),w.D=m,N}function oo(m){if(!m.g&&!m.u){m.Y=1;var w=m.Fa;be||te(),ce||(be(),ce=!0),J.add(w,m),m.v=0}}function fa(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=fr(x(m.Fa,m),fd(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,hd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=fr(x(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),_r(this),hd(this))};function lu(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function hd(m){m.g=new gr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var w=Vn(m.qa);tt(w,"RID","rpc"),tt(w,"SID",m.K),tt(w,"AID",m.T),tt(w,"CI",m.F?"0":"1"),!m.F&&m.ja&&tt(w,"TO",m.ja),tt(w,"TYPE","xmlhttp"),gs(m,w),m.m&&m.o&&Ys(w,m.m,m.o),m.L&&(m.g.I=m.L);var E=m.g;m=m.ia,E.L=1,E.v=Gs(Vn(w)),E.m=null,E.P=!0,eu(E,m)}t.Za=function(){this.C!=null&&(this.C=null,_r(this),fa(this),kt(19))};function ma(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function pa(m,w){var E=null;if(m.g==w){ma(m),lu(m),m.g=null;var N=2}else if(yn(m.h,w))E=w.D,rd(m.h,w),N=1;else return;if(m.G!=0){if(w.o)if(N==1){E=w.m?w.m.length:0,w=Date.now()-w.F;var G=m.B;N=Ji(),Ot(N,new ea(N,E)),Ur(m)}else oo(m);else if(G=w.s,G==3||G==0&&0<w.X||!(N==1&&bm(m,w)||N==2&&fa(m)))switch(E&&0<E.length&&(w=m.h,w.i=w.i.concat(E)),G){case 1:ys(m,5);break;case 4:ys(m,10);break;case 3:ys(m,6);break;default:ys(m,2)}}}function fd(m,w){let E=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(E*=2),E*w}function ys(m,w){if(m.j.info("Error code "+w),w==2){var E=x(m.fb,m),N=m.Xa;const G=!N;N=new fs(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ro(N,"https"),Gs(N),G?xm(N.toString(),E):ud(N.toString(),E)}else kt(2);m.G=0,m.l&&m.l.sa(w),md(m),da(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function md(m){if(m.G=0,m.ka=[],m.l){const w=sd(m.h);(w.length!=0||m.i.length!=0)&&(A(m.ka,w),A(m.ka,m.i),m.h.i.length=0,O(m.i),m.i.length=0),m.l.ra()}}function pd(m,w,E){var N=E instanceof fs?Vn(E):new fs(E);if(N.g!="")w&&(N.g=w+"."+N.g),qs(N,N.s);else{var G=u.location;N=G.protocol,w=w?w+"."+G.hostname:G.hostname,G=+G.port;var ee=new fs(null);N&&ro(ee,N),w&&(ee.g=w),G&&qs(ee,G),E&&(ee.l=E),N=ee}return E=m.D,w=m.ya,E&&w&&tt(N,E,w),tt(N,"VER",m.la),gs(m,N),N}function gd(m,w,E){if(w&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Ca&&!m.pa?new dt(new ms({eb:E})):new dt(m.pa),w.Ha(m.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}t=uu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ga(){}ga.prototype.g=function(m,w){return new vn(m,w)};function vn(m,w){Dt.call(this),this.g=new au(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(m?m["X-WebChannel-Client-Profile"]=w.va:m={"X-WebChannel-Client-Profile":w.va}),this.g.S=m,(m=w&&w.Sb)&&!V(m)&&(this.g.m=m),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.D=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Br(this)}k(vn,Dt),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Yt(this.g)},vn.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var E={};E.__data__=m,m=E}else this.u&&(E={},E.__data__=ql(m),m=E);w.i.push(new td(w.Ya++,m)),w.G==3&&Ur(w)},vn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,vn.aa.N.call(this)};function yd(m){Lr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const E in w){m=E;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}k(yd,Lr);function vd(){Zo.call(this),this.status=1}k(vd,Zo);function Br(m){this.g=m}k(Br,uu),Br.prototype.ua=function(){Ot(this.g,"a")},Br.prototype.ta=function(m){Ot(this.g,new yd(m))},Br.prototype.sa=function(m){Ot(this.g,new vd)},Br.prototype.ra=function(){Ot(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,NC=function(){return new ga},RC=function(){return Ji()},IC=Mr,E0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,Vh=na,Yc.COMPLETE="complete",AC=Yc,Xo.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,Gu=Xo,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,PC=dt}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});const TE="@firebase/firestore",SE="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new zy("@firebase/firestore");function Ja(){return Vo.logLevel}function xe(t,...e){if(Vo.logLevel<=Be.DEBUG){const n=e.map(Ky);Vo.debug(`Firestore (${Ol}): ${t}`,...n)}}function Os(t,...e){if(Vo.logLevel<=Be.ERROR){const n=e.map(Ky);Vo.error(`Firestore (${Ol}): ${t}`,...n)}}function xl(t,...e){if(Vo.logLevel<=Be.WARN){const n=e.map(Ky);Vo.warn(`Firestore (${Ol}): ${t}`,...n)}}function Ky(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t="Unexpected state"){const e=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: `+t;throw Os(e),new Error(e)}function Xe(t,e){t||Ne()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends ls{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}}class y${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class v${constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new Ns;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ns,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ns)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string"),new jC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new fn(e)}}class x${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class w${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new x$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _${constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,lr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0);const r=o=>{o.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new kE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string"),this.R=n.token,new kE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=b$(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function T0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ve(r,s);{const o=DC(),l=E$(o.encode(CE(t,n)),o.encode(CE(e,n)));return l!==0?l:Ve(r,s)}}n+=r>65535?2:1}return Ve(t.length,e.length)}function CE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function E$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ve(t[n],e[n]);return Ve(t.length,e.length)}function wl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=-62135596800,AE=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*AE);return new Ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<PE)throw new ke(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-PE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Ft(0,0))}static max(){return new Oe(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="__name__";class Gr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(),r===void 0?r=e.length-n:r>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Gr.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ve(e.length,n.length)}static compareSegments(e,n){const r=Gr.isNumericId(e),s=Gr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Gr.extractNumericId(e).compare(Gr.extractNumericId(n)):T0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class ft extends Gr{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const T$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Gr{construct(e,n,r){return new rn(e,n,r)}static isValidIdentifier(e){return T$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IE}static keyField(){return new rn([IE])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ke(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ke(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ke(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new ke(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(ft.fromString(e))}static fromName(e){return new Ae(ft.fromString(e).popFirst(5))}static empty(){return new Ae(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=-1;function S$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new Di(s,Ae.empty(),e)}function k$(t){return new Di(t.readTime,t.key,Ec)}class Di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Di(Oe.min(),Ae.empty(),Ec)}static max(){return new Di(Oe.max(),Ae.empty(),Ec)}}function C$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==P$)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let s=0,o=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++o,l&&o===s&&n()},c=>r(c))}),l=!0,o===s&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(s=>s?se.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new se((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let c=0;c<o;c++){const h=c;n(e[h]).next(g=>{l[h]=g,++u,u===o&&r(l)},g=>s(g))}})}static doWhile(e,n){return new se((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function I$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}zf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-1;function Wf(t){return t==null}function hf(t){return t===0&&1/t==-1/0}function R$(t){return typeof t=="number"&&Number.isInteger(t)&&!hf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="";function N$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=RE(e)),e=j$(t.get(n),e);return RE(e)}function j$(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case LC:n+="";break;default:n+=o}}return n}function RE(t){return t+LC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sh(this.root,e,this.comparator,!0)}}class Sh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??tn.RED,this.left=s??tn.EMPTY,this.right=o??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new tn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,r,s,o){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jE(this.data.getIterator())}getIteratorFrom(e){return new jE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class jE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new Ut(rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new VC("Invalid base64 string: "+o):o}}(e);return new sn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const D$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(t){if(Xe(!!t),typeof t=="string"){let e=0;const n=D$.exec(t);if(Xe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Li(t){return typeof t=="string"?sn.fromBase64String(t):sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="server_timestamp",FC="__type__",UC="__previous_value__",BC="__local_write_time__";function Qy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[FC])===null||n===void 0?void 0:n.stringValue)===$C}function Hf(t){const e=t.mapValue.fields[UC];return Qy(e)?Hf(e):e}function Tc(t){const e=Oi(t.mapValue.fields[BC].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n,r,s,o,l,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}const ff="(default)";class Sc{constructor(e,n){this.projectId=e,this.database=n||ff}static empty(){return new Sc("","")}get isDefaultDatabase(){return this.database===ff}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__type__",L$="__max__",kh={mapValue:{}},WC="__vector__",mf="value";function Mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qy(t)?4:V$(t)?9007199254740991:M$(t)?10:11:Ne()}function os(t,e){if(t===e)return!0;const n=Mi(t);if(n!==Mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tc(t).isEqual(Tc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Oi(s.timestampValue),u=Oi(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Li(s.bytesValue).isEqual(Li(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return At(s.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(s.geoPointValue.longitude)===At(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return At(s.integerValue)===At(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=At(s.doubleValue),u=At(o.doubleValue);return l===u?hf(l)===hf(u):isNaN(l)&&isNaN(u)}return!1}(t,e);case 9:return wl(t.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(NE(l)!==NE(u))return!1;for(const c in l)if(l.hasOwnProperty(c)&&(u[c]===void 0||!os(l[c],u[c])))return!1;return!0}(t,e);default:return Ne()}}function kc(t,e){return(t.values||[]).find(n=>os(n,e))!==void 0}function _l(t,e){if(t===e)return 0;const n=Mi(t),r=Mi(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(o,l){const u=At(o.integerValue||o.doubleValue),c=At(l.integerValue||l.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return DE(t.timestampValue,e.timestampValue);case 4:return DE(Tc(t),Tc(e));case 5:return T0(t.stringValue,e.stringValue);case 6:return function(o,l){const u=Li(o),c=Li(l);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),c=l.split("/");for(let h=0;h<u.length&&h<c.length;h++){const g=Ve(u[h],c[h]);if(g!==0)return g}return Ve(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const u=Ve(At(o.latitude),At(l.latitude));return u!==0?u:Ve(At(o.longitude),At(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OE(t.arrayValue,e.arrayValue);case 10:return function(o,l){var u,c,h,g;const v=o.fields||{},x=l.fields||{},b=(u=v[mf])===null||u===void 0?void 0:u.arrayValue,k=(c=x[mf])===null||c===void 0?void 0:c.arrayValue,O=Ve(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0);return O!==0?O:OE(b,k)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===kh.mapValue&&l===kh.mapValue)return 0;if(o===kh.mapValue)return 1;if(l===kh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),h=l.fields||{},g=Object.keys(h);c.sort(),g.sort();for(let v=0;v<c.length&&v<g.length;++v){const x=T0(c[v],g[v]);if(x!==0)return x;const b=_l(u[c[v]],h[g[v]]);if(b!==0)return b}return Ve(c.length,g.length)}(t.mapValue,e.mapValue);default:throw Ne()}}function DE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=Oi(t),r=Oi(e),s=Ve(n.seconds,r.seconds);return s!==0?s:Ve(n.nanos,r.nanos)}function OE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=_l(n[s],r[s]);if(o)return o}return Ve(n.length,r.length)}function bl(t){return S0(t)}function S0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=S0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${S0(n.fields[l])}`;return s+"}"}(t.mapValue):Ne()}function $h(t){switch(Mi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hf(t);return e?16+$h(e):16;case 5:return 2*t.stringValue.length;case 6:return Li(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+$h(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return zi(r.fields,(o,l)=>{s+=o.length+$h(l)}),s}(t.mapValue);default:throw Ne()}}function k0(t){return!!t&&"integerValue"in t}function Jy(t){return!!t&&"arrayValue"in t}function LE(t){return!!t&&"nullValue"in t}function ME(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fh(t){return!!t&&"mapValue"in t}function M$(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||n===void 0?void 0:n.stringValue)===WC}function ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ic(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}function V$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===L$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=rn.emptyPath(),r={},s=[];e.forEach((l,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=ic(l):s.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){zi(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new jn(ic(this.value))}}function HC(t){const e=[];return zi(t.fields,(n,r)=>{const s=new rn([n]);if(Fh(r)){const o=HC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,r,s,o,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new mn(e,0,Oe.min(),Oe.min(),Oe.min(),jn.empty(),0)}static newFoundDocument(e,n,r,s){return new mn(e,1,n,Oe.min(),r,s,0)}static newNoDocument(e,n){return new mn(e,2,n,Oe.min(),Oe.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,Oe.min(),Oe.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.position=e,this.inclusive=n}}function VE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Ae.comparator(Ae.fromName(l.referenceValue),n.key):r=_l(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $E(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!os(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n="asc"){this.field=e,this.dir=n}}function $$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{}class $t extends qC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new U$(e,n,r):n==="array-contains"?new W$(e,r):n==="in"?new H$(e,r):n==="not-in"?new q$(e,r):n==="array-contains-any"?new K$(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B$(e,r):new z$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_l(n,this.value)):n!==null&&Mi(this.value)===Mi(n)&&this.matchesComparison(_l(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends qC{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new as(e,n)}matches(e){return KC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function KC(t){return t.op==="and"}function GC(t){return F$(t)&&KC(t)}function F$(t){for(const e of t.filters)if(e instanceof as)return!1;return!0}function C0(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+bl(t.value);if(GC(t))return t.filters.map(e=>C0(e)).join(",");{const e=t.filters.map(n=>C0(n)).join(",");return`${t.op}(${e})`}}function QC(t,e){return t instanceof $t?function(r,s){return s instanceof $t&&r.op===s.op&&r.field.isEqual(s.field)&&os(r.value,s.value)}(t,e):t instanceof as?function(r,s){return s instanceof as&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,u)=>o&&QC(l,s.filters[u]),!0):!1}(t,e):void Ne()}function JC(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${bl(n.value)}`}(t):t instanceof as?function(n){return n.op.toString()+" {"+n.getFilters().map(JC).join(" ,")+"}"}(t):"Filter"}class U$ extends $t{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class B$ extends $t{constructor(e,n){super(e,"in",n),this.keys=YC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z$ extends $t{constructor(e,n){super(e,"not-in",n),this.keys=YC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class W$ extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jy(n)&&kc(n.arrayValue,this.value)}}class H$ extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kc(this.value.arrayValue,n)}}class q$ extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!kc(this.value.arrayValue,n)}}class K$ extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e,n=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function FE(t,e=null,n=[],r=[],s=null,o=null,l=null){return new G$(t,e,n,r,s,o,l)}function Yy(t){const e=Le(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>C0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Wf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bl(r)).join(",")),e.le=n}return e.le}function Xy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$E(t.startAt,e.startAt)&&$E(t.endAt,e.endAt)}function P0(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n=null,r=[],s=[],o=null,l="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Q$(t,e,n,r,s,o,l,u){return new qf(t,e,n,r,s,o,l,u)}function Zy(t){return new qf(t)}function UE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function J$(t){return t.collectionGroup!==null}function oc(t){const e=Le(t);if(e.he===null){e.he=[];const n=new Set;for(const o of e.explicitOrderBy)e.he.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Ut(rn.comparator);return l.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.he.push(new gf(o,r))}),n.has(rn.keyField().canonicalString())||e.he.push(new gf(rn.keyField(),r))}return e.he}function ts(t){const e=Le(t);return e.Pe||(e.Pe=Y$(e,oc(t))),e.Pe}function Y$(t,e){if(t.limitType==="F")return FE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new gf(s.field,o)});const n=t.endAt?new pf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pf(t.startAt.position,t.startAt.inclusive):null;return FE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function A0(t,e,n){return new qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kf(t,e){return Xy(ts(t),ts(e))&&t.limitType===e.limitType}function XC(t){return`${Yy(ts(t))}|lt:${t.limitType}`}function Ya(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>JC(s)).join(", ")}]`),Wf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>bl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>bl(s)).join(",")),`Target(${r})`}(ts(t))}; limitType=${t.limitType})`}function Gf(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of oc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,u,c){const h=VE(l,u,c);return l.inclusive?h<=0:h<0}(r.startAt,oc(r),s)||r.endAt&&!function(l,u,c){const h=VE(l,u,c);return l.inclusive?h>=0:h>0}(r.endAt,oc(r),s))}(t,e)}function X$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZC(t){return(e,n)=>{let r=!1;for(const s of oc(t)){const o=Z$(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Z$(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):function(o,l,u){const c=l.data.field(o),h=u.data.field(o);return c!==null&&h!==null?_l(c,h):Ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return MC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new vt(Ae.comparator);function Ls(){return e3}const e1=new vt(Ae.comparator);function Qu(...t){let e=e1;for(const n of t)e=e.insert(n.key,n);return e}function t1(t){let e=e1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function No(){return ac()}function n1(){return ac()}function ac(){return new qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const t3=new vt(Ae.comparator),n3=new Ut(Ae.comparator);function ze(...t){let e=n3;for(const n of t)e=e.add(n);return e}const r3=new Ut(Ve);function s3(){return r3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hf(e)?"-0":e}}function r1(t){return{integerValue:""+t}}function i3(t,e){return R$(e)?r1(e):ev(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this._=void 0}}function o3(t,e,n){return t instanceof yf?function(s,o){const l={fields:{[FC]:{stringValue:$C},[BC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Qy(o)&&(o=Hf(o)),o&&(l.fields[UC]=o),{mapValue:l}}(n,e):t instanceof Cc?i1(t,e):t instanceof Pc?o1(t,e):function(s,o){const l=s1(s,o),u=BE(l)+BE(s.Ie);return k0(l)&&k0(s.Ie)?r1(u):ev(s.serializer,u)}(t,e)}function a3(t,e,n){return t instanceof Cc?i1(t,e):t instanceof Pc?o1(t,e):n}function s1(t,e){return t instanceof vf?function(r){return k0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class yf extends Qf{}class Cc extends Qf{constructor(e){super(),this.elements=e}}function i1(t,e){const n=a1(e);for(const r of t.elements)n.some(s=>os(s,r))||n.push(r);return{arrayValue:{values:n}}}class Pc extends Qf{constructor(e){super(),this.elements=e}}function o1(t,e){let n=a1(e);for(const r of t.elements)n=n.filter(s=>!os(s,r));return{arrayValue:{values:n}}}class vf extends Qf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function BE(t){return At(t.integerValue||t.doubleValue)}function a1(t){return Jy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function l3(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Cc&&s instanceof Cc||r instanceof Pc&&s instanceof Pc?wl(r.elements,s.elements,os):r instanceof vf&&s instanceof vf?os(r.Ie,s.Ie):r instanceof yf&&s instanceof yf}(t.transform,e.transform)}class u3{constructor(e,n){this.version=e,this.transformResults=n}}class cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jf{}function l1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tv(t.key,cr.none()):new Bc(t.key,t.data,cr.none());{const n=t.data,r=jn.empty();let s=new Ut(rn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Wi(t.key,r,new Kn(s.toArray()),cr.none())}}function c3(t,e,n){t instanceof Bc?function(s,o,l){const u=s.value.clone(),c=WE(s.fieldTransforms,o,l.transformResults);u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Wi?function(s,o,l){if(!Uh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=WE(s.fieldTransforms,o,l.transformResults),c=o.data;c.setAll(u1(s)),c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,r){return t instanceof Bc?function(o,l,u,c){if(!Uh(o.precondition,l))return u;const h=o.value.clone(),g=HE(o.fieldTransforms,c,l);return h.setAll(g),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wi?function(o,l,u,c){if(!Uh(o.precondition,l))return u;const h=HE(o.fieldTransforms,c,l),g=l.data;return g.setAll(u1(o)),g.setAll(h),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(o,l,u){return Uh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(t,e,n)}function d3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=s1(r.transform,s||null);o!=null&&(n===null&&(n=jn.empty()),n.set(r.field,o))}return n||null}function zE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wl(r,s,(o,l)=>l3(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bc extends Jf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wi extends Jf{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function u1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function WE(t,e,n){const r=new Map;Xe(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,a3(l,u,n[s]))}return r}function HE(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,o3(o,l,e))}return r}class tv extends Jf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h3 extends Jf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&c3(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=n1();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(s.key)?null:u;const c=l1(l,u);c!==null&&r.set(s.key,c),l.isValidDocument()||l.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,(n,r)=>zE(n,r))&&wl(this.baseMutations,e.baseMutations,(n,r)=>zE(n,r))}}class nv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Xe(e.mutations.length===r.length);let s=function(){return t3}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new nv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ke;function g3(t){switch(t){case ue.OK:return Ne();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ne()}}function c1(t){if(t===void 0)return Os("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Nt.OK:return ue.OK;case Nt.CANCELLED:return ue.CANCELLED;case Nt.UNKNOWN:return ue.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ue.INTERNAL;case Nt.UNAVAILABLE:return ue.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ue.NOT_FOUND;case Nt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Nt.ABORTED:return ue.ABORTED;case Nt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Nt.DATA_LOSS:return ue.DATA_LOSS;default:return Ne()}}(Ke=Nt||(Nt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=new Ci([4294967295,4294967295],0);function qE(t){const e=DC().encode(t),n=new CC;return n.update(e),new Uint8Array(n.digest())}function KE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ci([n,r],0),new Ci([s,o],0)]}class rv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ju(`Invalid padding: ${n}`);if(r<0)throw new Ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Ci.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(Ci.fromNumber(r)));return s.compare(y3)===1&&(s=new Ci([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=qE(e),[r,s]=KE(n);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new rv(o,s,n);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const n=qE(e),[r,s]=KE(n);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yf(Oe.min(),s,new vt(Ve),Ls(),ze())}}class zc{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zc(r,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class d1{constructor(e,n){this.targetId=e,this.ge=n}}class h1{constructor(e,n,r=sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class GE{constructor(){this.pe=0,this.ye=QE(),this.we=sn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ze(),n=ze(),r=ze();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ne()}}),new zc(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=QE()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Xe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class v3{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ls(),this.$e=Ch(),this.Ue=Ch(),this.Ke=new vt(Ve)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const o=s.target;if(P0(o))if(r===0){const l=new Ae(o.path);this.ze(n,l,mn.newNoDocument(l,Oe.min()))}else Xe(r===1);else{const l=this.et(n);if(l!==r){const u=this.tt(e),c=u?this.nt(u,e,l):1;if(c!==0){this.Ye(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,u;try{l=Li(r).toUint8Array()}catch(c){if(c instanceof VC)return xl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new rv(l,s,o)}catch(c){return xl(c instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ee===0?null:u}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(n,o,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&P0(u.target)){const c=new Ae(u.target.path);this._t(c).has(l)||this.ut(l,c)||this.ze(l,c,mn.newNoDocument(c,e))}o.ve&&(n.set(l,o.Fe()),o.Me())}});let r=ze();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Yf(e,n,this.Ke,this.Qe,r);return this.Qe=Ls(),this.$e=Ch(),this.Ue=Ch(),this.Ke=new vt(Ve),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new GE,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ut(Ve),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ut(Ve),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new GE),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Ch(){return new vt(Ae.comparator)}function QE(){return new vt(Ae.comparator)}const x3={asc:"ASCENDING",desc:"DESCENDING"},w3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_3={and:"AND",or:"OR"};class b3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function I0(t,e){return t.useProto3Json||Wf(e)?e:{value:e}}function xf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E3(t,e){return xf(t,e.toTimestamp())}function ns(t){return Xe(!!t),Oe.fromTimestamp(function(n){const r=Oi(n);return new Ft(r.seconds,r.nanos)}(t))}function sv(t,e){return R0(t,e).canonicalString()}function R0(t,e){const n=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function m1(t){const e=ft.fromString(t);return Xe(x1(e)),e}function N0(t,e){return sv(t.databaseId,e.path)}function Sg(t,e){const n=m1(e);if(n.get(1)!==t.databaseId.projectId)throw new ke(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ke(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(g1(n))}function p1(t,e){return sv(t.databaseId,e)}function T3(t){const e=m1(t);return e.length===4?ft.emptyPath():g1(e)}function j0(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function g1(t){return Xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function JE(t,e,n){return{name:N0(t,e),fields:n.value.mapValue.fields}}function S3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(Xe(g===void 0||typeof g=="string"),sn.fromBase64String(g||"")):(Xe(g===void 0||g instanceof Buffer||g instanceof Uint8Array),sn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(h){const g=h.code===void 0?ue.UNKNOWN:c1(h.code);return new ke(g,h.message||"")}(l);n=new h1(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sg(t,r.document.name),o=ns(r.document.updateTime),l=r.document.createTime?ns(r.document.createTime):Oe.min(),u=new jn({mapValue:{fields:r.document.fields}}),c=mn.newFoundDocument(s,o,l,u),h=r.targetIds||[],g=r.removedTargetIds||[];n=new Bh(h,g,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sg(t,r.document),o=r.readTime?ns(r.readTime):Oe.min(),l=mn.newNoDocument(s,o),u=r.removedTargetIds||[];n=new Bh([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sg(t,r.document),o=r.removedTargetIds||[];n=new Bh([],o,s,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new p3(s,o),u=r.targetId;n=new d1(u,l)}}return n}function k3(t,e){let n;if(e instanceof Bc)n={update:JE(t,e.key,e.value)};else if(e instanceof tv)n={delete:N0(t,e.key)};else if(e instanceof Wi)n={update:JE(t,e.key,e.data),updateMask:O3(e.fieldMask)};else{if(!(e instanceof h3))return Ne();n={verify:N0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const u=l.transform;if(u instanceof yf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Pc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof vf)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:E3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ne()}(t,e.precondition)),n}function C3(t,e){return t&&t.length>0?(Xe(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?ns(s.updateTime):ns(o);return l.isEqual(Oe.min())&&(l=ns(o)),new u3(l,s.transformResults||[])}(n,e))):[]}function P3(t,e){return{documents:[p1(t,e.path)]}}function A3(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=p1(t,s);const o=function(h){if(h.length!==0)return v1(as.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(g=>function(x){return{field:Xa(x.field),direction:N3(x.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=I0(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:n,parent:s}}function I3(t){let e=T3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Xe(r===1);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(v){const x=y1(v);return x instanceof as&&GC(x)?x.getFilters():[x]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(x=>function(k){return new gf(Za(k.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(x))}(n.orderBy));let u=null;n.limit&&(u=function(v){let x;return x=typeof v=="object"?v.value:v,Wf(x)?null:x}(n.limit));let c=null;n.startAt&&(c=function(v){const x=!!v.before,b=v.values||[];return new pf(b,x)}(n.startAt));let h=null;return n.endAt&&(h=function(v){const x=!v.before,b=v.values||[];return new pf(b,x)}(n.endAt)),Q$(e,s,l,o,u,"F",c,h)}function R3(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function y1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Za(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Za(n.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Za(n.unaryFilter.field);return $t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Za(n.unaryFilter.field);return $t.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(t):t.fieldFilter!==void 0?function(n){return $t.create(Za(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return as.create(n.compositeFilter.filters.map(r=>y1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(t):Ne()}function N3(t){return x3[t]}function j3(t){return w3[t]}function D3(t){return _3[t]}function Xa(t){return{fieldPath:t.canonicalString()}}function Za(t){return rn.fromServerFormat(t.fieldPath)}function v1(t){return t instanceof $t?function(n){if(n.op==="=="){if(ME(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NAN"}};if(LE(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ME(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NAN"}};if(LE(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(n.field),op:j3(n.op),value:n.value}}}(t):t instanceof as?function(n){const r=n.getFilters().map(s=>v1(s));return r.length===1?r[0]:{compositeFilter:{op:D3(n.op),filters:r}}}(t):Ne()}function O3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function x1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r,s,o=Oe.min(),l=Oe.min(),u=sn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.Tt=e}}function M3(t){const e=I3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?A0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.Tn=new $3}addToCollectionParentIndex(e,n){return this.Tn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Di.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class $3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ut(ft.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ut(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w1=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(w1,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new El(0)}static Kn(){return new El(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LruGarbageCollector",F3=1048576;function ZE([t,e],[n,r]){const s=Ve(t,n);return s===0?Ve(e,r):s}class U3{constructor(e){this.Hn=e,this.buffer=new Ut(ZE),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ZE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class B3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){xe(XE,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ml(n)?xe(XE,"Ignoring IndexedDB error during garbage collection: ",n):await Ll(n)}await this.er(3e5)})}}class z3{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return se.resolve(zf.ae);const r=new U3(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(YE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,o,l,u,c,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,n))).next(v=>(o=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),Ja()<=Be.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${v} documents in `+(h-c)+`ms
Total Duration: ${h-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function W3(t,e){return new z3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.changes=new qo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lc(r.mutation,s,Kn.empty(),Ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ze()){const s=No();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=Qu();return o.forEach((u,c)=>{l=l.insert(u,c.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=No();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ze()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,u)=>{n.set(l,u)})})}computeViews(e,n,r,s){let o=Ls();const l=ac(),u=function(){return ac()}();return n.forEach((c,h)=>{const g=r.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof Wi)?o=o.insert(h.key,h):g!==void 0?(l.set(h.key,g.mutation.getFieldMask()),lc(g.mutation,h,g.mutation.getFieldMask(),Ft.now())):l.set(h.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,g)=>l.set(h,g)),n.forEach((h,g)=>{var v;return u.set(h,new q3(g,(v=l.get(h))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,n){const r=ac();let s=new vt((l,u)=>l-u),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const u of l)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let g=r.get(c)||Kn.empty();g=u.applyToLocalView(h,g),r.set(c,g);const v=(s.get(u.batchId)||ze()).add(c);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,g=c.value,v=n1();g.forEach(x=>{if(!o.has(x)){const b=l1(n.get(x),r.get(x));b!==null&&v.set(x,b),o=o.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,v))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return Ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):J$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):se.resolve(No());let u=Ec,c=o;return l.next(h=>se.forEach(h,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{c=c.insert(g,x)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,ze())).next(g=>({batchId:u,changes:t1(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(r=>{let s=Qu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=Qu();return this.indexManager.getCollectionParents(e,o).next(u=>se.forEach(u,c=>{const h=function(v,x){return new qf(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(g=>{g.forEach((v,x)=>{l=l.insert(v,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((c,h)=>{const g=h.getKey();l.get(g)===null&&(l=l.insert(g,mn.newInvalidDocument(g)))});let u=Qu();return l.forEach((c,h)=>{const g=o.get(c);g!==void 0&&lc(g.mutation,h,Kn.empty(),Ft.now()),Gf(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return se.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ns(s.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:M3(s.bundledQuery),readTime:ns(s.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.overlays=new vt(Ae.comparator),this.Rr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=No();return se.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.Et(e,n,o)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const s=No(),o=n.length+1,l=new Ae(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>r&&s.set(c.getKey(),c)}return se.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new vt((h,g)=>h-g);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let g=o.get(h.largestBatchId);g===null&&(g=No(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const u=No(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,g)=>u.set(h,g)),!(u.size()>=s)););return se.resolve(u)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new m3(n,r));let o=this.Rr.get(n);o===void 0&&(o=ze(),this.Rr.set(n,o)),this.Rr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.Vr=new Ut(Gt.mr),this.gr=new Ut(Gt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new Gt(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new Gt(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new Ae(new ft([])),r=new Gt(n,e),s=new Gt(n,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Ae(new ft([])),r=new Gt(n,e),s=new Gt(n,e+1);let o=ze();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Gt(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Ae.comparator(e.key,n.key)||Ve(e.Cr,n.Cr)}static pr(e,n){return Ve(e.Cr,n.Cr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ut(Gt.mr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new f3(o,n,r,s);this.mutationQueue.push(l);for(const u of s)this.Mr=this.Mr.add(new Gt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,n){return se.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Gy:this.Fr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gt(n,0),s=new Gt(n,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const u=this.Or(l.Cr);o.push(u)}),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(Ve);return n.forEach(s=>{const o=new Gt(s,0),l=new Gt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{r=r.add(u.Cr)})}),se.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ae.isDocumentKey(o)||(o=o.child(""));const l=new Gt(new Ae(o),0);let u=new Ut(Ve);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Cr)),!0)},l),se.resolve(this.Br(u))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Xe(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return se.forEach(n.mutations,s=>{const o=new Gt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new Gt(n,0),s=this.Mr.firstAfterOrEqual(r);return se.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.kr=e,this.docs=function(){return new vt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=Ls();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():mn.newInvalidDocument(s))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Ls();const l=n.path,u=new Ae(l.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||C$(k$(g),r)<=0||(s.has(g.key)||Gf(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ne()}qr(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z3(this)}getSize(e){return se.resolve(this.size)}}class Z3 extends H3{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.persistence=e,this.Qr=new qo(n=>Yy(n),Xy),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new iv,this.targetCount=0,this.Kr=El.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),se.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new El(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.zn(n),se.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),se.waitFor(o).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),se.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new zf(0),this.zr=!1,this.zr=!0,this.jr=new J3,this.referenceDelegate=e(this),this.Hr=new e6(this),this.indexManager=new V3,this.remoteDocumentCache=function(s){return new X3(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new L3(n),this.Yr=new G3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new Y3(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){xe("MemoryPersistence","Starting transaction:",e);const s=new t6(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,n){return se.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class t6 extends A${constructor(e){super(),this.currentSequenceNumber=e}}class ov{constructor(e){this.persistence=e,this.ti=new iv,this.ni=null}static ri(e){return new ov(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),se.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.ii,r=>{const s=Ae.fromPath(r);return this.si(e,s).next(o=>{o||n.removeEntry(s,Oe.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return se.or([()=>se.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class wf{constructor(e,n){this.persistence=e,this.oi=new qo(r=>N$(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=W3(this,n)}static ri(e,n){return new wf(e,n)}Zr(){}Xr(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return se.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?se.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,n).next(u=>{u||(r++,o.removeEntry(l,Oe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$h(e.data.value)),n}ar(e,n,r){return se.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return se.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=ze(),s=ze();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new av(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return JM()?8:I$(gn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.rs(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new n6;return this._s(e,n,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,n,l,u.size)})}).next(()=>o.result)}us(e,n,r,s){return r.documentReadCount<this.es?(Ja()<=Be.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),se.resolve()):(Ja()<=Be.DEBUG&&xe("QueryEngine","Query:",Ya(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Ja()<=Be.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ts(n))):se.resolve())}rs(e,n){if(UE(n))return se.resolve(null);let r=ts(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=A0(n,null,"F"),r=ts(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=ze(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.cs(n,u);return this.ls(n,h,l,c.readTime)?this.rs(e,A0(n,null,"F")):this.hs(e,h,n,c)}))})))}ss(e,n,r,s){return UE(n)||s.isEqual(Oe.min())?se.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(n,o);return this.ls(n,l,r,s)?se.resolve(null):(Ja()<=Be.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ya(n)),this.hs(e,l,n,S$(s,Ec)).next(u=>u))})}cs(e,n){let r=new Ut(ZC(e));return n.forEach((s,o)=>{Gf(e,o)&&(r=r.add(o))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,n,r){return Ja()<=Be.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Ya(n)),this.ns.getDocumentsMatchingQuery(e,n,Di.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="LocalStore",s6=3e8;class i6{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new vt(Ve),this.Is=new qo(o=>Yy(o),Xy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K3(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function o6(t,e,n,r){return new i6(t,e,n,r)}async function b1(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let c=ze();for(const h of s){l.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}for(const h of o){u.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Rs:h,removedBatchIds:l,addedBatchIds:u}))})})}function a6(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.ds.newChangeBuffer({trackRemovals:!0});return function(u,c,h,g){const v=h.batch,x=v.keys();let b=se.resolve();return x.forEach(k=>{b=b.next(()=>g.getEntry(c,k)).next(O=>{const A=h.docVersions.get(k);Xe(A!==null),O.version.compareTo(A)<0&&(v.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),g.addEntry(O)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(c,v))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function E1(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function l6(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const u=[];e.targetChanges.forEach((g,v)=>{const x=s.get(v);if(!x)return;u.push(n.Hr.removeMatchingKeys(o,g.removedDocuments,v).next(()=>n.Hr.addMatchingKeys(o,g.addedDocuments,v)));let b=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(sn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(v,b),function(O,A,D){return O.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=s6?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(x,b,g)&&u.push(n.Hr.updateTargetData(o,b))});let c=Ls(),h=ze();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(u6(o,l,e.documentUpdates).next(g=>{c=g.Vs,h=g.fs})),!r.isEqual(Oe.min())){const g=n.Hr.getLastRemoteSnapshotVersion(o).next(v=>n.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return se.waitFor(u).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(n.Ts=s,o))}function u6(t,e,n){let r=ze(),s=ze();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Ls();return n.forEach((u,c)=>{const h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(Oe.min())?(e.removeEntry(u,c.readTime),l=l.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),l=l.insert(u,c)):xe(lv,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Vs:l,fs:s}})}function c6(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Gy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function d6(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(o=>o?(s=o,se.resolve(s)):n.Hr.allocateTargetId(r).next(l=>(s=new Ti(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function D0(t,e,n){const r=Le(t),s=r.Ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ml(l))throw l;xe(lv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function eT(t,e,n){const r=Le(t);let s=Oe.min(),o=ze();return r.persistence.runTransaction("Execute query","readwrite",l=>function(c,h,g){const v=Le(c),x=v.Is.get(g);return x!==void 0?se.resolve(v.Ts.get(x)):v.Hr.getTargetData(h,g)}(r,l,ts(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,n?s:Oe.min(),n?o:ze())).next(u=>(h6(r,X$(e),u),{documents:u,gs:o})))}function h6(t,e,n){let r=t.Es.get(e)||Oe.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Es.set(e,r)}class tT{constructor(){this.activeTargetIds=s3()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f6{constructor(){this.ho=new tT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new tT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="ConnectivityMonitor";class rT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){xe(nT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){xe(nT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph=null;function O0(){return Ph===null?Ph=function(){return 268435456+Math.round(2147483648*Math.random())}():Ph++,"0x"+Ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="RestConnection",p6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g6{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===ff?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,o){const l=O0(),u=this.bo(e,n.toUriEncodedString());xe(kg,`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,o),this.vo(e,u,c,r).then(h=>(xe(kg,`Received RPC '${e}' ${l}: `,h),h),h=>{throw xl(kg,`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}Co(e,n,r,s,o,l){return this.So(e,n,r,s,o)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}bo(e,n){const r=p6[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class v6 extends g6{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const o=O0();return new Promise((l,u)=>{const c=new PC;c.setWithCredentials(!0),c.listenOnce(AC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vh.NO_ERROR:const g=c.getResponseJson();xe(dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Vh.TIMEOUT:xe(dn,`RPC '${e}' ${o} timed out`),u(new ke(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const v=c.getStatus();if(xe(dn,`RPC '${e}' ${o} failed with status:`,v,"response text:",c.getResponseText()),v>0){let x=c.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const k=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(D)>=0?D:ue.UNKNOWN}(b.status);u(new ke(k,b.message))}else u(new ke(ue.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new ke(ue.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{xe(dn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);xe(dn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}Wo(e,n,r){const s=O0(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=NC(),u=RC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const g=o.join("");xe(dn,`Creating RPC '${e}' stream ${s}: ${g}`,c);const v=l.createWebChannel(g,c);let x=!1,b=!1;const k=new y6({Fo:A=>{b?xe(dn,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(x||(xe(dn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),xe(dn,`RPC '${e}' stream ${s} sending:`,A),v.send(A))},Mo:()=>v.close()}),O=(A,D,V)=>{A.listen(D,$=>{try{V($)}catch(W){setTimeout(()=>{throw W},0)}})};return O(v,Gu.EventType.OPEN,()=>{b||(xe(dn,`RPC '${e}' stream ${s} transport opened.`),k.Qo())}),O(v,Gu.EventType.CLOSE,()=>{b||(b=!0,xe(dn,`RPC '${e}' stream ${s} transport closed`),k.Uo())}),O(v,Gu.EventType.ERROR,A=>{b||(b=!0,xl(dn,`RPC '${e}' stream ${s} transport errored:`,A),k.Uo(new ke(ue.UNAVAILABLE,"The operation could not be completed")))}),O(v,Gu.EventType.MESSAGE,A=>{var D;if(!b){const V=A.data[0];Xe(!!V);const $=V,W=($==null?void 0:$.error)||((D=$[0])===null||D===void 0?void 0:D.error);if(W){xe(dn,`RPC '${e}' stream ${s} received error:`,W);const B=W.status;let K=function(T){const R=Nt[T];if(R!==void 0)return c1(R)}(B),I=W.message;K===void 0&&(K=ue.INTERNAL,I="Unknown error status: "+B+" with message "+W.message),b=!0,k.Uo(new ke(K,I)),v.close()}else xe(dn,`RPC '${e}' stream ${s} received:`,V),k.Ko(V)}}),O(u,IC.STAT_EVENT,A=>{A.stat===E0.PROXY?xe(dn,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===E0.NOPROXY&&xe(dn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.$o()},0),k}}function Cg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){return new b3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="PersistentStream";class S1{constructor(e,n,r,s,o,l,u,c){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new T1(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Os(n.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new ke(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return xe(sT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(xe(sT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x6 extends S1{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=S3(this.serializer,e),r=function(o){if(!("targetChange"in o))return Oe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?ns(l.readTime):Oe.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=j0(this.serializer),n.addTarget=function(o,l){let u;const c=l.target;if(u=P0(c)?{documents:P3(o,c)}:{query:A3(o,c).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=f1(o,l.resumeToken);const h=I0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(Oe.min())>0){u.readTime=xf(o,l.snapshotVersion.toTimestamp());const h=I0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=R3(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=j0(this.serializer),n.removeTarget=e,this.I_(n)}}class w6 extends S1{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=C3(e.writeResults,e.commitTime),r=ns(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=j0(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>k3(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{}class b6 extends _6{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ke(ue.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,R0(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(ue.UNKNOWN,o.toString())})}Co(e,n,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,R0(n,r),s,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ue.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class E6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Os(n),this.N_=!1):xe("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="RemoteStore";class T6{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{Ko(this)&&(xe($o,"Restarting streams for network reachability change."),await async function(c){const h=Le(c);h.W_.add(4),await Wc(h),h.j_.set("Unknown"),h.W_.delete(4),await Zf(h)}(this))})}),this.j_=new E6(r,s)}}async function Zf(t){if(Ko(t))for(const e of t.G_)await e(!0)}async function Wc(t){for(const e of t.G_)await e(!1)}function k1(t,e){const n=Le(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),hv(n)?dv(n):Vl(n).c_()&&cv(n,e))}function uv(t,e){const n=Le(t),r=Vl(n);n.K_.delete(e),r.c_()&&C1(n,e),n.K_.size===0&&(r.c_()?r.P_():Ko(n)&&n.j_.set("Unknown"))}function cv(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vl(t).y_(e)}function C1(t,e){t.H_.Ne(e),Vl(t).w_(e)}function dv(t){t.H_=new v3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Vl(t).start(),t.j_.B_()}function hv(t){return Ko(t)&&!Vl(t).u_()&&t.K_.size>0}function Ko(t){return Le(t).W_.size===0}function P1(t){t.H_=void 0}async function S6(t){t.j_.set("Online")}async function k6(t){t.K_.forEach((e,n)=>{cv(t,e)})}async function C6(t,e){P1(t),hv(t)?(t.j_.q_(e),dv(t)):t.j_.set("Unknown")}async function P6(t,e,n){if(t.j_.set("Online"),e instanceof h1&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const u of o.targetIds)s.K_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.K_.delete(u),s.H_.removeTarget(u))}(t,e)}catch(r){xe($o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _f(t,r)}else if(e instanceof Bh?t.H_.We(e):e instanceof d1?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Oe.min()))try{const r=await E1(t.localStore);n.compareTo(r)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const g=o.K_.get(h);g&&o.K_.set(h,g.withResumeToken(c.resumeToken,l))}}),u.targetMismatches.forEach((c,h)=>{const g=o.K_.get(c);if(!g)return;o.K_.set(c,g.withResumeToken(sn.EMPTY_BYTE_STRING,g.snapshotVersion)),C1(o,c);const v=new Ti(g.target,c,h,g.sequenceNumber);cv(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){xe($o,"Failed to raise snapshot:",r),await _f(t,r)}}async function _f(t,e,n){if(!Ml(e))throw e;t.W_.add(1),await Wc(t),t.j_.set("Offline"),n||(n=()=>E1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{xe($o,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Zf(t)})}function A1(t,e){return e().catch(n=>_f(t,n,e))}async function em(t){const e=Le(t),n=Vi(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Gy;for(;A6(e);)try{const s=await c6(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,I6(e,s)}catch(s){await _f(e,s)}I1(e)&&R1(e)}function A6(t){return Ko(t)&&t.U_.length<10}function I6(t,e){t.U_.push(e);const n=Vi(t);n.c_()&&n.S_&&n.b_(e.mutations)}function I1(t){return Ko(t)&&!Vi(t).u_()&&t.U_.length>0}function R1(t){Vi(t).start()}async function R6(t){Vi(t).C_()}async function N6(t){const e=Vi(t);for(const n of t.U_)e.b_(n.mutations)}async function j6(t,e,n){const r=t.U_.shift(),s=nv.from(r,e,n);await A1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await em(t)}async function D6(t,e){e&&Vi(t).S_&&await async function(r,s){if(function(l){return g3(l)&&l!==ue.ABORTED}(s.code)){const o=r.U_.shift();Vi(r).h_(),await A1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await em(r)}}(t,e),I1(t)&&R1(t)}async function iT(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),xe($o,"RemoteStore received new credentials");const r=Ko(n);n.W_.add(3),await Wc(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Zf(n)}async function O6(t,e){const n=Le(t);e?(n.W_.delete(2),await Zf(n)):e||(n.W_.add(2),await Wc(n),n.j_.set("Unknown"))}function Vl(t){return t.J_||(t.J_=function(n,r,s){const o=Le(n);return o.M_(),new x6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:S6.bind(null,t),No:k6.bind(null,t),Lo:C6.bind(null,t),p_:P6.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),hv(t)?dv(t):t.j_.set("Unknown")):(await t.J_.stop(),P1(t))})),t.J_}function Vi(t){return t.Y_||(t.Y_=function(n,r,s){const o=Le(n);return o.M_(),new w6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:R6.bind(null,t),Lo:D6.bind(null,t),D_:N6.bind(null,t),v_:j6.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await em(t)):(await t.Y_.stop(),t.U_.length>0&&(xe($o,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,u=new fv(e,n,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mv(t,e){if(Os("AsyncQueue",`${e}: ${t}`),Ml(t))return new ke(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{static emptySet(e){return new ul(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=Qu(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.Z_=new vt(Ae.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tl{constructor(e,n,r,s,o,l,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(u=>{l.push({type:0,doc:u})}),new Tl(e,n,ul.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class M6{constructor(){this.queries=aT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=Le(n),o=s.queries;s.queries=aT(),o.forEach((l,u)=>{for(const c of u.ta)c.onError(r)})})(this,new ke(ue.ABORTED,"Firestore shutting down"))}}function aT(){return new qo(t=>XC(t),Kf)}async function N1(t,e){const n=Le(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new L6,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(s,!0);break;case 1:o.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=mv(l,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,o),o.ta.push(e),e.sa(n.onlineState),o.ea&&e.oa(o.ea)&&pv(n)}async function j1(t,e){const n=Le(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function V6(t,e){const n=Le(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const u of l.ta)u.oa(s)&&(r=!0);l.ea=s}}r&&pv(n)}function $6(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(n);r.queries.delete(e)}function pv(t){t.ia.forEach(e=>{e.next()})}var L0,lT;(lT=L0||(L0={}))._a="default",lT.Cache="cache";class D1{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==L0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.key=e}}class L1{constructor(e){this.key=e}}class F6{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ze(),this.mutatedKeys=ze(),this.ya=ZC(e),this.wa=new ul(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new oT,s=n?n.wa:this.wa;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const x=s.get(g),b=Gf(this.query,v)?v:null,k=!!x&&this.mutatedKeys.has(x.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let A=!1;x&&b?x.data.isEqual(b.data)?k!==O&&(r.track({type:3,doc:b}),A=!0):this.va(x,b)||(r.track({type:2,doc:b}),A=!0,(c&&this.ya(b,c)>0||h&&this.ya(b,h)<0)&&(u=!0)):!x&&b?(r.track({type:0,doc:b}),A=!0):x&&!b&&(r.track({type:1,doc:x}),A=!0,(c||h)&&(u=!0)),A&&(b?(l=l.add(b),o=O?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:u,mutatedKeys:o}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,v)=>function(b,k){const O=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return O(b)-O(k)}(g.type,v.type)||this.ya(g.doc,v.doc)),this.Ca(r),s=s!=null&&s;const u=n&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,h=c!==this.ga;return this.ga=c,l.length!==0||h?{snapshot:new Tl(this.query,e.wa,o,l,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new oT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ze(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new L1(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new O1(r))}),n}Oa(e){this.fa=e.gs,this.pa=ze();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Tl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const gv="SyncEngine";class U6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class B6{constructor(e){this.key=e,this.Ba=!1}}class z6{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new qo(u=>XC(u),Kf),this.qa=new Map,this.Qa=new Set,this.$a=new vt(Ae.comparator),this.Ua=new Map,this.Ka=new iv,this.Wa={},this.Ga=new Map,this.za=El.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function W6(t,e,n=!0){const r=B1(t);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await M1(r,e,n,!0),s}async function H6(t,e){const n=B1(t);await M1(n,e,!0,!1)}async function M1(t,e,n,r){const s=await d6(t.localStore,ts(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await q6(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&k1(t.remoteStore,s),u}async function q6(t,e,n,r,s){t.Ha=(v,x,b)=>async function(O,A,D,V){let $=A.view.ba(D);$.ls&&($=await eT(O.localStore,A.query,!1).then(({documents:I})=>A.view.ba(I,$)));const W=V&&V.targetChanges.get(A.targetId),B=V&&V.targetMismatches.get(A.targetId)!=null,K=A.view.applyChanges($,O.isPrimaryClient,W,B);return cT(O,A.targetId,K.Ma),K.snapshot}(t,v,x,b);const o=await eT(t.localStore,e,!0),l=new F6(e,o.gs),u=l.ba(o.documents),c=zc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=l.applyChanges(u,t.isPrimaryClient,c);cT(t,n,h.Ma);const g=new U6(e,n,l);return t.ka.set(e,g),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),h.snapshot}async function K6(t,e,n){const r=Le(t),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!Kf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await D0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&uv(r.remoteStore,s.targetId),M0(r,s.targetId)}).catch(Ll)):(M0(r,s.targetId),await D0(r.localStore,s.targetId,!0))}async function G6(t,e){const n=Le(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uv(n.remoteStore,r.targetId))}async function Q6(t,e,n){const r=nF(t);try{const s=await function(l,u){const c=Le(l),h=Ft.now(),g=u.reduce((b,k)=>b.add(k.key),ze());let v,x;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=Ls(),O=ze();return c.ds.getEntries(b,g).next(A=>{k=A,k.forEach((D,V)=>{V.isValidDocument()||(O=O.add(D))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,k)).next(A=>{v=A;const D=[];for(const V of u){const $=d3(V,v.get(V.key).overlayedDocument);$!=null&&D.push(new Wi(V.key,$,HC($.value.mapValue),cr.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,D,u)}).next(A=>{x=A;const D=A.applyToLocalDocumentSet(v,O);return c.documentOverlayCache.saveOverlays(b,A.batchId,D)})}).then(()=>({batchId:x.batchId,changes:t1(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,u,c){let h=l.Wa[l.currentUser.toKey()];h||(h=new vt(Ve)),h=h.insert(u,c),l.Wa[l.currentUser.toKey()]=h}(r,s.batchId,n),await Hc(r,s.changes),await em(r.remoteStore)}catch(s){const o=mv(s,"Failed to persist write");n.reject(o)}}async function V1(t,e){const n=Le(t);try{const r=await l6(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Ua.get(o);l&&(Xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Xe(l.Ba):s.removedDocuments.size>0&&(Xe(l.Ba),l.Ba=!1))}),await Hc(n,r,e)}catch(r){await Ll(r)}}function uT(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const c=Le(l);c.onlineState=u;let h=!1;c.queries.forEach((g,v)=>{for(const x of v.ta)x.sa(u)&&(h=!0)}),h&&pv(c)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J6(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),o=s&&s.key;if(o){let l=new vt(Ae.comparator);l=l.insert(o,mn.newNoDocument(o,Oe.min()));const u=ze().add(o),c=new Yf(Oe.min(),new Map,new vt(Ve),l,u);await V1(r,c),r.$a=r.$a.remove(o),r.Ua.delete(e),yv(r)}else await D0(r.localStore,e,!1).then(()=>M0(r,e,n)).catch(Ll)}async function Y6(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await a6(n.localStore,e);F1(n,r,null),$1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hc(n,s)}catch(s){await Ll(s)}}async function X6(t,e,n){const r=Le(t);try{const s=await function(l,u){const c=Le(l);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return c.mutationQueue.lookupMutationBatch(h,u).next(v=>(Xe(v!==null),g=v.keys(),c.mutationQueue.removeMutationBatch(h,v))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,g,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>c.localDocuments.getDocuments(h,g))})}(r.localStore,e);F1(r,e,n),$1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hc(r,s)}catch(s){await Ll(s)}}function $1(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function F1(t,e,n){const r=Le(t);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function M0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||U1(t,r)})}function U1(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(uv(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),yv(t))}function cT(t,e,n){for(const r of n)r instanceof O1?(t.Ka.addReference(r.key,e),Z6(t,r)):r instanceof L1?(xe(gv,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||U1(t,r.key)):Ne()}function Z6(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(xe(gv,"New document in limbo: "+n),t.Qa.add(r),yv(t))}function yv(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new Ae(ft.fromString(e)),r=t.za.next();t.Ua.set(r,new B6(n)),t.$a=t.$a.insert(n,r),k1(t.remoteStore,new Ti(ts(Zy(n.path)),r,"TargetPurposeLimboResolution",zf.ae))}}async function Hc(t,e,n){const r=Le(t),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,c)=>{l.push(r.Ha(c,e,n).then(h=>{var g;if((h||n)&&r.isPrimaryClient){const v=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(c.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(h){s.push(h);const v=av.Yi(c.targetId,h);o.push(v)}}))}),await Promise.all(l),r.La.p_(s),await async function(c,h){const g=Le(c);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>se.forEach(h,x=>se.forEach(x.Hi,b=>g.persistence.referenceDelegate.addReference(v,x.targetId,b)).next(()=>se.forEach(x.Ji,b=>g.persistence.referenceDelegate.removeReference(v,x.targetId,b)))))}catch(v){if(!Ml(v))throw v;xe(lv,"Failed to update sequence numbers: "+v)}for(const v of h){const x=v.targetId;if(!v.fromCache){const b=g.Ts.get(x),k=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(k);g.Ts=g.Ts.insert(x,O)}}}(r.localStore,o))}async function eF(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){xe(gv,"User change. New user:",e.toKey());const r=await b1(n.localStore,e);n.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(c=>{c.reject(new ke(ue.CANCELLED,l))})}),o.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hc(n,r.Rs)}}function tF(t,e){const n=Le(t),r=n.Ua.get(e);if(r&&r.Ba)return ze().add(r.key);{let s=ze();const o=n.qa.get(e);if(!o)return s;for(const l of o){const u=n.ka.get(l);s=s.unionWith(u.view.Sa)}return s}}function B1(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=V1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J6.bind(null,e),e.La.p_=V6.bind(null,e.eventManager),e.La.Ja=$6.bind(null,e.eventManager),e}function nF(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X6.bind(null,e),e}class bf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return o6(this.persistence,new r6,e.initialUser,this.serializer)}Xa(e){return new _1(ov.ri,this.serializer)}Za(e){return new f6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bf.provider={build:()=>new bf};class rF extends bf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Xe(this.persistence.referenceDelegate instanceof wf);const r=this.persistence.referenceDelegate.garbageCollector;return new B3(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new _1(r=>wf.ri(r,n),this.serializer)}}class V0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eF.bind(null,this.syncEngine),await O6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M6}()}createDatastore(e){const n=Xf(e.databaseInfo.databaseId),r=function(o){return new v6(o)}(e.databaseInfo);return function(o,l,u,c){return new b6(o,l,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,u){return new T6(r,s,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,n=>uT(this.syncEngine,n,0),function(){return rT.D()?new rT:new m6}())}createSyncEngine(e,n){return function(s,o,l,u,c,h,g){const v=new z6(s,o,l,u,c,h);return g&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Le(s);xe($o,"RemoteStore shutting down."),o.W_.add(5),await Wc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}V0.provider={build:()=>new V0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="FirestoreClient";class sF{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=OC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{xe($i,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(xe($i,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Pg(t,e){t.asyncQueue.verifyOperationInProgress(),xe($i,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await b1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iF(t);xe($i,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>iT(e.remoteStore,s)),t._onlineComponents=e}async function iF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe($i,"Using user provided OfflineComponentProvider");try{await Pg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;xl("Error using user provided cache. Falling back to memory cache: "+n),await Pg(t,new bf)}}else xe($i,"Using default OfflineComponentProvider"),await Pg(t,new rF(void 0));return t._offlineComponents}async function W1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe($i,"Using user provided OnlineComponentProvider"),await dT(t,t._uninitializedComponentsProvider._online)):(xe($i,"Using default OnlineComponentProvider"),await dT(t,new V0))),t._onlineComponents}function oF(t){return W1(t).then(e=>e.syncEngine)}async function H1(t){const e=await W1(t),n=e.eventManager;return n.onListen=W6.bind(null,e.syncEngine),n.onUnlisten=K6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=H6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=G6.bind(null,e.syncEngine),n}function aF(t,e,n={}){const r=new Ns;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,h){const g=new z1({next:x=>{g.su(),l.enqueueAndForget(()=>j1(o,v));const b=x.docs.has(u);!b&&x.fromCache?h.reject(new ke(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&x.fromCache&&c&&c.source==="server"?h.reject(new ke(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),v=new D1(Zy(u.path),g,{includeMetadataChanges:!0,Ta:!0});return N1(o,v)}(await H1(t),t.asyncQueue,e,n,r)),r.promise}function lF(t,e,n={}){const r=new Ns;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,h){const g=new z1({next:x=>{g.su(),l.enqueueAndForget(()=>j1(o,v)),x.fromCache&&c.source==="server"?h.reject(new ke(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),v=new D1(u,g,{includeMetadataChanges:!0,Ta:!0});return N1(o,v)}(await H1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t,e,n){if(!n)throw new ke(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uF(t,e,n,r){if(e===!0&&r===!0)throw new ke(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fT(t){if(!Ae.isDocumentKey(t))throw new ke(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mT(t){if(Ae.isDocumentKey(t))throw new ke(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne()}function Nr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ke(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vv(t);throw new ke(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="firestore.googleapis.com",pT=!0;class gT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G1,this.ssl=pT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:pT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F3)throw new ke(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new g$;switch(r.type){case"firstParty":return new w$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hT.get(n);r&&(xe("ComponentProvider","Removing Datastore"),hT.delete(n),r.terminate())}(this),Promise.resolve()}}function cF(t,e,n,r={}){var s;const o=(t=Nr(t,tm))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o.host!==G1&&o.host!==u&&xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:r});if(!Lo(c,l)&&(t._setSettings(c),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=fn.MOCK_USER;else{h=bC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ke(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new fn(v)}t._authCredentials=new y$(new jC(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nm(this.firestore,e,this._query)}}class On{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new On(this.firestore,e,this._key)}}class Pi extends nm{constructor(e,n,r){super(e,n,Zy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new On(this.firestore,null,new Ae(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function jt(t,e,...n){if(t=bt(t),K1("collection","path",e),t instanceof tm){const r=ft.fromString(e,...n);return mT(r),new Pi(t,null,r)}{if(!(t instanceof On||t instanceof Pi))throw new ke(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return mT(r),new Pi(t.firestore,null,r)}}function qn(t,e,...n){if(t=bt(t),arguments.length===1&&(e=OC.newId()),K1("doc","path",e),t instanceof tm){const r=ft.fromString(e,...n);return fT(r),new On(t,null,new Ae(r))}{if(!(t instanceof On||t instanceof Pi))throw new ke(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return fT(r),new On(t.firestore,t instanceof Pi?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="AsyncQueue";class vT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new T1(this,"async_queue_retry"),this.Su=()=>{const r=Cg();r&&xe(yT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=Cg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Cg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Ns;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ml(e))throw e;xe(yT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw Os("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=fv.createAndSchedule(this,e,n,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class Go extends tm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vT(e),this._firestoreClient=void 0,await e}}}function Fi(t,e){const n=typeof t=="object"?t:qy(),r=typeof t=="string"?t:e||ff,s=Bf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=xC("firestore");o&&cF(s,...o)}return s}function xv(t){if(t._terminated)throw new ke(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dF(t),t._firestoreClient}function dF(t){var e,n,r;const s=t._freezeSettings(),o=function(u,c,h,g){return new O$(u,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,q1(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new sF(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sl(sn.fromBase64String(e))}catch(n){throw new ke(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sl(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=/^__.*__$/;class fF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bc(e,this.data,n,this.fieldTransforms)}}class Q1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function J1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class Ev{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Ev(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Ef(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(J1(this.Lu)&&hF.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class mF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xf(e)}ju(e,n,r,s=!1){return new Ev({Lu:e,methodName:n,zu:r,path:rn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tv(t){const e=t._freezeSettings(),n=Xf(t._databaseId);return new mF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Y1(t,e,n,r,s,o={}){const l=t.ju(o.merge||o.mergeFields?2:0,e,n,s);Sv("Data must be an object, but it was:",l,r);const u=X1(r,l);let c,h;if(o.merge)c=new Kn(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const x=$0(e,v,n);if(!l.contains(x))throw new ke(ue.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);eP(g,x)||g.push(x)}c=new Kn(g),h=l.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,h=l.fieldTransforms;return new fF(new jn(u),c,h)}class sm extends wv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sm}}function pF(t,e,n,r){const s=t.ju(1,e,n);Sv("Data must be an object, but it was:",s,r);const o=[],l=jn.empty();zi(r,(c,h)=>{const g=kv(e,c,n);h=bt(h);const v=s.Uu(g);if(h instanceof sm)o.push(g);else{const x=im(h,v);x!=null&&(o.push(g),l.set(g,x))}});const u=new Kn(o);return new Q1(l,u,s.fieldTransforms)}function gF(t,e,n,r,s,o){const l=t.ju(1,e,n),u=[$0(e,r,n)],c=[s];if(o.length%2!=0)throw new ke(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push($0(e,o[x])),c.push(o[x+1]);const h=[],g=jn.empty();for(let x=u.length-1;x>=0;--x)if(!eP(h,u[x])){const b=u[x];let k=c[x];k=bt(k);const O=l.Uu(b);if(k instanceof sm)h.push(b);else{const A=im(k,O);A!=null&&(h.push(b),g.set(b,A))}}const v=new Kn(h);return new Q1(g,v,l.fieldTransforms)}function im(t,e){if(Z1(t=bt(t)))return Sv("Unsupported field value:",e,t),X1(t,e);if(t instanceof wv)return function(r,s){if(!J1(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const u of r){let c=im(u,s.Ku(l));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ft.fromDate(r);return{timestampValue:xf(s.serializer,o)}}if(r instanceof Ft){const o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xf(s.serializer,o)}}if(r instanceof _v)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sl)return{bytesValue:f1(s.serializer,r._byteString)};if(r instanceof On){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bv)return function(l,u){return{mapValue:{fields:{[zC]:{stringValue:WC},[mf]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw u.Wu("VectorValues must only contain numeric values.");return ev(u.serializer,h)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${vv(r)}`)}(t,e)}function X1(t,e){const n={};return MC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(t,(r,s)=>{const o=im(s,e.qu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Z1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof _v||t instanceof Sl||t instanceof On||t instanceof wv||t instanceof bv)}function Sv(t,e,n){if(!Z1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=vv(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function $0(t,e,n){if((e=bt(e))instanceof rm)return e._internalPath;if(typeof e=="string")return kv(t,e);throw Ef("Field path arguments must be of type string or ",t,!1,void 0,n)}const yF=new RegExp("[~\\*/\\[\\]]");function kv(t,e,n){if(e.search(yF)>=0)throw Ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rm(...e.split("."))._internalPath}catch{throw Ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ef(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||l)&&(c+=" (found",o&&(c+=` in field ${r}`),l&&(c+=` in document ${s}`),c+=")"),new ke(ue.INVALID_ARGUMENT,u+t+c)}function eP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vF extends tP{data(){return super.data()}}function nP(t,e){return typeof e=="string"?kv(t,e):e instanceof rm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ke(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wF{convertValue(e,n="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zi(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[mf].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>At(l.doubleValue));return new bv(o)}convertGeoPoint(e){return new _v(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const n=Oi(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);Xe(x1(r));const s=new Sc(r.get(1),r.get(3)),o=new Ae(r.popFirst(5));return s.isEqual(n)||Os(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sP extends tP{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zh extends sP{data(e={}){return super.data(e)}}class _F{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zh(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const c=new zh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Yu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new zh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Yu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:bF(u.type),doc:c,oldIndex:h,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){t=Nr(t,On);const e=Nr(t.firestore,Go);return aF(xv(e),t._key).then(n=>EF(e,t,n))}class iP extends wF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,n)}}function Ln(t){t=Nr(t,nm);const e=Nr(t.firestore,Go),n=xv(e),r=new iP(e);return xF(t._query),lF(n,t._query).then(s=>new _F(e,r,t,s))}function Tf(t,e,n){t=Nr(t,On);const r=Nr(t.firestore,Go),s=rP(t.converter,e,n);return om(r,[Y1(Tv(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,cr.none())])}function xT(t,e,n,...r){t=Nr(t,On);const s=Nr(t.firestore,Go),o=Tv(s);let l;return l=typeof(e=bt(e))=="string"||e instanceof rm?gF(o,"updateDoc",t._key,e,n,r):pF(o,"updateDoc",t._key,e),om(s,[l.toMutation(t._key,cr.exists(!0))])}function Wh(t){return om(Nr(t.firestore,Go),[new tv(t._key,cr.none())])}function kl(t,e){const n=Nr(t.firestore,Go),r=qn(t),s=rP(t.converter,e);return om(n,[Y1(Tv(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}function om(t,e){return function(r,s){const o=new Ns;return r.asyncQueue.enqueueAndForget(async()=>Q6(await oF(r),s,o)),o.promise}(xv(t),e)}function EF(t,e,n){const r=n.docs.get(e._key),s=new iP(t);return new sP(t,s,e._key,r,new Yu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ol=s})(Ho),Mo(new ji("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new Go(new v$(r.getProvider("auth-internal")),new _$(l,r.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(h.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),es(TE,SE,e),es(TE,SE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="firebasestorage.googleapis.com",aP="storageBucket",TF=2*60*1e3,SF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends ls{constructor(e,n,r=0){super(Ag(e),`Firebase Storage: ${n} (${Ag(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ag(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function Ag(t){return"storage/"+t}function Cv(){const t="An unknown error occurred, please check the error payload for server response.";return new Tt(Et.UNKNOWN,t)}function kF(t){return new Tt(Et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function CF(t){return new Tt(Et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(Et.UNAUTHENTICATED,t)}function AF(){return new Tt(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IF(t){return new Tt(Et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function RF(){return new Tt(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NF(){return new Tt(Et.CANCELED,"User canceled the upload/download.")}function jF(t){return new Tt(Et.INVALID_URL,"Invalid URL '"+t+"'.")}function DF(t){return new Tt(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OF(){return new Tt(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aP+"' property when initializing the app?")}function LF(){return new Tt(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MF(){return new Tt(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VF(t){return new Tt(Et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function F0(t){return new Tt(Et.INVALID_ARGUMENT,t)}function lP(){return new Tt(Et.APP_DELETED,"The Firebase app was deleted.")}function $F(t){return new Tt(Et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uc(t,e){return new Tt(Et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uu(t){throw new Tt(Et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(r.path==="")return r;throw DF(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),c={bucket:1,path:3};function h(W){W.path_=decodeURIComponent(W.path)}const g="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${g}/b/${s}/o${x}`,"i"),k={bucket:1,path:3},O=n===oP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",D=new RegExp(`^https?://${O}/${s}/${A}`,"i"),$=[{regex:u,indices:c,postModify:o},{regex:b,indices:k,postModify:h},{regex:D,indices:{bucket:1,path:2},postModify:h}];for(let W=0;W<$.length;W++){const B=$[W],K=B.regex.exec(e);if(K){const I=K[B.indices.bucket];let S=K[B.indices.path];S||(S=""),r=new Gn(I,S),B.postModify(r);break}}if(r==null)throw jF(e);return r}}class FF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e,n){let r=1,s=null,o=null,l=!1,u=0;function c(){return u===2}let h=!1;function g(...A){h||(h=!0,e.apply(null,A))}function v(A){s=setTimeout(()=>{s=null,t(b,c())},A)}function x(){o&&clearTimeout(o)}function b(A,...D){if(h){x();return}if(A){x(),g.call(null,A,...D);return}if(c()||l){x(),g.call(null,A,...D);return}r<64&&(r*=2);let $;u===1?(u=2,$=0):$=(r+Math.random())*1e3,v($)}let k=!1;function O(A){k||(k=!0,x(),!h&&(s!==null?(A||(u=2),clearTimeout(s),v(0)):A||(u=1)))}return v(0),o=setTimeout(()=>{l=!0,O(!0)},n),O}function BF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){return t!==void 0}function WF(t){return typeof t=="object"&&!Array.isArray(t)}function Pv(t){return typeof t=="string"||t instanceof String}function wT(t){return Av()&&t instanceof Blob}function Av(){return typeof Blob<"u"}function _T(t,e,n,r){if(r<e)throw F0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw F0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function uP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Oo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Oo||(Oo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,n,r,s,o,l,u,c,h,g,v,x=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=v,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ah(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const c=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===Oo.NO_ERROR,c=o.getStatus();if(!u||HF(c,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Oo.ABORT;r(!1,new Ah(!1,null,g));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new Ah(h,o))})},n=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());zF(c)?o(c):o()}catch(c){l(c)}else if(u!==null){const c=Cv();c.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,c)):l(c)}else if(s.canceled){const c=this.appDelete_?lP():NF();l(c)}else{const c=RF();l(c)}};this.canceled_?n(!1,new Ah(!1,null,!0)):this.backoffId_=UF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ah{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function KF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function GF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function JF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YF(t,e,n,r,s,o,l=!0){const u=uP(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return QF(h,e),KF(h,n),GF(h,o),JF(h,r),new qF(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ZF(...t){const e=XF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Av())return new Blob(t);throw new Tt(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function eU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){if(typeof atob>"u")throw VF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ig{constructor(e,n){this.data=e,this.contentType=n||null}}function nU(t,e){switch(t){case Qr.RAW:return new Ig(cP(e));case Qr.BASE64:case Qr.BASE64URL:return new Ig(dP(t,e));case Qr.DATA_URL:return new Ig(sU(e),iU(e))}throw Cv()}function cP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=t.charCodeAt(++n);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function rU(t){let e;try{e=decodeURIComponent(t)}catch{throw uc(Qr.DATA_URL,"Malformed data URL.")}return cP(e)}function dP(t,e){switch(t){case Qr.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw uc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Qr.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw uc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=tU(e)}catch(s){throw s.message.includes("polyfill")?s:uc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class hP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw uc(Qr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=oU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function sU(t){const e=new hP(t);return e.base64?dP(Qr.BASE64,e.rest):rU(e.rest)}function iU(t){return new hP(t).contentType}function oU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){let r=0,s="";wT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(wT(this.data_)){const r=this.data_,s=eU(r,e,n);return s===null?null:new xi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new xi(r,!0)}}static getBlob(...e){if(Av()){const n=e.map(r=>r instanceof xi?r.data_:r);return new xi(ZF.apply(null,n))}else{const n=e.map(l=>Pv(l)?nU(Qr.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new xi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){let e;try{e=JSON.parse(t)}catch{return null}return WF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t,e){return e}class _n{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||uU}}let Ih=null;function cU(t){return!Pv(t)||t.length<2?t:mP(t)}function pP(){if(Ih)return Ih;const t=[];t.push(new _n("bucket")),t.push(new _n("generation")),t.push(new _n("metageneration")),t.push(new _n("name","fullPath",!0));function e(o,l){return cU(l)}const n=new _n("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const s=new _n("size");return s.xform=r,t.push(s),t.push(new _n("timeCreated")),t.push(new _n("updated")),t.push(new _n("md5Hash",null,!0)),t.push(new _n("cacheControl",null,!0)),t.push(new _n("contentDisposition",null,!0)),t.push(new _n("contentEncoding",null,!0)),t.push(new _n("contentLanguage",null,!0)),t.push(new _n("contentType",null,!0)),t.push(new _n("metadata","customMetadata",!0)),Ih=t,Ih}function dU(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new Gn(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function hU(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return dU(r,t),r}function gP(t,e,n){const r=fP(e);return r===null?null:hU(t,r,n)}function fU(t,e,n,r){const s=fP(e);if(s===null||!Pv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(h=>{const g=t.bucket,v=t.fullPath,x="/b/"+l(g)+"/o/"+l(v),b=am(x,n,r),k=uP({alt:"media",token:h});return b+k})[0]}function mU(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Iv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){if(!t)throw Cv()}function pU(t,e){function n(r,s){const o=gP(t,s,e);return yP(o!==null),o}return n}function gU(t,e){function n(r,s){const o=gP(t,s,e);return yP(o!==null),fU(o,s,t.host,t._protocol)}return n}function vP(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=AF():s=PF():n.getStatus()===402?s=CF(t.bucket):n.getStatus()===403?s=IF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function xP(t){const e=vP(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=kF(t.path)),o.serverResponse=s.serverResponse,o}return n}function yU(t,e,n){const r=e.fullServerUrl(),s=am(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,u=new Iv(s,o,gU(t,n),l);return u.errorHandler=xP(e),u}function vU(t,e){const n=e.fullServerUrl(),r=am(n,t.host,t._protocol),s="DELETE",o=t.maxOperationRetryTime;function l(c,h){}const u=new Iv(r,s,l,o);return u.successCodes=[200,204],u.errorHandler=xP(e),u}function xU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function wU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=xU(null,e)),r}function _U(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let $="";for(let W=0;W<2;W++)$=$+Math.random().toString().slice(2);return $}const c=u();l["Content-Type"]="multipart/related; boundary="+c;const h=wU(e,r,s),g=mU(h,n),v="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+c+"--",b=xi.getBlob(v,r,x);if(b===null)throw LF();const k={name:h.fullPath},O=am(o,t.host,t._protocol),A="POST",D=t.maxUploadRetryTime,V=new Iv(O,A,pU(t,n),D);return V.urlParams=k,V.headers=l,V.body=b.uploadData(),V.errorHandler=vP(e),V}class bU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Uu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class EU extends bU{initXhr(){this.xhr_.responseType="text"}}function Rv(){return new EU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fo(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mP(this._location.path)}get storage(){return this._service}get parent(){const e=aU(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new Fo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw $F(e)}}function TU(t,e,n){t._throwIfRoot("uploadBytes");const r=_U(t.storage,t._location,pP(),new xi(e,!0),n);return t.storage.makeRequestWithTokens(r,Rv).then(s=>({metadata:s,ref:t}))}function SU(t){t._throwIfRoot("getDownloadURL");const e=yU(t.storage,t._location,pP());return t.storage.makeRequestWithTokens(e,Rv).then(n=>{if(n===null)throw MF();return n})}function kU(t){t._throwIfRoot("deleteObject");const e=vU(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Rv)}function CU(t,e){const n=lU(t._location.path,e),r=new Gn(t._location.bucket,n);return new Fo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t){return/^[A-Za-z]+:\/\//.test(t)}function AU(t,e){return new Fo(t,e)}function wP(t,e){if(t instanceof Nv){const n=t;if(n._bucket==null)throw OF();const r=new Fo(n,n._bucket);return e!=null?wP(r,e):r}else return e!==void 0?CU(t,e):t}function IU(t,e){if(e&&PU(e)){if(t instanceof Nv)return AU(t,e);throw F0("To use ref(service, url), the first argument must be a Storage instance.")}else return wP(t,e)}function bT(t,e){const n=e==null?void 0:e[aP];return n==null?null:Gn.makeFromBucketSpec(n,t)}function RU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:bC(s,t.app.options.projectId))}class Nv{constructor(e,n,r,s,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=oP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TF,this._maxUploadRetryTime=SF,this._requests=new Set,s!=null?this._bucket=Gn.makeFromBucketSpec(s,this._host):this._bucket=bT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=bT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_T("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_T("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fo(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new FF(lP());{const l=YF(e,this._appId,r,s,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ET="@firebase/storage",TT="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="storage";function NU(t,e,n){return t=bt(t),TU(t,e,n)}function jU(t){return t=bt(t),SU(t)}function ST(t){return t=bt(t),kU(t)}function Rg(t,e){return t=bt(t),IU(t,e)}function DU(t=qy(),e){t=bt(t);const r=Bf(t,_P).getImmediate({identifier:e}),s=xC("storage");return s&&OU(r,...s),r}function OU(t,e,n,r={}){RU(t,e,n,r)}function LU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Nv(n,r,s,e,Ho)}function MU(){Mo(new ji(_P,LU,"PUBLIC").setMultipleInstances(!0)),es(ET,TT,""),es(ET,TT,"esm2017")}MU();function jv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VU=bP,EP=new Fc("auth","Firebase",bP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new zy("@firebase/auth");function $U(t,...e){Sf.logLevel<=Be.WARN&&Sf.warn(`Auth (${Ho}): ${t}`,...e)}function Hh(t,...e){Sf.logLevel<=Be.ERROR&&Sf.error(`Auth (${Ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,...e){throw Dv(t,...e)}function rs(t,...e){return Dv(t,...e)}function TP(t,e,n){const r=Object.assign(Object.assign({},VU()),{[e]:n});return new Fc("auth","Firebase",r).create(e,{appName:t.name})}function Ai(t){return TP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return EP.create(t,...e)}function Re(t,e,...n){if(!t)throw Dv(e,...n)}function Ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hh(e),new Error(e)}function Ms(t,e){t||Ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FU(){return kT()==="http:"||kT()==="https:"}function kT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FU()||KM()||"connection"in navigator)?navigator.onLine:!0}function BU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ms(n>e,"Short delay should be less than long delay!"),this.isMobile=WM()||GM()}get(){return UU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t,e){Ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new Kc(3e4,6e4);function Qo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Hi(t,e,n,r,s={}){return kP(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Uc(Object.assign({key:t.config.apiKey},l)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},o);return qM()||(h.referrerPolicy="no-referrer"),SP.fetch()(CP(t,t.config.apiHost,n,u),h)})}async function kP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zU),e);try{const s=new qU(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Rh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rh(t,"credential-already-in-use",l);if(c==="EMAIL_EXISTS")throw Rh(t,"email-already-in-use",l);if(c==="USER_DISABLED")throw Rh(t,"user-disabled",l);const g=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw TP(t,g,h);jr(t,g)}}catch(s){if(s instanceof ls)throw s;jr(t,"network-request-failed",{message:String(s)})}}async function lm(t,e,n,r,s={}){const o=await Hi(t,e,n,r,s);return"mfaPendingCredential"in o&&jr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function CP(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ov(t.config,s):`${t.config.apiScheme}://${s}`}function HU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rs(this.auth,"network-request-failed")),WU.get())})}}function Rh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rs(t,e,r);return s.customData._tokenResponse=n,s}function CT(t){return t!==void 0&&t.enterprise!==void 0}class KU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GU(t,e){return Hi(t,"GET","/v2/recaptchaConfig",Qo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(t,e){return Hi(t,"POST","/v1/accounts:delete",e)}async function PP(t,e){return Hi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JU(t,e=!1){const n=bt(t),r=await n.getIdToken(e),s=Lv(r);Re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:cc(Ng(s.auth_time)),issuedAtTime:cc(Ng(s.iat)),expirationTime:cc(Ng(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ng(t){return Number(t)*1e3}function Lv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const s=yC(n);return s?JSON.parse(s):(Hh("Failed to decode base64 JWT payload"),null)}catch(s){return Hh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function PT(t){const e=Lv(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ls&&YU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ac(t,PP(n,{idToken:r}));Re(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?AP(o.providerUserInfo):[],u=e8(t.providerData,l),c=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),g=c?h:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new B0(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function ZU(t){const e=bt(t);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function AP(t){return t.map(e=>{var{providerId:n}=e,r=jv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(t,e){const n=await kP(t,{},async()=>{const r=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=CP(t,s,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",SP.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function n8(t,e){return Hi(t,"POST","/v2/accounts:revokeToken",Qo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=PT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await t8(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new cl;return r&&(Re(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Re(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Re(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class As{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=jv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new B0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ac(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JU(this,e)}reload(){return ZU(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new As(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await Ac(this,QU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,u,c,h,g;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,k=(l=n.photoURL)!==null&&l!==void 0?l:void 0,O=(u=n.tenantId)!==null&&u!==void 0?u:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,D=(h=n.createdAt)!==null&&h!==void 0?h:void 0,V=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:$,emailVerified:W,isAnonymous:B,providerData:K,stsTokenManager:I}=n;Re($&&I,e,"internal-error");const S=cl.fromJSON(this.name,I);Re(typeof $=="string",e,"internal-error"),fi(v,e.name),fi(x,e.name),Re(typeof W=="boolean",e,"internal-error"),Re(typeof B=="boolean",e,"internal-error"),fi(b,e.name),fi(k,e.name),fi(O,e.name),fi(A,e.name),fi(D,e.name),fi(V,e.name);const T=new As({uid:$,auth:e,email:x,emailVerified:W,displayName:v,isAnonymous:B,photoURL:k,phoneNumber:b,tenantId:O,stsTokenManager:S,createdAt:D,lastLoginAt:V});return K&&Array.isArray(K)&&(T.providerData=K.map(R=>Object.assign({},R))),A&&(T._redirectEventId=A),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new cl;s.updateFromServerResponse(n);const o=new As({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kf(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Re(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?AP(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new cl;u.updateFromIdToken(r);const c=new As({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new B0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;function Is(t){Ms(t instanceof Function,"Expected a class definition");let e=AT.get(t);return e?(Ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IP.type="NONE";const IT=IP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e,n){return`firebase:${t}:${e}:${n}`}class dl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=qh(this.userKey,s.apiKey,o),this.fullPersistenceKey=qh("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?As._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new dl(Is(IT),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Is(IT);const l=qh(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const g=await h._get(l);if(g){const v=As._fromJSON(e,g);h!==o&&(u=v),o=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new dl(o,e,r):(o=c[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new dl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LP(e))return"Blackberry";if(MP(e))return"Webos";if(NP(e))return"Safari";if((e.includes("chrome/")||jP(e))&&!e.includes("edge/"))return"Chrome";if(OP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RP(t=gn()){return/firefox\//i.test(t)}function NP(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jP(t=gn()){return/crios\//i.test(t)}function DP(t=gn()){return/iemobile/i.test(t)}function OP(t=gn()){return/android/i.test(t)}function LP(t=gn()){return/blackberry/i.test(t)}function MP(t=gn()){return/webos/i.test(t)}function Mv(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function r8(t=gn()){var e;return Mv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s8(){return QM()&&document.documentMode===10}function VP(t=gn()){return Mv(t)||OP(t)||MP(t)||LP(t)||/windows phone/i.test(t)||DP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t,e=[]){let n;switch(t){case"Browser":n=RT(gn());break;case"Worker":n=`${RT(gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,u)=>{try{const c=e(o);l(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o8(t,e={}){return Hi(t,"GET","/v2/passwordPolicy",Qo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=6;class l8{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:a8,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNumericCharacter)!==null&&l!==void 0?l:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NT(this),this.idTokenSubscription=new NT(this),this.beforeStateQueue=new i8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Is(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await dl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await PP(this,{idToken:e}),r=await As._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(lr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!l||l===u)&&(c!=null&&c.user)&&(s=c.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Ai(this));const n=e?bt(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o8(this),n=new l8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await n8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Is(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[Is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{l=!0,c()}}else{const c=e.addObserver(n);return()=>{l=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$P(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$U(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $l(t){return bt(t)}class NT{constructor(e){this.auth=e,this.observer=null,this.addObserver=rV(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c8(t){um=t}function FP(t){return um.loadJS(t)}function d8(){return um.recaptchaEnterpriseScript}function h8(){return um.gapiScript}function f8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class m8{constructor(){this.enterprise=new p8}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class p8{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const g8="recaptcha-enterprise",UP="NO_RECAPTCHA";class y8{constructor(e){this.type=g8,this.auth=$l(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{GU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new KU(c);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(c=>{u(c)})})}function s(o,l,u){const c=window.grecaptcha;CT(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(UP)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m8().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!n&&CT(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let c=d8();c.length!==0&&(c+=u),FP(c).then(()=>{s(u,o,l)}).catch(h=>{l(h)})}}).catch(u=>{l(u)})})}}async function jT(t,e,n,r=!1,s=!1){const o=new y8(t);let l;if(s)l=UP;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function DT(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await jT(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await jT(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t,e){const n=Bf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Lo(o,e??{}))return s;jr(s,"already-initialized")}return n.initialize({options:e})}function x8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Is);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function w8(t,e,n){const r=$l(t);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=BP(e),{host:l,port:u}=_8(e),c=u===null?"":`:${u}`,h={url:`${o}//${l}${c}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Lo(h,r.config.emulator)&&Lo(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,b8()}function BP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _8(t){const e=BP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:OT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:OT(l)}}}function OT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function b8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ps("not implemented")}_getIdTokenResponse(e){return Ps("not implemented")}_linkToIdToken(e,n){return Ps("not implemented")}_getReauthenticationResolver(e){return Ps("not implemented")}}async function E8(t,e){return Hi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(t,e){return lm(t,"POST","/v1/accounts:signInWithPassword",Qo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(t,e){return lm(t,"POST","/v1/accounts:signInWithEmailLink",Qo(t,e))}async function k8(t,e){return lm(t,"POST","/v1/accounts:signInWithEmailLink",Qo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Vv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ic(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ic(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return DT(e,n,"signInWithPassword",T8);case"emailLink":return S8(e,{email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return DT(e,r,"signUpPassword",E8);case"emailLink":return k8(e,{idToken:n,email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t,e){return lm(t,"POST","/v1/accounts:signInWithIdp",Qo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8="http://localhost";class Uo extends Vv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=jv(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Uo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return hl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hl(e,n)}buildRequest(){const e={requestUri:C8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A8(t){const e=qu(Ku(t)).link,n=e?qu(Ku(e)).deep_link_id:null,r=qu(Ku(t)).deep_link_id;return(r?qu(Ku(r)).link:null)||r||n||e||t}class $v{constructor(e){var n,r,s,o,l,u;const c=qu(Ku(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,g=(r=c.oobCode)!==null&&r!==void 0?r:null,v=P8((s=c.mode)!==null&&s!==void 0?s:null);Re(h&&g&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=g,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=c.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=A8(e);try{return new $v(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.providerId=Fl.PROVIDER_ID}static credential(e,n){return Ic._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$v.parseLink(n);return Re(r,"argument-error"),Ic._fromEmailAndCode(e,r.code,r.tenantId)}}Fl.PROVIDER_ID="password";Fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends zP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Gc{constructor(){super("facebook.com")}static credential(e){return Uo._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Uo._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _i.credential(n,r)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Gc{constructor(){super("github.com")}static credential(e){return Uo._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Gc{constructor(){super("twitter.com")}static credential(e,n){return Uo._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ei.credential(n,r)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await As._fromIdTokenResponse(e,r,s),l=LT(r);return new Cl({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=LT(r);return new Cl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function LT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends ls{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Cf(e,n,r,s)}}function WP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(t,o,e,r):o})}async function I8(t,e,n=!1){const r=await Ac(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e,n=!1){const{auth:r}=t;if(lr(r.app))return Promise.reject(Ai(r));const s="reauthenticate";try{const o=await Ac(t,WP(r,s,e,t),n);Re(o.idToken,r,"internal-error");const l=Lv(o.idToken);Re(l,r,"internal-error");const{sub:u}=l;return Re(t.uid===u,r,"user-mismatch"),Cl._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&jr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e,n=!1){if(lr(t.app))return Promise.reject(Ai(t));const r="signIn",s=await WP(t,r,e),o=await Cl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function N8(t,e){return HP($l(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(t){const e=$l(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function D8(t,e,n){return lr(t.app)?Promise.reject(Ai(t)):N8(bt(t),Fl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&j8(t),r})}function O8(t,e,n,r){return bt(t).onIdTokenChanged(e,n,r)}function L8(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function cm(t,e,n,r){return bt(t).onAuthStateChanged(e,n,r)}function dm(t){return bt(t).signOut()}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=1e3,V8=10;class KP extends qP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,c)=>{this.notifyListeners(l,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);s8()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,V8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},M8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KP.type="LOCAL";const $8=KP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP extends qP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GP.type="SESSION";const QP=GP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new hm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async h=>h(n.origin,o)),c=await F8(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,c)=>{const h=Fv("",20);s.port1.start();const g=setTimeout(()=>{c(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(g),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){return window}function B8(t){ss().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){return typeof ss().WorkerGlobalScope<"u"&&typeof ss().importScripts=="function"}async function z8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function H8(){return JP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firebaseLocalStorageDb",q8=1,Af="firebaseLocalStorage",XP="fbase_key";class Qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fm(t,e){return t.transaction([Af],e?"readwrite":"readonly").objectStore(Af)}function K8(){const t=indexedDB.deleteDatabase(YP);return new Qc(t).toPromise()}function z0(){const t=indexedDB.open(YP,q8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Af,{keyPath:XP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Af)?e(r):(r.close(),await K8(),e(await z0()))})})}async function MT(t,e,n){const r=fm(t,!0).put({[XP]:e,value:n});return new Qc(r).toPromise()}async function G8(t,e){const n=fm(t,!1).get(e),r=await new Qc(n).toPromise();return r===void 0?null:r.value}function VT(t,e){const n=fm(t,!0).delete(e);return new Qc(n).toPromise()}const Q8=800,J8=3;class ZP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await z0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>J8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hm._getInstance(H8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await z8(),!this.activeServiceWorker)return;this.sender=new U8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await z0();return await MT(e,Pf,"1"),await VT(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>MT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>G8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>VT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=fm(s,!1).getAll();return new Qc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZP.type="LOCAL";const Y8=ZP;new Kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t,e){return e?Is(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends Vv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Z8(t){return HP(t.auth,new Uv(t),t.bypassAuthState)}function e9(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),R8(n,new Uv(t),t.bypassAuthState)}async function t9(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),I8(n,new Uv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z8;case"linkViaPopup":case"linkViaRedirect":return t9;case"reauthViaPopup":case"reauthViaRedirect":return e9;default:jr(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=new Kc(2e3,1e4);class il extends eA{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,il.currentPopupAction&&il.currentPopupAction.cancel(),il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=Fv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,il.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n9.get())};e()}}il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="pendingRedirect",Kh=new Map;class s9 extends eA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Kh.get(this.auth._key());if(!e){try{const r=await i9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Kh.set(this.auth._key(),e)}return this.bypassAuthState||Kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function i9(t,e){const n=l9(e),r=a9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function o9(t,e){Kh.set(t._key(),e)}function a9(t){return Is(t._redirectPersistence)}function l9(t){return qh(r9,t.config.apiKey,t.name)}async function u9(t,e,n=!1){if(lr(t.app))return Promise.reject(Ai(t));const r=$l(t),s=X8(r,e),l=await new s9(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9=10*60*1e3;class d9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rs(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c9&&this.cachedEventUids.clear(),this.cachedEventUids.has($T(e))}saveEventToCache(e){this.cachedEventUids.add($T(e)),this.lastProcessedEventTime=Date.now()}}function $T(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f9(t,e={}){return Hi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p9=/^https?/;async function g9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f9(t);for(const n of e)try{if(y9(n))return}catch{}jr(t,"unauthorized-domain")}function y9(t){const e=U0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!p9.test(n))return!1;if(m9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=new Kc(3e4,6e4);function FT(){const t=ss().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function x9(t){return new Promise((e,n)=>{var r,s,o;function l(){FT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FT(),n(rs(t,"network-request-failed"))},timeout:v9.get()})}if(!((s=(r=ss().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=ss().gapi)===null||o===void 0)&&o.load)l();else{const u=f8("iframefcb");return ss()[u]=()=>{gapi.load?l():n(rs(t,"network-request-failed"))},FP(`${h8()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function w9(t){return Gh=Gh||x9(t),Gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=new Kc(5e3,15e3),b9="__/auth/iframe",E9="emulator/auth/iframe",T9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k9(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ov(e,E9):`https://${t.config.authDomain}/${b9}`,r={apiKey:e.apiKey,appName:t.name,v:Ho},s=S9.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Uc(r).slice(1)}`}async function C9(t){const e=await w9(t),n=ss().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:k9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T9,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=rs(t,"network-request-failed"),u=ss().setTimeout(()=>{o(l)},_9.get());function c(){ss().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A9=500,I9=600,R9="_blank",N9="http://localhost";class UT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j9(t,e,n,r=A9,s=I9){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},P9),{width:r.toString(),height:s.toString(),top:o,left:l}),h=gn().toLowerCase();n&&(u=jP(h)?R9:n),RP(h)&&(e=e||N9,c.scrollbars="yes");const g=Object.entries(c).reduce((x,[b,k])=>`${x}${b}=${k},`,"");if(r8(h)&&u!=="_self")return D9(e||"",u),new UT(null);const v=window.open(e||"",u,g);Re(v,t,"popup-blocked");try{v.focus()}catch{}return new UT(v)}function D9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="__/auth/handler",L9="emulator/auth/handler",M9=encodeURIComponent("fac");async function BT(t,e,n,r,s,o){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ho,eventId:s};if(e instanceof zP){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",nV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof Gc){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const c=await t._getAppCheckToken(),h=c?`#${M9}=${encodeURIComponent(c)}`:"";return`${V9(t)}?${Uc(u).slice(1)}${h}`}function V9({config:t}){return t.emulator?Ov(t,L9):`https://${t.authDomain}/${O9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="webStorageSupport";class $9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QP,this._completeRedirectFn=u9,this._overrideRedirectResult=o9}async _openPopup(e,n,r,s){var o;Ms((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await BT(e,n,r,U0(),s);return j9(e,l,Fv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await BT(e,n,r,U0(),s);return B8(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Ms(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await C9(e),r=new d9(e);return n.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jg,{type:jg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[jg];l!==void 0&&n(!!l),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=g9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VP()||NP()||Mv()}}const F9=$9;var zT="@firebase/auth",WT="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z9(t){Mo(new ji("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$P(t)},h=new u8(r,s,o,c);return x8(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mo(new ji("auth-internal",e=>{const n=$l(e.getProvider("auth").getImmediate());return(r=>new U9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(zT,WT,B9(t)),es(zT,WT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=5*60,H9=_C("authIdTokenMaxAge")||W9;let HT=null;const q9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>H9)return;const s=n==null?void 0:n.token;HT!==s&&(HT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K9(t=qy()){const e=Bf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=v8(t,{popupRedirectResolver:F9,persistence:[Y8,$8,QP]}),r=_C("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=q9(o.toString());L8(n,l,()=>l(n.currentUser)),O8(n,u=>l(u))}}const s=vC("auth");return s&&w8(n,`http://${s}`),n}function G9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}c8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=rs("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",G9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z9("Browser");console.log("initializeApp:",typeof Hy);console.log("getFirestore:",typeof Fi);const Q9={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},mm=Hy(Q9);console.log("Firebase app:",mm);const ct=Fi(mm);console.log("Firestore db:",ct);const Dg=DU(mm),is=K9(mm);function J9(){const{isDarkMode:t}=P.useContext(Ze),e=P.useRef(null),n=P.useRef(null),r=Or(),[s,o]=P.useState(!0),[l,u]=P.useState(null),[c,h]=P.useState(!1),[g,v]=P.useState(!1),[x,b]=P.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[k,O]=P.useState(0),[A,D]=P.useState(null),[V,$]=P.useState(null),[W,B]=P.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);P.useEffect(()=>{(async()=>{var ge,$e,Ge;o(!0),u(null);try{const be=qn(ct,"content","home");console.log("Fetching content/home...");const ce=await qc(be);console.log("Document exists:",ce.exists());let J={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"Here at Aussie Gut Pack, we believe life should be…eel less like a chore and more like an adventure.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin.","Eat a fiber-rich meal.","Practice 5 minutes of deep breathing."],lastUpdated:null};if(ce.exists()){const fe=ce.data();console.log("Firestore data:",fe),J={...J,...fe,quotes:Array.isArray(fe.quotes)?fe.quotes:J.quotes,currentWorkout:{description:((ge=fe.currentWorkout)==null?void 0:ge.description)||J.currentWorkout.description,warmup:Array.isArray(($e=fe.currentWorkout)==null?void 0:$e.warmup)?fe.currentWorkout.warmup:J.currentWorkout.warmup,main:Array.isArray((Ge=fe.currentWorkout)==null?void 0:Ge.main)?fe.currentWorkout.main:J.currentWorkout.main},scheduledWorkouts:Array.isArray(fe.scheduledWorkouts)?fe.scheduledWorkouts:[],aboutUs:fe.aboutUs||J.aboutUs,dailyChallenges:Array.isArray(fe.dailyChallenges)?fe.dailyChallenges:J.dailyChallenges,lastUpdated:fe.lastUpdated||J.lastUpdated}}else console.warn("No document found at content/home, initializing..."),await Tf(be,J);const te=new Date,z=[...J.scheduledWorkouts];let ne=!1;if(z.sort((fe,Te)=>new Date(fe.updateDateTime)-new Date(Te.updateDateTime)),z.length>0){const fe=z[0],Te=new Date(fe.updateDateTime);te>=Te&&(!J.lastUpdated||new Date(J.lastUpdated)<Te)&&(J.currentWorkout={description:fe.description||"",warmup:fe.warmup||[],main:fe.main||[]},z.shift(),J.scheduledWorkouts=z,J.lastUpdated=te.toISOString(),ne=!0)}ne&&(await Tf(be,J,{merge:!0}),console.log("Updated Firestore document with new workout")),console.log("Setting content:",J),b(J);try{const fe=jt(ct,"content","blog","posts"),Te=await Ln(fe);if(Te.empty){console.log("No blog posts found"),D({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."});return}const je=Te.docs.map(ie=>({id:ie.id,title:ie.data().title||"Untitled Post",date:ie.data().date||new Date().toISOString(),blocks:ie.data().blocks||[]}));if(je.length>0){je.sort((q,re)=>new Date(re.date)-new Date(q.date));const ie=je[0],oe=K(ie);D({...ie,excerpt:oe});const he=new Date("2025-04-16T00:00:00Z"),Z=je.filter(q=>new Date(q.date)>he).sort((q,re)=>new Date(q.date)-new Date(re.date));if(Z.length>0){const q=Z[0],re=K(q);$({...q,excerpt:re})}}}catch(fe){console.error("Error fetching blog posts:",fe),D({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}}catch(be){console.error("Error in fetchAndUpdateContent:",be),u("Failed to load content. Please try again later.")}finally{o(!1),console.log("isLoading set to false")}})()},[]);const K=L=>{if(!L||!L.blocks||L.blocks.length===0)return"Read more...";const ge=L.blocks.find($e=>$e.type==="paragraph"||$e.type==="list"||$e.type==="bullet");return ge?ge.type==="paragraph"&&ge.content?ge.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(ge.content)&&ge.content.length>0?ge.content[0]+(ge.content.length>1?"...":""):"Read more...":"Read more..."};P.useEffect(()=>{const L=new IntersectionObserver($e=>{$e.forEach(Ge=>{const be=Ge.isIntersecting;console.log(`IntersectionObserver: ${Ge.target===e.current?"headerRef":"roofRef"} isIntersecting: ${be}`),Ge.target===e.current&&h(be),Ge.target===n.current&&v(be)})},{threshold:.1});e.current&&L.observe(e.current),n.current&&L.observe(n.current);const ge=setTimeout(()=>{g||(console.log("IntersectionObserver timeout: Forcing isRoofVisible to true"),v(!0)),c||(console.log("IntersectionObserver timeout: Forcing isHeaderVisible to true"),h(!0))},2e3);return()=>{e.current&&L.unobserve(e.current),n.current&&L.unobserve(n.current),clearTimeout(ge)}},[c,g]),P.useEffect(()=>{const L=setInterval(()=>{O(ge=>(ge+1)%(x.quotes.length||1))},4e3);return()=>clearInterval(L)},[x.quotes.length]),P.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(W))},[W]);const I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},S={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},T=L=>{B(ge=>ge.includes(L)?ge.filter($e=>$e!==L):[...ge,L])},R=x.dailyChallenges.length>0&&W.length===x.dailyChallenges.length&&x.dailyChallenges.every((L,ge)=>W.includes(ge)),j="https://aussiegutpack.com",F=`${j}${r.pathname==="/"?"":r.pathname}`;return f.jsxs(f.Fragment,{children:[f.jsxs(kN,{children:[f.jsx("title",{children:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{name:"description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{name:"keywords",content:"gut health, digestive health, Australian Shepherd, wellness, fitness, daily challenges, Aussie Gut Pack"}),f.jsx("meta",{name:"robots",content:"index, follow"}),f.jsx("meta",{property:"og:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{property:"og:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{property:"og:type",content:"website"}),f.jsx("meta",{property:"og:url",content:F}),f.jsx("meta",{property:"og:image",content:`${j}/images/og-image.jpg`}),f.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),f.jsx("meta",{name:"twitter:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{name:"twitter:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{name:"twitter:image",content:`${j}/images/og-image.jpg`}),A&&f.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:A.title,datePublished:A.date,description:A.excerpt,author:{"@type":"Organization",name:"Aussie Gut Pack"},publisher:{"@type":"Organization",name:"Aussie Gut Pack",logo:{"@type":"ImageObject",url:`${j}/images/creatine.png`}},mainEntityOfPage:{"@type":"WebPage","@id":`${j}/blog/${A.id}`}})})]}),f.jsx("main",{id:"main-content",className:`min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"100vh"},children:s?f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsx("p",{className:`text-xl ${t?"text-white":"text-red-600"}`,children:"Loading content..."})}):l?f.jsx("div",{className:"text-center text-red-600 p-4",children:l}):f.jsxs(f.Fragment,{children:[console.log("Rendering sections, content:",x),f.jsx("section",{ref:e,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:"container mx-auto text-center",children:[f.jsxs("header",{children:[f.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),f.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."})]}),f.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${c?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[f.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[f.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"About Us"}),f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.aboutUs||"No about us content available."}),f.jsx("div",{className:"flex justify-center gap-4 mt-6",children:f.jsx(Dn,{to:"/login",variant:"primary",className:"join-the-pack-button","aria-label":"Join the Aussie Gut Pack community",children:"Join the Pack"})})]}),f.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:f.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:f.jsx(sD,{className:"w-full h-full object-cover"})})})]})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsx("section",{ref:n,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${g?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[f.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),f.jsx("div",{className:"max-w-2xl mx-auto mb-8",style:{minHeight:"80px"},children:f.jsx(Xg,{mode:"wait",children:x.quotes.length>0?f.jsxs(uf.p,{variants:I,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:['"',x.quotes[k],'"']},k):f.jsx("p",{className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No quotes available."})})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[f.jsxs("section",{className:"workout-section","aria-labelledby":"workout-heading",children:[f.jsx("h3",{id:"workout-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),x.currentWorkout.description?f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.currentWorkout.description}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No workout description available."}),f.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Warm Up"}),x.currentWorkout.warmup.length>0?f.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.currentWorkout.warmup.map((L,ge)=>f.jsx("li",{className:"mb-2 text-lg",children:L},`warmup-${ge}`))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No warmup exercises available."}),f.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Main Workout"}),x.currentWorkout.main.length>0?f.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.currentWorkout.main.map((L,ge)=>f.jsx("li",{className:"mb-2 text-lg",children:L},`main-${ge}`))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No main workout exercises available."}),f.jsx(Dn,{to:"/fitness-tips",variant:"primary",className:"mx-auto btn-primary bg-red-800 text-white hover:bg-red-900","aria-label":"View more fitness tips",children:"More Fitness Tips"})]}),f.jsxs("section",{className:"challenges-section","aria-labelledby":"challenges-heading",children:[f.jsx("h3",{id:"challenges-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),x.dailyChallenges.length>0?f.jsx("ul",{className:`text-left list-none pl-6 mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,role:"list",children:x.dailyChallenges.map((L,ge)=>f.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[f.jsx("input",{type:"checkbox",id:`challenge-${ge}`,checked:W.includes(ge),onChange:()=>T(ge),className:"mr-2","aria-label":`Mark challenge as completed: ${L}`,"aria-checked":W.includes(ge)}),f.jsx("label",{htmlFor:`challenge-${ge}`,children:L})]},`challenge-${ge}`))}):f.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No challenges available."}),f.jsx(Xg,{children:R&&f.jsx(uf.p,{variants:S,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-green-400":"text-green-600"}`,"aria-live":"polite",children:"Great job, Pack Leader!"})})]})]})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsx("section",{className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:"container mx-auto text-center",children:[f.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),A?f.jsxs("article",{className:"mb-8",children:[f.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:A.title}),f.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:new Date(A.date).toLocaleDateString()}),f.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:A.excerpt}),f.jsx(Dn,{to:`/blog/${A.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900","aria-label":`Read more about ${A.title}`,children:"Read More"})]}):f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No blog posts available."}),V?f.jsxs("article",{children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Upcoming: ",V.title]}),f.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:["Coming on"," ",new Date(V.date).toLocaleDateString()]}),f.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:V.excerpt}),f.jsx("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-500"}`,children:"Stay tuned for this upcoming post!"})]}):f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No upcoming blog posts at this time."})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsxs("section",{className:`py-8 ${t?"bg-stone-800":"bg-stone-100"} text-center`,children:[f.jsx("p",{className:`text-lg mb-4 ${t?"text-white":"text-red-600"}`,children:"Want more? Sign up with us today!"}),f.jsx(Dn,{to:"/login",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900","aria-label":"Sign up for Aussie Gut Pack",children:"Sign Up"})]})]})})]})}const nA=P.createContext(),Y9=({children:t})=>{const[e,n]=P.useState([]),r=c=>{n(h=>h.find(v=>v.id===c.id)?h.map(v=>v.id===c.id?{...v,quantity:v.quantity+1}:v):[...h,{...c,quantity:1}])},s=(c,h)=>{h<=0?o(c):n(g=>g.map(v=>v.id===c?{...v,quantity:h}:v))},o=c=>{n(h=>h.filter(g=>g.id!==c))},l=()=>{n([])},u=()=>e.reduce((c,h)=>c+h.price*h.quantity,0);return f.jsx(nA.Provider,{value:{cart:e,addToCart:r,updateQuantity:s,removeFromCart:o,clearCart:l,getTotalPrice:u},children:t})},pm=()=>P.useContext(nA);function X9(){var ce;const{isDarkMode:t}=P.useContext(Ze),{cart:e,addToCart:n,updateQuantity:r,removeFromCart:s,getTotalPrice:o}=pm(),[l,u]=P.useState([]),[c,h]=P.useState([]),[g,v]=P.useState(!1),[x,b]=P.useState(""),[k,O]=P.useState(""),[A,D]=P.useState(""),[V,$]=P.useState(!1),[W,B]=P.useState(!0),[K,I]=P.useState(!1),[S,T]=P.useState(!1),R=P.useRef(null),j=P.useRef(null),F=Qt();P.useEffect(()=>{console.log("isMiniCartOpen updated to:",V)},[V]),P.useEffect(()=>{console.log("showAll updated to:",g)},[g]),P.useEffect(()=>{const J=te=>{const z=document.querySelector(".cart-button"),ne=te.target.closest(".add-to-cart-button"),fe=Date.now(),Te=j.current?fe-j.current:1/0;console.log("Outside click handler triggered, target:",te.target),console.log("Is target an Add to Cart button?",!!ne),console.log("Time since last Add to Cart click:",Te),console.log("IsMiniCartOpen?",V),console.log("OpenedByAdd?",K),V&&!te.target.closest(".mini-cart-sidebar")&&!(z!=null&&z.contains(te.target))&&!ne&&Te>100&&!K&&(console.log("Outside click detected, closing sidebar"),$(!1))};return document.addEventListener("click",J),()=>document.removeEventListener("click",J)},[V,K]),P.useEffect(()=>{(async()=>{try{B(!0);const z=(await Ln(jt(ct,"categories"))).docs.map(Te=>({id:Te.id,...Te.data()}));u(z);const fe=(await Ln(jt(ct,"products"))).docs.map(Te=>({id:Te.id,...Te.data()}));h(fe)}catch(te){console.error("Error fetching data from Firestore:",te)}finally{B(!1)}})()},[]),P.useEffect(()=>(e.length>0&&(R.current&&clearTimeout(R.current),console.log("Cart updated, opening sidebar, cart length:",e.length),I(!0),$(!0),e.length!==1&&(R.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),$(!1),I(!1)},3e3))),()=>{R.current&&clearTimeout(R.current)}),[e]),P.useEffect(()=>{e.length===0&&V&&(console.log("Cart is empty, closing sidebar"),$(!1),I(!1))},[e,V]);const L=J=>{j.current=Date.now(),n(J)},ge=J=>{const te=[...J];switch(x){case"price-asc":return te.sort((z,ne)=>z.price-ne.price);case"price-desc":return te.sort((z,ne)=>ne.price-z.price);case"name-asc":return te.sort((z,ne)=>z.name.localeCompare(ne.name));case"name-desc":return te.sort((z,ne)=>ne.name.localeCompare(z.name));default:return te}},$e=c.filter(J=>A?J.name.toLowerCase().includes(A.toLowerCase())||J.description.toLowerCase().includes(A.toLowerCase()):!0),Ge=k?$e.filter(J=>J.categoryId===k):$e,be=ge(Ge);return f.jsxs("div",{className:`min-h-screen container mx-auto px-4 py-8 md:px-6 md:py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:`text-3xl md:text-4xl font-bold transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Pack"}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-3 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950 md:px-4",onClick:J=>{J.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",V),$(!V)},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),f.jsx("span",{className:"hidden md:inline",children:"Cart"}),Array.isArray(e)&&e.length>0&&f.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-5 w-5 md:h-6 md:w-6 flex items-center justify-center text-xs md:text-sm transition-all duration-300 ease-in-out ${e.length>0?"animate-bounce":""}`,children:e.reduce((J,te)=>J+te.quantity,0)})]}),f.jsx("button",{onClick:()=>T(!S),className:"md:hidden text-white focus:outline-none",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})})]})]}),f.jsxs("div",{className:`${S?"block":"hidden"} md:block mb-6 transition-all duration-300 ease-in-out`,children:[f.jsx("h2",{className:`text-2xl md:text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Products"}),f.jsx("div",{className:"mb-6",children:f.jsx("input",{type:"text",placeholder:"Search products by name or description...",value:A,onChange:J=>D(J.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`})}),f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full",children:[f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Filter by Section:"}),f.jsxs("select",{value:k,onChange:J=>O(J.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[f.jsx("option",{value:"",children:"All Sections"}),l.map(J=>f.jsx("option",{value:J.id,children:J.name},J.id))]})]}),f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Sort By:"}),f.jsxs("select",{value:x,onChange:J=>b(J.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[f.jsx("option",{value:"",children:"None"}),f.jsx("option",{value:"price-asc",children:"Price: Low to High"}),f.jsx("option",{value:"price-desc",children:"Price: High to Low"}),f.jsx("option",{value:"name-asc",children:"Name: A-Z"}),f.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),f.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",g),v(J=>{const te=!J;return console.log("Setting showAll to:",te),te&&(console.log("Resetting filterCategory to show all products"),O("")),te})},className:`w-full sm:w-auto px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${t?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:g?"Group by Category":"Show All Products"})]})]}),W?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):k?f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:((ce=l.find(J=>J.id===k))==null?void 0:ce.name)||"Section"}),be.length===0?f.jsx("p",{className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:be.map(J=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:te=>{te.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${J.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:J.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",J.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:te=>{te.stopPropagation(),j.current=Date.now(),L(J)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${J.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},J.id))})]}):g?f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:be.map(J=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:te=>{te.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${J.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:J.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",J.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:te=>{te.stopPropagation(),j.current=Date.now(),L(J)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${J.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},J.id))}):l.map(J=>f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:ge(c.filter(te=>te.categoryId===J.id)).map(te=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:te.image,alt:te.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:z=>{z.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${te.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:te.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:te.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",te.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:z=>{z.stopPropagation(),j.current=Date.now(),L(te)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${te.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},te.id))})]},J.id)),V&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:J=>{J.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),$(!1)}}),f.jsx("div",{className:`mini-cart-sidebar w-64 md:w-80 p-4 md:p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${V?"translate-x-0":"translate-x-full"} ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:f.jsxs("div",{className:`mini-cart-content ${V?"active":""}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:`text-lg md:text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Your Cart"}),f.jsx("button",{onClick:J=>{J.stopPropagation(),console.log("Close button clicked, closing sidebar"),$(!1)},className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:"✕"})]}),!Array.isArray(e)||e.length===0?f.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):f.jsxs("div",{className:"space-y-4",children:[f.jsx(Of,{component:null,children:e.map(J=>f.jsx(Df,{timeout:300,classNames:"cart-item",children:f.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-12 h-12 md:w-16 md:h-16 object-cover rounded-md",onError:te=>{te.target.src="/UW_placeholder.jpg"}}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:`text-xs md:text-sm font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["$",J.price.toFixed(2)," x ",J.quantity]}),f.jsx("div",{className:"flex items-center gap-2 mt-2",children:f.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[J.quantity===1?f.jsx("button",{onClick:te=>{te.stopPropagation(),s(J.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):f.jsx("button",{onClick:te=>{te.stopPropagation(),r(J.id,J.quantity-1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),f.jsx("span",{className:`text-xs md:text-sm mx-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.quantity}),f.jsx("button",{onClick:te=>{te.stopPropagation(),r(J.id,J.quantity+1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),f.jsx("button",{onClick:te=>{te.stopPropagation(),s(J.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:"✕"})]})},J.id))}),f.jsxs("div",{className:"border-t pt-4 mt-4",children:[f.jsxs("p",{className:`text-base md:text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Subtotal: $",o().toFixed(2)]}),f.jsx("button",{onClick:J=>{J.stopPropagation(),$(!1),F("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4 text-sm md:text-base",children:"Go to Cart"}),f.jsx("button",{onClick:J=>{J.stopPropagation(),$(!1),F("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2 text-sm md:text-base",children:"Proceed to Checkout"})]})]})]})})]})]})}function Z9(){const{id:t}=jc(),{isDarkMode:e}=P.useContext(Ze),{addToCart:n}=pm(),[r,s]=P.useState(null),[o,l]=P.useState(!0),[u,c]=P.useState([]),[h,g]=P.useState(0),[v,x]=P.useState(0),[b,k]=P.useState(""),[O,A]=P.useState(null),D=Qt();P.useEffect(()=>{const B=is.onAuthStateChanged(K=>{A(K)});return()=>B()},[]),P.useEffect(()=>{(async()=>{try{l(!0);const K=qn(ct,"products",t),I=await qc(K);I.exists()?s({id:I.id,...I.data()}):(console.error("Product not found"),D("/products"));const S=jt(ct,"products",t,"reviews"),R=(await Ln(S)).docs.map(j=>({id:j.id,...j.data()}));if(c(R),R.length>0){const j=R.reduce((F,L)=>F+L.rating,0);g(j/R.length)}else g(0)}catch(K){console.error("Error fetching product or reviews:",K),D("/products")}finally{l(!1)}})()},[t,D]);const V=B=>{x(B)},$=B=>{x(B)},W=async B=>{if(B.preventDefault(),!O){alert("Please sign in to submit a review.");return}if(v<1||v>5){alert("Please select a rating between 1 and 5 stars.");return}if(!b.trim()){alert("Please enter a review comment.");return}try{const K={rating:v,comment:b,userId:O.uid,userEmail:O.email,timestamp:new Date().toISOString()},I=jt(ct,"products",t,"reviews");await kl(I,K),c([...u,K]);const S=[...u,K].reduce((T,R)=>T+R.rating,0);g(S/(u.length+1)),x(0),k("")}catch(K){console.error("Error submitting review:",K),alert("Failed to submit review. Please try again.")}};return o?f.jsx("div",{className:"flex justify-center items-center h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):r?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("button",{onClick:()=>D("/products"),className:`mb-6 text-sm font-semibold transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-500":"text-red-600 hover:text-red-800"}`,children:"← Back to Products"}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[f.jsx("div",{className:"md:w-1/2",children:f.jsx("img",{src:r.image,alt:r.name,className:"w-full h-96 object-cover rounded-md",onError:B=>{B.target.src="https://via.placeholder.com/300x200.png?text=No+Image",console.error(`Failed to load image for ${r.name}`)}})}),f.jsxs("div",{className:"md:w-1/2",children:[f.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:r.name}),f.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:r.description}),f.jsxs("p",{className:`text-xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["Price: $",r.price.toFixed(2)]}),f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(B=>f.jsx("svg",{className:`w-6 h-6 ${B<=Math.round(h)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},B))}),f.jsxs("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["(",h.toFixed(1)," from ",u.length," reviews)"]})]}),f.jsx("button",{onClick:()=>n(r),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Add to Cart"})]})]}),f.jsxs("div",{className:"mt-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:"Customer Reviews"}),f.jsxs("div",{className:`p-6 border rounded-md mb-8 ${e?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("h3",{className:`text-lg font-medium mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:"Write a Review"}),O?f.jsxs("form",{onSubmit:W,children:[f.jsx("div",{className:"flex mb-4",children:[1,2,3,4,5].map(B=>f.jsx("svg",{onMouseEnter:()=>V(B),onMouseLeave:()=>V(v),onClick:()=>$(B),className:`w-8 h-8 cursor-pointer ${B<=v?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},B))}),f.jsx("textarea",{value:b,onChange:B=>k(B.target.value),placeholder:"Write your review here...",className:`w-full p-3 border rounded-md focus:outline-none transition-all duration-300 ease-in-out mb-4 ${e?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`,rows:"4"}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Submit Review"})]}):f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["Please"," ",f.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"sign in"})," ","to write a review."]})]}),u.length===0?f.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:"No reviews yet. Be the first to review this product!"}):f.jsx("div",{className:"space-y-6",children:u.map(B=>f.jsxs("div",{className:`p-4 border rounded-md ${e?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(K=>f.jsx("svg",{className:`w-5 h-5 ${K<=B.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},K))}),f.jsx("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:new Date(B.timestamp).toLocaleDateString()})]}),f.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:B.comment}),f.jsxs("p",{className:`text-xs mt-2 transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"}`,children:["By: ",B.userEmail]})]},B.id))})]})]}):null}function e5(){const{isDarkMode:t}=P.useContext(Ze),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:s,getTotalPrice:o}=pm(),[l,u]=P.useState(!1),[c,h]=P.useState({name:"",email:"",address:""}),g=Qt(),v=async x=>{if(x.preventDefault(),!c.name||!c.email||!c.address){alert("Please fill in all fields to proceed with checkout.");return}u(!0);try{const b={items:e,total:o(),customer:c,createdAt:new Date().toISOString(),status:"pending"};await kl(jt(ct,"orders"),b),s(),alert("Order placed successfully! Thank you for your purchase."),g("/")}catch(b){console.error("Error placing order:",b),alert("Failed to place order. Please try again.")}finally{u(!1),h({name:"",email:"",address:""})}};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Your Cart"}),e.length===0?f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),f.jsx("button",{onClick:()=>g("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):f.jsxs("div",{className:"space-y-8",children:[f.jsx("div",{className:"space-y-4",children:e.map(x=>f.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:x.image,alt:x.name,className:"w-20 h-20 object-cover rounded-md",onError:b=>{b.target.src="https://via.placeholder.com/80"}}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:x.name}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",x.price.toFixed(2)]}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(x.price*x.quantity).toFixed(2)]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>n(x.id,x.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"-"}),f.jsx("span",{className:`text-lg ${t?"text-white":"text-red-600"}`,children:x.quantity}),f.jsx("button",{onClick:()=>n(x.id,x.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"+"})]}),f.jsx("button",{onClick:()=>r(x.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:l,children:"Remove"})]},x.id))}),f.jsxs("div",{className:`p-6 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-white":"text-red-600"}`,children:"Order Summary"}),f.jsxs("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:["Total: $",o().toFixed(2)]}),f.jsxs("form",{onSubmit:v,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Full Name"}),f.jsx("input",{type:"text",value:c.name,onChange:x=>h({...c,name:x.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:l})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Email"}),f.jsx("input",{type:"email",value:c.email,onChange:x=>h({...c,email:x.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:l})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Shipping Address"}),f.jsx("textarea",{value:c.address,onChange:x=>h({...c,address:x.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:l})]}),f.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${l?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:l,children:l?"Processing...":"Place Order"})]})]})]})]})}function t5(){const{isDarkMode:t}=P.useContext(Ze),{cart:e,updateQuantity:n,removeFromCart:r}=pm(),s=Object.values(e).reduce((l,u)=>l+u.price*u.quantity,0),o=()=>{alert("Order placed successfully!"),Object.keys(e).forEach(l=>r(l))};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsxs("header",{className:"text-center mb-12",children:[f.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Checkout"}),f.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(e).length===0?f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),f.jsx(Dn,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([l,u])=>f.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[f.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:f.jsx("img",{src:u.image||"https://via.placeholder.com/80",alt:u.name,className:"w-full h-full object-cover rounded"})}),f.jsxs("div",{className:"flex-1 ml-4",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:u.name}),f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Color: ",u.color]}),f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Size: ",u.size]})]}),f.jsx("button",{onClick:()=>r(l),className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:"✕"})]}),f.jsxs("div",{className:"flex items-center mt-2",children:[f.jsx("button",{onClick:()=>n(l,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),f.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${t?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:u.quantity}),f.jsx("button",{onClick:()=>n(l,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),f.jsx("div",{className:"text-right ml-4",children:u.originalPrice?f.jsxs("div",{children:[f.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["$",(u.originalPrice*u.quantity).toFixed(2)]}),f.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})]}):f.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})})]},l))}),f.jsxs("div",{className:"mt-12 text-right",children:[f.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Total: $",s.toFixed(2)]}),f.jsx(Dn,{onClick:o,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const W0=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):","• Stress: Elevates cortisol, disrupting gut flora and increasing permeability","• Glyphosate: Kills beneficial bacteria, feeds pathogenic ones","• Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections","• Seed Oils: Feed pathogenic bacteria, have a long half-life","• Refined Sugars: Feed harmful bacteria, promote dysbiosis","• Long-term Restrictive Diets: Reduce microbiome diversity","• Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
• Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
• Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
• Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesn’t survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
• Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
• A nutrient-dense, diverse, unprocessed diet with prebiotics
• Healthy exercise, sleep, and an uplifting social life worth enjoying
• Sun exposure and skin contact with nature
• Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connected—good gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function If({title:t,content:e,footer:n,className:r}){const{isDarkMode:s}=P.useContext(Ze);return f.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${s?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${r}`,children:[f.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:t}),e&&f.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:e}),n&&f.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:n})]})}function n5(){const{isDarkMode:t}=P.useContext(Ze);P.useEffect(()=>{});const e=W0.filter(r=>r.category==="Benefits"),n=W0.filter(r=>r.category!=="Benefits");return f.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("div",{className:"pt-16"}),f.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),f.jsxs("section",{className:"mb-8 flex-grow",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),f.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),f.jsxs("section",{className:"py-12 px-6 flex-grow",children:[f.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(r=>f.jsx(ot,{to:`/gut-health/${r.id}`,children:f.jsx(If,{title:r.title,content:r.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},r.id))})]}),f.jsxs("section",{className:"flex-grow",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:n.map(r=>f.jsx(ot,{to:`/gut-health/${r.id}`,children:f.jsx(If,{title:r.title,content:r.content,footer:`Category: ${r.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${t?"bg-stone-800":"bg-stone-50"}`})},r.id))})]})]})}function r5(){const{id:t}=jc(),{isDarkMode:e}=P.useContext(Ze);Qt();const n=W0.find(r=>r.id.toString()===t);return n?f.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[f.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),f.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:["Category: ",n.category]}),Array.isArray(n.content)?f.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content.map((r,s)=>f.jsx("li",{className:"mb-2",children:r},s))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content}),f.jsx(Dn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):f.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[f.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),f.jsx(Dn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const s5=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function i5(){const{isDarkMode:t}=P.useContext(Ze),[e,n]=P.useState([]),r=l=>n([...e,l]),s=l=>n(e.filter(u=>u.id!==l)),o=e.reduce((l,u)=>l+u.price,0);return f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsx("h1",{className:`text-3xl font-bold mb-6 ${t?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Available Products"}),s5.map(l=>f.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${t?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[f.jsxs("div",{children:[f.jsx("h3",{className:`font-bold ${t?"text-gray-300":"text-gray-800"}`,children:l.name}),f.jsxs("p",{className:`${t?"text-green-400":"text-green-700"}`,children:["$",l.price]})]}),f.jsx(Dn,{onClick:()=>r(l),variant:"primary",children:"Add to Cart"})]},l.id))]}),f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Your Cart"}),e.length===0?f.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):f.jsxs(f.Fragment,{children:[e.map(l=>f.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${t?"border-gray-700":"border-gray-300"}`,children:[f.jsx("span",{className:`${t?"text-gray-300":"text-gray-800"}`,children:l.name}),f.jsxs("div",{children:[f.jsxs("span",{className:`mr-4 ${t?"text-green-400":"text-green-700"}`,children:["$",l.price]}),f.jsx("button",{onClick:()=>s(l.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},l.id)),f.jsxs("div",{className:`mt-4 font-bold ${t?"text-green-300":"text-green-800"}`,children:["Total: $",o.toFixed(2)]}),f.jsx(Dn,{className:"mt-4 w-full",variant:"primary",disabled:e.length===0,children:"Checkout"})]})]})]})]})}var o5={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a5(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return o5[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function qT(t){var e=a5(t);return"".concat(e.value).concat(e.unit)}var l5=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var s=document.createElement("style");document.head.appendChild(s);var o=s.sheet,l=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return o&&o.insertRule(l,0),r},Rf=function(){return Rf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Rf.apply(this,arguments)},u5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n},c5=l5("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function Rc(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,s=r===void 0?"#000000":r,o=t.speedMultiplier,l=o===void 0?1:o,u=t.cssOverride,c=u===void 0?{}:u,h=t.size,g=h===void 0?35:h,v=u5(t,["loading","color","speedMultiplier","cssOverride","size"]),x=Rf({background:"transparent !important",width:qT(g),height:qT(g),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(c5," ").concat(.75/l,"s 0s infinite linear"),animationFillMode:"both"},c);return n?P.createElement("span",Rf({style:x},v)):null}const d5=()=>{const{isDarkMode:t}=P.useContext(Ze),[e,n]=P.useState([]),[r,s]=P.useState(!0),[o,l]=P.useState(null);P.useEffect(()=>{(async()=>{try{const b=jt(ct,"content","blog","posts"),O=(await Ln(b)).docs.map(A=>{var D,V;return{id:A.id,title:A.data().title,blocks:A.data().blocks||[{type:"paragraph",content:""}],date:A.data().date||"",lastEdited:A.data().lastEdited||"",image:((V=(D=A.data().blocks)==null?void 0:D.find($=>$.type==="image"))==null?void 0:V.content)||""}});if(console.log("Fetched blog posts:",O),O.length>0){const A=O.sort((D,V)=>{const $=D.date?new Date(D.date):null,W=V.date?new Date(V.date):null;return console.log(`Sorting: ${D.title} (${D.date}) -> ${$}, ${V.title} (${V.date}) -> ${W}`),!$||isNaN($.getTime())?1:!W||isNaN(W.getTime())?-1:W-$});console.log("Sorted blog posts:",A),n(A)}else n([])}catch(b){console.error("Error fetching blog posts:",b),l("Failed to load blog posts. Please try again later."),n([])}finally{s(!1)}})()},[]);const u=x=>{if(!x)return"Date not set";const b=new Date(x);return isNaN(b.getTime())?"Invalid Date":b.toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"})},c=x=>{if(!x)return"Never edited";const b=new Date(x);return isNaN(b.getTime())?"Invalid Timestamp":b.toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},h=x=>{if(!x.blocks||x.blocks.length===0)return"Read more...";const b=x.blocks.find(k=>k.type==="paragraph"||k.type==="list"||k.type==="bullet");return b?b.type==="paragraph"?b.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(b.content)?b.content[0]+(b.content.length>1?"...":""):"Read more...":"Read more..."},g=x=>{if(!x.date)return!1;const b=new Date("2025-04-16T00:00:00Z"),k=new Date(x.date);return isNaN(k.getTime())?!1:k>b},v={hidden:{opacity:0,y:20},visible:x=>({opacity:1,y:0,transition:{delay:x*.1,duration:.5,ease:"easeOut"}})};return r?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),f.jsx("div",{className:"text-center",children:f.jsx(Rc,{color:t?"#f87171":"#b91c1c"})})]}):o?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:o})]}):f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.length===0?f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:f.jsx(Xg,{children:e.map((x,b)=>{const k=g(x);return f.jsx(uf.div,{custom:b,initial:"hidden",animate:"visible",variants:v,className:"group",children:k?f.jsx(If,{title:f.jsxs("span",{className:"flex items-center",children:[f.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-700"} group-hover:underline`,children:x.title}),f.jsx("span",{className:`ml-2 text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:"(Coming Soon)"})]}),footer:f.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[f.jsxs("p",{children:["Publish Date: ",u(x.date)]}),f.jsxs("p",{children:["Last Edited: ",c(x.lastEdited)]})]}),content:f.jsxs(f.Fragment,{children:[x.image&&f.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:f.jsx("img",{src:x.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out"})}),f.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(x)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 opacity-50":"bg-white border-red-800/50 opacity-50"} cursor-not-allowed overflow-hidden`}):f.jsx(ot,{to:`/blog/${x.id}`,className:"block",children:f.jsx(If,{title:f.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-200":"text-stone-800"} group-hover:underline`,children:x.title}),footer:f.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[f.jsxs("p",{children:["Published: ",u(x.date)]}),f.jsxs("p",{children:["Last Edited: ",c(x.lastEdited)]})]}),content:f.jsxs(f.Fragment,{children:[x.image&&f.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:f.jsx("img",{src:x.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"})}),f.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(x)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 hover:bg-stone-700 hover:shadow-xl":"bg-white border-red-800/50 hover:bg-stone-100 hover:shadow-xl"} overflow-hidden`})})},x.id)})})})]})},h5=()=>{const{id:t}=jc(),{isDarkMode:e}=P.useContext(Ze),[n,r]=P.useState(null),[s,o]=P.useState(!0),[l,u]=P.useState(null),[c,h]=P.useState(!1);P.useEffect(()=>{(async()=>{try{o(!0),u(null);const k=qn(ct,"content","blog","posts",t),O=await qc(k);if(O.exists()){const A={id:O.id,...O.data()},D=new Date("2025-04-16T00:00:00Z"),V=A.date?new Date(A.date):null;V&&V>D?h(!0):h(!1),r(A)}else r(null)}catch(k){console.error("Error fetching blog post:",k),u("Failed to load blog post. Please try again later.")}finally{o(!1)}})()},[t]);const g=b=>b?new Date(b).toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"}):"Date not set",v=b=>b?new Date(b).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",x={hidden:{opacity:0,y:20},visible:b=>({opacity:1,y:0,transition:{delay:b*.1,duration:.5,ease:"easeOut"}})};return s?f.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:f.jsx("div",{className:"text-center",children:f.jsx(Rc,{color:e?"#f87171":"b91c1c"})})}):l?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Error"}),f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-600"}`,children:l}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):n?c?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Coming Soon"}),f.jsxs("p",{className:`text-lg transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["This blog post will be available on ",g(n.date),"."]}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):f.jsx("div",{className:`min-h-screen container mx-auto px-4 sm:px-6 lg:px-8 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsxs("div",{className:`relative rounded-xl shadow-lg p-8 mb-12 overflow-hidden border-t-4 ${e?"bg-gradient-to-r from-stone-800 to-stone-700 border-red-400/50":"bg-gradient-to-r from-white to-stone-100 border-red-800/50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),f.jsxs("div",{className:`text-lg transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"} flex flex-col sm:flex-row sm:items-center sm:space-x-4`,children:[f.jsxs("p",{children:["Published: ",g(n.date)]}),f.jsxs("p",{children:["Last Edited: ",v(n.lastEdited)]})]})]}),f.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${e?"text-stone-200 prose-invert":"text-stone-700"}`,children:n.blocks&&n.blocks.length>0?n.blocks.map((b,k)=>f.jsx(uf.div,{custom:k,initial:"hidden",animate:"visible",variants:x,className:"mb-8",children:b.type==="paragraph"?f.jsx("p",{className:"leading-relaxed",children:b.content}):b.type==="list"&&Array.isArray(b.content)?f.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:b.content.map((O,A)=>f.jsx("li",{className:"leading-relaxed",children:O},A))}):b.type==="bullet"&&Array.isArray(b.content)?f.jsx("ul",{className:"list-disc pl-6 space-y-2",children:b.content.map((O,A)=>f.jsx("li",{className:"leading-relaxed",children:O},A))}):b.type==="image"&&b.content?f.jsx("div",{className:"my-6",children:f.jsx("img",{src:b.content,alt:"Blog content",className:"w-full max-w-lg mx-auto rounded-lg shadow-md"})}):b.type==="link"&&b.content.url?f.jsx(ot,{to:b.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:b.content.text||b.content.url}):f.jsx("p",{className:"text-red-500",children:"Invalid block format"})},k)):f.jsx("p",{children:"No content available."})}),f.jsxs(Dn,{to:"/blog",variant:"primary",className:"mt-12 inline-flex items-center px-6 py-3 rounded-lg shadow-md transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 hover:shadow-lg",children:[f.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Blog"]})]})}):f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},f5=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function m5(){const{isDarkMode:t}=P.useContext(Ze);return f.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[f.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${t?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),f.jsx("div",{className:"space-y-4",children:f5.map((e,n)=>f.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${t?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[f.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${t?"group-open:text-green-400":"group-open:text-green-600"}`,children:[e.question,f.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:"▼"})]}),f.jsx("p",{className:"mt-2 text-gray-600",children:e.answer})]},n))})]})}class Jc{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const p5=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},nn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:p5()},Bv=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},g5=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=Bv(t);nn.publicKey=n.publicKey,nn.blockHeadless=n.blockHeadless,nn.storageProvider=n.storageProvider,nn.blockList=n.blockList,nn.limitRate=n.limitRate,nn.origin=n.origin||e},rA=async(t,e,n={})=>{const r=await fetch(nn.origin+t,{method:"POST",headers:n,body:e}),s=await r.text(),o=new Jc(r.status,s);if(r.ok)return o;throw o},sA=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},y5=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},iA=t=>t.webdriver||!t.languages||t.languages.length===0,oA=()=>new Jc(451,"Unavailable For Headless Browser"),v5=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},x5=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},w5=(t,e)=>t instanceof FormData?t.get(e):t[e],aA=(t,e)=>{if(x5(t))return!1;v5(t.list,t.watchVariable);const n=w5(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},lA=()=>new Jc(403,"Forbidden"),_5=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},b5=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},uA=async(t,e,n)=>{if(!e.throttle||!n)return!1;_5(e.throttle,e.id);const r=e.id||t;return await b5(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},cA=()=>new Jc(429,"Too Many Requests"),E5=async(t,e,n,r)=>{const s=Bv(r),o=s.publicKey||nn.publicKey,l=s.blockHeadless||nn.blockHeadless,u=s.storageProvider||nn.storageProvider,c={...nn.blockList,...s.blockList},h={...nn.limitRate,...s.limitRate};return l&&iA(navigator)?Promise.reject(oA()):(sA(o,t,e),y5(n),n&&aA(c,n)?Promise.reject(lA()):await uA(location.pathname,h,u)?Promise.reject(cA()):rA("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},T5=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},S5=t=>typeof t=="string"?document.querySelector(t):t,k5=async(t,e,n,r)=>{const s=Bv(r),o=s.publicKey||nn.publicKey,l=s.blockHeadless||nn.blockHeadless,u=nn.storageProvider||s.storageProvider,c={...nn.blockList,...s.blockList},h={...nn.limitRate,...s.limitRate};if(l&&iA(navigator))return Promise.reject(oA());const g=S5(n);sA(o,t,e),T5(g);const v=new FormData(g);return aA(c,v)?Promise.reject(lA()):await uA(location.pathname,h,u)?Promise.reject(cA()):(v.append("lib_version","4.4.1"),v.append("service_id",t),v.append("template_id",e),v.append("user_id",o),rA("/api/v1.0/email/send-form",v))},C5={init:g5,send:E5,sendForm:k5,EmailJSResponseStatus:Jc};function P5(){const{isDarkMode:t}=P.useContext(Ze),[e,n]=P.useState({name:"",email:"",message:""}),[r,s]=P.useState(""),o=u=>{const{name:c,value:h}=u.target;n(g=>({...g,[c]:h}))},l=u=>{u.preventDefault(),s("Sending..."),C5.send("service_abc123","template_xyz789",{from_name:e.name,from_email:e.email,message:e.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(c=>{s("Thank you! Your inquiry has been sent."),n({name:"",email:"",message:""}),setTimeout(()=>s(""),3e3)},c=>{s("Failed to send message. Please try again."),console.error("EmailJS error:",c.text),setTimeout(()=>s(""),3e3)})};return f.jsx("div",{className:`min-h-screen py-12 px-4 ${t?"bg-stone-900":"bg-white"}`,children:f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Contact Us"}),f.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),f.jsxs("form",{onSubmit:l,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Message"}),f.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:o,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),r&&f.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:r})]})]})})}function A5(){const{isDarkMode:t}=P.useContext(Ze),[e,n]=P.useState(""),[r,s]=P.useState(""),[o,l]=P.useState(!1),[u,c]=P.useState(null),h=Qt();P.useEffect(()=>{const x=cm(is,b=>{l(!!b)});return()=>x()},[]);const g=async x=>{x.preventDefault(),c(null);try{await D8(is,e,r),l(!0)}catch(b){c("Failed to log in: "+b.message)}},v=async()=>{try{await dm(is),l(!1),h("/admin")}catch(x){c("Failed to log out: "+x.message)}};return o?f.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("button",{onClick:()=>h("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),f.jsx("button",{onClick:()=>h("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),f.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),f.jsx("button",{onClick:()=>h("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),f.jsx("button",{onClick:v,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):f.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:f.jsxs("div",{className:`p-6 ${t?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[f.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),u&&f.jsx("p",{className:`text-red-500 mb-4 ${t?"text-red-400":"text-red-600"}`,children:u}),f.jsxs("form",{onSubmit:g,children:[f.jsx("div",{className:"mb-4",children:f.jsx("input",{type:"email",value:e,onChange:x=>n(x.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),f.jsx("div",{className:"mb-4",children:f.jsx("input",{type:"password",value:r,onChange:x=>s(x.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function I5(){const{isDarkMode:t}=P.useContext(Ze),[e,n]=P.useState([""]),[r,s]=P.useState(""),[o,l]=P.useState([""]),[u,c]=P.useState([{title:"Main Workout",exercises:[""]}]),[h,g]=P.useState([]),[v,x]=P.useState(""),[b,k]=P.useState([""]),[O,A]=P.useState(null),D=Qt();P.useEffect(()=>{const Z=cm(is,q=>{q||D("/admin")});return()=>Z()},[D]),P.useEffect(()=>{(async()=>{var q,re,ye,We,St,hr,Fs,Us;try{const Bs=qn(ct,"content","home"),us=await qc(Bs);if(us.exists()){const xt=us.data();n((q=xt.quotes)!=null&&q.length?xt.quotes:[""]),s(((re=xt.currentWorkout)==null?void 0:re.description)||""),l((We=(ye=xt.currentWorkout)==null?void 0:ye.warmup)!=null&&We.length?xt.currentWorkout.warmup:[""]),c((hr=(St=xt.currentWorkout)==null?void 0:St.sections)!=null&&hr.length?xt.currentWorkout.sections:[{title:"Main Workout",exercises:[""]}]),g((Fs=xt.scheduledWorkouts)!=null&&Fs.length?xt.scheduledWorkouts.map(on=>{var cs;const qi=(cs=on.sections)!=null&&cs.length?on.sections:[{title:"Warm Up",exercises:on.warmup||[""]},{title:"Main Workout",exercises:on.main||[""]}];return{description:on.description||"",sections:qi,updateDateTime:on.updateDateTime||""}}):[{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),x(xt.aboutUs||""),k((Us=xt.dailyChallenges)!=null&&Us.length?xt.dailyChallenges:[""])}}catch(Bs){A("Failed to load content: "+Bs.message)}})()},[]);const V=async()=>{A(null);const Z={quotes:e.filter(q=>q.trim()!==""),currentWorkout:{description:r,warmup:o.filter(q=>q.trim()!==""),sections:u.filter(q=>q.title.trim()&&q.exercises.some(re=>re.trim())).map(q=>({title:q.title,exercises:q.exercises.filter(re=>re.trim()!=="")}))},scheduledWorkouts:h.filter(q=>q.description.trim()&&q.sections.some(re=>re.title.trim()&&re.exercises.some(ye=>ye.trim()))&&q.updateDateTime.trim()).map(q=>({description:q.description,sections:q.sections.filter(re=>re.title.trim()&&re.exercises.some(ye=>ye.trim())).map(re=>({title:re.title,exercises:re.exercises.filter(ye=>ye.trim()!=="")})),updateDateTime:q.updateDateTime})),aboutUs:v.trim(),dailyChallenges:b.filter(q=>q.trim()!==""),lastUpdated:new Date().toISOString()};try{await Tf(qn(ct,"content","home"),Z),alert("Home page content saved successfully!"),D("/admin")}catch(q){A("Error saving changes: "+q.message)}},$=async()=>{try{await dm(is),D("/admin")}catch(Z){A("Failed to log out: "+Z.message)}},W=()=>n([...e,""]),B=Z=>n(e.filter((q,re)=>re!==Z)),K=(Z,q)=>{const re=[...e];re[Z]=q,n(re)},I=()=>l([...o,""]),S=Z=>l(o.filter((q,re)=>re!==Z)),T=(Z,q)=>{const re=[...o];re[Z]=q,l(re)},R=()=>c([...u,{title:"",exercises:[""]}]),j=Z=>c(u.filter((q,re)=>re!==Z)),F=(Z,q)=>{const re=[...u];re[Z].title=q,c(re)},L=Z=>{const q=[...u];q[Z].exercises.push(""),c(q)},ge=(Z,q)=>{const re=[...u];re[Z].exercises=re[Z].exercises.filter((ye,We)=>We!==q),c(re)},$e=(Z,q,re)=>{const ye=[...u];ye[Z].exercises[q]=re,c(ye)},Ge=()=>g([...h,{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),be=Z=>g(h.filter((q,re)=>re!==Z)),ce=Z=>{if(!Z)return"";const q=new Date(Z);return new Date(q.getTime()-5*60*60*1e3).toISOString().slice(0,16)},J=(Z,q,re)=>{const ye=[...h];if(q==="updateDateTime"){const We=new Date(re),St=new Date(We.getTime()-5*60*60*1e3);ye[Z][q]=St.toISOString(),console.log(`Scheduled workout ${Z} updateDateTime set to (UTC): ${ye[Z][q]}`)}else ye[Z][q]=re;g(ye)},te=Z=>{const q=[...h];q[Z].sections.push({title:"",exercises:[""]}),g(q)},z=(Z,q)=>{const re=[...h];re[Z].sections=re[Z].sections.filter((ye,We)=>We!==q),g(re)},ne=(Z,q,re)=>{const ye=[...h];ye[Z].sections[q].title=re,g(ye)},fe=(Z,q)=>{const re=[...h];re[Z].sections[q].exercises.push(""),g(re)},Te=(Z,q,re)=>{const ye=[...h];ye[Z].sections[q].exercises=ye[Z].sections[q].exercises.filter((We,St)=>St!==re),g(ye)},je=(Z,q,re,ye)=>{const We=[...h];We[Z].sections[q].exercises[re]=ye,g(We)},ie=()=>k([...b,""]),oe=Z=>k(b.filter((q,re)=>re!==Z)),he=(Z,q)=>{const re=[...b];re[Z]=q,k(re)};return f.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),O&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:O}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),e.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>K(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${q+1}`}),f.jsx("button",{onClick:()=>B(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e.length===1,children:"Remove"})]},q)),f.jsx("button",{onClick:W,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),f.jsx("textarea",{value:v,onChange:Z=>x(Z.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),f.jsx("textarea",{value:r,onChange:Z=>s(Z.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),f.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),o.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>T(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${q+1}`}),f.jsx("button",{onClick:()=>S(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:o.length===1,children:"Remove"})]},`warmup-${q}`)),f.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),u.map((Z,q)=>f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("input",{type:"text",value:Z.title,onChange:re=>F(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),f.jsx("button",{onClick:()=>j(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:u.length===1,children:"Remove Section"})]}),Z.exercises.map((re,ye)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:re,onChange:We=>$e(q,ye,We.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${ye+1}`}),f.jsx("button",{onClick:()=>ge(q,ye),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Z.exercises.length===1,children:"Remove"})]},`section-${q}-exercise-${ye}`)),f.jsx("button",{onClick:()=>L(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`section-${q}`)),f.jsx("button",{onClick:R,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Workout Section"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),h.map((Z,q)=>f.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("input",{type:"datetime-local",value:ce(Z.updateDateTime),onChange:re=>J(q,"updateDateTime",re.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),f.jsx("textarea",{value:Z.description,onChange:re=>J(q,"description",re.target.value),className:`border p-2 w-full h-24 mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),Z.sections.map((re,ye)=>f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("input",{type:"text",value:re.title,onChange:We=>ne(q,ye,We.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),f.jsx("button",{onClick:()=>z(q,ye),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Z.sections.length===1,children:"Remove Section"})]}),re.exercises.map((We,St)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:We,onChange:hr=>je(q,ye,St,hr.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${St+1}`}),f.jsx("button",{onClick:()=>Te(q,ye,St),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:re.exercises.length===1,children:"Remove"})]},`scheduled-section-${q}-${ye}-exercise-${St}`)),f.jsx("button",{onClick:()=>fe(q,ye),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`scheduled-section-${q}-${ye}`)),f.jsx("button",{onClick:()=>te(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 mr-2",children:"Add Workout Section"}),f.jsx("button",{onClick:()=>be(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:h.length===1&&!h[0].description,children:"Remove Workout"})]},q)),f.jsx("button",{onClick:Ge,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),b.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>he(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${q+1}`}),f.jsx("button",{onClick:()=>oe(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:b.length===1,children:"Remove"})]},q)),f.jsx("button",{onClick:ie,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),f.jsx("button",{onClick:V,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),f.jsx("button",{onClick:()=>D("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:$,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function R5(){const{isDarkMode:t}=P.useContext(Ze),[e,n]=P.useState([]),[r,s]=P.useState(null),[o,l]=P.useState(null),u=Qt();P.useEffect(()=>{const I=cm(is,S=>{S||u("/admin")});return()=>I()},[u]),P.useEffect(()=>{(async()=>{try{const S=jt(ct,"content","blog","posts"),j=(await Ln(S)).docs.map(F=>({id:F.id,title:F.data().title||"",blocks:F.data().blocks||[{type:"paragraph",content:""}],date:F.data().date||"",lastEdited:F.data().lastEdited||""})).sort((F,L)=>{const ge=F.date?new Date(F.date):new Date(0);return(L.date?new Date(L.date):new Date(0))-ge});n(j.length?j:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:""}])}catch(S){l("Failed to load blog posts: "+S.message)}})()},[]);const c=async()=>{l(null);try{const I=jt(ct,"content","blog","posts"),S=await Ln(I);for(const T of S.docs)await Wh(T.ref);for(const T of e)if(T.title.trim()&&T.blocks.some(R=>R.type==="paragraph"||R.type==="image"||R.type==="link"?R.content.trim():R.content.some(j=>j.trim()))){const R=T.id||Date.now().toString();await Tf(qn(I,R),{id:R,title:T.title,blocks:T.blocks.map(j=>({type:j.type,content:j.type==="paragraph"||j.type==="image"?j.content:j.type==="link"?{url:j.content.url,text:j.content.text}:j.content.filter(F=>F.trim()!=="")})),date:T.date||new Date().toISOString(),lastEdited:T.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),s(null),u("/admin")}catch(I){l("Error saving blog posts: "+I.message)}},h=async()=>{try{await dm(is),u("/admin")}catch(I){l("Failed to log out: "+I.message)}},g=()=>{const I=[...e,{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:new Date().toISOString()}];n(I),s(I.length-1)},v=I=>{const S=e.filter((T,R)=>R!==I);n(S),s(null)},x=(I,S,T)=>{const R=[...e];R[I]={...R[I],[S]:T,lastEdited:new Date().toISOString()},n(R)},b=(I,S)=>{const T=[...e];T[I].blocks.push({type:S,content:S==="paragraph"||S==="image"?"":S==="link"?{url:"",text:""}:[""]}),T[I].lastEdited=new Date().toISOString(),n(T)},k=(I,S)=>{const T=[...e];T[I].blocks=T[I].blocks.filter((R,j)=>j!==S),T[I].lastEdited=new Date().toISOString(),n(T)},O=(I,S,T)=>{const R=[...e];R[I].blocks[S]={type:T,content:T==="paragraph"||T==="image"?"":T==="link"?{url:"",text:""}:[""]},R[I].lastEdited=new Date().toISOString(),n(R)},A=(I,S,T)=>{const R=[...e];R[I].blocks[S].content=T,R[I].lastEdited=new Date().toISOString(),n(R)},D=(I,S,T,R)=>{const j=[...e];j[I].blocks[S].content[T]=R,j[I].lastEdited=new Date().toISOString(),n(j)},V=(I,S)=>{const T=[...e];T[I].blocks[S].content.push(""),T[I].lastEdited=new Date().toISOString(),n(T)},$=(I,S,T)=>{const R=[...e];R[I].blocks[S].content=R[I].blocks[S].content.filter((j,F)=>F!==T),R[I].lastEdited=new Date().toISOString(),n(R)},W=(I,S,T,R)=>{const j=[...e];j[I].blocks[S].content[T]=R,j[I].lastEdited=new Date().toISOString(),n(j)},B=I=>I?new Date(I).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",K=I=>I?new Date(I).toLocaleDateString():"Not set";return f.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),o&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:o}),r===null?f.jsxs("div",{className:"mb-6",children:[e.length===0?f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):f.jsx("div",{className:"grid gap-4",children:e.map((I,S)=>f.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>s(S),children:[f.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:I.title||"Untitled Post"}),f.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Publish Date: ",K(I.date)]}),f.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",B(I.lastEdited)]})]},S))}),f.jsx("button",{onClick:g,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),f.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("input",{type:"text",value:e[r].title,onChange:I=>x(r,"title",I.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Publish Date:"}),f.jsx("input",{type:"date",value:e[r].date.split("T")[0]||"",onChange:I=>x(r,"date",I.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`})]}),f.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",B(e[r].lastEdited)]}),f.jsxs("div",{className:"mb-2",children:[f.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Content Blocks"}),e[r].blocks.map((I,S)=>f.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Block Type:"}),f.jsxs("select",{value:I.type,onChange:T=>O(r,S,T.target.value),className:`border p-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[f.jsx("option",{value:"paragraph",children:"Paragraph"}),f.jsx("option",{value:"list",children:"Numbered List"}),f.jsx("option",{value:"bullet",children:"Bullet Points"}),f.jsx("option",{value:"image",children:"Image"}),f.jsx("option",{value:"link",children:"Link"})]}),f.jsx("button",{onClick:()=>k(r,S),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks.length===1,children:"Remove Block"})]}),I.type==="paragraph"?f.jsx("textarea",{value:I.content,onChange:T=>A(r,S,T.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):I.type==="image"?f.jsxs("div",{className:"space-y-2",children:[f.jsx("input",{type:"text",value:I.content,onChange:T=>A(r,S,T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),I.content&&f.jsx("img",{src:I.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):I.type==="link"?f.jsxs("div",{className:"space-y-2",children:[f.jsx("input",{type:"text",value:I.content.url,onChange:T=>D(r,S,"url",T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),f.jsx("input",{type:"text",value:I.content.text,onChange:T=>D(r,S,"text",T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):f.jsxs("div",{children:[I.content.map((T,R)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:T,onChange:j=>W(r,S,R,j.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${R+1}`}),f.jsx("button",{onClick:()=>$(r,S,R),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks[S].content.length===1,children:"Remove"})]},R)),f.jsx("button",{onClick:()=>V(r,S),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},S)),f.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[f.jsx("button",{onClick:()=>b(r,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),f.jsx("button",{onClick:()=>b(r,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),f.jsx("button",{onClick:()=>b(r,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),f.jsx("button",{onClick:()=>b(r,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 easement-in-out",children:"Add Image"}),f.jsx("button",{onClick:()=>b(r,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),f.jsx("button",{onClick:()=>v(r),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:e.length===1,children:"Remove Post"}),f.jsx("button",{onClick:()=>s(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),f.jsx("button",{onClick:c,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),f.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function N5(){const{isDarkMode:t}=P.useContext(Ze),[e,n]=P.useState([]),[r,s]=P.useState([]),[o,l]=P.useState(""),[u,c]=P.useState({categoryId:"",name:"",price:"",description:"",image:null}),[h,g]=P.useState(null),[v,x]=P.useState(null),[b,k]=P.useState(null),O=Qt();P.useEffect(()=>{const T=cm(is,R=>{R||O("/admin")});return()=>T()},[O]),P.useEffect(()=>{(async()=>{try{const j=(await Ln(jt(ct,"categories"))).docs.map(ge=>({id:ge.id,...ge.data()}));n(j);const L=(await Ln(jt(ct,"products"))).docs.map(ge=>({id:ge.id,...ge.data()}));s(L)}catch(R){k("Error fetching data from Firestore: "+R.message)}})()},[]);const A=async T=>{if(T.preventDefault(),!!o)try{const R=await kl(jt(ct,"categories"),{name:o});n([...e,{id:R.id,name:o}]),l("")}catch(R){k("Error adding category: "+R.message)}},D=async T=>{try{const R=qn(ct,"categories",T.id);await xT(R,{name:T.name}),n(e.map(j=>j.id===T.id?{...j,name:T.name}:j)),g(null)}catch(R){k("Error updating category: "+R.message)}},V=async T=>{try{await Wh(qn(ct,"categories",T)),n(e.filter(j=>j.id!==T));const R=r.filter(j=>j.categoryId===T);for(const j of R){if(j.image&&j.image!=="https://via.placeholder.com/80"){const F=j.image.split("/products%2F")[1].split("?")[0],L=Rg(Dg,`products/${decodeURIComponent(F)}`);await ST(L).catch(ge=>{k(`Error deleting image for product ${j.id}: `+ge.message)})}await Wh(qn(ct,"products",j.id))}s(r.filter(j=>j.categoryId!==T))}catch(R){k("Error deleting category: "+R.message)}},$=async T=>{if(!T)return null;const R=Rg(Dg,`products/${T.name}`);return await NU(R,T),await jU(R)},W=T=>T.categoryId?T.name.trim()?T.description.trim()?!T.price||isNaN(T.price)||Number(T.price)<=0?"A valid price is required.":T.image?"":"An image is required.":"Description is required.":"Name is required.":"Category is required.",B=async T=>{T.preventDefault();const R=W(u);if(R){k(R);return}try{const j=await $(u.image),F=await kl(jt(ct,"products"),{categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description,image:j||"https://via.placeholder.com/80"});s([...r,{id:F.id,categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description,image:j||"https://via.placeholder.com/80"}]),c({categoryId:"",name:"",price:"",description:"",image:null}),k(null)}catch(j){k("Error adding product: "+j.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},K=async T=>{const R=W(T);if(R){k(R);return}try{const j=T.image instanceof File?await $(T.image):T.image,F=qn(ct,"products",T.id);await xT(F,{categoryId:T.categoryId,name:T.name,price:parseFloat(T.price),description:T.description,image:j||"https://via.placeholder.com/80"}),s(r.map(L=>L.id===T.id?{...L,categoryId:T.categoryId,name:T.name,price:parseFloat(T.price),description:T.description,image:j||"https://via.placeholder.com/80"}:L)),x(null),k(null)}catch(j){k("Error updating product: "+j.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},I=async T=>{try{const R=r.find(j=>j.id===T);if(R.image&&R.image!=="https://via.placeholder.com/80"){const j=R.image.split("/products%2F")[1].split("?")[0],F=Rg(Dg,`products/${decodeURIComponent(j)}`);await ST(F).catch(L=>{k(`Error deleting image for product ${T}: `+L.message)})}await Wh(qn(ct,"products",T)),s(r.filter(j=>j.id!==T)),k(null)}catch(R){k("Error deleting product: "+R.message)}},S=async()=>{try{await dm(is),O("/admin")}catch(T){k("Failed to log out: "+T.message)}};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),b&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:b}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Category"}),f.jsxs("form",{onSubmit:A,className:"flex gap-4",children:[f.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Categories"}),f.jsx("div",{className:"space-y-4",children:e.map(T=>f.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(h==null?void 0:h.id)===T.id?f.jsxs("div",{className:"flex gap-4",children:[f.jsx("input",{type:"text",value:h.name,onChange:R=>g({...h,name:R.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),f.jsx("button",{onClick:()=>D(h),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),f.jsx("button",{onClick:()=>g(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:T.name}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>g(T),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),f.jsx("button",{onClick:()=>V(T.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},T.id))})]}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Product"}),f.jsxs("form",{onSubmit:B,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),f.jsxs("select",{value:u.categoryId,onChange:T=>c({...u,categoryId:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[f.jsx("option",{value:"",children:"Select a category"}),e.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",value:u.name,onChange:T=>c({...u,name:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),f.jsx("input",{type:"number",step:"0.01",value:u.price,onChange:T=>c({...u,price:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),f.jsx("textarea",{value:u.description,onChange:T=>c({...u,description:T.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),f.jsx("input",{type:"file",accept:"image/*",onChange:T=>c({...u,image:T.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Products"}),f.jsx("div",{className:"space-y-4",children:r.map(T=>{var R;return f.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(v==null?void 0:v.id)===T.id?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),f.jsxs("select",{value:v.categoryId,onChange:j=>x({...v,categoryId:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[f.jsx("option",{value:"",children:"Select a category"}),e.map(j=>f.jsx("option",{value:j.id,children:j.name},j.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",value:v.name,onChange:j=>x({...v,name:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),f.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:j=>x({...v,price:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),f.jsx("textarea",{value:v.description,onChange:j=>x({...v,description:j.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),f.jsx("input",{type:"file",accept:"image/*",onChange:j=>x({...v,image:j.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),v.image&&typeof v.image=="string"&&f.jsx("img",{src:v.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>K(v),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),f.jsx("button",{onClick:()=>x(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[T.image&&T.image!=="https://via.placeholder.com/80"&&f.jsx("img",{src:T.image,alt:T.name,className:"w-16 h-16 object-cover rounded-md"}),f.jsxs("div",{children:[f.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:T.name}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((R=e.find(j=>j.id===T.categoryId))==null?void 0:R.name)||"Unknown"]}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",T.price.toFixed(2)]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>x(T),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),f.jsx("button",{onClick:()=>I(T.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},T.id)})})]}),f.jsxs("div",{className:"mt-6 flex gap-4",children:[f.jsx("button",{onClick:()=>O("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:S,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const j5=()=>{const t=Qt(),{isDarkMode:e}=P.useContext(Ze),n=()=>{t("/fitness-tracker/create-custom-plan")};return f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),f.jsx("div",{className:"text-center",children:f.jsx("button",{onClick:n,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),f.jsxs("div",{className:"flex justify-center space-x-4",children:[f.jsx(ot,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),f.jsx(ot,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},D5=()=>{const{id:t}=jc(),{isDarkMode:e}=P.useContext(Ze),[n,r]=P.useState(null),[s,o]=P.useState(!0);P.useEffect(()=>{(async()=>{const h=Fi(),g=await qc(qn(h,"customPlans",t));g.exists()&&r({id:g.id,...g.data()}),o(!1)})()},[t]);const l=c=>{if(!(n!=null&&n.startDate))return"";const h=new Date(n.startDate);return h.setDate(h.getDate()+c*7),h.toLocaleDateString()},u=(c,h)=>{if(!(n!=null&&n.startDate))return"";const g=new Date(n.startDate);return g.setDate(g.getDate()+c*7+h),g.toLocaleDateString()};return s?f.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsx("p",{className:"text-xl",children:"Loading..."})}):n?f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:n.name}),f.jsx("div",{className:"max-w-4xl mx-auto",children:n.weeks.map((c,h)=>f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:["Week ",c.week," (",l(h),")"]}),c.days.map((g,v)=>f.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[g.day," (",u(h,v),")"]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h4",{className:`font-semibold mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),f.jsx("ul",{className:"list-disc pl-5",children:g.workouts.map((x,b)=>f.jsxs("li",{children:[x.name,": ",x.sets," sets x ",x.reps," ","reps"]},b))})]})]},v))]},h))})]})}):f.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsx("p",{className:"text-xl",children:"Plan not found."})})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dA=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},c)=>P.createElement("svg",{ref:c,...L5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:dA("lucide",s),...u},[...l.map(([h,g])=>P.createElement(h,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=(t,e)=>{const n=P.forwardRef(({className:r,...s},o)=>P.createElement(M5,{ref:o,iconNode:e,className:dA(`lucide-${O5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zv=Ul("ChevronDown",V5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Wv=Ul("ChevronUp",$5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fl=Ul("CircleCheckBig",F5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ml=Ul("CircleX",U5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],z5=Ul("SquarePen",B5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],H5=Ul("Trash2",W5),q5=()=>{const t=Qt(),{isDarkMode:e}=P.useContext(Ze),[n,r]=P.useState(""),[s,o]=P.useState(new Date().toISOString().split("T")[0]),[l,u]=P.useState([]),[c,h]=P.useState({}),[g,v]=P.useState(Array.from({length:6},(W,B)=>({week:B+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[x,b]=P.useState(Array(6).fill(!1));P.useEffect(()=>{(async()=>{const B=Fi(),I=(await Ln(jt(B,"workouts"))).docs.map(T=>({id:T.id,...T.data()})),S=I.reduce((T,R)=>{const j=R.muscleGroup||"Other";return T[j]||(T[j]=[]),T[j].push(R),T},{});u(I),h(S)})()},[]);const k=W=>{const B=[...x];B[W]=!B[W],b(B)},O=(W,B)=>{var I;const K=[...g];K[W].days[B].workouts.push({name:((I=l[0])==null?void 0:I.name)||"",sets:3,reps:10}),v(K)},A=(W,B,K,I,S)=>{const T=[...g];T[W].days[B].workouts[K][I]=S,v(T)},D=async W=>{W.preventDefault();const B=Fi(),K={userId:"anonymous",name:n,startDate:new Date(s).toISOString(),weeks:g},I=await kl(jt(B,"customPlans"),K);t(`/fitness-tracker/plan/${I.id}`)},V=W=>{const B=new Date(s);return B.setDate(B.getDate()+W*7),B.toLocaleDateString()},$=(W,B)=>{const K=new Date(s);return K.setDate(K.getDate()+W*7+B),K.toLocaleDateString()};return f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),f.jsxs("form",{onSubmit:D,children:[f.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Plan Name"}),f.jsx("input",{type:"text",value:n,onChange:W=>r(W.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Start Date"}),f.jsx("input",{type:"date",value:s,onChange:W=>o(W.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((W,B)=>f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>k(B),children:[f.jsxs("h2",{className:`text-2xl font-semibold ${e?"text-red-400":"text-red-800"}`,children:["Week ",W.week," (",V(B),")"]}),x[B]?f.jsx(Wv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`}):f.jsx(zv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`})]}),x[B]&&f.jsx("div",{className:"mt-4",children:W.days.map((K,I)=>f.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[K.day," (",$(B,I),")"]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("h4",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),K.workouts.length>0?K.workouts.map((S,T)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:S.name,onChange:R=>A(B,I,T,"name",R.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(c).map(R=>f.jsx("optgroup",{label:R,children:c[R].map(j=>f.jsx("option",{value:j.name,children:j.name},j.id))},R))}),f.jsx("input",{type:"number",value:S.sets,onChange:R=>A(B,I,T,"sets",Number(R.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),f.jsx("input",{type:"text",value:S.reps,onChange:R=>A(B,I,T,"reps",R.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},T)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),f.jsx("button",{type:"button",onClick:()=>O(B,I),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},I))})]},B))}),f.jsx("div",{className:"mt-8 max-w-md mx-auto",children:f.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},K5=()=>{const t=Qt(),{isDarkMode:e}=P.useContext(Ze),{user:n,loading:r}=P.useContext($s),[s,o]=P.useState([]),[l,u]=P.useState([]),[c,h]=P.useState([]),[g,v]=P.useState([]),[x,b]=P.useState(new Date().toISOString().split("T")[0]);P.useEffect(()=>{(async()=>{try{const I=Fi(),S=await Ln(jt(I,"workouts")),T=await Ln(jt(I,"foods")),R=S.docs.map(F=>({id:F.id,...F.data()})),j=T.docs.map(F=>({id:F.id,...F.data()}));console.log("Fetched workouts from 'workouts' collection:",R),console.log("Fetched meals from 'foods' collection:",j),o(R),u(j),R.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),j.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(I){console.error("Error fetching data:",I)}})()},[]);const k=l.reduce((K,I)=>{const S=I.category||"Misc";return K[S]||(K[S]=[]),K[S].push(I),K},{}),O=["Meat","Fruit","Vegetable","Starch","Misc"],A=()=>{if(s.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}h([...c,{name:s[0].name,sets:0,reps:0}])},D=(K,I,S)=>{const T=[...c];T[K][I]=I==="sets"||I==="reps"?Number(S):S,h(T)},V=()=>{if(l.length===0){alert("No meals available to add. Please add meals in Firestore.");return}v([...g,{name:l[0].name,quantity:1}])},$=(K,I,S)=>{const T=[...g];T[K][I]=I==="quantity"?Number(S):S,v(T)},W=K=>{const I=l.find(S=>S.name===K.name);return I?{protein:I.macros.protein*K.quantity,carbs:I.macros.carbs*K.quantity,fats:I.macros.fats*K.quantity}:{protein:0,carbs:0,fats:0}},B=async K=>{if(K.preventDefault(),!n){alert("Please log in to save a fitness log."),t("/login");return}const I=Fi(),S={userId:n.uid,date:new Date(x).toISOString(),workouts:c,meals:g.map(T=>({...T,macros:W(T)}))};await kl(jt(I,"userLogs"),S),t("/fitness-tracker/history")};return r?f.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),f.jsxs("form",{onSubmit:B,className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Date"}),f.jsx("input",{type:"date",value:x,onChange:K=>b(K.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Workouts"}),s.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):c.length>0?c.map((K,I)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:K.name,onChange:S=>D(I,"name",S.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:s.map(S=>f.jsx("option",{value:S.name,children:S.name},S.id))}),f.jsx("input",{type:"number",value:K.sets,onChange:S=>D(I,"sets",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),f.jsx("input",{type:"number",value:K.reps,onChange:S=>D(I,"reps",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},I)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),f.jsx("button",{type:"button",onClick:A,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Meals"}),l.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):g.length>0?g.map((K,I)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:K.name,onChange:S=>$(I,"name",S.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:O.map(S=>k[S]&&f.jsx("optgroup",{label:S,children:k[S].map(T=>f.jsx("option",{value:T.name,children:T.name},T.id))},S))}),f.jsx("input",{type:"number",value:K.quantity,onChange:S=>$(I,"quantity",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},I)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),f.jsx("button",{type:"button",onClick:V,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),f.jsx("div",{className:"text-center",children:f.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},G5=()=>{const{isDarkMode:t}=P.useContext(Ze),[e,n]=P.useState([]);return P.useEffect(()=>{(async()=>{const s=Fi(),l=(await Ln(jt(s,"userLogs"))).docs.map(u=>({id:u.id,...u.data()}));n(l.sort((u,c)=>new Date(c.date)-new Date(u.date)))})()},[]),f.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Fitness History"}),f.jsx("div",{className:"max-w-2xl mx-auto",children:e.length>0?e.map(r=>f.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${t?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[f.jsx("h2",{className:`text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:new Date(r.date).toLocaleDateString()}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Workouts:"}),f.jsx("ul",{className:"list-disc pl-5",children:r.workouts.map((s,o)=>f.jsxs("li",{children:[s.name,": ",s.sets," sets x ",s.reps," ","reps"]},o))})]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Meals:"}),f.jsx("ul",{className:"list-disc pl-5",children:r.meals.map((s,o)=>f.jsxs("li",{children:[s.name," (",s.quantity,"g): Protein"," ",s.macros.protein.toFixed(1),"g, Carbs"," ",s.macros.carbs.toFixed(1),"g, Fats"," ",s.macros.fats.toFixed(1),"g"]},o))})]})]},r.id)):f.jsx("p",{className:`text-center text-lg ${t?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},Q5=()=>{const t=Qt(),{isDarkMode:e}=P.useContext(Ze),{user:n,loading:r}=P.useContext($s),[s,o]=P.useState(""),[l,u]=P.useState(new Date().toISOString().split("T")[0]),[c,h]=P.useState([]),[g,v]=P.useState([]),[x,b]=P.useState(!0),[k,O]=P.useState(!0),[A,D]=P.useState(null),[V,$]=P.useState(null),[W,B]=P.useState(Array.from({length:6},(ie,oe)=>({week:oe+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[K,I]=P.useState(Array(6).fill(!1)),[S,T]=P.useState(null);P.useEffect(()=>{(async()=>{try{b(!0),D(null);const{data:oe,error:he}=await Hn.from("foods").select("*");if(he)throw he;console.log("Fetched meals from Supabase 'foods' table:",oe),h(oe),oe.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(oe){console.error("Error fetching meals:",oe),D("Failed to load meals. Please try again later.")}finally{b(!1)}})()},[]),P.useEffect(()=>{(async()=>{if(n)try{O(!0),$(null);const{data:oe,error:he}=await Hn.from("nutrition_plans").select("*").eq("user_id",n.id);if(he)throw he;console.log("Fetched nutrition plans from Supabase:",oe),v(oe)}catch(oe){console.error("Error fetching nutrition plans:",oe),$("Failed to load your nutrition plans. Please try again later.")}finally{O(!1)}})()},[n]);const R=c.reduce((ie,oe)=>{const he=oe.category||"Misc";return ie[he]||(ie[he]=[]),ie[he].push(oe),ie},{}),j=["Meat","Fruit","Vegetable","Starch","Misc"],F=["Breakfast","Lunch","Dinner","Snacks"],L=ie=>{const oe=[...K];oe[ie]=!oe[ie],I(oe)},ge=(ie,oe)=>{if(c.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const he=[...W];he[ie].days[oe].meals.push({name:c[0].name,grams:c[0].portion||100,referencePortion:c[0].portion||100,macros:c[0].macros,mealTime:"Breakfast"}),B(he)},$e=(ie,oe,he,Z,q)=>{const re=[...W],ye=re[ie].days[oe].meals[he];if(Z==="name"){const We=c.find(St=>St.name===q);ye.name=q,ye.grams=We.portion||100,ye.referencePortion=We.portion||100,ye.macros=We.macros}else ye[Z]=Z==="grams"?Number(q):q;B(re)},Ge=(ie,oe,he,Z)=>{const q=[...W];q[ie].days[oe].macros[he]=Number(Z),B(q)},be=(ie,oe)=>{const he=[...W],Z=he[ie].days[oe],q={...Z.meals[Z.meals.length-1]};q.name&&(Z.loggedMeals[q.mealTime].push(q),Z.meals[Z.meals.length-1]={name:c[0].name,grams:c[0].portion||100,referencePortion:c[0].portion||100,macros:c[0].macros,mealTime:"Breakfast"},B(he))},ce=(ie,oe,he,Z,q)=>{T({weekIndex:ie,dayIndex:oe,mealTime:he,mealIndex:Z,meal:q})},J=()=>{if(!S)return;const{weekIndex:ie,dayIndex:oe,mealTime:he,mealIndex:Z,meal:q}=S,re=[...W];re[ie].days[oe].loggedMeals[he][Z]=q,B(re),T(null)},te=(ie,oe,he,Z)=>{const q=[...W];q[ie].days[oe].loggedMeals[he].splice(Z,1),B(q)},z=ie=>Object.values(ie).flat().reduce((he,Z)=>{const q=Z.grams/Z.referencePortion;return{protein:he.protein+Z.macros.protein*q,carbs:he.carbs+Z.macros.carbs*q,fats:he.fats+Z.macros.fats*q}},{protein:0,carbs:0,fats:0}),ne=(ie,oe)=>({protein:ie.protein>=oe.protein,carbs:ie.carbs>=oe.carbs,fats:ie.fats>=oe.fats}),fe=ie=>{const oe=new Date(l);return oe.setDate(oe.getDate()+ie*7),oe.toLocaleDateString()},Te=(ie,oe)=>{const he=new Date(l);return he.setDate(he.getDate()+ie*7+oe),he.toLocaleDateString()},je=async ie=>{if(ie.preventDefault(),!n){alert("Please log in to save a nutrition plan."),t("/login");return}try{const oe={user_id:n.id,name:s,start_date:new Date(l).toISOString().split("T")[0],weeks:JSON.stringify(W)},{data:he,error:Z}=await Hn.from("nutrition_plans").insert(oe).select();if(Z)throw Z;t(`/nutrition-plan/${he[0].id}`)}catch(oe){console.error("Error saving nutrition plan:",oe),alert("Failed to save nutrition plan. Please try again.")}};return r?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx(Rc,{color:e?"#f87171":"#b91c1c"})}):x||k?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx(Rc,{color:e?"#f87171":"#b91c1c"})}):A?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:A}):f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),V?f.jsx("div",{className:"text-center text-red-500 mb-12",children:V}):g.length>0?f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-3xl font-bold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(ie=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${e?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${e?"border-stone-700":"border-red-200"}`,onClick:()=>t(`/nutrition-plan/${ie.id}`),children:[f.jsx("h3",{className:`text-xl font-semibold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:ie.name}),f.jsxs("p",{className:`text-sm mt-2 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",ie.start_date]})]},ie.id))})]}):f.jsx("div",{className:"text-center text-lg mb-12",children:"No nutrition plans yet. Create one below!"}),f.jsxs("form",{onSubmit:je,children:[f.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"}`,children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),f.jsx("input",{type:"text",value:s,onChange:ie=>o(ie.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),f.jsx("input",{type:"date",value:l,onChange:ie=>u(ie.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:W.map((ie,oe)=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>L(oe),children:[f.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",ie.week," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",fe(oe),")"]})]}),K[oe]?f.jsx(Wv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):f.jsx(zv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),K[oe]&&f.jsx("div",{className:"mt-6 space-y-6",children:ie.days.map((he,Z)=>f.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[he.day," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",Te(oe,Z),")"]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),f.jsx("input",{type:"number",value:he.macros.protein,onChange:q=>Ge(oe,Z,"protein",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),f.jsx("input",{type:"number",value:he.macros.carbs,onChange:q=>Ge(oe,Z,"carbs",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),f.jsx("input",{type:"number",value:he.macros.fats,onChange:q=>Ge(oe,Z,"fats",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),c.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):he.meals.length>0?he.meals.map((q,re)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[f.jsx("select",{value:q.name,onChange:ye=>$e(oe,Z,re,"name",ye.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:j.map(ye=>R[ye]&&f.jsx("optgroup",{label:ye,children:R[ye].map(We=>f.jsx("option",{value:We.name,children:We.name},We.id))},ye))}),f.jsx("input",{type:"number",value:q.grams,onChange:ye=>$e(oe,Z,re,"grams",ye.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),f.jsx("select",{value:q.mealTime,onChange:ye=>$e(oe,Z,re,"mealTime",ye.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(ye=>f.jsx("option",{value:ye,children:ye},ye))}),f.jsx("button",{type:"button",onClick:()=>be(oe,Z),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},re)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),f.jsx("button",{type:"button",onClick:()=>ge(oe,Z),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(he.loggedMeals).every(q=>he.loggedMeals[q].length===0)?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):F.map(q=>f.jsxs("div",{className:"mb-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:q}),he.loggedMeals[q].length>0?f.jsx("ul",{className:"space-y-2",children:he.loggedMeals[q].map((re,ye)=>f.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[f.jsxs("span",{className:"text-sm",children:[re.name,": ",re.grams,"g"]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{type:"button",onClick:()=>ce(oe,Z,q,ye,{...re}),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:f.jsx(z5,{className:"w-5 h-5"})}),f.jsx("button",{type:"button",onClick:()=>te(oe,Z,q,ye),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:f.jsx(H5,{className:"w-5 h-5"})})]})]},ye))}):f.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",q.toLowerCase()," logged."]})]},q)),f.jsxs("div",{className:"mt-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const q=z(he.loggedMeals),re=ne(q,he.macros);return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.protein/he.macros.protein*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.protein.toFixed(1),"g /"," ",he.macros.protein,"g"]}),re.protein?f.jsx(fl,{className:"w-5 h-5 text-green-500"}):f.jsx(ml,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.carbs/he.macros.carbs*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.carbs.toFixed(1),"g /"," ",he.macros.carbs,"g"]}),re.carbs?f.jsx(fl,{className:"w-5 h-5 text-green-500"}):f.jsx(ml,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.fats/he.macros.fats*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.fats.toFixed(1),"g /"," ",he.macros.fats,"g"]}),re.fats?f.jsx(fl,{className:"w-5 h-5 text-green-500"}):f.jsx(ml,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},Z))})]},oe))}),f.jsx("div",{className:"mt-12 max-w-md mx-auto",children:f.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),S&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:f.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${e?"bg-stone-800":"bg-red-50"} border ${e?"border-stone-700":"border-red-200"}`,children:[f.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),f.jsx("select",{value:S.meal.name,onChange:ie=>{const oe=c.find(he=>he.name===ie.target.value);T({...S,meal:{...S.meal,name:ie.target.value,grams:oe.portion||100,referencePortion:oe.portion||100,macros:oe.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:j.map(ie=>R[ie]&&f.jsx("optgroup",{label:ie,children:R[ie].map(oe=>f.jsx("option",{value:oe.name,children:oe.name},oe.id))},ie))})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),f.jsx("input",{type:"number",value:S.meal.grams,onChange:ie=>T({...S,meal:{...S.meal,grams:Number(ie.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),f.jsx("select",{value:S.meal.mealTime,onChange:ie=>T({...S,meal:{...S.meal,mealTime:ie.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(ie=>f.jsx("option",{value:ie,children:ie},ie))})]}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsx("button",{type:"button",onClick:J,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),f.jsx("button",{type:"button",onClick:()=>T(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},J5=()=>{const{id:t}=jc(),{isDarkMode:e}=P.useContext(Ze),[n,r]=P.useState(null),[s,o]=P.useState(!0),[l,u]=P.useState(null),[c,h]=P.useState([]);P.useEffect(()=>{(async()=>{try{o(!0),u(null);const{data:D,error:V}=await Hn.from("nutrition_plans").select("*").eq("id",t).single();if(V)throw V;const $=JSON.parse(D.weeks);r({...D,weeks:$}),h(Array($.length).fill(!1))}catch(D){console.error("Error fetching nutrition plan:",D),u("Failed to load nutrition plan. Please try again later.")}finally{o(!1)}})()},[t]);const g=A=>{const D=[...c];D[A]=!D[A],h(D)},v=A=>Object.values(A).flat().reduce((V,$)=>{const W=$.grams/$.referencePortion;return{protein:V.protein+$.macros.protein*W,carbs:V.carbs+$.macros.carbs*W,fats:V.fats+$.macros.fats*W}},{protein:0,carbs:0,fats:0}),x=(A,D)=>({protein:A.protein>=D.protein,carbs:A.carbs>=D.carbs,fats:A.fats>=D.fats}),b=A=>{const D=new Date(n.start_date);return D.setDate(D.getDate()+A*7),D.toLocaleDateString()},k=(A,D)=>{const V=new Date(n.start_date);return V.setDate(V.getDate()+A*7+D),V.toLocaleDateString()};if(s)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx(Rc,{color:e?"#f87171":"#b91c1c"})});if(l)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:l});if(!n)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Nutrition plan not found."});const O=["Breakfast","Lunch","Dinner","Snacks"];return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:n.name}),f.jsxs("p",{className:`text-center text-lg mb-10 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(n.start_date).toLocaleDateString()]}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:n.weeks.map((A,D)=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>g(D),children:[f.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",A.week," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",b(D),")"]})]}),c[D]?f.jsx(Wv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):f.jsx(zv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),c[D]&&f.jsx("div",{className:"mt-6 space-y-6",children:A.days.map((V,$)=>f.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[V.day," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",k(D,$),")"]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.protein,"g"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.carbs,"g"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.fats,"g"]})]})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(V.loggedMeals).every(W=>V.loggedMeals[W].length===0)?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):O.map(W=>f.jsxs("div",{className:"mb-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:W}),V.loggedMeals[W].length>0?f.jsx("ul",{className:"space-y-2",children:V.loggedMeals[W].map((B,K)=>f.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:f.jsxs("span",{className:"text-sm",children:[B.name,": ",B.grams,"g"]})},K))}):f.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",W.toLowerCase()," logged."]})]},W)),f.jsxs("div",{className:"mt-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const W=v(V.loggedMeals),B=x(W,V.macros);return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.protein/V.macros.protein*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[W.protein.toFixed(1),"g /"," ",V.macros.protein,"g"]}),B.protein?f.jsx(fl,{className:"w-5 h-5 text-green-500"}):f.jsx(ml,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.carbs/V.macros.carbs*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[W.carbs.toFixed(1),"g /"," ",V.macros.carbs,"g"]}),B.carbs?f.jsx(fl,{className:"w-5 h-5 text-green-500"}):f.jsx(ml,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.fats/V.macros.fats*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[W.fats.toFixed(1),"g /"," ",V.macros.fats,"g"]}),B.fats?f.jsx(fl,{className:"w-5 h-5 text-green-500"}):f.jsx(ml,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},$))})]},D))})]})},Y5=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(""),[s,o]=P.useState(null),[l,u]=P.useState(!1),{login:c}=P.useContext($s),{isDarkMode:h}=P.useContext(Ze),g=Qt(),v=async x=>{var b,k;x.preventDefault(),o(null),u(!0);try{await c(t,n);const O=((k=(b=location.state)==null?void 0:b.from)==null?void 0:k.pathname)||"/profile";g(O,{replace:!0})}catch(O){o(O.message),console.error("Login error:",O.message)}finally{u(!1)}};return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${h?"text-red-400":"text-red-800"}`,children:"Login"}),f.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${h?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsxs("form",{onSubmit:v,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),f.jsx("input",{type:"email",value:t,onChange:x=>e(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),f.jsx("input",{type:"password",value:n,onChange:x=>r(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),s&&f.jsx("p",{className:`text-center text-sm mb-4 ${h?"text-red-400":"text-red-800"}`,children:s}),f.jsx("button",{type:"submit",disabled:l,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${h?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:l?f.jsxs(f.Fragment,{children:[f.jsx(eD,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx(ot,{to:"/forgot-password",className:`text-sm hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),f.jsx("div",{className:"mt-2 text-center",children:f.jsxs("p",{className:`text-sm ${h?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",f.jsx(ot,{to:"/signup",className:`hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},X5=()=>{const t=Qt(),{isDarkMode:e}=P.useContext(Ze),{signup:n,user:r,loading:s}=P.useContext($s),[o,l]=P.useState(""),[u,c]=P.useState(""),[h,g]=P.useState(null),v=async x=>{x.preventDefault(),g(null);try{await n(o,u),t("/login")}catch(b){b.message.includes("User already exists")?g("Email already in use. A confirmation email has been resent."):b.message.includes("rate limit")?g("Too many signup attempts. Please wait and try again later."):g("An error occurred during signup. Please try again.")}};return s?f.jsx("div",{children:"Loading..."}):r?(t("/nutrition"),null):f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Sign Up"}),f.jsxs("form",{onSubmit:v,className:"max-w-md mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),f.jsx("input",{type:"email",value:o,onChange:x=>l(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),f.jsx("input",{type:"password",value:u,onChange:x=>c(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),h&&f.jsx("p",{className:`text-center text-sm mb-6 ${e?"text-red-400":"text-red-800"}`,children:h}),f.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Sign Up"})]}),f.jsxs("p",{className:`text-center mt-6 text-sm ${e?"text-stone-400":"text-stone-600"}`,children:["Already have an account?"," ",f.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"Log in"})]})]})},Z5=()=>{var O,A,D;const{user:t,loading:e,refreshUser:n}=P.useContext($s),{isDarkMode:r}=P.useContext(Ze),s=Qt(),[o,l]=P.useState(((O=t==null?void 0:t.user_metadata)==null?void 0:O.displayName)||""),[u,c]=P.useState([]),[h,g]=P.useState(null),[v,x]=P.useState(null);if(P.useEffect(()=>{(async()=>{if(t)try{const{data:$,error:W}=await Hn.from("nutrition_plans").select("*").eq("user_id",t.id);if(W)throw W;c($||[])}catch($){console.error("Error fetching nutrition plans:",$.message)}})()},[t]),e)return f.jsx("div",{children:"Loading..."});if(!t)return s("/login"),null;const b=async V=>{V.preventDefault(),g(null),x(null);try{const{error:$}=await Hn.auth.updateUser({data:{displayName:o}});if($)throw $;x("Profile updated successfully!"),await n()}catch($){g("Failed to update profile. Please try again."),console.error("Update profile error:",$.message)}},k=(A=t==null?void 0:t.user_metadata)!=null&&A.displayName?t.user_metadata.displayName.charAt(0).toUpperCase()+t.user_metadata.displayName.slice(1):"User";return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${r?"text-red-400":"text-red-800"}`,children:[k," - Dashboard "]}),f.jsxs("p",{className:`text-center text-lg mb-10 ${r?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",k,"!"]}),f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Email:"})," ",t.email]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Username:"})," ",((D=t.user_metadata)==null?void 0:D.displayName)||"Not set"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(t.created_at).toLocaleDateString()]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(t.updated_at).toLocaleDateString()]}),t.user_metadata&&Object.keys(t.user_metadata).length>0?f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Additional Info:"}),f.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(t.user_metadata).map(([V,$])=>f.jsxs("li",{children:[V,": ",$]},V))})]}):f.jsx("p",{children:"No additional user metadata available."})]})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),u.length>0?f.jsx("ul",{className:"space-y-2",children:u.map(V=>f.jsx("li",{children:f.jsx(Link,{to:`/nutrition-plan/${V.id}`,className:"hover:text-red-600 transition-colors duration-200",children:V.name||`Plan ${V.id}`})},V.id))}):f.jsx("p",{children:"No nutrition plans found."})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),f.jsxs("form",{onSubmit:b,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${r?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),f.jsx("input",{type:"text",value:o,onChange:V=>l(V.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${r?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),h&&f.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-red-400":"text-red-800"}`,children:h}),v&&f.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-green-400":"text-green-600"}`,children:v}),f.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),f.jsx("button",{onClick:()=>s("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),f.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),f.jsx("button",{onClick:()=>s("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},eB=()=>{const{user:t,loading:e}=P.useContext($s),n=Or();return e?f.jsx("div",{children:"Loading..."}):t?f.jsx(rS,{}):f.jsx(yR,{to:"/login",state:{from:n},replace:!0})},tB=()=>(P.useEffect(()=>{(async()=>{try{const e=jt(ct,"content","blog","posts"),r=(await Ln(e)).docs.map(h=>({id:h.id,date:h.data().date||new Date().toISOString()})),o=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  ${[{url:"https://yourdomain.com/",date:new Date().toISOString()},{url:"https://yourdomain.com/about",date:new Date().toISOString()},{url:"https://yourdomain.com/contact",date:new Date().toISOString()}].map(h=>`
  <url>
    <loc>${h.url}</loc>
    <lastmod>${h.date}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.8</priority>
  </url>`).join("")}
  ${r.map(h=>`
  <url>
    <loc>https://yourdomain.com/blog/${h.id}</loc>
    <lastmod>${new Date(h.date).toISOString()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.9</priority>
  </url>`).join("")}
</urlset>`,l=new Blob([o],{type:"application/xml"}),u=URL.createObjectURL(l),c=document.createElement("a");c.href=u,c.download="sitemap.xml",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u),console.log("Sitemap generated:",o)}catch(e){console.error("Error generating sitemap:",e)}})()},[]),f.jsx("div",{children:"Generating sitemap..."})),Ze=P.createContext();function nB(){const[t,e]=P.useState(()=>{const s=localStorage.getItem("theme");return s?JSON.parse(s):!0});P.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(t))},[t]);const n=()=>e(s=>!s),r="/";return console.log("Basename:",r),f.jsx(mS,{children:f.jsx(Y9,{children:f.jsx(Fj,{children:f.jsx(Ze.Provider,{value:{isDarkMode:t,toggleTheme:n},children:f.jsx(zR,{basename:r,children:f.jsx(Of,{children:f.jsx(Df,{classNames:"fade",timeout:300,children:f.jsx(xR,{children:f.jsxs(Ye,{path:"/",element:f.jsx(tD,{}),children:[f.jsx(Ye,{index:!0,element:f.jsx(J9,{})}),f.jsx(Ye,{path:"products",element:f.jsx(X9,{})}),f.jsx(Ye,{path:"cart",element:f.jsx(e5,{})}),f.jsx(Ye,{path:"checkout",element:f.jsx(t5,{})}),f.jsx(Ye,{path:"gut-health",element:f.jsx(n5,{})}),f.jsx(Ye,{path:"gut-health/:id",element:f.jsx(r5,{})}),f.jsx(Ye,{path:"purchase",element:f.jsx(i5,{})}),f.jsx(Ye,{path:"blog",element:f.jsx(d5,{})}),f.jsx(Ye,{path:"blog/:id",element:f.jsx(h5,{})}),f.jsx(Ye,{path:"/sitemap.xml",element:f.jsx(tB,{})}),f.jsx(Ye,{path:"faq",element:f.jsx(m5,{})}),f.jsx(Ye,{path:"contact",element:f.jsx(P5,{})}),f.jsx(Ye,{path:"admin",element:f.jsx(A5,{})}),f.jsx(Ye,{path:"admin/home",element:f.jsx(I5,{})}),f.jsx(Ye,{path:"admin/blog",element:f.jsx(R5,{})}),f.jsx(Ye,{path:"admin/products",element:f.jsx(N5,{})}),f.jsx(Ye,{path:"/shop/product/:id",element:f.jsx(Z9,{})}),f.jsx(Ye,{path:"fitness-tracker",element:f.jsx(j5,{})}),f.jsx(Ye,{path:"fitness-tracker/plan/:id",element:f.jsx(D5,{})}),f.jsx(Ye,{path:"fitness-tracker/create-custom-plan",element:f.jsx(q5,{})}),f.jsx(Ye,{path:"fitness-tracker/log",element:f.jsx(K5,{})}),f.jsx(Ye,{path:"fitness-tracker/history",element:f.jsx(G5,{})}),f.jsx(Ye,{path:"nutrition",element:f.jsx(Q5,{})}),f.jsx(Ye,{path:"nutrition-plan/:id",element:f.jsx(J5,{})}),f.jsx(Ye,{path:"login",element:f.jsx(Y5,{})}),f.jsx(Ye,{path:"signup",element:f.jsx(X5,{})}),f.jsx(Ye,{element:f.jsx(eB,{}),children:f.jsx(Ye,{path:"profile",element:f.jsx(Z5,{})})}),f.jsx(Ye,{path:"*",element:f.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})})}console.log("Main.jsx is running");kI.createRoot(document.getElementById("root")).render(f.jsx(nt.StrictMode,{children:f.jsx(nB,{})}));export{Bo as g};
