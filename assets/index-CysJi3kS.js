var xR=Object.defineProperty;var wR=(t,e,n)=>e in t?xR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rs=(t,e,n)=>wR(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Qo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _R(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Zp={exports:{}},Wc={},eg={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function bR(){if(v_)return Fe;v_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=y&&W[y]||W["@@iterator"],typeof W=="function"?W:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,D={};function P(W,ne,fe){this.props=W,this.context=ne,this.refs=D,this.updater=fe||b}P.prototype.isReactComponent={},P.prototype.setState=function(W,ne){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ne,"setState")},P.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function O(){}O.prototype=P.prototype;function $(W,ne,fe){this.props=W,this.context=ne,this.refs=D,this.updater=fe||b}var M=$.prototype=new O;M.constructor=$,k(M,P.prototype),M.isPureReactComponent=!0;var z=Array.isArray,B=Object.prototype.hasOwnProperty,G={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(W,ne,fe){var Te,je={},ie=null,oe=null;if(ne!=null)for(Te in ne.ref!==void 0&&(oe=ne.ref),ne.key!==void 0&&(ie=""+ne.key),ne)B.call(ne,Te)&&!I.hasOwnProperty(Te)&&(je[Te]=ne[Te]);var he=arguments.length-2;if(he===1)je.children=fe;else if(1<he){for(var Z=Array(he),q=0;q<he;q++)Z[q]=arguments[q+2];je.children=Z}if(W&&W.defaultProps)for(Te in he=W.defaultProps,he)je[Te]===void 0&&(je[Te]=he[Te]);return{$$typeof:t,type:W,key:ie,ref:oe,props:je,_owner:G.current}}function T(W,ne){return{$$typeof:t,type:W.type,key:ne,ref:W.ref,props:W.props,_owner:W._owner}}function R(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function j(W){var ne={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(fe){return ne[fe]})}var F=/\/+/g;function L(W,ne){return typeof W=="object"&&W!==null&&W.key!=null?j(""+W.key):ne.toString(36)}function ge(W,ne,fe,Te,je){var ie=typeof W;(ie==="undefined"||ie==="boolean")&&(W=null);var oe=!1;if(W===null)oe=!0;else switch(ie){case"string":case"number":oe=!0;break;case"object":switch(W.$$typeof){case t:case e:oe=!0}}if(oe)return oe=W,je=je(oe),W=Te===""?"."+L(oe,0):Te,z(je)?(fe="",W!=null&&(fe=W.replace(F,"$&/")+"/"),ge(je,ne,fe,"",function(q){return q})):je!=null&&(R(je)&&(je=T(je,fe+(!je.key||oe&&oe.key===je.key?"":(""+je.key).replace(F,"$&/")+"/")+W)),ne.push(je)),1;if(oe=0,Te=Te===""?".":Te+":",z(W))for(var he=0;he<W.length;he++){ie=W[he];var Z=Te+L(ie,he);oe+=ge(ie,ne,fe,Z,je)}else if(Z=v(W),typeof Z=="function")for(W=Z.call(W),he=0;!(ie=W.next()).done;)ie=ie.value,Z=Te+L(ie,he++),oe+=ge(ie,ne,fe,Z,je);else if(ie==="object")throw ne=String(W),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return oe}function $e(W,ne,fe){if(W==null)return W;var Te=[],je=0;return ge(W,Te,"","",function(ie){return ne.call(fe,ie,je++)}),Te}function Ke(W){if(W._status===-1){var ne=W._result;ne=ne(),ne.then(function(fe){(W._status===0||W._status===-1)&&(W._status=1,W._result=fe)},function(fe){(W._status===0||W._status===-1)&&(W._status=2,W._result=fe)}),W._status===-1&&(W._status=0,W._result=ne)}if(W._status===1)return W._result.default;throw W._result}var be={current:null},ue={transition:null},J={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ue,ReactCurrentOwner:G};function te(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:$e,forEach:function(W,ne,fe){$e(W,function(){ne.apply(this,arguments)},fe)},count:function(W){var ne=0;return $e(W,function(){ne++}),ne},toArray:function(W){return $e(W,function(ne){return ne})||[]},only:function(W){if(!R(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Fe.Component=P,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=$,Fe.StrictMode=r,Fe.Suspense=u,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Fe.act=te,Fe.cloneElement=function(W,ne,fe){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var Te=k({},W.props),je=W.key,ie=W.ref,oe=W._owner;if(ne!=null){if(ne.ref!==void 0&&(ie=ne.ref,oe=G.current),ne.key!==void 0&&(je=""+ne.key),W.type&&W.type.defaultProps)var he=W.type.defaultProps;for(Z in ne)B.call(ne,Z)&&!I.hasOwnProperty(Z)&&(Te[Z]=ne[Z]===void 0&&he!==void 0?he[Z]:ne[Z])}var Z=arguments.length-2;if(Z===1)Te.children=fe;else if(1<Z){he=Array(Z);for(var q=0;q<Z;q++)he[q]=arguments[q+2];Te.children=he}return{$$typeof:t,type:W.type,key:je,ref:ie,props:Te,_owner:oe}},Fe.createContext=function(W){return W={$$typeof:l,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:o,_context:W},W.Consumer=W},Fe.createElement=S,Fe.createFactory=function(W){var ne=S.bind(null,W);return ne.type=W,ne},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(W){return{$$typeof:c,render:W}},Fe.isValidElement=R,Fe.lazy=function(W){return{$$typeof:g,_payload:{_status:-1,_result:W},_init:Ke}},Fe.memo=function(W,ne){return{$$typeof:h,type:W,compare:ne===void 0?null:ne}},Fe.startTransition=function(W){var ne=ue.transition;ue.transition={};try{W()}finally{ue.transition=ne}},Fe.unstable_act=te,Fe.useCallback=function(W,ne){return be.current.useCallback(W,ne)},Fe.useContext=function(W){return be.current.useContext(W)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(W){return be.current.useDeferredValue(W)},Fe.useEffect=function(W,ne){return be.current.useEffect(W,ne)},Fe.useId=function(){return be.current.useId()},Fe.useImperativeHandle=function(W,ne,fe){return be.current.useImperativeHandle(W,ne,fe)},Fe.useInsertionEffect=function(W,ne){return be.current.useInsertionEffect(W,ne)},Fe.useLayoutEffect=function(W,ne){return be.current.useLayoutEffect(W,ne)},Fe.useMemo=function(W,ne){return be.current.useMemo(W,ne)},Fe.useReducer=function(W,ne,fe){return be.current.useReducer(W,ne,fe)},Fe.useRef=function(W){return be.current.useRef(W)},Fe.useState=function(W){return be.current.useState(W)},Fe.useSyncExternalStore=function(W,ne,fe){return be.current.useSyncExternalStore(W,ne,fe)},Fe.useTransition=function(){return be.current.useTransition()},Fe.version="18.3.1",Fe}var x_;function ay(){return x_||(x_=1,eg.exports=bR()),eg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function ER(){if(w_)return Wc;w_=1;var t=ay(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,u,h){var g,y={},v=null,b=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(b=u.ref);for(g in u)r.call(u,g)&&!o.hasOwnProperty(g)&&(y[g]=u[g]);if(c&&c.defaultProps)for(g in u=c.defaultProps,u)y[g]===void 0&&(y[g]=u[g]);return{$$typeof:e,type:c,key:v,ref:b,props:y,_owner:s.current}}return Wc.Fragment=n,Wc.jsx=l,Wc.jsxs=l,Wc}var __;function TR(){return __||(__=1,Zp.exports=ER()),Zp.exports}var f=TR(),A=ay();const nt=Qo(A);var _h={},tg={exports:{}},In={},ng={exports:{}},rg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function SR(){return b_||(b_=1,function(t){function e(ue,J){var te=ue.length;ue.push(J);e:for(;0<te;){var W=te-1>>>1,ne=ue[W];if(0<s(ne,J))ue[W]=J,ue[te]=ne,te=W;else break e}}function n(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var J=ue[0],te=ue.pop();if(te!==J){ue[0]=te;e:for(var W=0,ne=ue.length,fe=ne>>>1;W<fe;){var Te=2*(W+1)-1,je=ue[Te],ie=Te+1,oe=ue[ie];if(0>s(je,te))ie<ne&&0>s(oe,je)?(ue[W]=oe,ue[ie]=te,W=ie):(ue[W]=je,ue[Te]=te,W=Te);else if(ie<ne&&0>s(oe,te))ue[W]=oe,ue[ie]=te,W=ie;else break e}}return J}function s(ue,J){var te=ue.sortIndex-J.sortIndex;return te!==0?te:ue.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var u=[],h=[],g=1,y=null,v=3,b=!1,k=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ue){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=ue)r(h),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(h)}}function z(ue){if(D=!1,M(ue),!k)if(n(u)!==null)k=!0,Ke(B);else{var J=n(h);J!==null&&be(z,J.startTime-ue)}}function B(ue,J){k=!1,D&&(D=!1,O(S),S=-1),b=!0;var te=v;try{for(M(J),y=n(u);y!==null&&(!(y.expirationTime>J)||ue&&!j());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var ne=W(y.expirationTime<=J);J=t.unstable_now(),typeof ne=="function"?y.callback=ne:y===n(u)&&r(u),M(J)}else r(u);y=n(u)}if(y!==null)var fe=!0;else{var Te=n(h);Te!==null&&be(z,Te.startTime-J),fe=!1}return fe}finally{y=null,v=te,b=!1}}var G=!1,I=null,S=-1,T=5,R=-1;function j(){return!(t.unstable_now()-R<T)}function F(){if(I!==null){var ue=t.unstable_now();R=ue;var J=!0;try{J=I(!0,ue)}finally{J?L():(G=!1,I=null)}}else G=!1}var L;if(typeof $=="function")L=function(){$(F)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,$e=ge.port2;ge.port1.onmessage=F,L=function(){$e.postMessage(null)}}else L=function(){P(F,0)};function Ke(ue){I=ue,G||(G=!0,L())}function be(ue,J){S=P(function(){ue(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ue){ue.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,Ke(B))},t.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ue?Math.floor(1e3/ue):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ue){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var te=v;v=J;try{return ue()}finally{v=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ue,J){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var te=v;v=ue;try{return J()}finally{v=te}},t.unstable_scheduleCallback=function(ue,J,te){var W=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?W+te:W):te=W,ue){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=te+ne,ue={id:g++,callback:J,priorityLevel:ue,startTime:te,expirationTime:ne,sortIndex:-1},te>W?(ue.sortIndex=te,e(h,ue),n(u)===null&&ue===n(h)&&(D?(O(S),S=-1):D=!0,be(z,te-W))):(ue.sortIndex=ne,e(u,ue),k||b||(k=!0,Ke(B))),ue},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(ue){var J=v;return function(){var te=v;v=J;try{return ue.apply(this,arguments)}finally{v=te}}}}(rg)),rg}var E_;function kR(){return E_||(E_=1,ng.exports=SR()),ng.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function CR(){if(T_)return In;T_=1;var t=ay(),e=kR();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(i){return u.call(y,i)?!0:u.call(g,i)?!1:h.test(i)?y[i]=!0:(g[i]=!0,!1)}function b(i,a,d,p){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,a,d,p){if(a===null||typeof a>"u"||b(i,a,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function D(i,a,d,p,x,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];P[a]=new D(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function $(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(O,$);P[a]=new D(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(O,$);P[a]=new D(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(O,$);P[a]=new D(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,a,d,p){var x=P.hasOwnProperty(a)?P[a]:null;(x!==null?x.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,d,x,p)&&(d=null),p||x===null?v(a)&&(d===null?i.removeAttribute(a):i.setAttribute(a,""+d)):x.mustUseProperty?i[x.propertyName]=d===null?x.type===3?!1:"":d:(a=x.attributeName,p=x.attributeNamespace,d===null?i.removeAttribute(a):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,p?i.setAttributeNS(p,a,d):i.setAttribute(a,d))))}var z=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),G=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),j=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ue=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=ue&&i[ue]||i["@@iterator"],typeof i=="function"?i:null)}var te=Object.assign,W;function ne(i){if(W===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);W=a&&a[1]||""}return`
`+W+i}var fe=!1;function Te(i,a){if(!i||fe)return"";fe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var p=X}Reflect.construct(i,[],a)}else{try{a.call()}catch(X){p=X}i.call(a.prototype)}else{try{throw Error()}catch(X){p=X}i()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var x=X.stack.split(`
`),_=p.stack.split(`
`),C=x.length-1,V=_.length-1;1<=C&&0<=V&&x[C]!==_[V];)V--;for(;1<=C&&0<=V;C--,V--)if(x[C]!==_[V]){if(C!==1||V!==1)do if(C--,V--,0>V||x[C]!==_[V]){var U=`
`+x[C].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=C&&0<=V);break}}}finally{fe=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?ne(i):""}function je(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=Te(i.type,!1),i;case 11:return i=Te(i.type.render,!1),i;case 1:return i=Te(i.type,!0),i;default:return""}}function ie(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case G:return"Portal";case T:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case ge:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case $e:return a=i.displayName||null,a!==null?a:ie(i.type)||"Memo";case Ke:a=i._payload,i=i._init;try{return ie(i(a))}catch{}}return null}function oe(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(a);case 8:return a===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function he(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Z(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function q(i){var a=Z(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,_=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return x.call(this)},set:function(C){p=""+C,_.call(this,C)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function re(i){i._valueTracker||(i._valueTracker=q(i))}function ye(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),p="";return i&&(p=Z(i)?i.checked?"true":"false":i.value),i=p,i!==d?(a.setValue(i),!0):!1}function We(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function St(i,a){var d=a.checked;return te({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function vr(i,a){var d=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;d=he(a.value!=null?a.value:d),i._wrapperState={initialChecked:p,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function qs(i,a){a=a.checked,a!=null&&M(i,"checked",a,!1)}function Gs(i,a){qs(i,a);var d=he(a.value),p=a.type;if(d!=null)p==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?ms(i,a.type,d):a.hasOwnProperty("defaultValue")&&ms(i,a.type,he(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Ks(i,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,d||a===i.value||(i.value=a),i.defaultValue=a}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function ms(i,a,d){(a!=="number"||We(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var wt=Array.isArray;function on(i,a,d,p){if(i=i.options,a){a={};for(var x=0;x<d.length;x++)a["$"+d[x]]=!0;for(d=0;d<i.length;d++)x=a.hasOwnProperty("$"+i[d].value),i[d].selected!==x&&(i[d].selected=x),x&&p&&(i[d].defaultSelected=!0)}else{for(d=""+he(d),a=null,x=0;x<i.length;x++){if(i[x].value===d){i[x].selected=!0,p&&(i[x].defaultSelected=!0);return}a!==null||i[x].disabled||(a=i[x])}a!==null&&(a.selected=!0)}}function Qi(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return te({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ps(i,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(wt(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}i._wrapperState={initialValue:he(d)}}function sa(i,a){var d=he(a.value),p=he(a.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),a.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),p!=null&&(i.defaultValue=""+p)}function Zl(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Dt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ot(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Dt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var gs,ec=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,p,x){MSApp.execUnsafeLocalFunction(function(){return i(a,d,p,x)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(gs=gs||document.createElement("div"),gs.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=gs.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Qs(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var Ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yi=["Webkit","ms","Moz","O"];Object.keys(Ji).forEach(function(i){Yi.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Ji[a]=Ji[i]})});function tc(i,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Ji.hasOwnProperty(i)&&Ji[i]?(""+a).trim():a+"px"}function nc(i,a){i=i.style;for(var d in a)if(a.hasOwnProperty(d)){var p=d.indexOf("--")===0,x=tc(d,a[d],p);d==="float"&&(d="cssFloat"),p?i.setProperty(d,x):i[d]=x}}var rc=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sc(i,a){if(a){if(rc[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function ic(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xi=null;function ia(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var oa=null,Xn=null,Wr=null;function aa(i){if(i=Pc(i)){if(typeof oa!="function")throw Error(n(280));var a=i.stateNode;a&&(a=Ld(a),oa(i.stateNode,i.type,a))}}function Hr(i){Xn?Wr?Wr.push(i):Wr=[i]:Xn=i}function oc(){if(Xn){var i=Xn,a=Wr;if(Wr=Xn=null,aa(i),a)for(i=0;i<a.length;i++)aa(a[i])}}function Zi(i,a){return i(a)}function ac(){}var ys=!1;function lc(i,a,d){if(ys)return i(a,d);ys=!0;try{return Zi(i,a,d)}finally{ys=!1,(Xn!==null||Wr!==null)&&(ac(),oc())}}function kt(i,a){var d=i.stateNode;if(d===null)return null;var p=Ld(d);if(p===null)return null;d=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var la=!1;if(c)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){la=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{la=!1}function eo(i,a,d,p,x,_,C,V,U){var X=Array.prototype.slice.call(arguments,3);try{a.apply(d,X)}catch(le){this.onError(le)}}var to=!1,ca=null,wr=!1,cc=null,Cm={onError:function(i){to=!0,ca=i}};function ua(i,a,d,p,x,_,C,V,U){to=!1,ca=null,eo.apply(Cm,arguments)}function ad(i,a,d,p,x,_,C,V,U){if(ua.apply(this,arguments),to){if(to){var X=ca;to=!1,ca=null}else throw Error(n(198));wr||(wr=!0,cc=X)}}function _r(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function no(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function br(i){if(_r(i)!==i)throw Error(n(188))}function ld(i){var a=i.alternate;if(!a){if(a=_r(i),a===null)throw Error(n(188));return a!==i?null:i}for(var d=i,p=a;;){var x=d.return;if(x===null)break;var _=x.alternate;if(_===null){if(p=x.return,p!==null){d=p;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===d)return br(x),i;if(_===p)return br(x),a;_=_.sibling}throw Error(n(188))}if(d.return!==p.return)d=x,p=_;else{for(var C=!1,V=x.child;V;){if(V===d){C=!0,d=x,p=_;break}if(V===p){C=!0,p=x,d=_;break}V=V.sibling}if(!C){for(V=_.child;V;){if(V===d){C=!0,d=_,p=x;break}if(V===p){C=!0,p=_,d=x;break}V=V.sibling}if(!C)throw Error(n(189))}}if(d.alternate!==p)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:a}function uc(i){return i=ld(i),i!==null?da(i):null}function da(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=da(i);if(a!==null)return a;i=i.sibling}return null}var ha=e.unstable_scheduleCallback,dc=e.unstable_cancelCallback,cd=e.unstable_shouldYield,Am=e.unstable_requestPaint,rt=e.unstable_now,ud=e.unstable_getCurrentPriorityLevel,ro=e.unstable_ImmediatePriority,Js=e.unstable_UserBlockingPriority,Zn=e.unstable_NormalPriority,hc=e.unstable_LowPriority,dd=e.unstable_IdlePriority,so=null,Fn=null;function hd(i){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(so,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:md,fc=Math.log,fd=Math.LN2;function md(i){return i>>>=0,i===0?32:31-(fc(i)/fd|0)|0}var fa=64,ma=4194304;function Ys(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function io(i,a){var d=i.pendingLanes;if(d===0)return 0;var p=0,x=i.suspendedLanes,_=i.pingedLanes,C=d&268435455;if(C!==0){var V=C&~x;V!==0?p=Ys(V):(_&=C,_!==0&&(p=Ys(_)))}else C=d&~x,C!==0?p=Ys(C):_!==0&&(p=Ys(_));if(p===0)return 0;if(a!==0&&a!==p&&(a&x)===0&&(x=p&-p,_=a&-a,x>=_||x===16&&(_&4194240)!==0))return a;if((p&4)!==0&&(p|=d&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)d=31-yn(a),x=1<<d,p|=i[d],a&=~x;return p}function Pm(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vs(i,a){for(var d=i.suspendedLanes,p=i.pingedLanes,x=i.expirationTimes,_=i.pendingLanes;0<_;){var C=31-yn(_),V=1<<C,U=x[C];U===-1?((V&d)===0||(V&p)!==0)&&(x[C]=Pm(V,a)):U<=a&&(i.expiredLanes|=V),_&=~V}}function Un(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function oo(){var i=fa;return fa<<=1,(fa&4194240)===0&&(fa=64),i}function Xs(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function Zs(i,a,d){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-yn(a),i[a]=d}function tt(i,a){var d=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<d;){var x=31-yn(d),_=1<<x;a[x]=0,p[x]=-1,i[x]=-1,d&=~_}}function ei(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var p=31-yn(d),x=1<<p;x&a|i[p]&a&&(i[p]|=a),d&=~x}}var He=0;function ti(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var pd,pa,gd,yd,vd,mc=!1,qr=[],Jt=null,Er=null,Tr=null,ni=new Map,er=new Map,Gr=[],Im="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xd(i,a){switch(i){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":ni.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(a.pointerId)}}function En(i,a,d,p,x,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:d,eventSystemFlags:p,nativeEvent:_,targetContainers:[x]},a!==null&&(a=Pc(a),a!==null&&pa(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),i)}function Rm(i,a,d,p,x){switch(a){case"focusin":return Jt=En(Jt,i,a,d,p,x),!0;case"dragenter":return Er=En(Er,i,a,d,p,x),!0;case"mouseover":return Tr=En(Tr,i,a,d,p,x),!0;case"pointerover":var _=x.pointerId;return ni.set(_,En(ni.get(_)||null,i,a,d,p,x)),!0;case"gotpointercapture":return _=x.pointerId,er.set(_,En(er.get(_)||null,i,a,d,p,x)),!0}return!1}function wd(i){var a=ho(i.target);if(a!==null){var d=_r(a);if(d!==null){if(a=d.tag,a===13){if(a=no(d),a!==null){i.blockedOn=a,vd(i.priority,function(){gd(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xs(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=ga(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var p=new d.constructor(d.type,d);Xi=p,d.target.dispatchEvent(p),Xi=null}else return a=Pc(d),a!==null&&pa(a),i.blockedOn=d,!1;a.shift()}return!0}function ao(i,a,d){xs(i)&&d.delete(a)}function _d(){mc=!1,Jt!==null&&xs(Jt)&&(Jt=null),Er!==null&&xs(Er)&&(Er=null),Tr!==null&&xs(Tr)&&(Tr=null),ni.forEach(ao),er.forEach(ao)}function Sr(i,a){i.blockedOn===a&&(i.blockedOn=null,mc||(mc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_d)))}function kr(i){function a(x){return Sr(x,i)}if(0<qr.length){Sr(qr[0],i);for(var d=1;d<qr.length;d++){var p=qr[d];p.blockedOn===i&&(p.blockedOn=null)}}for(Jt!==null&&Sr(Jt,i),Er!==null&&Sr(Er,i),Tr!==null&&Sr(Tr,i),ni.forEach(a),er.forEach(a),d=0;d<Gr.length;d++)p=Gr[d],p.blockedOn===i&&(p.blockedOn=null);for(;0<Gr.length&&(d=Gr[0],d.blockedOn===null);)wd(d),d.blockedOn===null&&Gr.shift()}var ws=z.ReactCurrentBatchConfig,ri=!0;function ct(i,a,d,p){var x=He,_=ws.transition;ws.transition=null;try{He=1,pc(i,a,d,p)}finally{He=x,ws.transition=_}}function Nm(i,a,d,p){var x=He,_=ws.transition;ws.transition=null;try{He=4,pc(i,a,d,p)}finally{He=x,ws.transition=_}}function pc(i,a,d,p){if(ri){var x=ga(i,a,d,p);if(x===null)zm(i,a,p,lo,d),xd(i,p);else if(Rm(x,i,a,d,p))p.stopPropagation();else if(xd(i,p),a&4&&-1<Im.indexOf(i)){for(;x!==null;){var _=Pc(x);if(_!==null&&pd(_),_=ga(i,a,d,p),_===null&&zm(i,a,p,lo,d),_===x)break;x=_}x!==null&&p.stopPropagation()}else zm(i,a,p,null,d)}}var lo=null;function ga(i,a,d,p){if(lo=null,i=ia(p),i=ho(i),i!==null)if(a=_r(i),a===null)i=null;else if(d=a.tag,d===13){if(i=no(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return lo=i,null}function gc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ud()){case ro:return 1;case Js:return 4;case Zn:case hc:return 16;case dd:return 536870912;default:return 16}default:return 16}}var Bn=null,ya=null,Tn=null;function yc(){if(Tn)return Tn;var i,a=ya,d=a.length,p,x="value"in Bn?Bn.value:Bn.textContent,_=x.length;for(i=0;i<d&&a[i]===x[i];i++);var C=d-i;for(p=1;p<=C&&a[d-p]===x[_-p];p++);return Tn=x.slice(i,1<p?1-p:void 0)}function va(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Kr(){return!0}function vc(){return!1}function Yt(i){function a(d,p,x,_,C){this._reactName=d,this._targetInst=x,this.type=p,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var V in i)i.hasOwnProperty(V)&&(d=i[V],this[V]=d?d(_):_[V]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Kr:vc,this.isPropagationStopped=vc,this}return te(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Kr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Kr)},persist:function(){},isPersistent:Kr}),a}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=Yt(Cr),Qr=te({},Cr,{view:0,detail:0}),jm=Yt(Qr),wa,_s,si,co=te({},Qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==si&&(si&&i.type==="mousemove"?(wa=i.screenX-si.screenX,_s=i.screenY-si.screenY):_s=wa=0,si=i),wa)},movementY:function(i){return"movementY"in i?i.movementY:_s}}),_a=Yt(co),xc=te({},co,{dataTransfer:0}),bd=Yt(xc),ba=te({},Qr,{relatedTarget:0}),Ea=Yt(ba),Ed=te({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),bs=Yt(Ed),Td=te({},Cr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Sd=Yt(Td),kd=te({},Cr,{data:0}),wc=Yt(kd),Ta={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ad(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Cd[i])?!!a[i]:!1}function Jr(){return Ad}var m=te({},Qr,{key:function(i){if(i.key){var a=Ta[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=va(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(i){return i.type==="keypress"?va(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?va(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),w=Yt(m),E=te({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Yt(E),K=te({},Qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),ee=Yt(K),pe=te({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=Yt(pe),Lt=te({},co,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Yt(Lt),Bt=[9,13,27,32],It=c&&"CompositionEvent"in window,tr=null;c&&"documentMode"in document&&(tr=document.documentMode);var zn=c&&"TextEvent"in window&&!tr,uo=c&&(!It||tr&&8<tr&&11>=tr),Sa=" ",hx=!1;function fx(i,a){switch(i){case"keyup":return Bt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ka=!1;function gI(i,a){switch(i){case"compositionend":return mx(a);case"keypress":return a.which!==32?null:(hx=!0,Sa);case"textInput":return i=a.data,i===Sa&&hx?null:i;default:return null}}function yI(i,a){if(ka)return i==="compositionend"||!It&&fx(i,a)?(i=yc(),Tn=ya=Bn=null,ka=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return uo&&a.locale!=="ko"?null:a.data;default:return null}}var vI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function px(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!vI[i.type]:a==="textarea"}function gx(i,a,d,p){Hr(p),a=jd(a,"onChange"),0<a.length&&(d=new xa("onChange","change",null,d,p),i.push({event:d,listeners:a}))}var _c=null,bc=null;function xI(i){Dx(i,0)}function Pd(i){var a=Ra(i);if(ye(a))return i}function wI(i,a){if(i==="change")return a}var yx=!1;if(c){var Dm;if(c){var Om="oninput"in document;if(!Om){var vx=document.createElement("div");vx.setAttribute("oninput","return;"),Om=typeof vx.oninput=="function"}Dm=Om}else Dm=!1;yx=Dm&&(!document.documentMode||9<document.documentMode)}function xx(){_c&&(_c.detachEvent("onpropertychange",wx),bc=_c=null)}function wx(i){if(i.propertyName==="value"&&Pd(bc)){var a=[];gx(a,bc,i,ia(i)),lc(xI,a)}}function _I(i,a,d){i==="focusin"?(xx(),_c=a,bc=d,_c.attachEvent("onpropertychange",wx)):i==="focusout"&&xx()}function bI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Pd(bc)}function EI(i,a){if(i==="click")return Pd(a)}function TI(i,a){if(i==="input"||i==="change")return Pd(a)}function SI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Ar=typeof Object.is=="function"?Object.is:SI;function Ec(i,a){if(Ar(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),p=Object.keys(a);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var x=d[p];if(!u.call(a,x)||!Ar(i[x],a[x]))return!1}return!0}function _x(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bx(i,a){var d=_x(i);i=0;for(var p;d;){if(d.nodeType===3){if(p=i+d.textContent.length,i<=a&&p>=a)return{node:d,offset:a-i};i=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=_x(d)}}function Ex(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Ex(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Tx(){for(var i=window,a=We();a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=We(i.document)}return a}function Lm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function kI(i){var a=Tx(),d=i.focusedElem,p=i.selectionRange;if(a!==d&&d&&d.ownerDocument&&Ex(d.ownerDocument.documentElement,d)){if(p!==null&&Lm(d)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(i,d.value.length);else if(i=(a=d.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var x=d.textContent.length,_=Math.min(p.start,x);p=p.end===void 0?_:Math.min(p.end,x),!i.extend&&_>p&&(x=p,p=_,_=x),x=bx(d,_);var C=bx(d,p);x&&C&&(i.rangeCount!==1||i.anchorNode!==x.node||i.anchorOffset!==x.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),i.removeAllRanges(),_>p?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=d;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)i=a[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var CI=c&&"documentMode"in document&&11>=document.documentMode,Ca=null,Mm=null,Tc=null,Vm=!1;function Sx(i,a,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Vm||Ca==null||Ca!==We(p)||(p=Ca,"selectionStart"in p&&Lm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Tc&&Ec(Tc,p)||(Tc=p,p=jd(Mm,"onSelect"),0<p.length&&(a=new xa("onSelect","select",null,a,d),i.push({event:a,listeners:p}),a.target=Ca)))}function Id(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var Aa={animationend:Id("Animation","AnimationEnd"),animationiteration:Id("Animation","AnimationIteration"),animationstart:Id("Animation","AnimationStart"),transitionend:Id("Transition","TransitionEnd")},$m={},kx={};c&&(kx=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function Rd(i){if($m[i])return $m[i];if(!Aa[i])return i;var a=Aa[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in kx)return $m[i]=a[d];return i}var Cx=Rd("animationend"),Ax=Rd("animationiteration"),Px=Rd("animationstart"),Ix=Rd("transitionend"),Rx=new Map,Nx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(i,a){Rx.set(i,a),o(a,[i])}for(var Fm=0;Fm<Nx.length;Fm++){var Um=Nx[Fm],AI=Um.toLowerCase(),PI=Um[0].toUpperCase()+Um.slice(1);ii(AI,"on"+PI)}ii(Cx,"onAnimationEnd"),ii(Ax,"onAnimationIteration"),ii(Px,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(Ix,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),II=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sc));function jx(i,a,d){var p=i.type||"unknown-event";i.currentTarget=d,ad(p,a,void 0,i),i.currentTarget=null}function Dx(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var p=i[d],x=p.event;p=p.listeners;e:{var _=void 0;if(a)for(var C=p.length-1;0<=C;C--){var V=p[C],U=V.instance,X=V.currentTarget;if(V=V.listener,U!==_&&x.isPropagationStopped())break e;jx(x,V,X),_=U}else for(C=0;C<p.length;C++){if(V=p[C],U=V.instance,X=V.currentTarget,V=V.listener,U!==_&&x.isPropagationStopped())break e;jx(x,V,X),_=U}}}if(wr)throw i=cc,wr=!1,cc=null,i}function at(i,a){var d=a[Qm];d===void 0&&(d=a[Qm]=new Set);var p=i+"__bubble";d.has(p)||(Ox(a,i,2,!1),d.add(p))}function Bm(i,a,d){var p=0;a&&(p|=4),Ox(d,i,p,a)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function kc(i){if(!i[Nd]){i[Nd]=!0,r.forEach(function(d){d!=="selectionchange"&&(II.has(d)||Bm(d,!1,i),Bm(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Nd]||(a[Nd]=!0,Bm("selectionchange",!1,a))}}function Ox(i,a,d,p){switch(gc(a)){case 1:var x=ct;break;case 4:x=Nm;break;default:x=pc}d=x.bind(null,a,d,i),x=void 0,!la||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),p?x!==void 0?i.addEventListener(a,d,{capture:!0,passive:x}):i.addEventListener(a,d,!0):x!==void 0?i.addEventListener(a,d,{passive:x}):i.addEventListener(a,d,!1)}function zm(i,a,d,p,x){var _=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var V=p.stateNode.containerInfo;if(V===x||V.nodeType===8&&V.parentNode===x)break;if(C===4)for(C=p.return;C!==null;){var U=C.tag;if((U===3||U===4)&&(U=C.stateNode.containerInfo,U===x||U.nodeType===8&&U.parentNode===x))return;C=C.return}for(;V!==null;){if(C=ho(V),C===null)return;if(U=C.tag,U===5||U===6){p=_=C;continue e}V=V.parentNode}}p=p.return}lc(function(){var X=_,le=ia(d),de=[];e:{var ae=Rx.get(i);if(ae!==void 0){var ve=xa,_e=i;switch(i){case"keypress":if(va(d)===0)break e;case"keydown":case"keyup":ve=w;break;case"focusin":_e="focus",ve=Ea;break;case"focusout":_e="blur",ve=Ea;break;case"beforeblur":case"afterblur":ve=Ea;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ee;break;case Cx:case Ax:case Px:ve=bs;break;case Ix:ve=et;break;case"scroll":ve=jm;break;case"wheel":ve=qe;break;case"copy":case"cut":case"paste":ve=Sd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=N}var Ee=(a&4)!==0,Ct=!Ee&&i==="scroll",Q=Ee?ae!==null?ae+"Capture":null:ae;Ee=[];for(var H=X,Y;H!==null;){Y=H;var me=Y.stateNode;if(Y.tag===5&&me!==null&&(Y=me,Q!==null&&(me=kt(H,Q),me!=null&&Ee.push(Cc(H,me,Y)))),Ct)break;H=H.return}0<Ee.length&&(ae=new ve(ae,_e,null,d,le),de.push({event:ae,listeners:Ee}))}}if((a&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",ve=i==="mouseout"||i==="pointerout",ae&&d!==Xi&&(_e=d.relatedTarget||d.fromElement)&&(ho(_e)||_e[Es]))break e;if((ve||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,ve?(_e=d.relatedTarget||d.toElement,ve=X,_e=_e?ho(_e):null,_e!==null&&(Ct=_r(_e),_e!==Ct||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(ve=null,_e=X),ve!==_e)){if(Ee=_a,me="onMouseLeave",Q="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=N,me="onPointerLeave",Q="onPointerEnter",H="pointer"),Ct=ve==null?ae:Ra(ve),Y=_e==null?ae:Ra(_e),ae=new Ee(me,H+"leave",ve,d,le),ae.target=Ct,ae.relatedTarget=Y,me=null,ho(le)===X&&(Ee=new Ee(Q,H+"enter",_e,d,le),Ee.target=Y,Ee.relatedTarget=Ct,me=Ee),Ct=me,ve&&_e)t:{for(Ee=ve,Q=_e,H=0,Y=Ee;Y;Y=Pa(Y))H++;for(Y=0,me=Q;me;me=Pa(me))Y++;for(;0<H-Y;)Ee=Pa(Ee),H--;for(;0<Y-H;)Q=Pa(Q),Y--;for(;H--;){if(Ee===Q||Q!==null&&Ee===Q.alternate)break t;Ee=Pa(Ee),Q=Pa(Q)}Ee=null}else Ee=null;ve!==null&&Lx(de,ae,ve,Ee,!1),_e!==null&&Ct!==null&&Lx(de,Ct,_e,Ee,!0)}}e:{if(ae=X?Ra(X):window,ve=ae.nodeName&&ae.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ae.type==="file")var Se=wI;else if(px(ae))if(yx)Se=TI;else{Se=bI;var Ce=_I}else(ve=ae.nodeName)&&ve.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Se=EI);if(Se&&(Se=Se(i,X))){gx(de,Se,d,le);break e}Ce&&Ce(i,ae,X),i==="focusout"&&(Ce=ae._wrapperState)&&Ce.controlled&&ae.type==="number"&&ms(ae,"number",ae.value)}switch(Ce=X?Ra(X):window,i){case"focusin":(px(Ce)||Ce.contentEditable==="true")&&(Ca=Ce,Mm=X,Tc=null);break;case"focusout":Tc=Mm=Ca=null;break;case"mousedown":Vm=!0;break;case"contextmenu":case"mouseup":case"dragend":Vm=!1,Sx(de,d,le);break;case"selectionchange":if(CI)break;case"keydown":case"keyup":Sx(de,d,le)}var Ae;if(It)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else ka?fx(i,d)&&(De="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(De="onCompositionStart");De&&(uo&&d.locale!=="ko"&&(ka||De!=="onCompositionStart"?De==="onCompositionEnd"&&ka&&(Ae=yc()):(Bn=le,ya="value"in Bn?Bn.value:Bn.textContent,ka=!0)),Ce=jd(X,De),0<Ce.length&&(De=new wc(De,i,null,d,le),de.push({event:De,listeners:Ce}),Ae?De.data=Ae:(Ae=mx(d),Ae!==null&&(De.data=Ae)))),(Ae=zn?gI(i,d):yI(i,d))&&(X=jd(X,"onBeforeInput"),0<X.length&&(le=new wc("onBeforeInput","beforeinput",null,d,le),de.push({event:le,listeners:X}),le.data=Ae))}Dx(de,a)})}function Cc(i,a,d){return{instance:i,listener:a,currentTarget:d}}function jd(i,a){for(var d=a+"Capture",p=[];i!==null;){var x=i,_=x.stateNode;x.tag===5&&_!==null&&(x=_,_=kt(i,d),_!=null&&p.unshift(Cc(i,_,x)),_=kt(i,a),_!=null&&p.push(Cc(i,_,x))),i=i.return}return p}function Pa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Lx(i,a,d,p,x){for(var _=a._reactName,C=[];d!==null&&d!==p;){var V=d,U=V.alternate,X=V.stateNode;if(U!==null&&U===p)break;V.tag===5&&X!==null&&(V=X,x?(U=kt(d,_),U!=null&&C.unshift(Cc(d,U,V))):x||(U=kt(d,_),U!=null&&C.push(Cc(d,U,V)))),d=d.return}C.length!==0&&i.push({event:a,listeners:C})}var RI=/\r\n?/g,NI=/\u0000|\uFFFD/g;function Mx(i){return(typeof i=="string"?i:""+i).replace(RI,`
`).replace(NI,"")}function Dd(i,a,d){if(a=Mx(a),Mx(i)!==a&&d)throw Error(n(425))}function Od(){}var Wm=null,Hm=null;function qm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Gm=typeof setTimeout=="function"?setTimeout:void 0,jI=typeof clearTimeout=="function"?clearTimeout:void 0,Vx=typeof Promise=="function"?Promise:void 0,DI=typeof queueMicrotask=="function"?queueMicrotask:typeof Vx<"u"?function(i){return Vx.resolve(null).then(i).catch(OI)}:Gm;function OI(i){setTimeout(function(){throw i})}function Km(i,a){var d=a,p=0;do{var x=d.nextSibling;if(i.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(p===0){i.removeChild(x),kr(a);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=x}while(d);kr(a)}function oi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function $x(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}var Ia=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Ia,Ac="__reactProps$"+Ia,Es="__reactContainer$"+Ia,Qm="__reactEvents$"+Ia,LI="__reactListeners$"+Ia,MI="__reactHandles$"+Ia;function ho(i){var a=i[Yr];if(a)return a;for(var d=i.parentNode;d;){if(a=d[Es]||d[Yr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=$x(i);i!==null;){if(d=i[Yr])return d;i=$x(i)}return a}i=d,d=i.parentNode}return null}function Pc(i){return i=i[Yr]||i[Es],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ra(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Ld(i){return i[Ac]||null}var Jm=[],Na=-1;function ai(i){return{current:i}}function lt(i){0>Na||(i.current=Jm[Na],Jm[Na]=null,Na--)}function st(i,a){Na++,Jm[Na]=i.current,i.current=a}var li={},an=ai(li),Sn=ai(!1),fo=li;function ja(i,a){var d=i.type.contextTypes;if(!d)return li;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var x={},_;for(_ in d)x[_]=a[_];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=x),x}function kn(i){return i=i.childContextTypes,i!=null}function Md(){lt(Sn),lt(an)}function Fx(i,a,d){if(an.current!==li)throw Error(n(168));st(an,a),st(Sn,d)}function Ux(i,a,d){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var x in p)if(!(x in a))throw Error(n(108,oe(i)||"Unknown",x));return te({},d,p)}function Vd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||li,fo=an.current,st(an,i),st(Sn,Sn.current),!0}function Bx(i,a,d){var p=i.stateNode;if(!p)throw Error(n(169));d?(i=Ux(i,a,fo),p.__reactInternalMemoizedMergedChildContext=i,lt(Sn),lt(an),st(an,i)):lt(Sn),st(Sn,d)}var Ts=null,$d=!1,Ym=!1;function zx(i){Ts===null?Ts=[i]:Ts.push(i)}function VI(i){$d=!0,zx(i)}function ci(){if(!Ym&&Ts!==null){Ym=!0;var i=0,a=He;try{var d=Ts;for(He=1;i<d.length;i++){var p=d[i];do p=p(!0);while(p!==null)}Ts=null,$d=!1}catch(x){throw Ts!==null&&(Ts=Ts.slice(i+1)),ha(ro,ci),x}finally{He=a,Ym=!1}}return null}var Da=[],Oa=0,Fd=null,Ud=0,nr=[],rr=0,mo=null,Ss=1,ks="";function po(i,a){Da[Oa++]=Ud,Da[Oa++]=Fd,Fd=i,Ud=a}function Wx(i,a,d){nr[rr++]=Ss,nr[rr++]=ks,nr[rr++]=mo,mo=i;var p=Ss;i=ks;var x=32-yn(p)-1;p&=~(1<<x),d+=1;var _=32-yn(a)+x;if(30<_){var C=x-x%5;_=(p&(1<<C)-1).toString(32),p>>=C,x-=C,Ss=1<<32-yn(a)+x|d<<x|p,ks=_+i}else Ss=1<<_|d<<x|p,ks=i}function Xm(i){i.return!==null&&(po(i,1),Wx(i,1,0))}function Zm(i){for(;i===Fd;)Fd=Da[--Oa],Da[Oa]=null,Ud=Da[--Oa],Da[Oa]=null;for(;i===mo;)mo=nr[--rr],nr[rr]=null,ks=nr[--rr],nr[rr]=null,Ss=nr[--rr],nr[rr]=null}var Wn=null,Hn=null,ut=!1,Pr=null;function Hx(i,a){var d=ar(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=i,a=i.deletions,a===null?(i.deletions=[d],i.flags|=16):a.push(d)}function qx(i,a){switch(i.tag){case 5:var d=i.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Wn=i,Hn=oi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Wn=i,Hn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=mo!==null?{id:Ss,overflow:ks}:null,i.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=ar(18,null,null,0),d.stateNode=a,d.return=i,i.child=d,Wn=i,Hn=null,!0):!1;default:return!1}}function ep(i){return(i.mode&1)!==0&&(i.flags&128)===0}function tp(i){if(ut){var a=Hn;if(a){var d=a;if(!qx(i,a)){if(ep(i))throw Error(n(418));a=oi(d.nextSibling);var p=Wn;a&&qx(i,a)?Hx(p,d):(i.flags=i.flags&-4097|2,ut=!1,Wn=i)}}else{if(ep(i))throw Error(n(418));i.flags=i.flags&-4097|2,ut=!1,Wn=i}}}function Gx(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Wn=i}function Bd(i){if(i!==Wn)return!1;if(!ut)return Gx(i),ut=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!qm(i.type,i.memoizedProps)),a&&(a=Hn)){if(ep(i))throw Kx(),Error(n(418));for(;a;)Hx(i,a),a=oi(a.nextSibling)}if(Gx(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(a===0){Hn=oi(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}i=i.nextSibling}Hn=null}}else Hn=Wn?oi(i.stateNode.nextSibling):null;return!0}function Kx(){for(var i=Hn;i;)i=oi(i.nextSibling)}function La(){Hn=Wn=null,ut=!1}function np(i){Pr===null?Pr=[i]:Pr.push(i)}var $I=z.ReactCurrentBatchConfig;function Ic(i,a,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var p=d.stateNode}if(!p)throw Error(n(147,i));var x=p,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var V=x.refs;C===null?delete V[_]:V[_]=C},a._stringRef=_,a)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function zd(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Qx(i){var a=i._init;return a(i._payload)}function Jx(i){function a(Q,H){if(i){var Y=Q.deletions;Y===null?(Q.deletions=[H],Q.flags|=16):Y.push(H)}}function d(Q,H){if(!i)return null;for(;H!==null;)a(Q,H),H=H.sibling;return null}function p(Q,H){for(Q=new Map;H!==null;)H.key!==null?Q.set(H.key,H):Q.set(H.index,H),H=H.sibling;return Q}function x(Q,H){return Q=yi(Q,H),Q.index=0,Q.sibling=null,Q}function _(Q,H,Y){return Q.index=Y,i?(Y=Q.alternate,Y!==null?(Y=Y.index,Y<H?(Q.flags|=2,H):Y):(Q.flags|=2,H)):(Q.flags|=1048576,H)}function C(Q){return i&&Q.alternate===null&&(Q.flags|=2),Q}function V(Q,H,Y,me){return H===null||H.tag!==6?(H=Gp(Y,Q.mode,me),H.return=Q,H):(H=x(H,Y),H.return=Q,H)}function U(Q,H,Y,me){var Se=Y.type;return Se===I?le(Q,H,Y.props.children,me,Y.key):H!==null&&(H.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ke&&Qx(Se)===H.type)?(me=x(H,Y.props),me.ref=Ic(Q,H,Y),me.return=Q,me):(me=fh(Y.type,Y.key,Y.props,null,Q.mode,me),me.ref=Ic(Q,H,Y),me.return=Q,me)}function X(Q,H,Y,me){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=Kp(Y,Q.mode,me),H.return=Q,H):(H=x(H,Y.children||[]),H.return=Q,H)}function le(Q,H,Y,me,Se){return H===null||H.tag!==7?(H=Eo(Y,Q.mode,me,Se),H.return=Q,H):(H=x(H,Y),H.return=Q,H)}function de(Q,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Gp(""+H,Q.mode,Y),H.return=Q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case B:return Y=fh(H.type,H.key,H.props,null,Q.mode,Y),Y.ref=Ic(Q,null,H),Y.return=Q,Y;case G:return H=Kp(H,Q.mode,Y),H.return=Q,H;case Ke:var me=H._init;return de(Q,me(H._payload),Y)}if(wt(H)||J(H))return H=Eo(H,Q.mode,Y,null),H.return=Q,H;zd(Q,H)}return null}function ae(Q,H,Y,me){var Se=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Se!==null?null:V(Q,H,""+Y,me);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:return Y.key===Se?U(Q,H,Y,me):null;case G:return Y.key===Se?X(Q,H,Y,me):null;case Ke:return Se=Y._init,ae(Q,H,Se(Y._payload),me)}if(wt(Y)||J(Y))return Se!==null?null:le(Q,H,Y,me,null);zd(Q,Y)}return null}function ve(Q,H,Y,me,Se){if(typeof me=="string"&&me!==""||typeof me=="number")return Q=Q.get(Y)||null,V(H,Q,""+me,Se);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case B:return Q=Q.get(me.key===null?Y:me.key)||null,U(H,Q,me,Se);case G:return Q=Q.get(me.key===null?Y:me.key)||null,X(H,Q,me,Se);case Ke:var Ce=me._init;return ve(Q,H,Y,Ce(me._payload),Se)}if(wt(me)||J(me))return Q=Q.get(Y)||null,le(H,Q,me,Se,null);zd(H,me)}return null}function _e(Q,H,Y,me){for(var Se=null,Ce=null,Ae=H,De=H=0,Ht=null;Ae!==null&&De<Y.length;De++){Ae.index>De?(Ht=Ae,Ae=null):Ht=Ae.sibling;var Je=ae(Q,Ae,Y[De],me);if(Je===null){Ae===null&&(Ae=Ht);break}i&&Ae&&Je.alternate===null&&a(Q,Ae),H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je,Ae=Ht}if(De===Y.length)return d(Q,Ae),ut&&po(Q,De),Se;if(Ae===null){for(;De<Y.length;De++)Ae=de(Q,Y[De],me),Ae!==null&&(H=_(Ae,H,De),Ce===null?Se=Ae:Ce.sibling=Ae,Ce=Ae);return ut&&po(Q,De),Se}for(Ae=p(Q,Ae);De<Y.length;De++)Ht=ve(Ae,Q,De,Y[De],me),Ht!==null&&(i&&Ht.alternate!==null&&Ae.delete(Ht.key===null?De:Ht.key),H=_(Ht,H,De),Ce===null?Se=Ht:Ce.sibling=Ht,Ce=Ht);return i&&Ae.forEach(function(vi){return a(Q,vi)}),ut&&po(Q,De),Se}function Ee(Q,H,Y,me){var Se=J(Y);if(typeof Se!="function")throw Error(n(150));if(Y=Se.call(Y),Y==null)throw Error(n(151));for(var Ce=Se=null,Ae=H,De=H=0,Ht=null,Je=Y.next();Ae!==null&&!Je.done;De++,Je=Y.next()){Ae.index>De?(Ht=Ae,Ae=null):Ht=Ae.sibling;var vi=ae(Q,Ae,Je.value,me);if(vi===null){Ae===null&&(Ae=Ht);break}i&&Ae&&vi.alternate===null&&a(Q,Ae),H=_(vi,H,De),Ce===null?Se=vi:Ce.sibling=vi,Ce=vi,Ae=Ht}if(Je.done)return d(Q,Ae),ut&&po(Q,De),Se;if(Ae===null){for(;!Je.done;De++,Je=Y.next())Je=de(Q,Je.value,me),Je!==null&&(H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je);return ut&&po(Q,De),Se}for(Ae=p(Q,Ae);!Je.done;De++,Je=Y.next())Je=ve(Ae,Q,De,Je.value,me),Je!==null&&(i&&Je.alternate!==null&&Ae.delete(Je.key===null?De:Je.key),H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je);return i&&Ae.forEach(function(vR){return a(Q,vR)}),ut&&po(Q,De),Se}function Ct(Q,H,Y,me){if(typeof Y=="object"&&Y!==null&&Y.type===I&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:e:{for(var Se=Y.key,Ce=H;Ce!==null;){if(Ce.key===Se){if(Se=Y.type,Se===I){if(Ce.tag===7){d(Q,Ce.sibling),H=x(Ce,Y.props.children),H.return=Q,Q=H;break e}}else if(Ce.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ke&&Qx(Se)===Ce.type){d(Q,Ce.sibling),H=x(Ce,Y.props),H.ref=Ic(Q,Ce,Y),H.return=Q,Q=H;break e}d(Q,Ce);break}else a(Q,Ce);Ce=Ce.sibling}Y.type===I?(H=Eo(Y.props.children,Q.mode,me,Y.key),H.return=Q,Q=H):(me=fh(Y.type,Y.key,Y.props,null,Q.mode,me),me.ref=Ic(Q,H,Y),me.return=Q,Q=me)}return C(Q);case G:e:{for(Ce=Y.key;H!==null;){if(H.key===Ce)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){d(Q,H.sibling),H=x(H,Y.children||[]),H.return=Q,Q=H;break e}else{d(Q,H);break}else a(Q,H);H=H.sibling}H=Kp(Y,Q.mode,me),H.return=Q,Q=H}return C(Q);case Ke:return Ce=Y._init,Ct(Q,H,Ce(Y._payload),me)}if(wt(Y))return _e(Q,H,Y,me);if(J(Y))return Ee(Q,H,Y,me);zd(Q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,H!==null&&H.tag===6?(d(Q,H.sibling),H=x(H,Y),H.return=Q,Q=H):(d(Q,H),H=Gp(Y,Q.mode,me),H.return=Q,Q=H),C(Q)):d(Q,H)}return Ct}var Ma=Jx(!0),Yx=Jx(!1),Wd=ai(null),Hd=null,Va=null,rp=null;function sp(){rp=Va=Hd=null}function ip(i){var a=Wd.current;lt(Wd),i._currentValue=a}function op(i,a,d){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===d)break;i=i.return}}function $a(i,a){Hd=i,rp=Va=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Cn=!0),i.firstContext=null)}function sr(i){var a=i._currentValue;if(rp!==i)if(i={context:i,memoizedValue:a,next:null},Va===null){if(Hd===null)throw Error(n(308));Va=i,Hd.dependencies={lanes:0,firstContext:i}}else Va=Va.next=i;return a}var go=null;function ap(i){go===null?go=[i]:go.push(i)}function Xx(i,a,d,p){var x=a.interleaved;return x===null?(d.next=d,ap(a)):(d.next=x.next,x.next=d),a.interleaved=d,Cs(i,p)}function Cs(i,a){i.lanes|=a;var d=i.alternate;for(d!==null&&(d.lanes|=a),d=i,i=i.return;i!==null;)i.childLanes|=a,d=i.alternate,d!==null&&(d.childLanes|=a),d=i,i=i.return;return d.tag===3?d.stateNode:null}var ui=!1;function lp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zx(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function As(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function di(i,a,d){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Qe&2)!==0){var x=p.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),p.pending=a,Cs(i,d)}return x=p.interleaved,x===null?(a.next=a,ap(p)):(a.next=x.next,x.next=a),p.interleaved=a,Cs(i,d)}function qd(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,d|=p,a.lanes=d,ei(i,d)}}function ew(i,a){var d=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var x=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var C={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?x=_=C:_=_.next=C,d=d.next}while(d!==null);_===null?x=_=a:_=_.next=a}else x=_=a;d={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:p.shared,effects:p.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}function Gd(i,a,d,p){var x=i.updateQueue;ui=!1;var _=x.firstBaseUpdate,C=x.lastBaseUpdate,V=x.shared.pending;if(V!==null){x.shared.pending=null;var U=V,X=U.next;U.next=null,C===null?_=X:C.next=X,C=U;var le=i.alternate;le!==null&&(le=le.updateQueue,V=le.lastBaseUpdate,V!==C&&(V===null?le.firstBaseUpdate=X:V.next=X,le.lastBaseUpdate=U))}if(_!==null){var de=x.baseState;C=0,le=X=U=null,V=_;do{var ae=V.lane,ve=V.eventTime;if((p&ae)===ae){le!==null&&(le=le.next={eventTime:ve,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var _e=i,Ee=V;switch(ae=a,ve=d,Ee.tag){case 1:if(_e=Ee.payload,typeof _e=="function"){de=_e.call(ve,de,ae);break e}de=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ee.payload,ae=typeof _e=="function"?_e.call(ve,de,ae):_e,ae==null)break e;de=te({},de,ae);break e;case 2:ui=!0}}V.callback!==null&&V.lane!==0&&(i.flags|=64,ae=x.effects,ae===null?x.effects=[V]:ae.push(V))}else ve={eventTime:ve,lane:ae,tag:V.tag,payload:V.payload,callback:V.callback,next:null},le===null?(X=le=ve,U=de):le=le.next=ve,C|=ae;if(V=V.next,V===null){if(V=x.shared.pending,V===null)break;ae=V,V=ae.next,ae.next=null,x.lastBaseUpdate=ae,x.shared.pending=null}}while(!0);if(le===null&&(U=de),x.baseState=U,x.firstBaseUpdate=X,x.lastBaseUpdate=le,a=x.shared.interleaved,a!==null){x=a;do C|=x.lane,x=x.next;while(x!==a)}else _===null&&(x.shared.lanes=0);xo|=C,i.lanes=C,i.memoizedState=de}}function tw(i,a,d){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],x=p.callback;if(x!==null){if(p.callback=null,p=d,typeof x!="function")throw Error(n(191,x));x.call(p)}}}var Rc={},Xr=ai(Rc),Nc=ai(Rc),jc=ai(Rc);function yo(i){if(i===Rc)throw Error(n(174));return i}function cp(i,a){switch(st(jc,a),st(Nc,i),st(Xr,Rc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ot(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Ot(a,i)}lt(Xr),st(Xr,a)}function Fa(){lt(Xr),lt(Nc),lt(jc)}function nw(i){yo(jc.current);var a=yo(Xr.current),d=Ot(a,i.type);a!==d&&(st(Nc,i),st(Xr,d))}function up(i){Nc.current===i&&(lt(Xr),lt(Nc))}var mt=ai(0);function Kd(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var dp=[];function hp(){for(var i=0;i<dp.length;i++)dp[i]._workInProgressVersionPrimary=null;dp.length=0}var Qd=z.ReactCurrentDispatcher,fp=z.ReactCurrentBatchConfig,vo=0,pt=null,Mt=null,zt=null,Jd=!1,Dc=!1,Oc=0,FI=0;function ln(){throw Error(n(321))}function mp(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!Ar(i[d],a[d]))return!1;return!0}function pp(i,a,d,p,x,_){if(vo=_,pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Qd.current=i===null||i.memoizedState===null?WI:HI,i=d(p,x),Dc){_=0;do{if(Dc=!1,Oc=0,25<=_)throw Error(n(301));_+=1,zt=Mt=null,a.updateQueue=null,Qd.current=qI,i=d(p,x)}while(Dc)}if(Qd.current=Zd,a=Mt!==null&&Mt.next!==null,vo=0,zt=Mt=pt=null,Jd=!1,a)throw Error(n(300));return i}function gp(){var i=Oc!==0;return Oc=0,i}function Zr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?pt.memoizedState=zt=i:zt=zt.next=i,zt}function ir(){if(Mt===null){var i=pt.alternate;i=i!==null?i.memoizedState:null}else i=Mt.next;var a=zt===null?pt.memoizedState:zt.next;if(a!==null)zt=a,Mt=i;else{if(i===null)throw Error(n(310));Mt=i,i={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},zt===null?pt.memoizedState=zt=i:zt=zt.next=i}return zt}function Lc(i,a){return typeof a=="function"?a(i):a}function yp(i){var a=ir(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var p=Mt,x=p.baseQueue,_=d.pending;if(_!==null){if(x!==null){var C=x.next;x.next=_.next,_.next=C}p.baseQueue=x=_,d.pending=null}if(x!==null){_=x.next,p=p.baseState;var V=C=null,U=null,X=_;do{var le=X.lane;if((vo&le)===le)U!==null&&(U=U.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:i(p,X.action);else{var de={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};U===null?(V=U=de,C=p):U=U.next=de,pt.lanes|=le,xo|=le}X=X.next}while(X!==null&&X!==_);U===null?C=p:U.next=V,Ar(p,a.memoizedState)||(Cn=!0),a.memoizedState=p,a.baseState=C,a.baseQueue=U,d.lastRenderedState=p}if(i=d.interleaved,i!==null){x=i;do _=x.lane,pt.lanes|=_,xo|=_,x=x.next;while(x!==i)}else x===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function vp(i){var a=ir(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var p=d.dispatch,x=d.pending,_=a.memoizedState;if(x!==null){d.pending=null;var C=x=x.next;do _=i(_,C.action),C=C.next;while(C!==x);Ar(_,a.memoizedState)||(Cn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),d.lastRenderedState=_}return[_,p]}function rw(){}function sw(i,a){var d=pt,p=ir(),x=a(),_=!Ar(p.memoizedState,x);if(_&&(p.memoizedState=x,Cn=!0),p=p.queue,xp(aw.bind(null,d,p,i),[i]),p.getSnapshot!==a||_||zt!==null&&zt.memoizedState.tag&1){if(d.flags|=2048,Mc(9,ow.bind(null,d,p,x,a),void 0,null),Wt===null)throw Error(n(349));(vo&30)!==0||iw(d,a,x)}return x}function iw(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function ow(i,a,d,p){a.value=d,a.getSnapshot=p,lw(a)&&cw(i)}function aw(i,a,d){return d(function(){lw(a)&&cw(i)})}function lw(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!Ar(i,d)}catch{return!0}}function cw(i){var a=Cs(i,1);a!==null&&jr(a,i,1,-1)}function uw(i){var a=Zr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:i},a.queue=i,i=i.dispatch=zI.bind(null,pt,i),[a.memoizedState,i]}function Mc(i,a,d,p){return i={tag:i,create:a,destroy:d,deps:p,next:null},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.lastEffect=i.next=i):(d=a.lastEffect,d===null?a.lastEffect=i.next=i:(p=d.next,d.next=i,i.next=p,a.lastEffect=i)),i}function dw(){return ir().memoizedState}function Yd(i,a,d,p){var x=Zr();pt.flags|=i,x.memoizedState=Mc(1|a,d,void 0,p===void 0?null:p)}function Xd(i,a,d,p){var x=ir();p=p===void 0?null:p;var _=void 0;if(Mt!==null){var C=Mt.memoizedState;if(_=C.destroy,p!==null&&mp(p,C.deps)){x.memoizedState=Mc(a,d,_,p);return}}pt.flags|=i,x.memoizedState=Mc(1|a,d,_,p)}function hw(i,a){return Yd(8390656,8,i,a)}function xp(i,a){return Xd(2048,8,i,a)}function fw(i,a){return Xd(4,2,i,a)}function mw(i,a){return Xd(4,4,i,a)}function pw(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function gw(i,a,d){return d=d!=null?d.concat([i]):null,Xd(4,4,pw.bind(null,a,i),d)}function wp(){}function yw(i,a){var d=ir();a=a===void 0?null:a;var p=d.memoizedState;return p!==null&&a!==null&&mp(a,p[1])?p[0]:(d.memoizedState=[i,a],i)}function vw(i,a){var d=ir();a=a===void 0?null:a;var p=d.memoizedState;return p!==null&&a!==null&&mp(a,p[1])?p[0]:(i=i(),d.memoizedState=[i,a],i)}function xw(i,a,d){return(vo&21)===0?(i.baseState&&(i.baseState=!1,Cn=!0),i.memoizedState=d):(Ar(d,a)||(d=oo(),pt.lanes|=d,xo|=d,i.baseState=!0),a)}function UI(i,a){var d=He;He=d!==0&&4>d?d:4,i(!0);var p=fp.transition;fp.transition={};try{i(!1),a()}finally{He=d,fp.transition=p}}function ww(){return ir().memoizedState}function BI(i,a,d){var p=pi(i);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},_w(i))bw(a,d);else if(d=Xx(i,a,d,p),d!==null){var x=wn();jr(d,i,p,x),Ew(d,a,p)}}function zI(i,a,d){var p=pi(i),x={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(_w(i))bw(a,x);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,V=_(C,d);if(x.hasEagerState=!0,x.eagerState=V,Ar(V,C)){var U=a.interleaved;U===null?(x.next=x,ap(a)):(x.next=U.next,U.next=x),a.interleaved=x;return}}catch{}finally{}d=Xx(i,a,x,p),d!==null&&(x=wn(),jr(d,i,p,x),Ew(d,a,p))}}function _w(i){var a=i.alternate;return i===pt||a!==null&&a===pt}function bw(i,a){Dc=Jd=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function Ew(i,a,d){if((d&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,d|=p,a.lanes=d,ei(i,d)}}var Zd={readContext:sr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},WI={readContext:sr,useCallback:function(i,a){return Zr().memoizedState=[i,a===void 0?null:a],i},useContext:sr,useEffect:hw,useImperativeHandle:function(i,a,d){return d=d!=null?d.concat([i]):null,Yd(4194308,4,pw.bind(null,a,i),d)},useLayoutEffect:function(i,a){return Yd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Yd(4,2,i,a)},useMemo:function(i,a){var d=Zr();return a=a===void 0?null:a,i=i(),d.memoizedState=[i,a],i},useReducer:function(i,a,d){var p=Zr();return a=d!==void 0?d(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=BI.bind(null,pt,i),[p.memoizedState,i]},useRef:function(i){var a=Zr();return i={current:i},a.memoizedState=i},useState:uw,useDebugValue:wp,useDeferredValue:function(i){return Zr().memoizedState=i},useTransition:function(){var i=uw(!1),a=i[0];return i=UI.bind(null,i[1]),Zr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,d){var p=pt,x=Zr();if(ut){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),Wt===null)throw Error(n(349));(vo&30)!==0||iw(p,a,d)}x.memoizedState=d;var _={value:d,getSnapshot:a};return x.queue=_,hw(aw.bind(null,p,_,i),[i]),p.flags|=2048,Mc(9,ow.bind(null,p,_,d,a),void 0,null),d},useId:function(){var i=Zr(),a=Wt.identifierPrefix;if(ut){var d=ks,p=Ss;d=(p&~(1<<32-yn(p)-1)).toString(32)+d,a=":"+a+"R"+d,d=Oc++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=FI++,a=":"+a+"r"+d.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},HI={readContext:sr,useCallback:yw,useContext:sr,useEffect:xp,useImperativeHandle:gw,useInsertionEffect:fw,useLayoutEffect:mw,useMemo:vw,useReducer:yp,useRef:dw,useState:function(){return yp(Lc)},useDebugValue:wp,useDeferredValue:function(i){var a=ir();return xw(a,Mt.memoizedState,i)},useTransition:function(){var i=yp(Lc)[0],a=ir().memoizedState;return[i,a]},useMutableSource:rw,useSyncExternalStore:sw,useId:ww,unstable_isNewReconciler:!1},qI={readContext:sr,useCallback:yw,useContext:sr,useEffect:xp,useImperativeHandle:gw,useInsertionEffect:fw,useLayoutEffect:mw,useMemo:vw,useReducer:vp,useRef:dw,useState:function(){return vp(Lc)},useDebugValue:wp,useDeferredValue:function(i){var a=ir();return Mt===null?a.memoizedState=i:xw(a,Mt.memoizedState,i)},useTransition:function(){var i=vp(Lc)[0],a=ir().memoizedState;return[i,a]},useMutableSource:rw,useSyncExternalStore:sw,useId:ww,unstable_isNewReconciler:!1};function Ir(i,a){if(i&&i.defaultProps){a=te({},a),i=i.defaultProps;for(var d in i)a[d]===void 0&&(a[d]=i[d]);return a}return a}function _p(i,a,d,p){a=i.memoizedState,d=d(p,a),d=d==null?a:te({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var eh={isMounted:function(i){return(i=i._reactInternals)?_r(i)===i:!1},enqueueSetState:function(i,a,d){i=i._reactInternals;var p=wn(),x=pi(i),_=As(p,x);_.payload=a,d!=null&&(_.callback=d),a=di(i,_,x),a!==null&&(jr(a,i,x,p),qd(a,i,x))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var p=wn(),x=pi(i),_=As(p,x);_.tag=1,_.payload=a,d!=null&&(_.callback=d),a=di(i,_,x),a!==null&&(jr(a,i,x,p),qd(a,i,x))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=wn(),p=pi(i),x=As(d,p);x.tag=2,a!=null&&(x.callback=a),a=di(i,x,p),a!==null&&(jr(a,i,p,d),qd(a,i,p))}};function Tw(i,a,d,p,x,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,_,C):a.prototype&&a.prototype.isPureReactComponent?!Ec(d,p)||!Ec(x,_):!0}function Sw(i,a,d){var p=!1,x=li,_=a.contextType;return typeof _=="object"&&_!==null?_=sr(_):(x=kn(a)?fo:an.current,p=a.contextTypes,_=(p=p!=null)?ja(i,x):li),a=new a(d,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=eh,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=x,i.__reactInternalMemoizedMaskedChildContext=_),a}function kw(i,a,d,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,p),a.state!==i&&eh.enqueueReplaceState(a,a.state,null)}function bp(i,a,d,p){var x=i.stateNode;x.props=d,x.state=i.memoizedState,x.refs={},lp(i);var _=a.contextType;typeof _=="object"&&_!==null?x.context=sr(_):(_=kn(a)?fo:an.current,x.context=ja(i,_)),x.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(_p(i,a,_,d),x.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&eh.enqueueReplaceState(x,x.state,null),Gd(i,d,x,p),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308)}function Ua(i,a){try{var d="",p=a;do d+=je(p),p=p.return;while(p);var x=d}catch(_){x=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:x,digest:null}}function Ep(i,a,d){return{value:i,source:null,stack:d??null,digest:a??null}}function Tp(i,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var GI=typeof WeakMap=="function"?WeakMap:Map;function Cw(i,a,d){d=As(-1,d),d.tag=3,d.payload={element:null};var p=a.value;return d.callback=function(){ah||(ah=!0,$p=p),Tp(i,a)},d}function Aw(i,a,d){d=As(-1,d),d.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var x=a.value;d.payload=function(){return p(x)},d.callback=function(){Tp(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){Tp(i,a),typeof p!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),d}function Pw(i,a,d){var p=i.pingCache;if(p===null){p=i.pingCache=new GI;var x=new Set;p.set(a,x)}else x=p.get(a),x===void 0&&(x=new Set,p.set(a,x));x.has(d)||(x.add(d),i=aR.bind(null,i,a,d),a.then(i,i))}function Iw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function Rw(i,a,d,p,x){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=As(-1,1),a.tag=2,di(d,a,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=x,i)}var KI=z.ReactCurrentOwner,Cn=!1;function xn(i,a,d,p){a.child=i===null?Yx(a,null,d,p):Ma(a,i.child,d,p)}function Nw(i,a,d,p,x){d=d.render;var _=a.ref;return $a(a,x),p=pp(i,a,d,p,_,x),d=gp(),i!==null&&!Cn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~x,Ps(i,a,x)):(ut&&d&&Xm(a),a.flags|=1,xn(i,a,p,x),a.child)}function jw(i,a,d,p,x){if(i===null){var _=d.type;return typeof _=="function"&&!qp(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=_,Dw(i,a,_,p,x)):(i=fh(d.type,null,p,a,a.mode,x),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&x)===0){var C=_.memoizedProps;if(d=d.compare,d=d!==null?d:Ec,d(C,p)&&i.ref===a.ref)return Ps(i,a,x)}return a.flags|=1,i=yi(_,p),i.ref=a.ref,i.return=a,a.child=i}function Dw(i,a,d,p,x){if(i!==null){var _=i.memoizedProps;if(Ec(_,p)&&i.ref===a.ref)if(Cn=!1,a.pendingProps=p=_,(i.lanes&x)!==0)(i.flags&131072)!==0&&(Cn=!0);else return a.lanes=i.lanes,Ps(i,a,x)}return Sp(i,a,d,p,x)}function Ow(i,a,d){var p=a.pendingProps,x=p.children,_=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(za,qn),qn|=d;else{if((d&1073741824)===0)return i=_!==null?_.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,st(za,qn),qn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:d,st(za,qn),qn|=p}else _!==null?(p=_.baseLanes|d,a.memoizedState=null):p=d,st(za,qn),qn|=p;return xn(i,a,x,d),a.child}function Lw(i,a){var d=a.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Sp(i,a,d,p,x){var _=kn(d)?fo:an.current;return _=ja(a,_),$a(a,x),d=pp(i,a,d,p,_,x),p=gp(),i!==null&&!Cn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~x,Ps(i,a,x)):(ut&&p&&Xm(a),a.flags|=1,xn(i,a,d,x),a.child)}function Mw(i,a,d,p,x){if(kn(d)){var _=!0;Vd(a)}else _=!1;if($a(a,x),a.stateNode===null)nh(i,a),Sw(a,d,p),bp(a,d,p,x),p=!0;else if(i===null){var C=a.stateNode,V=a.memoizedProps;C.props=V;var U=C.context,X=d.contextType;typeof X=="object"&&X!==null?X=sr(X):(X=kn(d)?fo:an.current,X=ja(a,X));var le=d.getDerivedStateFromProps,de=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==p||U!==X)&&kw(a,C,p,X),ui=!1;var ae=a.memoizedState;C.state=ae,Gd(a,p,C,x),U=a.memoizedState,V!==p||ae!==U||Sn.current||ui?(typeof le=="function"&&(_p(a,d,le,p),U=a.memoizedState),(V=ui||Tw(a,d,V,p,ae,U,X))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=U),C.props=p,C.state=U,C.context=X,p=V):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{C=a.stateNode,Zx(i,a),V=a.memoizedProps,X=a.type===a.elementType?V:Ir(a.type,V),C.props=X,de=a.pendingProps,ae=C.context,U=d.contextType,typeof U=="object"&&U!==null?U=sr(U):(U=kn(d)?fo:an.current,U=ja(a,U));var ve=d.getDerivedStateFromProps;(le=typeof ve=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==de||ae!==U)&&kw(a,C,p,U),ui=!1,ae=a.memoizedState,C.state=ae,Gd(a,p,C,x);var _e=a.memoizedState;V!==de||ae!==_e||Sn.current||ui?(typeof ve=="function"&&(_p(a,d,ve,p),_e=a.memoizedState),(X=ui||Tw(a,d,X,p,ae,_e,U)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,_e,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,_e,U)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||V===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=_e),C.props=p,C.state=_e,C.context=U,p=X):(typeof C.componentDidUpdate!="function"||V===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),p=!1)}return kp(i,a,d,p,_,x)}function kp(i,a,d,p,x,_){Lw(i,a);var C=(a.flags&128)!==0;if(!p&&!C)return x&&Bx(a,d,!1),Ps(i,a,_);p=a.stateNode,KI.current=a;var V=C&&typeof d.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&C?(a.child=Ma(a,i.child,null,_),a.child=Ma(a,null,V,_)):xn(i,a,V,_),a.memoizedState=p.state,x&&Bx(a,d,!0),a.child}function Vw(i){var a=i.stateNode;a.pendingContext?Fx(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Fx(i,a.context,!1),cp(i,a.containerInfo)}function $w(i,a,d,p,x){return La(),np(x),a.flags|=256,xn(i,a,d,p),a.child}var Cp={dehydrated:null,treeContext:null,retryLane:0};function Ap(i){return{baseLanes:i,cachePool:null,transitions:null}}function Fw(i,a,d){var p=a.pendingProps,x=mt.current,_=!1,C=(a.flags&128)!==0,V;if((V=C)||(V=i!==null&&i.memoizedState===null?!1:(x&2)!==0),V?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(x|=1),st(mt,x&1),i===null)return tp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=p.children,i=p.fallback,_?(p=a.mode,_=a.child,C={mode:"hidden",children:C},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=C):_=mh(C,p,0,null),i=Eo(i,p,d,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=Ap(d),a.memoizedState=Cp,i):Pp(a,C));if(x=i.memoizedState,x!==null&&(V=x.dehydrated,V!==null))return QI(i,a,C,p,V,x,d);if(_){_=p.fallback,C=a.mode,x=i.child,V=x.sibling;var U={mode:"hidden",children:p.children};return(C&1)===0&&a.child!==x?(p=a.child,p.childLanes=0,p.pendingProps=U,a.deletions=null):(p=yi(x,U),p.subtreeFlags=x.subtreeFlags&14680064),V!==null?_=yi(V,_):(_=Eo(_,C,d,null),_.flags|=2),_.return=a,p.return=a,p.sibling=_,a.child=p,p=_,_=a.child,C=i.child.memoizedState,C=C===null?Ap(d):{baseLanes:C.baseLanes|d,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=i.childLanes&~d,a.memoizedState=Cp,p}return _=i.child,i=_.sibling,p=yi(_,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=d),p.return=a,p.sibling=null,i!==null&&(d=a.deletions,d===null?(a.deletions=[i],a.flags|=16):d.push(i)),a.child=p,a.memoizedState=null,p}function Pp(i,a){return a=mh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function th(i,a,d,p){return p!==null&&np(p),Ma(a,i.child,null,d),i=Pp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function QI(i,a,d,p,x,_,C){if(d)return a.flags&256?(a.flags&=-257,p=Ep(Error(n(422))),th(i,a,C,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=p.fallback,x=a.mode,p=mh({mode:"visible",children:p.children},x,0,null),_=Eo(_,x,C,null),_.flags|=2,p.return=a,_.return=a,p.sibling=_,a.child=p,(a.mode&1)!==0&&Ma(a,i.child,null,C),a.child.memoizedState=Ap(C),a.memoizedState=Cp,_);if((a.mode&1)===0)return th(i,a,C,null);if(x.data==="$!"){if(p=x.nextSibling&&x.nextSibling.dataset,p)var V=p.dgst;return p=V,_=Error(n(419)),p=Ep(_,p,void 0),th(i,a,C,p)}if(V=(C&i.childLanes)!==0,Cn||V){if(p=Wt,p!==null){switch(C&-C){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(p.suspendedLanes|C))!==0?0:x,x!==0&&x!==_.retryLane&&(_.retryLane=x,Cs(i,x),jr(p,i,x,-1))}return Hp(),p=Ep(Error(n(421))),th(i,a,C,p)}return x.data==="$?"?(a.flags|=128,a.child=i.child,a=lR.bind(null,i),x._reactRetry=a,null):(i=_.treeContext,Hn=oi(x.nextSibling),Wn=a,ut=!0,Pr=null,i!==null&&(nr[rr++]=Ss,nr[rr++]=ks,nr[rr++]=mo,Ss=i.id,ks=i.overflow,mo=a),a=Pp(a,p.children),a.flags|=4096,a)}function Uw(i,a,d){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),op(i.return,a,d)}function Ip(i,a,d,p,x){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:x}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=d,_.tailMode=x)}function Bw(i,a,d){var p=a.pendingProps,x=p.revealOrder,_=p.tail;if(xn(i,a,p.children,d),p=mt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Uw(i,d,a);else if(i.tag===19)Uw(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(st(mt,p),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(d=a.child,x=null;d!==null;)i=d.alternate,i!==null&&Kd(i)===null&&(x=d),d=d.sibling;d=x,d===null?(x=a.child,a.child=null):(x=d.sibling,d.sibling=null),Ip(a,!1,x,d,_);break;case"backwards":for(d=null,x=a.child,a.child=null;x!==null;){if(i=x.alternate,i!==null&&Kd(i)===null){a.child=x;break}i=x.sibling,x.sibling=d,d=x,x=i}Ip(a,!0,d,null,_);break;case"together":Ip(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function nh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ps(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),xo|=a.lanes,(d&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,d=yi(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=yi(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function JI(i,a,d){switch(a.tag){case 3:Vw(a),La();break;case 5:nw(a);break;case 1:kn(a.type)&&Vd(a);break;case 4:cp(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,x=a.memoizedProps.value;st(Wd,p._currentValue),p._currentValue=x;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(st(mt,mt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Fw(i,a,d):(st(mt,mt.current&1),i=Ps(i,a,d),i!==null?i.sibling:null);st(mt,mt.current&1);break;case 19:if(p=(d&a.childLanes)!==0,(i.flags&128)!==0){if(p)return Bw(i,a,d);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),st(mt,mt.current),p)break;return null;case 22:case 23:return a.lanes=0,Ow(i,a,d)}return Ps(i,a,d)}var zw,Rp,Ww,Hw;zw=function(i,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Rp=function(){},Ww=function(i,a,d,p){var x=i.memoizedProps;if(x!==p){i=a.stateNode,yo(Xr.current);var _=null;switch(d){case"input":x=St(i,x),p=St(i,p),_=[];break;case"select":x=te({},x,{value:void 0}),p=te({},p,{value:void 0}),_=[];break;case"textarea":x=Qi(i,x),p=Qi(i,p),_=[];break;default:typeof x.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Od)}sc(d,p);var C;d=null;for(X in x)if(!p.hasOwnProperty(X)&&x.hasOwnProperty(X)&&x[X]!=null)if(X==="style"){var V=x[X];for(C in V)V.hasOwnProperty(C)&&(d||(d={}),d[C]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in p){var U=p[X];if(V=x!=null?x[X]:void 0,p.hasOwnProperty(X)&&U!==V&&(U!=null||V!=null))if(X==="style")if(V){for(C in V)!V.hasOwnProperty(C)||U&&U.hasOwnProperty(C)||(d||(d={}),d[C]="");for(C in U)U.hasOwnProperty(C)&&V[C]!==U[C]&&(d||(d={}),d[C]=U[C])}else d||(_||(_=[]),_.push(X,d)),d=U;else X==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,V=V?V.__html:void 0,U!=null&&V!==U&&(_=_||[]).push(X,U)):X==="children"?typeof U!="string"&&typeof U!="number"||(_=_||[]).push(X,""+U):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(U!=null&&X==="onScroll"&&at("scroll",i),_||V===U||(_=[])):(_=_||[]).push(X,U))}d&&(_=_||[]).push("style",d);var X=_;(a.updateQueue=X)&&(a.flags|=4)}},Hw=function(i,a,d,p){d!==p&&(a.flags|=4)};function Vc(i,a){if(!ut)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function cn(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,p=0;if(a)for(var x=i.child;x!==null;)d|=x.lanes|x.childLanes,p|=x.subtreeFlags&14680064,p|=x.flags&14680064,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)d|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=p,i.childLanes=d,a}function YI(i,a,d){var p=a.pendingProps;switch(Zm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(a),null;case 1:return kn(a.type)&&Md(),cn(a),null;case 3:return p=a.stateNode,Fa(),lt(Sn),lt(an),hp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Bd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Pr!==null&&(Bp(Pr),Pr=null))),Rp(i,a),cn(a),null;case 5:up(a);var x=yo(jc.current);if(d=a.type,i!==null&&a.stateNode!=null)Ww(i,a,d,p,x),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(n(166));return cn(a),null}if(i=yo(Xr.current),Bd(a)){p=a.stateNode,d=a.type;var _=a.memoizedProps;switch(p[Yr]=a,p[Ac]=_,i=(a.mode&1)!==0,d){case"dialog":at("cancel",p),at("close",p);break;case"iframe":case"object":case"embed":at("load",p);break;case"video":case"audio":for(x=0;x<Sc.length;x++)at(Sc[x],p);break;case"source":at("error",p);break;case"img":case"image":case"link":at("error",p),at("load",p);break;case"details":at("toggle",p);break;case"input":vr(p,_),at("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},at("invalid",p);break;case"textarea":ps(p,_),at("invalid",p)}sc(d,_),x=null;for(var C in _)if(_.hasOwnProperty(C)){var V=_[C];C==="children"?typeof V=="string"?p.textContent!==V&&(_.suppressHydrationWarning!==!0&&Dd(p.textContent,V,i),x=["children",V]):typeof V=="number"&&p.textContent!==""+V&&(_.suppressHydrationWarning!==!0&&Dd(p.textContent,V,i),x=["children",""+V]):s.hasOwnProperty(C)&&V!=null&&C==="onScroll"&&at("scroll",p)}switch(d){case"input":re(p),Ks(p,_,!0);break;case"textarea":re(p),Zl(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=Od)}p=x,a.updateQueue=p,p!==null&&(a.flags|=4)}else{C=x.nodeType===9?x:x.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Dt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(d,{is:p.is}):(i=C.createElement(d),d==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,d),i[Yr]=a,i[Ac]=p,zw(i,a,!1,!1),a.stateNode=i;e:{switch(C=ic(d,p),d){case"dialog":at("cancel",i),at("close",i),x=p;break;case"iframe":case"object":case"embed":at("load",i),x=p;break;case"video":case"audio":for(x=0;x<Sc.length;x++)at(Sc[x],i);x=p;break;case"source":at("error",i),x=p;break;case"img":case"image":case"link":at("error",i),at("load",i),x=p;break;case"details":at("toggle",i),x=p;break;case"input":vr(i,p),x=St(i,p),at("invalid",i);break;case"option":x=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},x=te({},p,{value:void 0}),at("invalid",i);break;case"textarea":ps(i,p),x=Qi(i,p),at("invalid",i);break;default:x=p}sc(d,x),V=x;for(_ in V)if(V.hasOwnProperty(_)){var U=V[_];_==="style"?nc(i,U):_==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&ec(i,U)):_==="children"?typeof U=="string"?(d!=="textarea"||U!=="")&&Qs(i,U):typeof U=="number"&&Qs(i,""+U):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?U!=null&&_==="onScroll"&&at("scroll",i):U!=null&&M(i,_,U,C))}switch(d){case"input":re(i),Ks(i,p,!1);break;case"textarea":re(i),Zl(i);break;case"option":p.value!=null&&i.setAttribute("value",""+he(p.value));break;case"select":i.multiple=!!p.multiple,_=p.value,_!=null?on(i,!!p.multiple,_,!1):p.defaultValue!=null&&on(i,!!p.multiple,p.defaultValue,!0);break;default:typeof x.onClick=="function"&&(i.onclick=Od)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return cn(a),null;case 6:if(i&&a.stateNode!=null)Hw(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(n(166));if(d=yo(jc.current),yo(Xr.current),Bd(a)){if(p=a.stateNode,d=a.memoizedProps,p[Yr]=a,(_=p.nodeValue!==d)&&(i=Wn,i!==null))switch(i.tag){case 3:Dd(p.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Dd(p.nodeValue,d,(i.mode&1)!==0)}_&&(a.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[Yr]=a,a.stateNode=p}return cn(a),null;case 13:if(lt(mt),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ut&&Hn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Kx(),La(),a.flags|=98560,_=!1;else if(_=Bd(a),p!==null&&p.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Yr]=a}else La(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;cn(a),_=!1}else Pr!==null&&(Bp(Pr),Pr=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(mt.current&1)!==0?Vt===0&&(Vt=3):Hp())),a.updateQueue!==null&&(a.flags|=4),cn(a),null);case 4:return Fa(),Rp(i,a),i===null&&kc(a.stateNode.containerInfo),cn(a),null;case 10:return ip(a.type._context),cn(a),null;case 17:return kn(a.type)&&Md(),cn(a),null;case 19:if(lt(mt),_=a.memoizedState,_===null)return cn(a),null;if(p=(a.flags&128)!==0,C=_.rendering,C===null)if(p)Vc(_,!1);else{if(Vt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=Kd(i),C!==null){for(a.flags|=128,Vc(_,!1),p=C.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=d,d=a.child;d!==null;)_=d,i=p,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,i=C.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return st(mt,mt.current&1|2),a.child}i=i.sibling}_.tail!==null&&rt()>Wa&&(a.flags|=128,p=!0,Vc(_,!1),a.lanes=4194304)}else{if(!p)if(i=Kd(C),i!==null){if(a.flags|=128,p=!0,d=i.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Vc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!ut)return cn(a),null}else 2*rt()-_.renderingStartTime>Wa&&d!==1073741824&&(a.flags|=128,p=!0,Vc(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(d=_.last,d!==null?d.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=rt(),a.sibling=null,d=mt.current,st(mt,p?d&1|2:d&1),a):(cn(a),null);case 22:case 23:return Wp(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(qn&1073741824)!==0&&(cn(a),a.subtreeFlags&6&&(a.flags|=8192)):cn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function XI(i,a){switch(Zm(a),a.tag){case 1:return kn(a.type)&&Md(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Fa(),lt(Sn),lt(an),hp(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return up(a),null;case 13:if(lt(mt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));La()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return lt(mt),null;case 4:return Fa(),null;case 10:return ip(a.type._context),null;case 22:case 23:return Wp(),null;case 24:return null;default:return null}}var rh=!1,un=!1,ZI=typeof WeakSet=="function"?WeakSet:Set,we=null;function Ba(i,a){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){_t(i,a,p)}else d.current=null}function Np(i,a,d){try{d()}catch(p){_t(i,a,p)}}var qw=!1;function eR(i,a){if(Wm=ri,i=Tx(),Lm(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var x=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var C=0,V=-1,U=-1,X=0,le=0,de=i,ae=null;t:for(;;){for(var ve;de!==d||x!==0&&de.nodeType!==3||(V=C+x),de!==_||p!==0&&de.nodeType!==3||(U=C+p),de.nodeType===3&&(C+=de.nodeValue.length),(ve=de.firstChild)!==null;)ae=de,de=ve;for(;;){if(de===i)break t;if(ae===d&&++X===x&&(V=C),ae===_&&++le===p&&(U=C),(ve=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=ve}d=V===-1||U===-1?null:{start:V,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(Hm={focusedElem:i,selectionRange:d},ri=!1,we=a;we!==null;)if(a=we,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,we=i;else for(;we!==null;){a=we;try{var _e=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var Ee=_e.memoizedProps,Ct=_e.memoizedState,Q=a.stateNode,H=Q.getSnapshotBeforeUpdate(a.elementType===a.type?Ee:Ir(a.type,Ee),Ct);Q.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(me){_t(a,a.return,me)}if(i=a.sibling,i!==null){i.return=a.return,we=i;break}we=a.return}return _e=qw,qw=!1,_e}function $c(i,a,d){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var x=p=p.next;do{if((x.tag&i)===i){var _=x.destroy;x.destroy=void 0,_!==void 0&&Np(a,d,_)}x=x.next}while(x!==p)}}function sh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&i)===i){var p=d.create;d.destroy=p()}d=d.next}while(d!==a)}}function jp(i){var a=i.ref;if(a!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof a=="function"?a(i):a.current=i}}function Gw(i){var a=i.alternate;a!==null&&(i.alternate=null,Gw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Yr],delete a[Ac],delete a[Qm],delete a[LI],delete a[MI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Kw(i){return i.tag===5||i.tag===3||i.tag===4}function Qw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Dp(i,a,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(i,a):d.insertBefore(i,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(i,d)):(a=d,a.appendChild(i)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Od));else if(p!==4&&(i=i.child,i!==null))for(Dp(i,a,d),i=i.sibling;i!==null;)Dp(i,a,d),i=i.sibling}function Op(i,a,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Op(i,a,d),i=i.sibling;i!==null;)Op(i,a,d),i=i.sibling}var Xt=null,Rr=!1;function hi(i,a,d){for(d=d.child;d!==null;)Jw(i,a,d),d=d.sibling}function Jw(i,a,d){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(so,d)}catch{}switch(d.tag){case 5:un||Ba(d,a);case 6:var p=Xt,x=Rr;Xt=null,hi(i,a,d),Xt=p,Rr=x,Xt!==null&&(Rr?(i=Xt,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Xt.removeChild(d.stateNode));break;case 18:Xt!==null&&(Rr?(i=Xt,d=d.stateNode,i.nodeType===8?Km(i.parentNode,d):i.nodeType===1&&Km(i,d),kr(i)):Km(Xt,d.stateNode));break;case 4:p=Xt,x=Rr,Xt=d.stateNode.containerInfo,Rr=!0,hi(i,a,d),Xt=p,Rr=x;break;case 0:case 11:case 14:case 15:if(!un&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){x=p=p.next;do{var _=x,C=_.destroy;_=_.tag,C!==void 0&&((_&2)!==0||(_&4)!==0)&&Np(d,a,C),x=x.next}while(x!==p)}hi(i,a,d);break;case 1:if(!un&&(Ba(d,a),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(V){_t(d,a,V)}hi(i,a,d);break;case 21:hi(i,a,d);break;case 22:d.mode&1?(un=(p=un)||d.memoizedState!==null,hi(i,a,d),un=p):hi(i,a,d);break;default:hi(i,a,d)}}function Yw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new ZI),a.forEach(function(p){var x=cR.bind(null,i,p);d.has(p)||(d.add(p),p.then(x,x))})}}function Nr(i,a){var d=a.deletions;if(d!==null)for(var p=0;p<d.length;p++){var x=d[p];try{var _=i,C=a,V=C;e:for(;V!==null;){switch(V.tag){case 5:Xt=V.stateNode,Rr=!1;break e;case 3:Xt=V.stateNode.containerInfo,Rr=!0;break e;case 4:Xt=V.stateNode.containerInfo,Rr=!0;break e}V=V.return}if(Xt===null)throw Error(n(160));Jw(_,C,x),Xt=null,Rr=!1;var U=x.alternate;U!==null&&(U.return=null),x.return=null}catch(X){_t(x,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Xw(a,i),a=a.sibling}function Xw(i,a){var d=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Nr(a,i),es(i),p&4){try{$c(3,i,i.return),sh(3,i)}catch(Ee){_t(i,i.return,Ee)}try{$c(5,i,i.return)}catch(Ee){_t(i,i.return,Ee)}}break;case 1:Nr(a,i),es(i),p&512&&d!==null&&Ba(d,d.return);break;case 5:if(Nr(a,i),es(i),p&512&&d!==null&&Ba(d,d.return),i.flags&32){var x=i.stateNode;try{Qs(x,"")}catch(Ee){_t(i,i.return,Ee)}}if(p&4&&(x=i.stateNode,x!=null)){var _=i.memoizedProps,C=d!==null?d.memoizedProps:_,V=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{V==="input"&&_.type==="radio"&&_.name!=null&&qs(x,_),ic(V,C);var X=ic(V,_);for(C=0;C<U.length;C+=2){var le=U[C],de=U[C+1];le==="style"?nc(x,de):le==="dangerouslySetInnerHTML"?ec(x,de):le==="children"?Qs(x,de):M(x,le,de,X)}switch(V){case"input":Gs(x,_);break;case"textarea":sa(x,_);break;case"select":var ae=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!_.multiple;var ve=_.value;ve!=null?on(x,!!_.multiple,ve,!1):ae!==!!_.multiple&&(_.defaultValue!=null?on(x,!!_.multiple,_.defaultValue,!0):on(x,!!_.multiple,_.multiple?[]:"",!1))}x[Ac]=_}catch(Ee){_t(i,i.return,Ee)}}break;case 6:if(Nr(a,i),es(i),p&4){if(i.stateNode===null)throw Error(n(162));x=i.stateNode,_=i.memoizedProps;try{x.nodeValue=_}catch(Ee){_t(i,i.return,Ee)}}break;case 3:if(Nr(a,i),es(i),p&4&&d!==null&&d.memoizedState.isDehydrated)try{kr(a.containerInfo)}catch(Ee){_t(i,i.return,Ee)}break;case 4:Nr(a,i),es(i);break;case 13:Nr(a,i),es(i),x=i.child,x.flags&8192&&(_=x.memoizedState!==null,x.stateNode.isHidden=_,!_||x.alternate!==null&&x.alternate.memoizedState!==null||(Vp=rt())),p&4&&Yw(i);break;case 22:if(le=d!==null&&d.memoizedState!==null,i.mode&1?(un=(X=un)||le,Nr(a,i),un=X):Nr(a,i),es(i),p&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!le&&(i.mode&1)!==0)for(we=i,le=i.child;le!==null;){for(de=we=le;we!==null;){switch(ae=we,ve=ae.child,ae.tag){case 0:case 11:case 14:case 15:$c(4,ae,ae.return);break;case 1:Ba(ae,ae.return);var _e=ae.stateNode;if(typeof _e.componentWillUnmount=="function"){p=ae,d=ae.return;try{a=p,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(Ee){_t(p,d,Ee)}}break;case 5:Ba(ae,ae.return);break;case 22:if(ae.memoizedState!==null){t_(de);continue}}ve!==null?(ve.return=ae,we=ve):t_(de)}le=le.sibling}e:for(le=null,de=i;;){if(de.tag===5){if(le===null){le=de;try{x=de.stateNode,X?(_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(V=de.stateNode,U=de.memoizedProps.style,C=U!=null&&U.hasOwnProperty("display")?U.display:null,V.style.display=tc("display",C))}catch(Ee){_t(i,i.return,Ee)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=X?"":de.memoizedProps}catch(Ee){_t(i,i.return,Ee)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===i)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===i)break e;for(;de.sibling===null;){if(de.return===null||de.return===i)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Nr(a,i),es(i),p&4&&Yw(i);break;case 21:break;default:Nr(a,i),es(i)}}function es(i){var a=i.flags;if(a&2){try{e:{for(var d=i.return;d!==null;){if(Kw(d)){var p=d;break e}d=d.return}throw Error(n(160))}switch(p.tag){case 5:var x=p.stateNode;p.flags&32&&(Qs(x,""),p.flags&=-33);var _=Qw(i);Op(i,_,x);break;case 3:case 4:var C=p.stateNode.containerInfo,V=Qw(i);Dp(i,V,C);break;default:throw Error(n(161))}}catch(U){_t(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function tR(i,a,d){we=i,Zw(i)}function Zw(i,a,d){for(var p=(i.mode&1)!==0;we!==null;){var x=we,_=x.child;if(x.tag===22&&p){var C=x.memoizedState!==null||rh;if(!C){var V=x.alternate,U=V!==null&&V.memoizedState!==null||un;V=rh;var X=un;if(rh=C,(un=U)&&!X)for(we=x;we!==null;)C=we,U=C.child,C.tag===22&&C.memoizedState!==null?n_(x):U!==null?(U.return=C,we=U):n_(x);for(;_!==null;)we=_,Zw(_),_=_.sibling;we=x,rh=V,un=X}e_(i)}else(x.subtreeFlags&8772)!==0&&_!==null?(_.return=x,we=_):e_(i)}}function e_(i){for(;we!==null;){var a=we;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:un||sh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!un)if(d===null)p.componentDidMount();else{var x=a.elementType===a.type?d.memoizedProps:Ir(a.type,d.memoizedProps);p.componentDidUpdate(x,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&tw(a,_,p);break;case 3:var C=a.updateQueue;if(C!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}tw(a,C,d)}break;case 5:var V=a.stateNode;if(d===null&&a.flags&4){d=V;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&d.focus();break;case"img":U.src&&(d.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&kr(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}un||a.flags&512&&jp(a)}catch(ae){_t(a,a.return,ae)}}if(a===i){we=null;break}if(d=a.sibling,d!==null){d.return=a.return,we=d;break}we=a.return}}function t_(i){for(;we!==null;){var a=we;if(a===i){we=null;break}var d=a.sibling;if(d!==null){d.return=a.return,we=d;break}we=a.return}}function n_(i){for(;we!==null;){var a=we;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{sh(4,a)}catch(U){_t(a,d,U)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var x=a.return;try{p.componentDidMount()}catch(U){_t(a,x,U)}}var _=a.return;try{jp(a)}catch(U){_t(a,_,U)}break;case 5:var C=a.return;try{jp(a)}catch(U){_t(a,C,U)}}}catch(U){_t(a,a.return,U)}if(a===i){we=null;break}var V=a.sibling;if(V!==null){V.return=a.return,we=V;break}we=a.return}}var nR=Math.ceil,ih=z.ReactCurrentDispatcher,Lp=z.ReactCurrentOwner,or=z.ReactCurrentBatchConfig,Qe=0,Wt=null,Rt=null,Zt=0,qn=0,za=ai(0),Vt=0,Fc=null,xo=0,oh=0,Mp=0,Uc=null,An=null,Vp=0,Wa=1/0,Is=null,ah=!1,$p=null,fi=null,lh=!1,mi=null,ch=0,Bc=0,Fp=null,uh=-1,dh=0;function wn(){return(Qe&6)!==0?rt():uh!==-1?uh:uh=rt()}function pi(i){return(i.mode&1)===0?1:(Qe&2)!==0&&Zt!==0?Zt&-Zt:$I.transition!==null?(dh===0&&(dh=oo()),dh):(i=He,i!==0||(i=window.event,i=i===void 0?16:gc(i.type)),i)}function jr(i,a,d,p){if(50<Bc)throw Bc=0,Fp=null,Error(n(185));Zs(i,d,p),((Qe&2)===0||i!==Wt)&&(i===Wt&&((Qe&2)===0&&(oh|=d),Vt===4&&gi(i,Zt)),Pn(i,p),d===1&&Qe===0&&(a.mode&1)===0&&(Wa=rt()+500,$d&&ci()))}function Pn(i,a){var d=i.callbackNode;vs(i,a);var p=io(i,i===Wt?Zt:0);if(p===0)d!==null&&dc(d),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(d!=null&&dc(d),a===1)i.tag===0?VI(s_.bind(null,i)):zx(s_.bind(null,i)),DI(function(){(Qe&6)===0&&ci()}),d=null;else{switch(ti(p)){case 1:d=ro;break;case 4:d=Js;break;case 16:d=Zn;break;case 536870912:d=dd;break;default:d=Zn}d=h_(d,r_.bind(null,i))}i.callbackPriority=a,i.callbackNode=d}}function r_(i,a){if(uh=-1,dh=0,(Qe&6)!==0)throw Error(n(327));var d=i.callbackNode;if(Ha()&&i.callbackNode!==d)return null;var p=io(i,i===Wt?Zt:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=hh(i,p);else{a=p;var x=Qe;Qe|=2;var _=o_();(Wt!==i||Zt!==a)&&(Is=null,Wa=rt()+500,_o(i,a));do try{iR();break}catch(V){i_(i,V)}while(!0);sp(),ih.current=_,Qe=x,Rt!==null?a=0:(Wt=null,Zt=0,a=Vt)}if(a!==0){if(a===2&&(x=Un(i),x!==0&&(p=x,a=Up(i,x))),a===1)throw d=Fc,_o(i,0),gi(i,p),Pn(i,rt()),d;if(a===6)gi(i,p);else{if(x=i.current.alternate,(p&30)===0&&!rR(x)&&(a=hh(i,p),a===2&&(_=Un(i),_!==0&&(p=_,a=Up(i,_))),a===1))throw d=Fc,_o(i,0),gi(i,p),Pn(i,rt()),d;switch(i.finishedWork=x,i.finishedLanes=p,a){case 0:case 1:throw Error(n(345));case 2:bo(i,An,Is);break;case 3:if(gi(i,p),(p&130023424)===p&&(a=Vp+500-rt(),10<a)){if(io(i,0)!==0)break;if(x=i.suspendedLanes,(x&p)!==p){wn(),i.pingedLanes|=i.suspendedLanes&x;break}i.timeoutHandle=Gm(bo.bind(null,i,An,Is),a);break}bo(i,An,Is);break;case 4:if(gi(i,p),(p&4194240)===p)break;for(a=i.eventTimes,x=-1;0<p;){var C=31-yn(p);_=1<<C,C=a[C],C>x&&(x=C),p&=~_}if(p=x,p=rt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*nR(p/1960))-p,10<p){i.timeoutHandle=Gm(bo.bind(null,i,An,Is),p);break}bo(i,An,Is);break;case 5:bo(i,An,Is);break;default:throw Error(n(329))}}}return Pn(i,rt()),i.callbackNode===d?r_.bind(null,i):null}function Up(i,a){var d=Uc;return i.current.memoizedState.isDehydrated&&(_o(i,a).flags|=256),i=hh(i,a),i!==2&&(a=An,An=d,a!==null&&Bp(a)),i}function Bp(i){An===null?An=i:An.push.apply(An,i)}function rR(i){for(var a=i;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var x=d[p],_=x.getSnapshot;x=x.value;try{if(!Ar(_(),x))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gi(i,a){for(a&=~Mp,a&=~oh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var d=31-yn(a),p=1<<d;i[d]=-1,a&=~p}}function s_(i){if((Qe&6)!==0)throw Error(n(327));Ha();var a=io(i,0);if((a&1)===0)return Pn(i,rt()),null;var d=hh(i,a);if(i.tag!==0&&d===2){var p=Un(i);p!==0&&(a=p,d=Up(i,p))}if(d===1)throw d=Fc,_o(i,0),gi(i,a),Pn(i,rt()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,bo(i,An,Is),Pn(i,rt()),null}function zp(i,a){var d=Qe;Qe|=1;try{return i(a)}finally{Qe=d,Qe===0&&(Wa=rt()+500,$d&&ci())}}function wo(i){mi!==null&&mi.tag===0&&(Qe&6)===0&&Ha();var a=Qe;Qe|=1;var d=or.transition,p=He;try{if(or.transition=null,He=1,i)return i()}finally{He=p,or.transition=d,Qe=a,(Qe&6)===0&&ci()}}function Wp(){qn=za.current,lt(za)}function _o(i,a){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,jI(d)),Rt!==null)for(d=Rt.return;d!==null;){var p=d;switch(Zm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Md();break;case 3:Fa(),lt(Sn),lt(an),hp();break;case 5:up(p);break;case 4:Fa();break;case 13:lt(mt);break;case 19:lt(mt);break;case 10:ip(p.type._context);break;case 22:case 23:Wp()}d=d.return}if(Wt=i,Rt=i=yi(i.current,null),Zt=qn=a,Vt=0,Fc=null,Mp=oh=xo=0,An=Uc=null,go!==null){for(a=0;a<go.length;a++)if(d=go[a],p=d.interleaved,p!==null){d.interleaved=null;var x=p.next,_=d.pending;if(_!==null){var C=_.next;_.next=x,p.next=C}d.pending=p}go=null}return i}function i_(i,a){do{var d=Rt;try{if(sp(),Qd.current=Zd,Jd){for(var p=pt.memoizedState;p!==null;){var x=p.queue;x!==null&&(x.pending=null),p=p.next}Jd=!1}if(vo=0,zt=Mt=pt=null,Dc=!1,Oc=0,Lp.current=null,d===null||d.return===null){Vt=1,Fc=a,Rt=null;break}e:{var _=i,C=d.return,V=d,U=a;if(a=Zt,V.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=U,le=V,de=le.tag;if((le.mode&1)===0&&(de===0||de===11||de===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var ve=Iw(C);if(ve!==null){ve.flags&=-257,Rw(ve,C,V,_,a),ve.mode&1&&Pw(_,X,a),a=ve,U=X;var _e=a.updateQueue;if(_e===null){var Ee=new Set;Ee.add(U),a.updateQueue=Ee}else _e.add(U);break e}else{if((a&1)===0){Pw(_,X,a),Hp();break e}U=Error(n(426))}}else if(ut&&V.mode&1){var Ct=Iw(C);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),Rw(Ct,C,V,_,a),np(Ua(U,V));break e}}_=U=Ua(U,V),Vt!==4&&(Vt=2),Uc===null?Uc=[_]:Uc.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var Q=Cw(_,U,a);ew(_,Q);break e;case 1:V=U;var H=_.type,Y=_.stateNode;if((_.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(fi===null||!fi.has(Y)))){_.flags|=65536,a&=-a,_.lanes|=a;var me=Aw(_,V,a);ew(_,me);break e}}_=_.return}while(_!==null)}l_(d)}catch(Se){a=Se,Rt===d&&d!==null&&(Rt=d=d.return);continue}break}while(!0)}function o_(){var i=ih.current;return ih.current=Zd,i===null?Zd:i}function Hp(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Wt===null||(xo&268435455)===0&&(oh&268435455)===0||gi(Wt,Zt)}function hh(i,a){var d=Qe;Qe|=2;var p=o_();(Wt!==i||Zt!==a)&&(Is=null,_o(i,a));do try{sR();break}catch(x){i_(i,x)}while(!0);if(sp(),Qe=d,ih.current=p,Rt!==null)throw Error(n(261));return Wt=null,Zt=0,Vt}function sR(){for(;Rt!==null;)a_(Rt)}function iR(){for(;Rt!==null&&!cd();)a_(Rt)}function a_(i){var a=d_(i.alternate,i,qn);i.memoizedProps=i.pendingProps,a===null?l_(i):Rt=a,Lp.current=null}function l_(i){var a=i;do{var d=a.alternate;if(i=a.return,(a.flags&32768)===0){if(d=YI(d,a,qn),d!==null){Rt=d;return}}else{if(d=XI(d,a),d!==null){d.flags&=32767,Rt=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Vt=6,Rt=null;return}}if(a=a.sibling,a!==null){Rt=a;return}Rt=a=i}while(a!==null);Vt===0&&(Vt=5)}function bo(i,a,d){var p=He,x=or.transition;try{or.transition=null,He=1,oR(i,a,d,p)}finally{or.transition=x,He=p}return null}function oR(i,a,d,p){do Ha();while(mi!==null);if((Qe&6)!==0)throw Error(n(327));d=i.finishedWork;var x=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=d.lanes|d.childLanes;if(tt(i,_),i===Wt&&(Rt=Wt=null,Zt=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||lh||(lh=!0,h_(Zn,function(){return Ha(),null})),_=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||_){_=or.transition,or.transition=null;var C=He;He=1;var V=Qe;Qe|=4,Lp.current=null,eR(i,d),Xw(d,i),kI(Hm),ri=!!Wm,Hm=Wm=null,i.current=d,tR(d),Am(),Qe=V,He=C,or.transition=_}else i.current=d;if(lh&&(lh=!1,mi=i,ch=x),_=i.pendingLanes,_===0&&(fi=null),hd(d.stateNode),Pn(i,rt()),a!==null)for(p=i.onRecoverableError,d=0;d<a.length;d++)x=a[d],p(x.value,{componentStack:x.stack,digest:x.digest});if(ah)throw ah=!1,i=$p,$p=null,i;return(ch&1)!==0&&i.tag!==0&&Ha(),_=i.pendingLanes,(_&1)!==0?i===Fp?Bc++:(Bc=0,Fp=i):Bc=0,ci(),null}function Ha(){if(mi!==null){var i=ti(ch),a=or.transition,d=He;try{if(or.transition=null,He=16>i?16:i,mi===null)var p=!1;else{if(i=mi,mi=null,ch=0,(Qe&6)!==0)throw Error(n(331));var x=Qe;for(Qe|=4,we=i.current;we!==null;){var _=we,C=_.child;if((we.flags&16)!==0){var V=_.deletions;if(V!==null){for(var U=0;U<V.length;U++){var X=V[U];for(we=X;we!==null;){var le=we;switch(le.tag){case 0:case 11:case 15:$c(8,le,_)}var de=le.child;if(de!==null)de.return=le,we=de;else for(;we!==null;){le=we;var ae=le.sibling,ve=le.return;if(Gw(le),le===X){we=null;break}if(ae!==null){ae.return=ve,we=ae;break}we=ve}}}var _e=_.alternate;if(_e!==null){var Ee=_e.child;if(Ee!==null){_e.child=null;do{var Ct=Ee.sibling;Ee.sibling=null,Ee=Ct}while(Ee!==null)}}we=_}}if((_.subtreeFlags&2064)!==0&&C!==null)C.return=_,we=C;else e:for(;we!==null;){if(_=we,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:$c(9,_,_.return)}var Q=_.sibling;if(Q!==null){Q.return=_.return,we=Q;break e}we=_.return}}var H=i.current;for(we=H;we!==null;){C=we;var Y=C.child;if((C.subtreeFlags&2064)!==0&&Y!==null)Y.return=C,we=Y;else e:for(C=H;we!==null;){if(V=we,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:sh(9,V)}}catch(Se){_t(V,V.return,Se)}if(V===C){we=null;break e}var me=V.sibling;if(me!==null){me.return=V.return,we=me;break e}we=V.return}}if(Qe=x,ci(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(so,i)}catch{}p=!0}return p}finally{He=d,or.transition=a}}return!1}function c_(i,a,d){a=Ua(d,a),a=Cw(i,a,1),i=di(i,a,1),a=wn(),i!==null&&(Zs(i,1,a),Pn(i,a))}function _t(i,a,d){if(i.tag===3)c_(i,i,d);else for(;a!==null;){if(a.tag===3){c_(a,i,d);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(fi===null||!fi.has(p))){i=Ua(d,i),i=Aw(a,i,1),a=di(a,i,1),i=wn(),a!==null&&(Zs(a,1,i),Pn(a,i));break}}a=a.return}}function aR(i,a,d){var p=i.pingCache;p!==null&&p.delete(a),a=wn(),i.pingedLanes|=i.suspendedLanes&d,Wt===i&&(Zt&d)===d&&(Vt===4||Vt===3&&(Zt&130023424)===Zt&&500>rt()-Vp?_o(i,0):Mp|=d),Pn(i,a)}function u_(i,a){a===0&&((i.mode&1)===0?a=1:(a=ma,ma<<=1,(ma&130023424)===0&&(ma=4194304)));var d=wn();i=Cs(i,a),i!==null&&(Zs(i,a,d),Pn(i,d))}function lR(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),u_(i,d)}function cR(i,a){var d=0;switch(i.tag){case 13:var p=i.stateNode,x=i.memoizedState;x!==null&&(d=x.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(a),u_(i,d)}var d_;d_=function(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps||Sn.current)Cn=!0;else{if((i.lanes&d)===0&&(a.flags&128)===0)return Cn=!1,JI(i,a,d);Cn=(i.flags&131072)!==0}else Cn=!1,ut&&(a.flags&1048576)!==0&&Wx(a,Ud,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;nh(i,a),i=a.pendingProps;var x=ja(a,an.current);$a(a,d),x=pp(null,a,p,i,x,d);var _=gp();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,kn(p)?(_=!0,Vd(a)):_=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,lp(a),x.updater=eh,a.stateNode=x,x._reactInternals=a,bp(a,p,i,d),a=kp(null,a,p,!0,_,d)):(a.tag=0,ut&&_&&Xm(a),xn(null,a,x,d),a=a.child),a;case 16:p=a.elementType;e:{switch(nh(i,a),i=a.pendingProps,x=p._init,p=x(p._payload),a.type=p,x=a.tag=dR(p),i=Ir(p,i),x){case 0:a=Sp(null,a,p,i,d);break e;case 1:a=Mw(null,a,p,i,d);break e;case 11:a=Nw(null,a,p,i,d);break e;case 14:a=jw(null,a,p,Ir(p.type,i),d);break e}throw Error(n(306,p,""))}return a;case 0:return p=a.type,x=a.pendingProps,x=a.elementType===p?x:Ir(p,x),Sp(i,a,p,x,d);case 1:return p=a.type,x=a.pendingProps,x=a.elementType===p?x:Ir(p,x),Mw(i,a,p,x,d);case 3:e:{if(Vw(a),i===null)throw Error(n(387));p=a.pendingProps,_=a.memoizedState,x=_.element,Zx(i,a),Gd(a,p,null,d);var C=a.memoizedState;if(p=C.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){x=Ua(Error(n(423)),a),a=$w(i,a,p,d,x);break e}else if(p!==x){x=Ua(Error(n(424)),a),a=$w(i,a,p,d,x);break e}else for(Hn=oi(a.stateNode.containerInfo.firstChild),Wn=a,ut=!0,Pr=null,d=Yx(a,null,p,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(La(),p===x){a=Ps(i,a,d);break e}xn(i,a,p,d)}a=a.child}return a;case 5:return nw(a),i===null&&tp(a),p=a.type,x=a.pendingProps,_=i!==null?i.memoizedProps:null,C=x.children,qm(p,x)?C=null:_!==null&&qm(p,_)&&(a.flags|=32),Lw(i,a),xn(i,a,C,d),a.child;case 6:return i===null&&tp(a),null;case 13:return Fw(i,a,d);case 4:return cp(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=Ma(a,null,p,d):xn(i,a,p,d),a.child;case 11:return p=a.type,x=a.pendingProps,x=a.elementType===p?x:Ir(p,x),Nw(i,a,p,x,d);case 7:return xn(i,a,a.pendingProps,d),a.child;case 8:return xn(i,a,a.pendingProps.children,d),a.child;case 12:return xn(i,a,a.pendingProps.children,d),a.child;case 10:e:{if(p=a.type._context,x=a.pendingProps,_=a.memoizedProps,C=x.value,st(Wd,p._currentValue),p._currentValue=C,_!==null)if(Ar(_.value,C)){if(_.children===x.children&&!Sn.current){a=Ps(i,a,d);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var V=_.dependencies;if(V!==null){C=_.child;for(var U=V.firstContext;U!==null;){if(U.context===p){if(_.tag===1){U=As(-1,d&-d),U.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?U.next=U:(U.next=le.next,le.next=U),X.pending=U}}_.lanes|=d,U=_.alternate,U!==null&&(U.lanes|=d),op(_.return,d,a),V.lanes|=d;break}U=U.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(n(341));C.lanes|=d,V=C.alternate,V!==null&&(V.lanes|=d),op(C,d,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}xn(i,a,x.children,d),a=a.child}return a;case 9:return x=a.type,p=a.pendingProps.children,$a(a,d),x=sr(x),p=p(x),a.flags|=1,xn(i,a,p,d),a.child;case 14:return p=a.type,x=Ir(p,a.pendingProps),x=Ir(p.type,x),jw(i,a,p,x,d);case 15:return Dw(i,a,a.type,a.pendingProps,d);case 17:return p=a.type,x=a.pendingProps,x=a.elementType===p?x:Ir(p,x),nh(i,a),a.tag=1,kn(p)?(i=!0,Vd(a)):i=!1,$a(a,d),Sw(a,p,x),bp(a,p,x,d),kp(null,a,p,!0,i,d);case 19:return Bw(i,a,d);case 22:return Ow(i,a,d)}throw Error(n(156,a.tag))};function h_(i,a){return ha(i,a)}function uR(i,a,d,p){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(i,a,d,p){return new uR(i,a,d,p)}function qp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function dR(i){if(typeof i=="function")return qp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===$e)return 14}return 2}function yi(i,a){var d=i.alternate;return d===null?(d=ar(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function fh(i,a,d,p,x,_){var C=2;if(p=i,typeof i=="function")qp(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case I:return Eo(d.children,x,_,a);case S:C=8,x|=8;break;case T:return i=ar(12,d,a,x|2),i.elementType=T,i.lanes=_,i;case L:return i=ar(13,d,a,x),i.elementType=L,i.lanes=_,i;case ge:return i=ar(19,d,a,x),i.elementType=ge,i.lanes=_,i;case be:return mh(d,x,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:C=10;break e;case j:C=9;break e;case F:C=11;break e;case $e:C=14;break e;case Ke:C=16,p=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=ar(C,d,a,x),a.elementType=i,a.type=p,a.lanes=_,a}function Eo(i,a,d,p){return i=ar(7,i,p,a),i.lanes=d,i}function mh(i,a,d,p){return i=ar(22,i,p,a),i.elementType=be,i.lanes=d,i.stateNode={isHidden:!1},i}function Gp(i,a,d){return i=ar(6,i,null,a),i.lanes=d,i}function Kp(i,a,d){return a=ar(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function hR(i,a,d,p,x){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xs(0),this.expirationTimes=Xs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.identifierPrefix=p,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Qp(i,a,d,p,x,_,C,V,U){return i=new hR(i,a,d,V,U),a===1?(a=1,_===!0&&(a|=8)):a=0,_=ar(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},lp(_),i}function fR(i,a,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:p==null?null:""+p,children:i,containerInfo:a,implementation:d}}function f_(i){if(!i)return li;i=i._reactInternals;e:{if(_r(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(kn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(kn(d))return Ux(i,d,a)}return a}function m_(i,a,d,p,x,_,C,V,U){return i=Qp(d,p,!0,i,x,_,C,V,U),i.context=f_(null),d=i.current,p=wn(),x=pi(d),_=As(p,x),_.callback=a??null,di(d,_,x),i.current.lanes=x,Zs(i,x,p),Pn(i,p),i}function ph(i,a,d,p){var x=a.current,_=wn(),C=pi(x);return d=f_(d),a.context===null?a.context=d:a.pendingContext=d,a=As(_,C),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=di(x,a,C),i!==null&&(jr(i,x,C,_),qd(i,x,C)),C}function gh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function p_(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function Jp(i,a){p_(i,a),(i=i.alternate)&&p_(i,a)}function mR(){return null}var g_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Yp(i){this._internalRoot=i}yh.prototype.render=Yp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));ph(i,a,null,null)},yh.prototype.unmount=Yp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;wo(function(){ph(null,i,null,null)}),a[Es]=null}};function yh(i){this._internalRoot=i}yh.prototype.unstable_scheduleHydration=function(i){if(i){var a=yd();i={blockedOn:null,target:i,priority:a};for(var d=0;d<Gr.length&&a!==0&&a<Gr[d].priority;d++);Gr.splice(d,0,i),d===0&&wd(i)}};function Xp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function vh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function y_(){}function pR(i,a,d,p,x){if(x){if(typeof p=="function"){var _=p;p=function(){var X=gh(C);_.call(X)}}var C=m_(a,p,i,0,null,!1,!1,"",y_);return i._reactRootContainer=C,i[Es]=C.current,kc(i.nodeType===8?i.parentNode:i),wo(),C}for(;x=i.lastChild;)i.removeChild(x);if(typeof p=="function"){var V=p;p=function(){var X=gh(U);V.call(X)}}var U=Qp(i,0,!1,null,null,!1,!1,"",y_);return i._reactRootContainer=U,i[Es]=U.current,kc(i.nodeType===8?i.parentNode:i),wo(function(){ph(a,U,d,p)}),U}function xh(i,a,d,p,x){var _=d._reactRootContainer;if(_){var C=_;if(typeof x=="function"){var V=x;x=function(){var U=gh(C);V.call(U)}}ph(a,C,i,x)}else C=pR(d,a,i,x,p);return gh(C)}pd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var d=Ys(a.pendingLanes);d!==0&&(ei(a,d|1),Pn(a,rt()),(Qe&6)===0&&(Wa=rt()+500,ci()))}break;case 13:wo(function(){var p=Cs(i,1);if(p!==null){var x=wn();jr(p,i,1,x)}}),Jp(i,1)}},pa=function(i){if(i.tag===13){var a=Cs(i,134217728);if(a!==null){var d=wn();jr(a,i,134217728,d)}Jp(i,134217728)}},gd=function(i){if(i.tag===13){var a=pi(i),d=Cs(i,a);if(d!==null){var p=wn();jr(d,i,a,p)}Jp(i,a)}},yd=function(){return He},vd=function(i,a){var d=He;try{return He=i,a()}finally{He=d}},oa=function(i,a,d){switch(a){case"input":if(Gs(i,d),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var p=d[a];if(p!==i&&p.form===i.form){var x=Ld(p);if(!x)throw Error(n(90));ye(p),Gs(p,x)}}}break;case"textarea":sa(i,d);break;case"select":a=d.value,a!=null&&on(i,!!d.multiple,a,!1)}},Zi=zp,ac=wo;var gR={usingClientEntryPoint:!1,Events:[Pc,Ra,Ld,Hr,oc,zp]},zc={findFiberByHostInstance:ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yR={bundleType:zc.bundleType,version:zc.version,rendererPackageName:zc.rendererPackageName,rendererConfig:zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=uc(i),i===null?null:i.stateNode},findFiberByHostInstance:zc.findFiberByHostInstance||mR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{so=wh.inject(yR),Fn=wh}catch{}}return In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gR,In.createPortal=function(i,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xp(a))throw Error(n(200));return fR(i,a,null,d)},In.createRoot=function(i,a){if(!Xp(i))throw Error(n(299));var d=!1,p="",x=g_;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Qp(i,1,!1,null,null,d,!1,p,x),i[Es]=a.current,kc(i.nodeType===8?i.parentNode:i),new Yp(a)},In.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=uc(a),i=i===null?null:i.stateNode,i},In.flushSync=function(i){return wo(i)},In.hydrate=function(i,a,d){if(!vh(a))throw Error(n(200));return xh(null,i,a,!0,d)},In.hydrateRoot=function(i,a,d){if(!Xp(i))throw Error(n(405));var p=d!=null&&d.hydratedSources||null,x=!1,_="",C=g_;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(C=d.onRecoverableError)),a=m_(a,null,i,1,d??null,x,!1,_,C),i[Es]=a.current,kc(i),p)for(i=0;i<p.length;i++)d=p[i],x=d._getVersion,x=x(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,x]:a.mutableSourceEagerHydrationData.push(d,x);return new yh(a)},In.render=function(i,a,d){if(!vh(a))throw Error(n(200));return xh(null,i,a,!1,d)},In.unmountComponentAtNode=function(i){if(!vh(i))throw Error(n(40));return i._reactRootContainer?(wo(function(){xh(null,null,i,!1,function(){i._reactRootContainer=null,i[Es]=null})}),!0):!1},In.unstable_batchedUpdates=zp,In.unstable_renderSubtreeIntoContainer=function(i,a,d,p){if(!vh(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return xh(i,a,d,!1,p)},In.version="18.3.1-next-f1338f8080-20240426",In}var S_;function _S(){if(S_)return tg.exports;S_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tg.exports=CR(),tg.exports}var k_;function AR(){if(k_)return _h;k_=1;var t=_S();return _h.createRoot=t.createRoot,_h.hydrateRoot=t.hydrateRoot,_h}var PR=AR();const IR=Qo(PR);var Hc={},C_;function RR(){if(C_)return Hc;C_=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.parse=l,Hc.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function l(v,b){const k=new o,D=v.length;if(D<2)return k;const P=(b==null?void 0:b.decode)||g;let O=0;do{const $=v.indexOf("=",O);if($===-1)break;const M=v.indexOf(";",O),z=M===-1?D:M;if($>z){O=v.lastIndexOf(";",$-1)+1;continue}const B=c(v,O,$),G=u(v,$,B),I=v.slice(B,G);if(k[I]===void 0){let S=c(v,$+1,z),T=u(v,z,S);const R=P(v.slice(S,T));k[I]=R}O=z+1}while(O<D);return k}function c(v,b,k){do{const D=v.charCodeAt(b);if(D!==32&&D!==9)return b}while(++b<k);return k}function u(v,b,k){for(;b>k;){const D=v.charCodeAt(--b);if(D!==32&&D!==9)return b+1}return k}function h(v,b,k){const D=(k==null?void 0:k.encode)||encodeURIComponent;if(!t.test(v))throw new TypeError(`argument name is invalid: ${v}`);const P=D(b);if(!e.test(P))throw new TypeError(`argument val is invalid: ${b}`);let O=v+"="+P;if(!k)return O;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);O+="; Max-Age="+k.maxAge}if(k.domain){if(!n.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);O+="; Domain="+k.domain}if(k.path){if(!r.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);O+="; Path="+k.path}if(k.expires){if(!y(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);O+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&(O+="; HttpOnly"),k.secure&&(O+="; Secure"),k.partitioned&&(O+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":O+="; Priority=Low";break;case"medium":O+="; Priority=Medium";break;case"high":O+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"none":O+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return O}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function y(v){return s.call(v)==="[object Date]"}return Hc}RR();var A_="popstate";function NR(t={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return Jg("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Tu(s)}return DR(e,n,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jR(){return Math.random().toString(36).substring(2,10)}function P_(t,e){return{usr:t.state,key:t.key,idx:e}}function Jg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ll(e):e,state:n,key:e&&e.key||r||jR()}}function Tu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ll(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function DR(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",u=null,h=g();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function g(){return(l.state||{idx:null}).idx}function y(){c="POP";let P=g(),O=P==null?null:P-h;h=P,u&&u({action:c,location:D.location,delta:O})}function v(P,O){c="PUSH";let $=Jg(D.location,P,O);h=g()+1;let M=P_($,h),z=D.createHref($);try{l.pushState(M,"",z)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(z)}o&&u&&u({action:c,location:D.location,delta:1})}function b(P,O){c="REPLACE";let $=Jg(D.location,P,O);h=g();let M=P_($,h),z=D.createHref($);l.replaceState(M,"",z),o&&u&&u({action:c,location:D.location,delta:0})}function k(P){return OR(P)}let D={get action(){return c},get location(){return t(s,l)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(A_,y),u=P,()=>{s.removeEventListener(A_,y),u=null}},createHref(P){return e(s,P)},createURL:k,encodeLocation(P){let O=k(P);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:v,replace:b,go(P){return l.go(P)}};return D}function OR(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Tu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function bS(t,e,n="/"){return LR(t,e,n,!1)}function LR(t,e,n,r){let s=typeof e=="string"?Ll(e):e,o=Ms(s.pathname||"/",n);if(o==null)return null;let l=ES(t);MR(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let h=KR(o);c=qR(l[u],h,r)}return c}function ES(t,e=[],n=[],r=""){let s=(o,l,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(ft(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let h=Os([r,u.relativePath]),g=n.concat(u);o.children&&o.children.length>0&&(ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),ES(o.children,e,g,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:WR(h,o.index),routesMeta:g})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let u of TS(o.path))s(o,l,u)}),e}function TS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=TS(r.join("/")),c=[];return c.push(...l.map(u=>u===""?o:[o,u].join("/"))),s&&c.push(...l),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function MR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:HR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var VR=/^:[\w-]+$/,$R=3,FR=2,UR=1,BR=10,zR=-2,I_=t=>t==="*";function WR(t,e){let n=t.split("/"),r=n.length;return n.some(I_)&&(r+=zR),e&&(r+=FR),n.filter(s=>!I_(s)).reduce((s,o)=>s+(VR.test(o)?$R:o===""?UR:BR),r)}function HR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function qR(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",l=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=af({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},g),v=u.route;if(!y&&h&&n&&!r[r.length-1].route.index&&(y=af({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:Os([o,y.pathname]),pathnameBase:XR(Os([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=Os([o,y.pathnameBase]))}return l}function af(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=GR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:y},v)=>{if(g==="*"){let k=c[v]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=c[v];return y&&!b?h[g]=void 0:h[g]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function GR(t,e=!1,n=!0){Vr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function KR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ms(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function QR(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ll(t):t;return{pathname:n?n.startsWith("/")?n:JR(n,e):e,search:ZR(r),hash:eN(s)}}function JR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ly(t){let e=YR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function cy(t,e,n,r=!1){let s;typeof t=="string"?s=Ll(t):(s={...t},ft(!s.pathname||!s.pathname.includes("?"),sg("?","pathname","search",s)),ft(!s.pathname||!s.pathname.includes("#"),sg("#","pathname","hash",s)),ft(!s.search||!s.search.includes("#"),sg("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=n;else{let y=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}c=y>=0?e[y]:"/"}let u=QR(s,c),h=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||g)&&(u.pathname+="/"),u}var Os=t=>t.join("/").replace(/\/\/+/g,"/"),XR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var SS=["POST","PUT","PATCH","DELETE"];new Set(SS);var nN=["GET",...SS];new Set(nN);var Ml=A.createContext(null);Ml.displayName="DataRouter";var zf=A.createContext(null);zf.displayName="DataRouterState";var kS=A.createContext({isTransitioning:!1});kS.displayName="ViewTransition";var rN=A.createContext(new Map);rN.displayName="Fetchers";var sN=A.createContext(null);sN.displayName="Await";var Br=A.createContext(null);Br.displayName="Navigation";var zu=A.createContext(null);zu.displayName="Location";var gr=A.createContext({outlet:null,matches:[],isDataRoute:!1});gr.displayName="Route";var uy=A.createContext(null);uy.displayName="RouteError";function iN(t,{relative:e}={}){ft(Vl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Br),{hash:s,pathname:o,search:l}=Hu(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:Os([n,o])),r.createHref({pathname:c,search:l,hash:s})}function Vl(){return A.useContext(zu)!=null}function zr(){return ft(Vl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(zu).location}var CS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AS(t){A.useContext(Br).static||A.useLayoutEffect(t)}function Qt(){let{isDataRoute:t}=A.useContext(gr);return t?wN():oN()}function oN(){ft(Vl(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Ml),{basename:e,navigator:n}=A.useContext(Br),{matches:r}=A.useContext(gr),{pathname:s}=zr(),o=JSON.stringify(ly(r)),l=A.useRef(!1);return AS(()=>{l.current=!0}),A.useCallback((u,h={})=>{if(Vr(l.current,CS),!l.current)return;if(typeof u=="number"){n.go(u);return}let g=cy(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Os([e,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[e,n,o,s,t])}var aN=A.createContext(null);function lN(t){let e=A.useContext(gr).outlet;return e&&A.createElement(aN.Provider,{value:t},e)}function Wu(){let{matches:t}=A.useContext(gr),e=t[t.length-1];return e?e.params:{}}function Hu(t,{relative:e}={}){let{matches:n}=A.useContext(gr),{pathname:r}=zr(),s=JSON.stringify(ly(n));return A.useMemo(()=>cy(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function cN(t,e){return PS(t,e)}function PS(t,e,n,r){var $;ft(Vl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=A.useContext(Br),{matches:l}=A.useContext(gr),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",g=c?c.pathnameBase:"/",y=c&&c.route;{let M=y&&y.path||"";IS(h,!y||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let v=zr(),b;if(e){let M=typeof e=="string"?Ll(e):e;ft(g==="/"||(($=M.pathname)==null?void 0:$.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${M.pathname}" was given in the \`location\` prop.`),b=M}else b=v;let k=b.pathname||"/",D=k;if(g!=="/"){let M=g.replace(/^\//,"").split("/");D="/"+k.replace(/^\//,"").split("/").slice(M.length).join("/")}let P=!o&&n&&n.matches&&n.matches.length>0?n.matches:bS(t,{pathname:D});Vr(y||P!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Vr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=mN(P&&P.map(M=>Object.assign({},M,{params:Object.assign({},u,M.params),pathname:Os([g,s.encodeLocation?s.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:Os([g,s.encodeLocation?s.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,n,r);return e&&O?A.createElement(zu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},O):O}function uN(){let t=xN(),e=tN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,l)}var dN=A.createElement(uN,null),hN=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?A.createElement(gr.Provider,{value:this.props.routeContext},A.createElement(uy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fN({routeContext:t,match:e,children:n}){let r=A.useContext(Ml);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(gr.Provider,{value:t},n)}function mN(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let u=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);ft(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,c=-1;if(n)for(let u=0;u<s.length;u++){let h=s[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:g,errors:y}=n,v=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,h,g)=>{let y,v=!1,b=null,k=null;n&&(y=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||dN,l&&(c<0&&g===0?(IS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,k=null):c===g&&(v=!0,k=h.route.hydrateFallbackElement||null)));let D=e.concat(s.slice(0,g+1)),P=()=>{let O;return y?O=b:v?O=k:h.route.Component?O=A.createElement(h.route.Component,null):h.route.element?O=h.route.element:O=u,A.createElement(fN,{match:h,routeContext:{outlet:u,matches:D,isDataRoute:n!=null},children:O})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(hN,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:P(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):P()},null)}function dy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pN(t){let e=A.useContext(Ml);return ft(e,dy(t)),e}function gN(t){let e=A.useContext(zf);return ft(e,dy(t)),e}function yN(t){let e=A.useContext(gr);return ft(e,dy(t)),e}function hy(t){let e=yN(t),n=e.matches[e.matches.length-1];return ft(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function vN(){return hy("useRouteId")}function xN(){var r;let t=A.useContext(uy),e=gN("useRouteError"),n=hy("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function wN(){let{router:t}=pN("useNavigate"),e=hy("useNavigate"),n=A.useRef(!1);return AS(()=>{n.current=!0}),A.useCallback(async(s,o={})=>{Vr(n.current,CS),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var R_={};function IS(t,e,n){!e&&!R_[t]&&(R_[t]=!0,Vr(!1,n))}A.memo(_N);function _N({routes:t,future:e,state:n}){return PS(t,void 0,n,e)}function bN({to:t,replace:e,state:n,relative:r}){ft(Vl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(Br);Vr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext(gr),{pathname:l}=zr(),c=Qt(),u=cy(t,ly(o),l,r==="path"),h=JSON.stringify(u);return A.useEffect(()=>{c(JSON.parse(h),{replace:e,state:n,relative:r})},[c,h,r,e,n]),null}function RS(t){return lN(t.context)}function Ye(t){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function EN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){ft(!Vl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof n=="string"&&(n=Ll(n));let{pathname:u="/",search:h="",hash:g="",state:y=null,key:v="default"}=n,b=A.useMemo(()=>{let k=Ms(u,l);return k==null?null:{location:{pathname:k,search:h,hash:g,state:y,key:v},navigationType:r}},[l,u,h,g,y,v,r]);return Vr(b!=null,`<Router basename="${l}"> is not able to match the URL "${u}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Br.Provider,{value:c},A.createElement(zu.Provider,{children:e,value:b}))}function TN({children:t,location:e}){return cN(Yg(t),e)}function Yg(t,e=[]){let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let o=[...e,s];if(r.type===A.Fragment){n.push.apply(n,Yg(r.props.children,o));return}ft(r.type===Ye,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Yg(r.props.children,o)),n.push(l)}),n}var Bh="get",zh="application/x-www-form-urlencoded";function Wf(t){return t!=null&&typeof t.tagName=="string"}function SN(t){return Wf(t)&&t.tagName.toLowerCase()==="button"}function kN(t){return Wf(t)&&t.tagName.toLowerCase()==="form"}function CN(t){return Wf(t)&&t.tagName.toLowerCase()==="input"}function AN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function PN(t,e){return t.button===0&&(!e||e==="_self")&&!AN(t)}var bh=null;function IN(){if(bh===null)try{new FormData(document.createElement("form"),0),bh=!1}catch{bh=!0}return bh}var RN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ig(t){return t!=null&&!RN.has(t)?(Vr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zh}"`),null):t}function NN(t,e){let n,r,s,o,l;if(kN(t)){let c=t.getAttribute("action");r=c?Ms(c,e):null,n=t.getAttribute("method")||Bh,s=ig(t.getAttribute("enctype"))||zh,o=new FormData(t)}else if(SN(t)||CN(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Ms(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Bh,s=ig(t.getAttribute("formenctype"))||ig(c.getAttribute("enctype"))||zh,o=new FormData(c,t),!IN()){let{name:h,type:g,value:y}=t;if(g==="image"){let v=h?`${h}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else h&&o.append(h,y)}}else{if(Wf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bh,r=null,s=zh,l=t}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:l}}function fy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function jN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ON(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await jN(o,n);return l.links?l.links():[]}return[]}));return $N(r.flat(1).filter(DN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function N_(t,e,n,r,s,o){let l=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,c=(u,h)=>{var g;return n[h].pathname!==u.pathname||((g=n[h].route.path)==null?void 0:g.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return o==="assets"?e.filter((u,h)=>l(u,h)||c(u,h)):o==="data"?e.filter((u,h)=>{var y;let g=r.routes[u.route.id];if(!g||!g.hasLoader)return!1;if(l(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function LN(t,e,{includeHydrateFallback:n}={}){return MN(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function MN(t){return[...new Set(t)]}function VN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function $N(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(VN(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var FN=new Set([100,101,204,205]);function UN(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ms(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function NS(){let t=A.useContext(Ml);return fy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function BN(){let t=A.useContext(zf);return fy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var my=A.createContext(void 0);my.displayName="FrameworkContext";function jS(){let t=A.useContext(my);return fy(t,"You must render this element inside a <HydratedRouter> element"),t}function zN(t,e){let n=A.useContext(my),[r,s]=A.useState(!1),[o,l]=A.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:g,onTouchStart:y}=e,v=A.useRef(null);A.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let D=O=>{O.forEach($=>{l($.isIntersecting)})},P=new IntersectionObserver(D,{threshold:.5});return v.current&&P.observe(v.current),()=>{P.disconnect()}}},[t]),A.useEffect(()=>{if(r){let D=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(D)}}},[r]);let b=()=>{s(!0)},k=()=>{s(!1),l(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:qc(c,b),onBlur:qc(u,k),onMouseEnter:qc(h,b),onMouseLeave:qc(g,k),onTouchStart:qc(y,b)}]:[!1,v,{}]}function qc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function WN({page:t,...e}){let{router:n}=NS(),r=A.useMemo(()=>bS(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(qN,{page:t,matches:r,...e}):null}function HN(t){let{manifest:e,routeModules:n}=jS(),[r,s]=A.useState([]);return A.useEffect(()=>{let o=!1;return ON(t,e,n).then(l=>{o||s(l)}),()=>{o=!0}},[t,e,n]),r}function qN({page:t,matches:e,...n}){let r=zr(),{manifest:s,routeModules:o}=jS(),{basename:l}=NS(),{loaderData:c,matches:u}=BN(),h=A.useMemo(()=>N_(t,e,u,s,r,"data"),[t,e,u,s,r]),g=A.useMemo(()=>N_(t,e,u,s,r,"assets"),[t,e,u,s,r]),y=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let k=new Set,D=!1;if(e.forEach(O=>{var M;let $=s.routes[O.route.id];!$||!$.hasLoader||(!h.some(z=>z.route.id===O.route.id)&&O.route.id in c&&((M=o[O.route.id])!=null&&M.shouldRevalidate)||$.hasClientLoader?D=!0:k.add(O.route.id))}),k.size===0)return[];let P=UN(t,l);return D&&k.size>0&&P.searchParams.set("_routes",e.filter(O=>k.has(O.route.id)).map(O=>O.route.id).join(",")),[P.pathname+P.search]},[l,c,r,s,h,e,t,o]),v=A.useMemo(()=>LN(g,s),[g,s]),b=HN(g);return A.createElement(A.Fragment,null,y.map(k=>A.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),v.map(k=>A.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),b.map(({key:k,link:D})=>A.createElement("link",{key:k,...D})))}function GN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var DS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{DS&&(window.__reactRouterVersion="7.6.0")}catch{}function KN({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=NR({window:n,v5Compat:!0}));let s=r.current,[o,l]=A.useState({action:s.action,location:s.location}),c=A.useCallback(u=>{A.startTransition(()=>l(u))},[l]);return A.useLayoutEffect(()=>s.listen(c),[s,c]),A.createElement(EN,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var OS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ot=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:u,to:h,preventScrollReset:g,viewTransition:y,...v},b){let{basename:k}=A.useContext(Br),D=typeof h=="string"&&OS.test(h),P,O=!1;if(typeof h=="string"&&D&&(P=h,DS))try{let T=new URL(window.location.href),R=h.startsWith("//")?new URL(T.protocol+h):new URL(h),j=Ms(R.pathname,k);R.origin===T.origin&&j!=null?h=j+R.search+R.hash:O=!0}catch{Vr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=iN(h,{relative:s}),[M,z,B]=zN(r,v),G=XN(h,{replace:l,state:c,target:u,preventScrollReset:g,relative:s,viewTransition:y});function I(T){e&&e(T),T.defaultPrevented||G(T)}let S=A.createElement("a",{...v,...B,href:P||$,onClick:O||o?e:I,ref:GN(b,z),target:u,"data-discover":!D&&n==="render"?"true":void 0});return M&&!D?A.createElement(A.Fragment,null,S,A.createElement(WN,{page:$})):S});ot.displayName="Link";var QN=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:u,...h},g){let y=Hu(l,{relative:h.relative}),v=zr(),b=A.useContext(zf),{navigator:k,basename:D}=A.useContext(Br),P=b!=null&&r2(y)&&c===!0,O=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,$=v.pathname,M=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||($=$.toLowerCase(),M=M?M.toLowerCase():null,O=O.toLowerCase()),M&&D&&(M=Ms(M,D)||M);const z=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let B=$===O||!s&&$.startsWith(O)&&$.charAt(z)==="/",G=M!=null&&(M===O||!s&&M.startsWith(O)&&M.charAt(O.length)==="/"),I={isActive:B,isPending:G,isTransitioning:P},S=B?e:void 0,T;typeof r=="function"?T=r(I):T=[r,B?"active":null,G?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(I):o;return A.createElement(ot,{...h,"aria-current":S,className:T,ref:g,style:R,to:l,viewTransition:c},typeof u=="function"?u(I):u)});QN.displayName="NavLink";var JN=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:l=Bh,action:c,onSubmit:u,relative:h,preventScrollReset:g,viewTransition:y,...v},b)=>{let k=t2(),D=n2(c,{relative:h}),P=l.toLowerCase()==="get"?"get":"post",O=typeof c=="string"&&OS.test(c),$=M=>{if(u&&u(M),M.defaultPrevented)return;M.preventDefault();let z=M.nativeEvent.submitter,B=(z==null?void 0:z.getAttribute("formmethod"))||l;k(z||M.currentTarget,{fetcherKey:e,method:B,navigate:n,replace:s,state:o,relative:h,preventScrollReset:g,viewTransition:y})};return A.createElement("form",{ref:b,method:P,action:D,onSubmit:r?u:$,...v,"data-discover":!O&&t==="render"?"true":void 0})});JN.displayName="Form";function YN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LS(t){let e=A.useContext(Ml);return ft(e,YN(t)),e}function XN(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let c=Qt(),u=zr(),h=Hu(t,{relative:o});return A.useCallback(g=>{if(PN(g,e)){g.preventDefault();let y=n!==void 0?n:Tu(u)===Tu(h);c(t,{replace:y,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,h,n,r,e,t,s,o,l])}var ZN=0,e2=()=>`__${String(++ZN)}__`;function t2(){let{router:t}=LS("useSubmit"),{basename:e}=A.useContext(Br),n=vN();return A.useCallback(async(r,s={})=>{let{action:o,method:l,encType:c,formData:u,body:h}=NN(r,e);if(s.navigate===!1){let g=s.fetcherKey||e2();await t.fetch(g,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function n2(t,{relative:e}={}){let{basename:n}=A.useContext(Br),r=A.useContext(gr);ft(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Hu(t||".",{relative:e})},l=zr();if(t==null){o.search=l.search;let c=new URLSearchParams(o.search),u=c.getAll("index");if(u.some(g=>g==="")){c.delete("index"),u.filter(y=>y).forEach(y=>c.append("index",y));let g=c.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Os([n,o.pathname])),Tu(o)}function r2(t,e={}){let n=A.useContext(kS);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=LS("useViewTransitionState"),s=Hu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ms(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Ms(n.nextLocation.pathname,r)||n.nextLocation.pathname;return af(s.pathname,l)!=null||af(s.pathname,o)!=null}[...FN];var s2=_S();const Eh=Qo(s2);var og,j_;function i2(){if(j_)return og;j_=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var c,u,h;if(Array.isArray(o)){if(c=o.length,c!=l.length)return!1;for(u=c;u--!==0;)if(!s(o[u],l[u]))return!1;return!0}var g;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(g=o.entries();!(u=g.next()).done;)if(!l.has(u.value[0]))return!1;for(g=o.entries();!(u=g.next()).done;)if(!s(u.value[1],l.get(u.value[0])))return!1;return!0}if(n&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(g=o.entries();!(u=g.next()).done;)if(!l.has(u.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(c=o.length,c!=l.length)return!1;for(u=c;u--!==0;)if(o[u]!==l[u])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(h=Object.keys(o),c=h.length,c!==Object.keys(l).length)return!1;for(u=c;u--!==0;)if(!Object.prototype.hasOwnProperty.call(l,h[u]))return!1;if(t&&o instanceof Element)return!1;for(u=c;u--!==0;)if(!((h[u]==="_owner"||h[u]==="__v"||h[u]==="__o")&&o.$$typeof)&&!s(o[h[u]],l[h[u]]))return!1;return!0}return o!==o&&l!==l}return og=function(l,c){try{return s(l,c)}catch(u){if((u.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw u}},og}var o2=i2();const a2=Qo(o2);var ag,D_;function l2(){if(D_)return ag;D_=1;var t=function(e,n,r,s,o,l,c,u){if(!e){var h;if(n===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[r,s,o,l,c,u],y=0;h=new Error(n.replace(/%s/g,function(){return g[y++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return ag=t,ag}var c2=l2();const O_=Qo(c2);var lg,L_;function u2(){return L_||(L_=1,lg=function(e,n,r,s){var o=r?r.call(s,e,n):void 0;if(o!==void 0)return!!o;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var l=Object.keys(e),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(n),h=0;h<l.length;h++){var g=l[h];if(!u(g))return!1;var y=e[g],v=n[g];if(o=r?r.call(s,y,v,g):void 0,o===!1||o===void 0&&y!==v)return!1}return!0}),lg}var d2=u2();const h2=Qo(d2);var MS=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(MS||{}),cg={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},M_=Object.values(MS),py={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},f2=Object.entries(py).reduce((t,[e,n])=>(t[n]=e,t),{}),Lr="data-rh",ml={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},pl=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},m2=t=>{let e=pl(t,"title");const n=pl(t,ml.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=pl(t,ml.DEFAULT_TITLE);return e||r||void 0},p2=t=>pl(t,ml.ON_CHANGE_CLIENT_STATE)||(()=>{}),ug=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),g2=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let o=0;o<s.length;o+=1){const c=s[o].toLowerCase();if(t.indexOf(c)!==-1&&r[c])return n.concat(r)}}return n},[]),y2=t=>console&&typeof console.warn=="function"&&console.warn(t),Gc=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&y2(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,o)=>{const l={};o.filter(u=>{let h;const g=Object.keys(u);for(let v=0;v<g.length;v+=1){const b=g[v],k=b.toLowerCase();e.indexOf(k)!==-1&&!(h==="rel"&&u[h].toLowerCase()==="canonical")&&!(k==="rel"&&u[k].toLowerCase()==="stylesheet")&&(h=k),e.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(h=b)}if(!h||!u[h])return!1;const y=u[h].toLowerCase();return r[h]||(r[h]={}),l[h]||(l[h]={}),r[h][y]?!1:(l[h][y]=!0,!0)}).reverse().forEach(u=>s.push(u));const c=Object.keys(l);for(let u=0;u<c.length;u+=1){const h=c[u],g={...r[h],...l[h]};r[h]=g}return s},[]).reverse()},v2=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},x2=t=>({baseTag:g2(["href"],t),bodyAttributes:ug("bodyAttributes",t),defer:pl(t,ml.DEFER),encode:pl(t,ml.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:ug("htmlAttributes",t),linkTags:Gc("link",["rel","href"],t),metaTags:Gc("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Gc("noscript",["innerHTML"],t),onChangeClientState:p2(t),scriptTags:Gc("script",["src","innerHTML"],t),styleTags:Gc("style",["cssText"],t),title:m2(t),titleAttributes:ug("titleAttributes",t),prioritizeSeoTags:v2(t,ml.PRIORITIZE_SEO_TAGS)}),VS=t=>Array.isArray(t)?t.join(""):t,w2=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},dg=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(w2(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},V_=(t,e)=>({...t,[e]:void 0}),_2=["noscript","script","style"],Xg=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),$S=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),b2=(t,e,n,r)=>{const s=$S(n),o=VS(e);return s?`<${t} ${Lr}="true" ${s}>${Xg(o,r)}</${t}>`:`<${t} ${Lr}="true">${Xg(o,r)}</${t}>`},E2=(t,e,n=!0)=>e.reduce((r,s)=>{const o=s,l=Object.keys(o).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,g)=>{const y=typeof o[g]>"u"?g:`${g}="${Xg(o[g],n)}"`;return h?`${h} ${y}`:y},""),c=o.innerHTML||o.cssText||"",u=_2.indexOf(t)===-1;return`${r}<${t} ${Lr}="true" ${l}${u?"/>":`>${c}</${t}>`}`},""),FS=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=py[r];return n[s||r]=t[r],n},e),T2=(t,e,n)=>{const r={key:e,[Lr]:!0},s=FS(n,r);return[nt.createElement("title",s,e)]},Wh=(t,e)=>e.map((n,r)=>{const s={key:r,[Lr]:!0};return Object.keys(n).forEach(o=>{const c=py[o]||o;if(c==="innerHTML"||c==="cssText"){const u=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:u}}else s[c]=n[o]}),nt.createElement(t,s)}),ur=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>T2(t,e.title,e.titleAttributes),toString:()=>b2(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>FS(e),toString:()=>$S(e)};default:return{toComponent:()=>Wh(t,e),toString:()=>E2(t,e,n)}}},S2=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=dg(t,cg.meta),o=dg(e,cg.link),l=dg(n,cg.script);return{priorityMethods:{toComponent:()=>[...Wh("meta",s.priority),...Wh("link",o.priority),...Wh("script",l.priority)],toString:()=>`${ur("meta",s.priority,r)} ${ur("link",o.priority,r)} ${ur("script",l.priority,r)}`},metaTags:s.default,linkTags:o.default,scriptTags:l.default}},k2=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:o,styleTags:l,title:c="",titleAttributes:u,prioritizeSeoTags:h}=t;let{linkTags:g,metaTags:y,scriptTags:v}=t,b={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:b,linkTags:g,metaTags:y,scriptTags:v}=S2(t)),{priority:b,base:ur("base",e,r),bodyAttributes:ur("bodyAttributes",n,r),htmlAttributes:ur("htmlAttributes",s,r),link:ur("link",g,r),meta:ur("meta",y,r),noscript:ur("noscript",o,r),script:ur("script",v,r),style:ur("style",l,r),title:ur("title",{title:c,titleAttributes:u},r)}},Zg=k2,Th=[],US=!!(typeof window<"u"&&window.document&&window.document.createElement),e0=class{constructor(t,e){Rs(this,"instances",[]);Rs(this,"canUseDOM",US);Rs(this,"context");Rs(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Th:this.instances,add:t=>{(this.canUseDOM?Th:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Th:this.instances).indexOf(t);(this.canUseDOM?Th:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Zg({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},C2={},BS=nt.createContext(C2),Mo,zS=(Mo=class extends A.Component{constructor(n){super(n);Rs(this,"helmetData");this.helmetData=new e0(this.props.context||{},Mo.canUseDOM)}render(){return nt.createElement(BS.Provider,{value:this.helmetData.value},this.props.children)}},Rs(Mo,"canUseDOM",US),Mo),qa=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${Lr}]`),s=[].slice.call(r),o=[];let l;return e&&e.length&&e.forEach(c=>{const u=document.createElement(t);for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h))if(h==="innerHTML")u.innerHTML=c.innerHTML;else if(h==="cssText")u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{const g=h,y=typeof c[g]>"u"?"":c[g];u.setAttribute(h,y)}u.setAttribute(Lr,"true"),s.some((h,g)=>(l=g,u.isEqualNode(h)))?s.splice(l,1):o.push(u)}),s.forEach(c=>{var u;return(u=c.parentNode)==null?void 0:u.removeChild(c)}),o.forEach(c=>n.appendChild(c)),{oldTags:s,newTags:o}},t0=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(Lr),s=r?r.split(","):[],o=[...s],l=Object.keys(e);for(const c of l){const u=e[c]||"";n.getAttribute(c)!==u&&n.setAttribute(c,u),s.indexOf(c)===-1&&s.push(c);const h=o.indexOf(c);h!==-1&&o.splice(h,1)}for(let c=o.length-1;c>=0;c-=1)n.removeAttribute(o[c]);s.length===o.length?n.removeAttribute(Lr):n.getAttribute(Lr)!==l.join(",")&&n.setAttribute(Lr,l.join(","))},A2=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=VS(t)),t0("title",e)},$_=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:o,metaTags:l,noscriptTags:c,onChangeClientState:u,scriptTags:h,styleTags:g,title:y,titleAttributes:v}=t;t0("body",r),t0("html",s),A2(y,v);const b={baseTag:qa("base",n),linkTags:qa("link",o),metaTags:qa("meta",l),noscriptTags:qa("noscript",c),scriptTags:qa("script",h),styleTags:qa("style",g)},k={},D={};Object.keys(b).forEach(P=>{const{newTags:O,oldTags:$}=b[P];O.length&&(k[P]=O),$.length&&(D[P]=b[P].oldTags)}),e&&e(),u(t,k,D)},Kc=null,P2=t=>{Kc&&cancelAnimationFrame(Kc),t.defer?Kc=requestAnimationFrame(()=>{$_(t,()=>{Kc=null})}):($_(t),Kc=null)},I2=P2,F_=class extends A.Component{constructor(){super(...arguments);Rs(this,"rendered",!1)}shouldComponentUpdate(e){return!h2(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=x2(e.get().map(o=>{const l={...o.props};return delete l.context,l}));zS.canUseDOM?I2(s):Zg&&(r=Zg(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Qg,R2=(Qg=class extends A.Component{shouldComponentUpdate(t){return!a2(V_(this.props,"helmetData"),V_(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return O_(M_.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${M_.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),O_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return nt.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...o}=r.props,l=Object.keys(o).reduce((u,h)=>(u[f2[h]||h]=o[h],u),{});let{type:c}=r;switch(typeof c=="symbol"?c=c.toString():this.warnOnInvalidChildren(r,s),c){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,l,s);break;default:e=this.mapObjectTypeChildren(r,e,l,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof e0)){const s=r;r=new e0(s.context,!0),delete n.helmetData}return r?nt.createElement(F_,{...n,context:r.value}):nt.createElement(BS.Consumer,null,s=>nt.createElement(F_,{...n,context:s}))}},Rs(Qg,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Qg);function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lf.apply(null,arguments)}function gy(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function n0(t,e){return n0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},n0(t,e)}function yy(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n0(t,e)}function N2(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function j2(t,e){t.classList?t.classList.add(e):N2(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function U_(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function D2(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=U_(t.className,e):t.setAttribute("class",U_(t.className&&t.className.baseVal||"",e))}const B_={disabled:!1},cf=nt.createContext(null);var WS=function(e){return e.scrollTop},Zc="unmounted",ko="exited",Co="entering",nl="entered",r0="exiting",Ws=function(t){yy(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var l=s,c=l&&!l.isMounting?r.enter:r.appear,u;return o.appearStatus=null,r.in?c?(u=ko,o.appearStatus=Co):u=nl:r.unmountOnExit||r.mountOnEnter?u=Zc:u=ko,o.state={status:u},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Zc?{status:ko}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==Co&&l!==nl&&(o=Co):(l===Co||l===nl)&&(o=r0)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,l,c;return o=l=c=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,c=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:c}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===Co){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Eh.findDOMNode(this);l&&WS(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ko&&this.setState({status:Zc})},n.performEnter=function(s){var o=this,l=this.props.enter,c=this.context?this.context.isMounting:s,u=this.props.nodeRef?[c]:[Eh.findDOMNode(this),c],h=u[0],g=u[1],y=this.getTimeouts(),v=c?y.appear:y.enter;if(!s&&!l||B_.disabled){this.safeSetState({status:nl},function(){o.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:Co},function(){o.props.onEntering(h,g),o.onTransitionEnd(v,function(){o.safeSetState({status:nl},function(){o.props.onEntered(h,g)})})})},n.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:Eh.findDOMNode(this);if(!o||B_.disabled){this.safeSetState({status:ko},function(){s.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:r0},function(){s.props.onExiting(c),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:ko},function(){s.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,o.nextCallback=null,s(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:Eh.findDOMNode(this),c=s==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=u[0],g=u[1];this.props.addEndListener(h,g)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Zc)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var c=gy(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return nt.createElement(cf.Provider,{value:null},typeof l=="function"?l(s,c):nt.cloneElement(nt.Children.only(l),c))},e}(nt.Component);Ws.contextType=cf;Ws.propTypes={};function Ga(){}Ws.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ga,onEntering:Ga,onEntered:Ga,onExit:Ga,onExiting:Ga,onExited:Ga};Ws.UNMOUNTED=Zc;Ws.EXITED=ko;Ws.ENTERING=Co;Ws.ENTERED=nl;Ws.EXITING=r0;var O2=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return j2(e,r)})},hg=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return D2(e,r)})},Hf=function(t){yy(e,t);function e(){for(var r,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r=t.call.apply(t,[this].concat(o))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(c,u){var h=r.resolveArguments(c,u),g=h[0],y=h[1];r.removeClasses(g,"exit"),r.addClass(g,y?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(c,u)},r.onEntering=function(c,u){var h=r.resolveArguments(c,u),g=h[0],y=h[1],v=y?"appear":"enter";r.addClass(g,v,"active"),r.props.onEntering&&r.props.onEntering(c,u)},r.onEntered=function(c,u){var h=r.resolveArguments(c,u),g=h[0],y=h[1],v=y?"appear":"enter";r.removeClasses(g,v),r.addClass(g,v,"done"),r.props.onEntered&&r.props.onEntered(c,u)},r.onExit=function(c){var u=r.resolveArguments(c),h=u[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(c)},r.onExiting=function(c){var u=r.resolveArguments(c),h=u[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(c)},r.onExited=function(c){var u=r.resolveArguments(c),h=u[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(c)},r.resolveArguments=function(c,u){return r.props.nodeRef?[r.props.nodeRef.current,c]:[c,u]},r.getClassNames=function(c){var u=r.props.classNames,h=typeof u=="string",g=h&&u?u+"-":"",y=h?""+g+c:u[c],v=h?y+"-active":u[c+"Active"],b=h?y+"-done":u[c+"Done"];return{baseClassName:y,activeClassName:v,doneClassName:b}},r}var n=e.prototype;return n.addClass=function(s,o,l){var c=this.getClassNames(o)[l+"ClassName"],u=this.getClassNames("enter"),h=u.doneClassName;o==="appear"&&l==="done"&&h&&(c+=" "+h),l==="active"&&s&&WS(s),c&&(this.appliedClasses[o][l]=c,O2(s,c))},n.removeClasses=function(s,o){var l=this.appliedClasses[o],c=l.base,u=l.active,h=l.done;this.appliedClasses[o]={},c&&hg(s,c),u&&hg(s,u),h&&hg(s,h)},n.render=function(){var s=this.props;s.classNames;var o=gy(s,["classNames"]);return nt.createElement(Ws,lf({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(nt.Component);Hf.defaultProps={classNames:""};Hf.propTypes={};function L2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vy(t,e){var n=function(o){return e&&A.isValidElement(o)?e(o):o},r=Object.create(null);return t&&A.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function M2(t,e){t=t||{},e=e||{};function n(g){return g in e?e[g]:t[g]}var r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,c={};for(var u in e){if(r[u])for(l=0;l<r[u].length;l++){var h=r[u][l];c[r[u][l]]=n(h)}c[u]=n(u)}for(l=0;l<s.length;l++)c[s[l]]=n(s[l]);return c}function No(t,e,n){return n[e]!=null?n[e]:t.props[e]}function V2(t,e){return vy(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:No(n,"appear",t),enter:No(n,"enter",t),exit:No(n,"exit",t)})})}function $2(t,e,n){var r=vy(t.children),s=M2(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(A.isValidElement(l)){var c=o in e,u=o in r,h=e[o],g=A.isValidElement(h)&&!h.props.in;u&&(!c||g)?s[o]=A.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:No(l,"exit",t),enter:No(l,"enter",t)}):!u&&c&&!g?s[o]=A.cloneElement(l,{in:!1}):u&&c&&A.isValidElement(h)&&(s[o]=A.cloneElement(l,{onExited:n.bind(null,l),in:h.props.in,exit:No(l,"exit",t),enter:No(l,"enter",t)}))}}),s}var F2=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},U2={component:"div",childFactory:function(e){return e}},qf=function(t){yy(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var l=o.handleExited.bind(L2(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,c=o.handleExited,u=o.firstRender;return{children:u?V2(s,c):$2(s,l,c),firstRender:!1}},n.handleExited=function(s,o){var l=vy(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(c){var u=lf({},c.children);return delete u[s.key],{children:u}}))},n.render=function(){var s=this.props,o=s.component,l=s.childFactory,c=gy(s,["component","childFactory"]),u=this.state.contextValue,h=F2(this.state.children).map(l);return delete c.appear,delete c.enter,delete c.exit,o===null?nt.createElement(cf.Provider,{value:u},h):nt.createElement(cf.Provider,{value:u},nt.createElement(o,c,h))},e}(nt.Component);qf.propTypes={};qf.defaultProps=U2;const B2="modulepreload",z2=function(t){return"/aussie-gut-pack/"+t},z_={},El=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=l(n.map(h=>{if(h=z2(h),h in z_)return;z_[h]=!0;const g=h.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":B2,g||(v.as="script"),v.crossOrigin="",v.href=h,u&&v.setAttribute("nonce",u),document.head.appendChild(v),g)return new Promise((b,k)=>{v.addEventListener("load",b),v.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},W2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>El(async()=>{const{default:r}=await Promise.resolve().then(()=>$l);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class xy extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class H2 extends xy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class q2 extends xy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class G2 extends xy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var s0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(s0||(s0={}));var K2=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(g){try{h(r.next(g))}catch(y){l(y)}}function u(g){try{h(r.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):s(g.value).then(c,u)}h((r=r.apply(t,e||[])).next())})};class Q2{constructor(e,{headers:n={},customFetch:r,region:s=s0.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=W2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return K2(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=n;let c={},{region:u}=n;u||(u=this.region),u&&u!=="any"&&(c["x-region"]=u);let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(c["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h}).catch(k=>{throw new H2(k)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new q2(g);if(!g.ok)throw new G2(g);let v=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield g.json():v==="application/octet-stream"?b=yield g.blob():v==="text/event-stream"?b=g:v==="multipart/form-data"?b=yield g.formData():b=yield g.text(),{data:b,error:null}}catch(s){return{data:null,error:s}}})}}var qt={},Ka={},Qa={},Ja={},Ya={},Xa={},J2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tl=J2();const Y2=Tl.fetch,HS=Tl.fetch.bind(Tl),qS=Tl.Headers,X2=Tl.Request,Z2=Tl.Response,$l=Object.freeze(Object.defineProperty({__proto__:null,Headers:qS,Request:X2,Response:Z2,default:HS,fetch:Y2},Symbol.toStringTag,{value:"Module"})),ej=_R($l);var Sh={},W_;function GS(){if(W_)return Sh;W_=1,Object.defineProperty(Sh,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Sh.default=t,Sh}var H_;function KS(){if(H_)return Xa;H_=1;var t=Xa&&Xa.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xa,"__esModule",{value:!0});const e=t(ej),n=t(GS());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let u=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var g,y,v;let b=null,k=null,D=null,P=h.status,O=h.statusText;if(h.ok){if(this.method!=="HEAD"){const B=await h.text();B===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=B:k=JSON.parse(B))}const M=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),z=(y=h.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");M&&z&&z.length>1&&(D=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,D=null,P=406,O="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const M=await h.text();try{b=JSON.parse(M),Array.isArray(b)&&h.status===404&&(k=[],b=null,P=200,O="OK")}catch{h.status===404&&M===""?(P=204,O="No Content"):b={message:M}}if(b&&this.isMaybeSingle&&(!((v=b==null?void 0:b.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,P=200,O="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:k,count:D,status:P,statusText:O}});return this.shouldThrowOnError||(u=u.catch(h=>{var g,y,v;return{error:{message:`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(y=h==null?void 0:h.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=h==null?void 0:h.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),u.then(o,l)}returns(){return this}overrideTypes(){return this}}return Xa.default=r,Xa}var q_;function QS(){if(q_)return Ya;q_=1;var t=Ya&&Ya.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ya,"__esModule",{value:!0});const e=t(KS());class n extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:c,referencedTable:u=c}={}){const h=u?`${u}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:c=l}={}){const u=typeof c>"u"?"offset":`${c}.offset`,h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(h,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:c=!1,wal:u=!1,format:h="text"}={}){var g;const y=[s?"analyze":null,o?"verbose":null,l?"settings":null,c?"buffers":null,u?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${v}"; options=${y};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ya.default=n,Ya}var G_;function wy(){if(G_)return Ja;G_=1;var t=Ja&&Ja.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ja,"__esModule",{value:!0});const e=t(QS());class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${u}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return Ja.default=n,Ja}var K_;function JS(){if(K_)return Qa;K_=1;var t=Qa&&Qa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qa,"__esModule",{value:!0});const e=t(wy());class n{constructor(s,{headers:o={},schema:l,fetch:c}){this.url=s,this.headers=o,this.schema=l,this.fetch=c}select(s,{head:o=!1,count:l}={}){const c=o?"HEAD":"GET";let u=!1;const h=(s??"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const c="POST",u=[];if(this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const h=s.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(h.length>0){const g=[...new Set(h)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:c,defaultToNull:u=!0}={}){const h="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),c&&g.push(`count=${c}`),u||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(s)){const y=s.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),this.headers.Prefer=c.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Qa.default=n,Qa}var Qc={},Jc={},Q_;function tj(){return Q_||(Q_=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.version=void 0,Jc.version="0.0.0-automated"),Jc}var J_;function nj(){if(J_)return Qc;J_=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.DEFAULT_HEADERS=void 0;const t=tj();return Qc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Qc}var Y_;function rj(){if(Y_)return Ka;Y_=1;var t=Ka&&Ka.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ka,"__esModule",{value:!0});const e=t(JS()),n=t(wy()),r=nj();class s{constructor(l,{headers:c={},schema:u,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=u,this.fetch=h}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:u=!1,get:h=!1,count:g}={}){let y;const v=new URL(`${this.url}/rpc/${l}`);let b;u||h?(y=u?"HEAD":"GET",Object.entries(c).filter(([D,P])=>P!==void 0).map(([D,P])=>[D,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([D,P])=>{v.searchParams.append(D,P)})):(y="POST",b=c);const k=Object.assign({},this.headers);return g&&(k.Prefer=`count=${g}`),new n.default({method:y,url:v,headers:k,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Ka.default=s,Ka}var X_;function sj(){if(X_)return qt;X_=1;var t=qt&&qt.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.PostgrestError=qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const e=t(rj());qt.PostgrestClient=e.default;const n=t(JS());qt.PostgrestQueryBuilder=n.default;const r=t(wy());qt.PostgrestFilterBuilder=r.default;const s=t(QS());qt.PostgrestTransformBuilder=s.default;const o=t(KS());qt.PostgrestBuilder=o.default;const l=t(GS());return qt.PostgrestError=l.default,qt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},qt}var ij=sj();const oj=Qo(ij),{PostgrestClient:aj,PostgrestQueryBuilder:Vz,PostgrestFilterBuilder:$z,PostgrestTransformBuilder:Fz,PostgrestBuilder:Uz,PostgrestError:Bz}=oj,lj="2.11.2",cj={"X-Client-Info":`realtime-js/${lj}`},uj="1.0.0",YS=1e4,dj=1e3;var gl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(gl||(gl={}));var Gn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Gn||(Gn={}));var Or;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Or||(Or={}));var i0;(function(t){t.websocket="websocket"})(i0||(i0={}));var Ro;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ro||(Ro={}));class hj{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const c=r.decode(e.slice(l,l+s));l=l+s;const u=r.decode(e.slice(l,l+o));l=l+o;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:u,payload:h}}}class XS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const Z_=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=fj(l,t,e,s),o),{})},fj=(t,e,n,r)=>{const s=e.find(c=>c.name===t),o=s==null?void 0:s.type,l=n[t];return o&&!r.includes(o)?ZS(o,l):o0(l)},ZS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return yj(e,n)}switch(t){case it.bool:return mj(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return pj(e);case it.json:case it.jsonb:return gj(e);case it.timestamp:return vj(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return o0(e);default:return o0(e)}},o0=t=>t,mj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},pj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},gj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},yj=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>ZS(e,c))}return t},vj=t=>typeof t=="string"?t.replace(" ","T"):t,e1=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class fg{constructor(e,n,r={},s=YS){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var eb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(eb||(eb={}));class lu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(u=>{this.state=lu.syncDiff(this.state,u,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=lu.syncDiff(this.state,s,o,l),c())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),l=this.transformState(n),c={},u={};return this.map(o,(h,g)=>{l[h]||(u[h]=g)}),this.map(l,(h,g)=>{const y=o[h];if(y){const v=g.map(P=>P.presence_ref),b=y.map(P=>P.presence_ref),k=g.filter(P=>b.indexOf(P.presence_ref)<0),D=y.filter(P=>v.indexOf(P.presence_ref)<0);k.length>0&&(c[h]=k),D.length>0&&(u[h]=D)}else c[h]=g}),this.syncDiff(o,{joins:c,leaves:u},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(c,u)=>{var h;const g=(h=e[c])!==null&&h!==void 0?h:[];if(e[c]=this.cloneDeep(u),g.length>0){const y=e[c].map(b=>b.presence_ref),v=g.filter(b=>y.indexOf(b.presence_ref)<0);e[c].unshift(...v)}r(c,g,u)}),this.map(l,(c,u)=>{let h=e[c];if(!h)return;const g=u.map(y=>y.presence_ref);h=h.filter(y=>g.indexOf(y.presence_ref)<0),e[c]=h,s(c,h,u),h.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(tb||(tb={}));var nb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(nb||(nb={}));var Ns;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ns||(Ns={}));class _y{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Gn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new fg(this,Or.join,this.params,this.timeout),this.rejoinTimer=new XS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Or.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new lu(this),this.broadcastEndpointURL=e1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:c}}=this.params;this._onError(g=>e==null?void 0:e(Ns.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Ns.CLOSED));const u={},h={broadcast:o,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket.setAuth(),g===void 0){e==null||e(Ns.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,k=[];for(let D=0;D<b;D++){const P=v[D],{filter:{event:O,schema:$,table:M,filter:z}}=P,B=g&&g[D];if(B&&B.event===O&&B.schema===$&&B.table===M&&B.filter===z)k.push(Object.assign(Object.assign({},P),{id:B.id}));else{this.unsubscribe(),e==null||e(Ns.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(Ns.SUBSCRIBED);return}}).receive("error",g=>{e==null||e(Ns.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ns.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,u;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Gn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Or.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new fg(this,Or.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new fg(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const l=e.toLocaleLowerCase(),{close:c,error:u,leave:h,join:g}=Or;if(r&&[c,u,h,g].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var k,D,P;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(D=b.filter)===null||D===void 0?void 0:D.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===l}).map(b=>b.callback(v,r)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var k,D,P,O,$,M;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const z=b.id,B=(k=b.filter)===null||k===void 0?void 0:k.event;return z&&((D=n.ids)===null||D===void 0?void 0:D.includes(z))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const z=($=(O=b==null?void 0:b.filter)===null||O===void 0?void 0:O.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return z==="*"||z===((M=n==null?void 0:n.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const k=v.data,{schema:D,table:P,commit_timestamp:O,type:$,errors:M}=k;v=Object.assign(Object.assign({},{schema:D,table:P,commit_timestamp:O,eventType:$,new:{},old:{},errors:M}),this._getPayloadRecords(k))}b.callback(v,r)})}_isClosed(){return this.state===Gn.closed}_isJoined(){return this.state===Gn.joined}_isJoining(){return this.state===Gn.joining}_isLeaving(){return this.state===Gn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&_y.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Or.close,{},e)}_onError(e){this._on(Or.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Z_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Z_(e.columns,e.old_record)),n}}const xj=()=>{},wj=typeof WebSocket<"u",_j=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bj{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=cj,this.params={},this.timeout=YS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=xj,this.conn=null,this.sendBuffer=[],this.serializer=new hj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...c)=>El(async()=>{const{default:u}=await Promise.resolve().then(()=>$l);return{default:u}},void 0).then(({default:u})=>u(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${e}/${i0.websocket}`,this.httpEndpoint=e1(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,l)=>l(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new XS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(wj){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Ej(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),El(async()=>{const{default:e}=await import("./browser-CaIe6Dmj.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uj}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case gl.connecting:return Ro.Connecting;case gl.open:return Ro.Open;case gl.closing:return Ro.Closing;default:return Ro.Closed}}isConnected(){return this.connectionState()===Ro.Open}channel(e,n={config:{}}){const r=new _y(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Or.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(dj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:o,ref:l}=n;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,o),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,o,l)),this.stateChangeCallbacks.message.forEach(c=>c(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Or.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_j],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Ej{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=gl.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let by=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Gt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Tj extends by{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class a0 extends by{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Sj=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(g){try{h(r.next(g))}catch(y){l(y)}}function u(g){try{h(r.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):s(g.value).then(c,u)}h((r=r.apply(t,e||[])).next())})};const t1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>El(async()=>{const{default:r}=await Promise.resolve().then(()=>$l);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},kj=()=>Sj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield El(()=>Promise.resolve().then(()=>$l),void 0)).Response:Response}),l0=t=>{if(Array.isArray(t))return t.map(n=>l0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=l0(r)}),e};var Jo=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(g){try{h(r.next(g))}catch(y){l(y)}}function u(g){try{h(r.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):s(g.value).then(c,u)}h((r=r.apply(t,e||[])).next())})};const mg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Cj=(t,e,n)=>Jo(void 0,void 0,void 0,function*(){const r=yield kj();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new Tj(mg(s),t.status||500))}).catch(s=>{e(new a0(mg(s),s))}):e(new a0(mg(t),t))}),Aj=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function qu(t,e,n,r,s,o){return Jo(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(n,Aj(e,r,s,o)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>l(u)).catch(u=>Cj(u,c,r))})})}function uf(t,e,n,r){return Jo(this,void 0,void 0,function*(){return qu(t,"GET",e,n,r)})}function Ei(t,e,n,r,s){return Jo(this,void 0,void 0,function*(){return qu(t,"POST",e,r,s,n)})}function Pj(t,e,n,r,s){return Jo(this,void 0,void 0,function*(){return qu(t,"PUT",e,r,s,n)})}function Ij(t,e,n,r){return Jo(this,void 0,void 0,function*(){return qu(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function n1(t,e,n,r,s){return Jo(this,void 0,void 0,function*(){return qu(t,"DELETE",e,r,s,n)})}var Rn=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(g){try{h(r.next(g))}catch(y){l(y)}}function u(g){try{h(r.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):s(g.value).then(c,u)}h((r=r.apply(t,e||[])).next())})};const Rj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nj{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=t1(s)}uploadOrUpdate(e,n,r,s){return Rn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},rb),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const u=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),u&&o.append("metadata",this.encodeMetadata(u)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),u&&o.append("metadata",this.encodeMetadata(u))):(o=r,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,u&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const h=this._removeEmptyFolders(n),g=this._getFinalPath(h),y=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:o,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),v=yield y.json();return y.ok?{data:{path:h,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(o){if(Gt(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Rn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",n);try{let u;const h=Object.assign({upsert:rb.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",h.cacheControl)):(u=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const y=yield this.fetch(c.toString(),{method:"PUT",body:u,headers:g}),v=yield y.json();return y.ok?{data:{path:o,fullPath:v.Key},error:null}:{data:null,error:v}}catch(u){if(Gt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return Rn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield Ei(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),c=l.searchParams.get("token");if(!c)throw new by("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Rn(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Rn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ei(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Rn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield Ei(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Rn(this,void 0,void 0,function*(){try{const s=yield Ei(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}download(e,n){return Rn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield uf(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(Gt(c))return{data:null,error:c};throw c}})}info(e){return Rn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield uf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:l0(r),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}exists(e){return Rn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ij(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Gt(r)&&r instanceof a0){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${h}`)}}}remove(e){return Rn(this,void 0,void 0,function*(){try{return{data:yield n1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Rn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Rj),n),{prefix:e||""});return{data:yield Ei(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const jj="2.7.1",Dj={"X-Client-Info":`storage-js/${jj}`};var Za=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(g){try{h(r.next(g))}catch(y){l(y)}}function u(g){try{h(r.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):s(g.value).then(c,u)}h((r=r.apply(t,e||[])).next())})};class Oj{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Dj),n),this.fetch=t1(r)}listBuckets(){return Za(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Gt(e))return{data:null,error:e};throw e}})}getBucket(e){return Za(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Za(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Za(this,void 0,void 0,function*(){try{return{data:yield Pj(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Za(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Za(this,void 0,void 0,function*(){try{return{data:yield n1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}}class Lj extends Oj{constructor(e,n={},r){super(e,n,r)}from(e){return new Nj(this.url,this.headers,e,this.fetch)}}const Mj="2.49.8";let eu="";typeof Deno<"u"?eu="deno":typeof document<"u"?eu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?eu="react-native":eu="node";const Vj={"X-Client-Info":`supabase-js-${eu}/${Mj}`},$j={headers:Vj},Fj={schema:"public"},Uj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Bj={};var zj=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(g){try{h(r.next(g))}catch(y){l(y)}}function u(g){try{h(r.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):s(g.value).then(c,u)}h((r=r.apply(t,e||[])).next())})};const Wj=t=>{let e;return t?e=t:typeof fetch>"u"?e=HS:e=fetch,(...n)=>e(...n)},Hj=()=>typeof Headers>"u"?qS:Headers,qj=(t,e,n)=>{const r=Wj(n),s=Hj();return(o,l)=>zj(void 0,void 0,void 0,function*(){var c;const u=(c=yield e())!==null&&c!==void 0?c:t;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${u}`),r(o,Object.assign(Object.assign({},l),{headers:h}))})};var Gj=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(g){try{h(r.next(g))}catch(y){l(y)}}function u(g){try{h(r.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):s(g.value).then(c,u)}h((r=r.apply(t,e||[])).next())})};function Kj(t){return t.endsWith("/")?t:t+"/"}function Qj(t,e){var n,r;const{db:s,auth:o,realtime:l,global:c}=t,{db:u,auth:h,realtime:g,global:y}=e,v={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},h),o),realtime:Object.assign(Object.assign({},g),l),global:Object.assign(Object.assign(Object.assign({},y),c),{headers:Object.assign(Object.assign({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Gj(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}const r1="2.69.1",rl=30*1e3,c0=3,pg=c0*rl,Jj="http://localhost:9999",Yj="supabase.auth.token",Xj={"X-Client-Info":`gotrue-js/${r1}`},u0="X-Supabase-Api-Version",s1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eD=6e5;class Ey extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class tD extends Ey{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function nD(t){return Me(t)&&t.name==="AuthApiError"}class i1 extends Ey{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Wi extends Ey{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class wi extends Wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rD(t){return Me(t)&&t.name==="AuthSessionMissingError"}class gg extends Wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kh extends Wi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ch extends Wi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sD(t){return Me(t)&&t.name==="AuthImplicitGrantRedirectError"}class sb extends Wi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class d0 extends Wi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function yg(t){return Me(t)&&t.name==="AuthRetryableFetchError"}class ib extends Wi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class cu extends Wi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ab=` 	
\r=`.split(""),iD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ab.length;e+=1)t[ab[e].charCodeAt(0)]=-2;for(let e=0;e<ob.length;e+=1)t[ob[e].charCodeAt(0)]=e;return t})();function o1(t,e,n){const r=iD[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function lb(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{lD(l,r,n)};for(let l=0;l<t.length;l+=1)o1(t.charCodeAt(l),s,o);return e.join("")}function oD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function aD(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}oD(r,e)}}function lD(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function cD(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)o1(t.charCodeAt(s),n,r);return new Uint8Array(e)}function uD(t){const e=[];return aD(t,n=>e.push(n)),new Uint8Array(e)}function dD(t){return Math.round(Date.now()/1e3)+t}function hD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ts=()=>typeof window<"u"&&typeof document<"u",To={tested:!1,writable:!1},uu=()=>{if(!ts())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(To.tested)return To.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),To.tested=!0,To.writable=!0}catch{To.tested=!0,To.writable=!1}return To.writable};function fD(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const a1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>El(async()=>{const{default:r}=await Promise.resolve().then(()=>$l);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},mD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",l1=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ah=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ph=async(t,e)=>{await t.removeItem(e)};let c1=class u1{constructor(){this.promise=new u1.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};c1.promiseConstructor=Promise;function vg(t){const e=t.split(".");if(e.length!==3)throw new cu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Zj.test(e[r]))throw new cu("JWT not in base64url format");return{header:JSON.parse(lb(e[0])),payload:JSON.parse(lb(e[1])),signature:cD(e[2]),raw:{header:e[0],payload:e[1]}}}async function pD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function gD(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function yD(t){return("0"+t.toString(16)).substr(-2)}function vD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,yD).join("")}async function xD(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function wD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await xD(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function el(t,e,n=!1){const r=vD();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await l1(t,`${e}-code-verifier`,s);const o=await wD(r);return[o,r===o?"plain":"s256"]}const _D=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bD(t){const e=t.headers.get(u0);if(!e||!e.match(_D))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ED(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function TD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var SD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Ao=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kD=[502,503,504];async function cb(t){var e;if(!mD(t))throw new d0(Ao(t),0);if(kD.includes(t.status))throw new d0(Ao(t),t.status);let n;try{n=await t.json()}catch(o){throw new i1(Ao(o),o)}let r;const s=bD(t);if(s&&s.getTime()>=s1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ib(Ao(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new wi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new ib(Ao(n),t.status,n.weak_password.reasons);throw new tD(Ao(n),t.status||500,r)}const CD=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[u0]||(o[u0]=s1["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",u=await AD(t,e,n+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function AD(t,e,n,r,s,o){const l=CD(e,r,s,o);let c;try{c=await t(n,Object.assign({},l))}catch(u){throw console.error(u),new d0(Ao(u),0)}if(c.ok||await cb(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(u){await cb(u)}}function _i(t){var e;let n=null;ND(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=dD(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ub(t){const e=_i(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ti(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function PD(t){return{data:t,error:null}}function ID(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,l=SD(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},u=Object.assign({},l);return{data:{properties:c,user:u},error:null}}function RD(t){return t}function ND(t){return t.access_token&&t.refresh_token&&t.expires_in}var jD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class DD{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=a1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ti})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=jD(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ID,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Me(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ti})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,l,c,u;try{const h={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:RD});if(g.error)throw g.error;const y=await g.json(),v=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(u=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return b.length>0&&(b.forEach(k=>{const D=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);h[`${P}Page`]=D}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},y),h),error:null}}catch(h){if(Me(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ti})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ti})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ti})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}const OD={getItem:t=>uu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{uu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{uu()&&globalThis.localStorage.removeItem(t)}};function db(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function LD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const tl={debug:!!(globalThis&&uu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class d1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class MD extends d1{}async function VD(t,e,n){tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),tl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new MD(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(tl.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}LD();const $D={url:Jj,storageKey:Yj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hb(t,e,n){return await n()}class Su{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Su.nextInstanceID,Su.nextInstanceID+=1,this.instanceID>0&&ts()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},$D),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new DD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=a1(s.fetch),this.lock=s.lock||hb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ts()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=VD:this.lock=hb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:uu()?this.storage=OD:(this.memoryStorage={},this.storage=db(this.memoryStorage)):(this.memoryStorage={},this.storage=db(this.memoryStorage)),ts()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${r1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=fD(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ts()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),sD(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Me(n)?{error:n}:{error:new i1("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:_i}),{data:l,error:c}=o;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:g,password:y,options:v}=e;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await el(this.storage,this.storageKey)),o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:k},xform:_i})}else if("phone"in e){const{phone:g,password:y,options:v}=e;o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:_i})}else throw new kh("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return{data:{user:null,session:null},error:c};const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:c}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ub})}else if("phone"in e){const{phone:o,password:l,options:c}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ub})}else throw new kh("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Ah(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:l}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:_i});if(await Ph(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new gg}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(Me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:l}=e,c=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:_i}),{data:u,error:h}=c;return h?{data:{user:null,session:null},error:h}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new gg}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:h})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,l;try{if("email"in e){const{email:c,options:u}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await el(this.storage,this.storageKey));const{error:y}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:c,options:u}=e,{data:h,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(o=u==null?void 0:u.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(l=u==null?void 0:u.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g}}throw new kh("You must provide either an email or phone number.")}catch(c){if(Me(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:_i});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,h=l.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:h,session:u},error:null}}catch(s){if(Me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await el(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:PD})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new wi;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:c}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new kh("You must provide either an email or phone number and a type")}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ah(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,h,g)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,h,g))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ti}):await this._useSession(async n=>{var r,s,o;const{data:l,error:c}=n;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wi}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Ti})})}catch(n){if(Me(n))return rD(n)&&(await this._removeSession(),await Ph(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new wi;const l=s.session;let c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=await el(this.storage,this.storageKey));const{data:h,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:Ti});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wi;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:l}=vg(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{session:c,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:u}=await this._getUser(e.access_token);if(u)throw u;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Me(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:c}=n;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new wi;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ts())throw new Ch("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ch(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ch("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sb("No code detected.");const{data:$,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:c,expires_at:u,token_type:h}=e;if(!o||!c||!l||!h)throw new Ch("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(c);let v=g+y;u&&(v=parseInt(u));const b=v-g;b*1e3<=rl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const k=v-y;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,v,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,v,g);const{data:D,error:P}=await this._getUser(o);if(P)throw P;const O={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:y,expires_at:v,refresh_token:l,token_type:h,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:O,redirectType:e.type},error:null}}catch(r){if(Me(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ah(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(nD(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Ph(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=hD(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await el(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var l,c,u,h,g;const{data:y,error:v}=o;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(h=y.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return ts()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Me(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)throw l;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await gD(async s=>(s>0&&await pD(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_i})),(s,o)=>{const l=200*Math.pow(2,s);return o&&yg(o)&&Date.now()+l-r<rl})}catch(r){if(this._debug(n,"error",r),Me(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ts()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Ah(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<pg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${pg}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),yg(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new c1;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new wi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(s,"error",o),Me(o)){const l={session:null,error:o};return yg(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(u){o.push(u)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await l1(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ph(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ts()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/rl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${rl}ms, refresh threshold is ${c0} ticks`),s<=c0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof d1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ts()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await el(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:c}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=vg(s.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+eD>Date.now()))return r;const{data:s,error:o}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new cu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(l=>l.kid===e),!r)throw new cu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:b,error:k}=await this.getSession();if(k||!b.session)return{data:null,error:k};r=b.session.access_token}const{header:s,payload:o,signature:l,raw:{header:c,payload:u}}=vg(r);if(ED(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:s,signature:l},error:null}}const h=TD(s.alg),g=await this.fetchJwk(s.kid,n),y=await crypto.subtle.importKey("jwk",g,h,!0,["verify"]);if(!await crypto.subtle.verify(h,y,l,uD(`${c}.${u}`)))throw new cu("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}}Su.nextInstanceID=0;const FD=Su;class UD extends FD{constructor(e){super(e)}}var BD=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(g){try{h(r.next(g))}catch(y){l(y)}}function u(g){try{h(r.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):s(g.value).then(c,u)}h((r=r.apply(t,e||[])).next())})};class zD{constructor(e,n,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const c=Kj(e),u=new URL(c);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,g={db:Fj,realtime:Bj,auth:Object.assign(Object.assign({},Uj),{storageKey:h}),global:$j},y=Qj(r??{},g);this.storageKey=(s=y.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=y.global.headers)!==null&&o!==void 0?o:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=y.auth)!==null&&l!==void 0?l:{},this.headers,y.global.fetch),this.fetch=qj(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new aj(new URL("rest/v1",u).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),y.accessToken||this._listenForAuthEvents()}get functions(){return new Q2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Lj(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return BD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:c,debug:u},h,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UD({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:l,lock:c,debug:u,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new bj(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const WD=(t,e,n)=>new zD(t,e,n),HD={BASE_URL:"/aussie-gut-pack/",DEV:!1,MODE:"github",PROD:!0,SSR:!1,VITE_BASE_PATH:"/aussie-gut-pack/",VITE_FIREBASE_API_KEY:"AIzaSyBOM041d620q5TBYfl7E6SexEqR8NGrWQE",VITE_FIREBASE_APP_ID:"1:834797498886:web:cb2f88ab4523480400c987",VITE_FIREBASE_AUTH_DOMAIN:"aussie-gut-pack.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"834797498886",VITE_FIREBASE_PROJECT_ID:"aussie-gut-pack",VITE_FIREBASE_STORAGE_BUCKET:"aussie-gut-pack.firebasestorage.app",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjbXNpemh3Y2FjdWZ5d2xyZnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxOTg3ODAsImV4cCI6MjA1OTc3NDc4MH0.aOJLWA1vCEBHPlMUDbcB_2EsxJgdpoiT51RMFeiO5gg",VITE_SUPABASE_URL:"https://lcmsizhwcacufywlrfpr.supabase.co"},h1="https://lcmsizhwcacufywlrfpr.supabase.co",f1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjbXNpemh3Y2FjdWZ5d2xyZnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxOTg3ODAsImV4cCI6MjA1OTc3NDc4MH0.aOJLWA1vCEBHPlMUDbcB_2EsxJgdpoiT51RMFeiO5gg";console.log("Supabase URL:",h1);console.log("Supabase Anon Key:",f1);console.log("All env:",HD);const Kn=WD(h1,f1),Hs=A.createContext(),qD=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!0);A.useEffect(()=>{(async()=>{const{data:{session:v}}=await Kn.auth.getSession();n((v==null?void 0:v.user)??null),s(!1)})();const{data:{subscription:y}}=Kn.auth.onAuthStateChange((v,b)=>{n((b==null?void 0:b.user)??null),s(!1)});return()=>{y==null||y.unsubscribe()}},[]);const h={user:e,loading:r,signup:async(g,y)=>{console.log("Signup attempt with:",{email:g,password:y});const{data:v,error:b}=await Kn.auth.signUp({email:g,password:y,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(v,null,2)),b)throw console.error("Signup error:",b.message),b;if(v.user&&v.user.identities&&v.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const k=await Kn.auth.resend({type:"signup",email:g});throw console.log("Resend response:",JSON.stringify(k,null,2)),k.error?(console.error("Error resending confirmation email:",k.error.message),k.error):new Error("User already exists. A confirmation email has been resent.")}return v},login:async(g,y)=>{console.log("Login attempt with:",{email:g,password:y});const{data:v,error:b}=await Kn.auth.signInWithPassword({email:g,password:y});if(b)throw console.error("Login error:",b.message),b.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):b;return n(v.user),v},logout:async()=>{const{error:g}=await Kn.auth.signOut();if(g)throw console.error("Logout error:",g.message),g;n(null)},refreshUser:async()=>{const{data:{user:g}}=await Kn.auth.getUser();n(g)}};return f.jsx(Hs.Provider,{value:h,children:t})},GD=({location:t})=>{var D;const[e,n]=A.useState(!1),{isDarkMode:r,toggleTheme:s}=A.useContext(Ze),{user:o,logout:l,loading:c}=A.useContext(Hs),u=Qt(),h=A.useRef(null),g=A.useRef(null);console.log("Rendering Navigation component. isMenuOpen:",e);const y=async()=>{try{await l(),u("/login")}catch(P){console.error("Logout error:",P.message)}},v=()=>{var P;e?(n(!1),(P=h.current)==null||P.focus()):(n(!0),setTimeout(()=>{var O;return(O=g.current)==null?void 0:O.focus()},100))};A.useEffect(()=>{const P=O=>{var $;O.key==="Escape"&&e&&(n(!1),($=h.current)==null||$.focus())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[e]);const b=P=>t.pathname===P,k=((D=o==null?void 0:o.user_metadata)==null?void 0:D.displayName)||"User";return f.jsxs(f.Fragment,{children:[f.jsx("a",{href:"#main-content",className:"fixed top-0 left-0 p-2 bg-red-600 text-white focus:top-4 focus:left-4 z-50 transition-all duration-200",children:"Skip to Content"}),f.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${r?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,"aria-label":"Main navigation",children:[f.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center relative z-50",children:[f.jsx(ot,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Aussie Gut Pack"}),f.jsxs("div",{className:"hidden lg:flex space-x-6 items-center",children:[f.jsx(ot,{to:"/",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/")?"text-red-600 font-semibold":""}`,children:"Home"}),f.jsx(ot,{to:"/products",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),f.jsx(ot,{to:"/blog",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),f.jsx(ot,{to:"/contact",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),c?f.jsx("span",{children:"Loading..."}):o?f.jsxs(f.Fragment,{children:[f.jsxs(ot,{to:"/profile",className:`nav-link text-sm hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",k]}),f.jsx("button",{onClick:y,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Logout"})]}):f.jsx(ot,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Login"}),f.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200","aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"":""})]}),f.jsx("button",{ref:h,onClick:v,"aria-expanded":e,"aria-label":e?"Close menu":"Open menu",className:"lg:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 text-xl z-60",children:f.jsx("i",{className:e?"fas fa-times":"fas fa-bars"})})]}),e&&f.jsx("div",{className:"mobile-menu-backdrop active lg:hidden",onClick:v,tabIndex:0,onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&v()},"aria-label":"Close mobile menu"}),f.jsxs("div",{className:`lg:hidden px-4 py-4 ${e?"mobile-menu-open":"mobile-menu-closed"} ${r?"bg-stone-800 border-t border-stone-700":"bg-red-50 border-t border-red-200"} shadow-md`,children:[f.jsx(ot,{ref:g,to:"/",onClick:v,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Home"}),f.jsx(ot,{to:"/products",onClick:v,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/products")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Products"}),f.jsx(ot,{to:"/blog",onClick:v,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/blog")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Blog"}),f.jsx(ot,{to:"/faq",onClick:v,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/faq")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"FAQ"}),f.jsx(ot,{to:"/contact",onClick:v,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/contact")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Contact"}),f.jsx(ot,{to:"/nutrition",onClick:v,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/nutrition")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Nutrition"}),o&&f.jsx(ot,{to:"/profile",onClick:v,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/profile")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Profile"}),f.jsx("button",{onClick:()=>{s(),v()},className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${r?"text-red-400":"text-red-800"}`,"aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?" Light Mode":" Dark Mode"}),c?f.jsx("span",{className:"block py-2 px-3",children:"Loading..."}):o?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:`block py-2 px-3 text-sm ${r?"text-red-400":"text-red-800"}`,children:["Welcome, ",k]}),f.jsx("button",{onClick:()=>{y(),v()},className:"block py-2 px-3 text-left w-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Logout"})]}):f.jsx(ot,{to:"/login",onClick:v,className:"block py-2 px-3 text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Login"})]})]})]})};var m1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fb=nt.createContext&&nt.createContext(m1),KD=["attr","size","title"];function QD(t,e){if(t==null)return{};var n=JD(t,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JD(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function df(){return df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},df.apply(this,arguments)}function mb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mb(Object(n),!0).forEach(function(r){YD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YD(t,e,n){return e=XD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XD(t){var e=ZD(t,"string");return typeof e=="symbol"?e:e+""}function ZD(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p1(t){return t&&t.map((e,n)=>nt.createElement(e.tag,hf({key:n},e.attr),p1(e.child)))}function Fl(t){return e=>nt.createElement(e4,df({attr:hf({},t.attr)},e),p1(t.child))}function e4(t){var e=n=>{var{attr:r,size:s,title:o}=t,l=QD(t,KD),c=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),nt.createElement("svg",df({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:u,style:hf(hf({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&nt.createElement("title",null,o),t.children)};return fb!==void 0?nt.createElement(fb.Consumer,null,n=>e(n)):e(m1)}function t4(t){return Fl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function n4(t){return Fl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function r4(t){return Fl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function s4(t){return Fl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function i4(t){return Fl({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function o4(t){return Fl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}const a4=()=>{const{isDarkMode:t}=A.useContext(Ze),{user:e,logout:n}=A.useContext(Hs),r=zr();return f.jsx("div",{className:`${t?"dark":""}`,children:f.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[f.jsx(GD,{location:r}),f.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:f.jsx(RS,{})}),f.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[f.jsx("div",{className:"mb-4",children:f.jsxs("div",{className:"flex justify-center space-x-4",children:[f.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:f.jsx(t4,{size:24})}),f.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:f.jsx(s4,{size:24})}),f.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:f.jsx(n4,{size:24})}),f.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:f.jsx(r4,{size:24})}),f.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:f.jsx(i4,{size:24})})]})}),f.jsxs("p",{children:[" ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function Dn({to:t,children:e,variant:n,className:r,...s}){const o="px-4 py-2 rounded transition-colors duration-300 ease-in-out",l=n==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return t?f.jsx(ot,{to:t,className:`${o} ${l} ${r}`,...s,children:e}):f.jsx("button",{className:`${o} ${l} ${r}`,...s,children:e})}const l4="/aussie-gut-pack/assets/aussie-BleX4DhZ.png",c4="/aussie-gut-pack/assets/goggins-BJp9afAd.png",pb=[{src:l4,alt:"Australian Shepherd dog"},{src:c4,alt:"David Goggins running"}],u4=({className:t})=>{const[e,n]=A.useState(0);return A.useEffect(()=>{const r=setInterval(()=>{n(s=>(s+1)%pb.length)},5e3);return()=>clearInterval(r)},[]),f.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:pb.map((r,s)=>f.jsx("img",{src:r.src,alt:r.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${s===e?"opacity-100":"opacity-0"} ${t||""}`},s))})},Ty=A.createContext({});function Sy(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const ky=typeof window<"u",g1=ky?A.useLayoutEffect:A.useEffect,Gf=A.createContext(null);function Cy(t,e){t.indexOf(e)===-1&&t.push(e)}function Ay(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vs=(t,e,n)=>n>e?e:n<t?t:n;let Py=()=>{};const $s={},y1=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function v1(t){return typeof t=="object"&&t!==null}const x1=t=>/^0[^.\s]+$/u.test(t);function Iy(t){let e;return()=>(e===void 0&&(e=t()),e)}const hr=t=>t,d4=(t,e)=>n=>e(t(n)),Gu=(...t)=>t.reduce(d4),ku=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Ry{constructor(){this.subscriptions=[]}add(e){return Cy(this.subscriptions,e),()=>Ay(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ss=t=>t*1e3,is=t=>t/1e3;function w1(t,e){return e?t*(1e3/e):0}const _1=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,h4=1e-7,f4=12;function m4(t,e,n,r,s){let o,l,c=0;do l=e+(n-e)/2,o=_1(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>h4&&++c<f4);return l}function Ku(t,e,n,r){if(t===e&&n===r)return hr;const s=o=>m4(o,0,1,t,n);return o=>o===0||o===1?o:_1(s(o),e,r)}const b1=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,E1=t=>e=>1-t(1-e),T1=Ku(.33,1.53,.69,.99),Ny=E1(T1),S1=b1(Ny),k1=t=>(t*=2)<1?.5*Ny(t):.5*(2-Math.pow(2,-10*(t-1))),jy=t=>1-Math.sin(Math.acos(t)),C1=E1(jy),A1=b1(jy),p4=Ku(.42,0,1,1),g4=Ku(0,0,.58,1),P1=Ku(.42,0,.58,1),y4=t=>Array.isArray(t)&&typeof t[0]!="number",I1=t=>Array.isArray(t)&&typeof t[0]=="number",v4={linear:hr,easeIn:p4,easeInOut:P1,easeOut:g4,circIn:jy,circInOut:A1,circOut:C1,backIn:Ny,backInOut:S1,backOut:T1,anticipate:k1},x4=t=>typeof t=="string",gb=t=>{if(I1(t)){Py(t.length===4);const[e,n,r,s]=t;return Ku(e,n,r,s)}else if(x4(t))return v4[t];return t},Ih=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],yb={value:null};function w4(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},u=0;function h(y){l.has(y)&&(g.schedule(y),t()),u++,y(c)}const g={schedule:(y,v=!1,b=!1)=>{const D=b&&s?n:r;return v&&l.add(y),D.has(y)||D.add(y),y},cancel:y=>{r.delete(y),l.delete(y)},process:y=>{if(c=y,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(h),e&&yb.value&&yb.value.frameloop[e].push(u),u=0,n.clear(),s=!1,o&&(o=!1,g.process(y))}};return g}const _4=40;function R1(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Ih.reduce((M,z)=>(M[z]=w4(o,e?z:void 0),M),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:g,update:y,preRender:v,render:b,postRender:k}=l,D=()=>{const M=$s.useManualTiming?s.timestamp:performance.now();n=!1,$s.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(M-s.timestamp,_4),1)),s.timestamp=M,s.isProcessing=!0,c.process(s),u.process(s),h.process(s),g.process(s),y.process(s),v.process(s),b.process(s),k.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(D))},P=()=>{n=!0,r=!0,s.isProcessing||t(D)};return{schedule:Ih.reduce((M,z)=>{const B=l[z];return M[z]=(G,I=!1,S=!1)=>(n||P(),B.schedule(G,I,S)),M},{}),cancel:M=>{for(let z=0;z<Ih.length;z++)l[Ih[z]].cancel(M)},state:s,steps:l}}const{schedule:yt,cancel:Li,state:en,steps:xg}=R1(typeof requestAnimationFrame<"u"?requestAnimationFrame:hr,!0);let Hh;function b4(){Hh=void 0}const On={now:()=>(Hh===void 0&&On.set(en.isProcessing||$s.useManualTiming?en.timestamp:performance.now()),Hh),set:t=>{Hh=t,queueMicrotask(b4)}},N1=t=>e=>typeof e=="string"&&e.startsWith(t),Dy=N1("--"),E4=N1("var(--"),Oy=t=>E4(t)?T4.test(t.split("/*")[0].trim()):!1,T4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ul={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Cu={...Ul,transform:t=>Vs(0,1,t)},Rh={...Ul,default:1},du=t=>Math.round(t*1e5)/1e5,Ly=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function S4(t){return t==null}const k4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,My=(t,e)=>n=>!!(typeof n=="string"&&k4.test(n)&&n.startsWith(t)||e&&!S4(n)&&Object.prototype.hasOwnProperty.call(n,e)),j1=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(Ly);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},C4=t=>Vs(0,255,t),wg={...Ul,transform:t=>Math.round(C4(t))},jo={test:My("rgb","red"),parse:j1("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wg.transform(t)+", "+wg.transform(e)+", "+wg.transform(n)+", "+du(Cu.transform(r))+")"};function A4(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const h0={test:My("#"),parse:A4,transform:jo.transform},Qu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),bi=Qu("deg"),os=Qu("%"),Ne=Qu("px"),P4=Qu("vh"),I4=Qu("vw"),vb={...os,parse:t=>os.parse(t)/100,transform:t=>os.transform(t*100)},ll={test:My("hsl","hue"),parse:j1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+os.transform(du(e))+", "+os.transform(du(n))+", "+du(Cu.transform(r))+")"},hn={test:t=>jo.test(t)||h0.test(t)||ll.test(t),parse:t=>jo.test(t)?jo.parse(t):ll.test(t)?ll.parse(t):h0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?jo.transform(t):ll.transform(t)},R4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function N4(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ly))==null?void 0:e.length)||0)+(((n=t.match(R4))==null?void 0:n.length)||0)>0}const D1="number",O1="color",j4="var",D4="var(",xb="${}",O4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Au(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(O4,u=>(hn.test(u)?(r.color.push(o),s.push(O1),n.push(hn.parse(u))):u.startsWith(D4)?(r.var.push(o),s.push(j4),n.push(u)):(r.number.push(o),s.push(D1),n.push(parseFloat(u))),++o,xb)).split(xb);return{values:n,split:c,indexes:r,types:s}}function L1(t){return Au(t).values}function M1(t){const{split:e,types:n}=Au(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=n[l];c===D1?o+=du(s[l]):c===O1?o+=hn.transform(s[l]):o+=s[l]}return o}}const L4=t=>typeof t=="number"?0:t;function M4(t){const e=L1(t);return M1(t)(e.map(L4))}const Mi={test:N4,parse:L1,createTransformer:M1,getAnimatableNone:M4};function _g(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function V4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;s=_g(u,c,t+1/3),o=_g(u,c,t),l=_g(u,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function ff(t,e){return n=>n>0?e:t}const gt=(t,e,n)=>t+(e-t)*n,bg=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},$4=[h0,jo,ll],F4=t=>$4.find(e=>e.test(t));function wb(t){const e=F4(t);if(!e)return!1;let n=e.parse(t);return e===ll&&(n=V4(n)),n}const _b=(t,e)=>{const n=wb(t),r=wb(e);if(!n||!r)return ff(t,e);const s={...n};return o=>(s.red=bg(n.red,r.red,o),s.green=bg(n.green,r.green,o),s.blue=bg(n.blue,r.blue,o),s.alpha=gt(n.alpha,r.alpha,o),jo.transform(s))},f0=new Set(["none","hidden"]);function U4(t,e){return f0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function B4(t,e){return n=>gt(t,e,n)}function Vy(t){return typeof t=="number"?B4:typeof t=="string"?Oy(t)?ff:hn.test(t)?_b:H4:Array.isArray(t)?V1:typeof t=="object"?hn.test(t)?_b:z4:ff}function V1(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>Vy(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function z4(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Vy(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function W4(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],c=t.values[l]??0;n[s]=c,r[o]++}return n}const H4=(t,e)=>{const n=Mi.createTransformer(e),r=Au(t),s=Au(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?f0.has(t)&&!s.values.length||f0.has(e)&&!r.values.length?U4(t,e):Gu(V1(W4(r,s),s.values),n):ff(t,e)};function $1(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?gt(t,e,n):Vy(t)(t,e)}const q4=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>yt.update(e,n),stop:()=>Li(e),now:()=>en.isProcessing?en.timestamp:On.now()}},F1=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(o/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},mf=2e4;function $y(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<mf;)e+=n,r=t.next(e);return e>=mf?1/0:e}function G4(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min($y(r),mf);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:is(s)}}const K4=5;function U1(t,e,n){const r=Math.max(e-K4,0);return w1(n-t(r),e-r)}const bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bb=.001;function Q4({duration:t=bt.duration,bounce:e=bt.bounce,velocity:n=bt.velocity,mass:r=bt.mass}){let s,o,l=1-e;l=Vs(bt.minDamping,bt.maxDamping,l),t=Vs(bt.minDuration,bt.maxDuration,is(t)),l<1?(s=h=>{const g=h*l,y=g*t,v=g-n,b=m0(h,l),k=Math.exp(-y);return bb-v/b*k},o=h=>{const y=h*l*t,v=y*n+n,b=Math.pow(l,2)*Math.pow(h,2)*t,k=Math.exp(-y),D=m0(Math.pow(h,2),l);return(-s(h)+bb>0?-1:1)*((v-b)*k)/D}):(s=h=>{const g=Math.exp(-h*t),y=(h-n)*t+1;return-.001+g*y},o=h=>{const g=Math.exp(-h*t),y=(n-h)*(t*t);return g*y});const c=5/t,u=Y4(s,o,c);if(t=ss(t),isNaN(u))return{stiffness:bt.stiffness,damping:bt.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const J4=12;function Y4(t,e,n){let r=n;for(let s=1;s<J4;s++)r=r-t(r)/e(r);return r}function m0(t,e){return t*Math.sqrt(1-e*e)}const X4=["duration","bounce"],Z4=["stiffness","damping","mass"];function Eb(t,e){return e.some(n=>t[n]!==void 0)}function eO(t){let e={velocity:bt.velocity,stiffness:bt.stiffness,damping:bt.damping,mass:bt.mass,isResolvedFromDuration:!1,...t};if(!Eb(t,Z4)&&Eb(t,X4))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Vs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:bt.mass,stiffness:s,damping:o}}else{const n=Q4(t);e={...e,...n,mass:bt.mass},e.isResolvedFromDuration=!0}return e}function pf(t=bt.visualDuration,e=bt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:u,damping:h,mass:g,duration:y,velocity:v,isResolvedFromDuration:b}=eO({...n,velocity:-is(n.velocity||0)}),k=v||0,D=h/(2*Math.sqrt(u*g)),P=l-o,O=is(Math.sqrt(u/g)),$=Math.abs(P)<5;r||(r=$?bt.restSpeed.granular:bt.restSpeed.default),s||(s=$?bt.restDelta.granular:bt.restDelta.default);let M;if(D<1){const B=m0(O,D);M=G=>{const I=Math.exp(-D*O*G);return l-I*((k+D*O*P)/B*Math.sin(B*G)+P*Math.cos(B*G))}}else if(D===1)M=B=>l-Math.exp(-O*B)*(P+(k+O*P)*B);else{const B=O*Math.sqrt(D*D-1);M=G=>{const I=Math.exp(-D*O*G),S=Math.min(B*G,300);return l-I*((k+D*O*P)*Math.sinh(S)+B*P*Math.cosh(S))/B}}const z={calculatedDuration:b&&y||null,next:B=>{const G=M(B);if(b)c.done=B>=y;else{let I=B===0?k:0;D<1&&(I=B===0?ss(k):U1(M,B,G));const S=Math.abs(I)<=r,T=Math.abs(l-G)<=s;c.done=S&&T}return c.value=c.done?l:G,c},toString:()=>{const B=Math.min($y(z),mf),G=F1(I=>z.next(B*I).value,B,30);return B+"ms "+G},toTransition:()=>{}};return z}pf.applyToOptions=t=>{const e=G4(t,100,pf);return t.ease=e.ease,t.duration=ss(e.duration),t.type="keyframes",t};function p0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:u,restDelta:h=.5,restSpeed:g}){const y=t[0],v={done:!1,value:y},b=S=>c!==void 0&&S<c||u!==void 0&&S>u,k=S=>c===void 0?u:u===void 0||Math.abs(c-S)<Math.abs(u-S)?c:u;let D=n*e;const P=y+D,O=l===void 0?P:l(P);O!==P&&(D=O-y);const $=S=>-D*Math.exp(-S/r),M=S=>O+$(S),z=S=>{const T=$(S),R=M(S);v.done=Math.abs(T)<=h,v.value=v.done?O:R};let B,G;const I=S=>{b(v.value)&&(B=S,G=pf({keyframes:[v.value,k(v.value)],velocity:U1(M,S,v.value),damping:s,stiffness:o,restDelta:h,restSpeed:g}))};return I(0),{calculatedDuration:null,next:S=>{let T=!1;return!G&&B===void 0&&(T=!0,z(S),I(S)),B!==void 0&&S>=B?G.next(S-B):(!T&&z(S),v)}}}function tO(t,e,n){const r=[],s=n||$s.mix||$1,o=t.length-1;for(let l=0;l<o;l++){let c=s(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||hr:e;c=Gu(u,c)}r.push(c)}return r}function nO(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(Py(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=tO(e,r,s),u=c.length,h=g=>{if(l&&g<t[0])return e[0];let y=0;if(u>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const v=ku(t[y],t[y+1],g);return c[y](v)};return n?g=>h(Vs(t[0],t[o-1],g)):h}function rO(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=ku(0,e,r);t.push(gt(n,1,s))}}function sO(t){const e=[0];return rO(e,t.length-1),e}function iO(t,e){return t.map(n=>n*e)}function oO(t,e){return t.map(()=>e||P1).splice(0,t.length-1)}function hu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=y4(r)?r.map(gb):gb(r),o={done:!1,value:e[0]},l=iO(n&&n.length===e.length?n:sO(e),t),c=nO(l,e,{ease:Array.isArray(s)?s:oO(e,s)});return{calculatedDuration:t,next:u=>(o.value=c(u),o.done=u>=t,o)}}const aO=t=>t!==null;function Fy(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(aO),c=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const lO={decay:p0,inertia:p0,tween:hu,keyframes:hu,spring:pf};function B1(t){typeof t.type=="string"&&(t.type=lO[t.type])}class Uy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const cO=t=>t/100;class By extends Uy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(n=!0)=>{var r,s;if(n){const{motionValue:o}=this.options;o&&o.updatedAt!==On.now()&&this.tick(On.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;B1(e);const{type:n=hu,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const u=n||hu;u!==hu&&typeof c[0]!="number"&&(this.mixKeyframes=Gu(cO,$1(c[0],c[1])),c=[0,100]);const h=u({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=$y(h));const{calculatedDuration:g}=h;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:g,repeat:y,repeatType:v,repeatDelay:b,type:k,onUpdate:D,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const O=this.currentTime-h*(this.playbackSpeed>=0?1:-1),$=this.playbackSpeed>=0?O<0:O>s;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let M=this.currentTime,z=r;if(y){const S=Math.min(this.currentTime,s)/c;let T=Math.floor(S),R=S%1;!R&&S>=1&&(R=1),R===1&&T--,T=Math.min(T,y+1),!!(T%2)&&(v==="reverse"?(R=1-R,b&&(R-=b/c)):v==="mirror"&&(z=l)),M=Vs(0,1,R)*c}const B=$?{done:!1,value:g[0]}:z.next(M);o&&(B.value=o(B.value));let{done:G}=B;!$&&u!==null&&(G=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return I&&k!==p0&&(B.value=Fy(g,this.options,P,this.speed)),D&&D(B.value),I&&this.finish(),B}then(e,n){return this.finished.then(e,n)}get duration(){return is(this.calculatedDuration)}get time(){return is(this.currentTime)}set time(e){var n;e=ss(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(On.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=is(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=q4,startTime:n}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(On.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function uO(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Do=t=>t*180/Math.PI,g0=t=>{const e=Do(Math.atan2(t[1],t[0]));return y0(e)},dO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:g0,rotateZ:g0,skewX:t=>Do(Math.atan(t[1])),skewY:t=>Do(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},y0=t=>(t=t%360,t<0&&(t+=360),t),Tb=g0,Sb=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),kb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),hO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Sb,scaleY:kb,scale:t=>(Sb(t)+kb(t))/2,rotateX:t=>y0(Do(Math.atan2(t[6],t[5]))),rotateY:t=>y0(Do(Math.atan2(-t[2],t[0]))),rotateZ:Tb,rotate:Tb,skewX:t=>Do(Math.atan(t[4])),skewY:t=>Do(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function v0(t){return t.includes("scale")?1:0}function x0(t,e){if(!t||t==="none")return v0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=hO,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=dO,s=c}if(!s)return v0(e);const o=r[e],l=s[1].split(",").map(mO);return typeof o=="function"?o(l):l[o]}const fO=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return x0(n,e)};function mO(t){return parseFloat(t.trim())}const Bl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zl=new Set(Bl),Cb=t=>t===Ul||t===Ne,pO=new Set(["x","y","z"]),gO=Bl.filter(t=>!pO.has(t));function yO(t){const e=[];return gO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>x0(e,"x"),y:(t,{transform:e})=>x0(e,"y")};Vo.translateX=Vo.x;Vo.translateY=Vo.y;const $o=new Set;let w0=!1,_0=!1,b0=!1;function z1(){if(_0){const t=Array.from($o).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=yO(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{var c;(c=r.getValue(o))==null||c.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_0=!1,w0=!1,$o.forEach(t=>t.complete(b0)),$o.clear()}function W1(){$o.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_0=!0)})}function vO(){b0=!0,W1(),z1(),b0=!1}class zy{constructor(e,n,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?($o.add(this),w0||(w0=!0,yt.read(W1),yt.resolveKeyframes(z1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const c=r.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}uO(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),$o.delete(this)}cancel(){this.state==="scheduled"&&($o.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xO=t=>t.startsWith("--");function wO(t,e,n){xO(e)?t.style.setProperty(e,n):t.style[e]=n}const _O=Iy(()=>window.ScrollTimeline!==void 0),bO={};function EO(t,e){const n=Iy(t);return()=>bO[e]??n()}const H1=EO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),tu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Ab={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tu([0,.65,.55,1]),circOut:tu([.55,0,1,.45]),backIn:tu([.31,.01,.66,-.59]),backOut:tu([.33,1.53,.69,.99])};function q1(t,e){if(t)return typeof t=="function"?H1()?F1(t,e):"ease-out":I1(t)?tu(t):Array.isArray(t)?t.map(n=>q1(n,e)||Ab.easeOut):Ab[t]}function TO(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:u}={},h=void 0){const g={[e]:n};u&&(g.offset=u);const y=q1(c,s);Array.isArray(y)&&(g.easing=y);const v={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),t.animate(g,v)}function G1(t){return typeof t=="function"&&"applyToOptions"in t}function SO({type:t,...e}){return G1(t)&&H1()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class kO extends Uy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,Py(typeof e.type!="string");const h=SO(e);this.animation=TO(n,r,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Fy(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):wO(n,r,g),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return is(Number(e))}get time(){return is(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ss(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&_O()?(this.animation.timeline=e,hr):n(this)}}const K1={anticipate:k1,backInOut:S1,circInOut:A1};function CO(t){return t in K1}function AO(t){typeof t.ease=="string"&&CO(t.ease)&&(t.ease=K1[t.ease])}const Pb=10;class PO extends kO{constructor(e){AO(e),B1(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new By({...l,autoplay:!1}),u=ss(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-Pb).value,c.sample(u).value,Pb),c.stop()}}const Ib=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Mi.test(t)||t==="0")&&!t.startsWith("url("));function IO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function RO(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=Ib(s,e),c=Ib(o,e);return!l||!c?!1:IO(t)||(n==="spring"||G1(n))&&r}function Wy(t){return v1(t)&&"offsetHeight"in t}const NO=new Set(["opacity","clipPath","filter","transform"]),jO=Iy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DO(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=t;if(!Wy((h=e==null?void 0:e.owner)==null?void 0:h.current))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return jO()&&n&&NO.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const OO=40;class LO extends Uy{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:u,motionValue:h,element:g,...y}){var k;super(),this.stop=()=>{var D,P;this._animation&&(this._animation.stop(),(D=this.stopTimeline)==null||D.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=On.now();const v={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,name:u,motionValue:h,element:g,...y},b=(g==null?void 0:g.KeyframeResolver)||zy;this.keyframeResolver=new b(c,(D,P,O)=>this.onKeyframesResolved(D,P,v,!O),u,h,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:u,isHandoff:h,onUpdate:g}=r;this.resolvedAt=On.now(),RO(e,o,l,c)||(($s.instantAnimations||!u)&&(g==null||g(Fy(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>OO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!h&&DO(v)?new PO({...v,element:v.motionValue.owner.current}):new By(v);b.finished.then(()=>this.notifyFinished()).catch(hr),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),vO()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const MO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VO(t){const e=MO.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Q1(t,e,n=1){const[r,s]=VO(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return y1(l)?parseFloat(l):l}return Oy(s)?Q1(s,e,n+1):s}function Hy(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const J1=new Set(["width","height","top","left","right","bottom",...Bl]),$O={test:t=>t==="auto",parse:t=>t},Y1=t=>e=>e.test(t),X1=[Ul,Ne,os,bi,I4,P4,$O],Rb=t=>X1.find(Y1(t));function FO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||x1(t):!0}const UO=new Set(["brightness","contrast","saturate","opacity"]);function BO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ly)||[];if(!r)return t;const s=n.replace(r,"");let o=UO.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const zO=/\b([a-z-]*)\(.*?\)/gu,E0={...Mi,getAnimatableNone:t=>{const e=t.match(zO);return e?e.map(BO).join(" "):t}},Nb={...Ul,transform:Math.round},WO={rotate:bi,rotateX:bi,rotateY:bi,rotateZ:bi,scale:Rh,scaleX:Rh,scaleY:Rh,scaleZ:Rh,skew:bi,skewX:bi,skewY:bi,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Cu,originX:vb,originY:vb,originZ:Ne},qy={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...WO,zIndex:Nb,fillOpacity:Cu,strokeOpacity:Cu,numOctaves:Nb},HO={...qy,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:E0,WebkitFilter:E0},Z1=t=>HO[t];function ek(t,e){let n=Z1(t);return n!==E0&&(n=Mi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const qO=new Set(["auto","none","0"]);function GO(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!qO.has(o)&&Au(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=ek(n,s)}class KO extends zy{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),Oy(h))){const g=Q1(h,n.current);g!==void 0&&(e[u]=g),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!J1.has(r)||e.length!==2)return;const[s,o]=e,l=Rb(s),c=Rb(o);if(l!==c)if(Cb(l)&&Cb(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else Vo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||FO(e[s]))&&r.push(s);r.length&&GO(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Vo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function QO(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const jb=30,JO=t=>!isNaN(parseFloat(t));class YO{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var l,c;const o=On.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();s&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=On.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=JO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ry);const r=this.events[e].add(n);return e==="change"?()=>{r(),yt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>jb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jb);return w1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sl(t,e){return new YO(t,e)}const tk=(t,e)=>e&&typeof t=="number"?e.transform(t):t,{schedule:Gy}=R1(queueMicrotask,!1),Dr={x:!1,y:!1};function nk(){return Dr.x||Dr.y}function XO(t){return t==="x"||t==="y"?Dr[t]?null:(Dr[t]=!0,()=>{Dr[t]=!1}):Dr.x||Dr.y?null:(Dr.x=Dr.y=!0,()=>{Dr.x=Dr.y=!1})}function rk(t,e){const n=QO(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function Db(t){return!(t.pointerType==="touch"||nk())}function ZO(t,e,n={}){const[r,s,o]=rk(t,n),l=c=>{if(!Db(c))return;const{target:u}=c,h=e(u,c);if(typeof h!="function"||!u)return;const g=y=>{Db(y)&&(h(y),u.removeEventListener("pointerleave",g))};u.addEventListener("pointerleave",g,s)};return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),o}const sk=(t,e)=>e?t===e?!0:sk(t,e.parentElement):!1,Ky=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,eL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function tL(t){return eL.has(t.tagName)||t.tabIndex!==-1}const qh=new WeakSet;function Ob(t){return e=>{e.key==="Enter"&&t(e)}}function Eg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const nL=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Ob(()=>{if(qh.has(n))return;Eg(n,"down");const s=Ob(()=>{Eg(n,"up")}),o=()=>Eg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Lb(t){return Ky(t)&&!nk()}function rL(t,e,n={}){const[r,s,o]=rk(t,n),l=c=>{const u=c.currentTarget;if(!Lb(c))return;qh.add(u);const h=e(u,c),g=(b,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),qh.has(u)&&qh.delete(u),Lb(b)&&typeof h=="function"&&h(b,{success:k})},y=b=>{g(b,u===window||u===document||n.useGlobalTarget||sk(u,b.target))},v=b=>{g(b,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",v,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),Wy(c)&&(c.addEventListener("focus",h=>nL(h,s)),!tL(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function ik(t){return v1(t)&&"ownerSVGElement"in t}function sL(t){return ik(t)&&t.tagName==="svg"}const pn=t=>!!(t&&t.getVelocity),iL=[...X1,hn,Mi],oL=t=>iL.find(Y1(t)),Qy=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class aL extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Wy(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function lL({children:t,isPresent:e,anchorX:n}){const r=A.useId(),s=A.useRef(null),o=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=A.useContext(Qy);return A.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:g,right:y}=o.current;if(e||!s.current||!c||!u)return;const v=n==="left"?`left: ${g}`:`right: ${y}`;s.current.dataset.motionPopId=r;const b=document.createElement("style");return l&&(b.nonce=l),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${v}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(b)&&document.head.removeChild(b)}},[e]),f.jsx(aL,{isPresent:e,childRef:s,sizeRef:o,children:A.cloneElement(t,{ref:s})})}const cL=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:c})=>{const u=Sy(uL),h=A.useId();let g=!0,y=A.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:s,onExitComplete:v=>{u.set(v,!0);for(const b of u.values())if(!b)return;r&&r()},register:v=>(u.set(v,!1),()=>u.delete(v))}),[n,u,r]);return o&&g&&(y={...y}),A.useMemo(()=>{u.forEach((v,b)=>u.set(b,!1))},[n]),A.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),l==="popLayout"&&(t=f.jsx(lL,{isPresent:n,anchorX:c,children:t})),f.jsx(Gf.Provider,{value:y,children:t})};function uL(){return new Map}function ok(t=!0){const e=A.useContext(Gf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=A.useId();A.useEffect(()=>{if(t)return s(o)},[t]);const l=A.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const Nh=t=>t.key||"";function Mb(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const T0=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:c="left"})=>{const[u,h]=ok(l),g=A.useMemo(()=>Mb(t),[t]),y=l&&!u?[]:g.map(Nh),v=A.useRef(!0),b=A.useRef(g),k=Sy(()=>new Map),[D,P]=A.useState(g),[O,$]=A.useState(g);g1(()=>{v.current=!1,b.current=g;for(let B=0;B<O.length;B++){const G=Nh(O[B]);y.includes(G)?k.delete(G):k.get(G)!==!0&&k.set(G,!1)}},[O,y.length,y.join("-")]);const M=[];if(g!==D){let B=[...g];for(let G=0;G<O.length;G++){const I=O[G],S=Nh(I);y.includes(S)||(B.splice(G,0,I),M.push(I))}return o==="wait"&&M.length&&(B=M),$(Mb(B)),P(g),null}const{forceRender:z}=A.useContext(Ty);return f.jsx(f.Fragment,{children:O.map(B=>{const G=Nh(B),I=l&&!u?!1:g===O||y.includes(G),S=()=>{if(k.has(G))k.set(G,!0);else return;let T=!0;k.forEach(R=>{R||(T=!1)}),T&&(z==null||z(),$(b.current),l&&(h==null||h()),r&&r())};return f.jsx(cL,{isPresent:I,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,onExitComplete:I?void 0:S,anchorX:c,children:B},G)})})},ak=A.createContext({strict:!1}),Vb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kl={};for(const t in Vb)kl[t]={isEnabled:e=>Vb[t].some(n=>!!e[n])};function dL(t){for(const e in t)kl[e]={...kl[e],...t[e]}}const hL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hL.has(t)}let lk=t=>!gf(t);function fL(t){t&&(lk=e=>e.startsWith("on")?!gf(e):t(e))}try{fL(require("@emotion/is-prop-valid").default)}catch{}function mL(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(lk(s)||n===!0&&gf(s)||!e&&!gf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function pL(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Kf=A.createContext({});function Qf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Pu(t){return typeof t=="string"||Array.isArray(t)}const Jy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yy=["initial",...Jy];function Jf(t){return Qf(t.animate)||Yy.some(e=>Pu(t[e]))}function ck(t){return!!(Jf(t)||t.variants)}function gL(t,e){if(Jf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Pu(n)?n:void 0,animate:Pu(r)?r:void 0}}return t.inherit!==!1?e:{}}function yL(t){const{initial:e,animate:n}=gL(t,A.useContext(Kf));return A.useMemo(()=>({initial:e,animate:n}),[$b(e),$b(n)])}function $b(t){return Array.isArray(t)?t.join(" "):t}const vL=Symbol.for("motionComponentSymbol");function cl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function xL(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):cl(n)&&(n.current=r))},[e])}const Xy=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wL="framerAppearId",uk="data-"+Xy(wL),dk=A.createContext({});function _L(t,e,n,r,s){var D,P;const{visualElement:o}=A.useContext(Kf),l=A.useContext(ak),c=A.useContext(Gf),u=A.useContext(Qy).reducedMotion,h=A.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const g=h.current,y=A.useContext(dk);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&bL(h.current,n,s,y);const v=A.useRef(!1);A.useInsertionEffect(()=>{g&&v.current&&g.update(n,c)});const b=n[uk],k=A.useRef(!!b&&!((D=window.MotionHandoffIsComplete)!=null&&D.call(window,b))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,b)));return g1(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Gy.render(g.render),k.current&&g.animationState&&g.animationState.animateChanges())}),A.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)==null||O.call(window,b)}),k.current=!1))}),g}function bL(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:hk(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&cl(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:u,layoutRoot:h})}function hk(t){if(t)return t.options.allowProjection!==!1?t.projection:hk(t.parent)}function EL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&dL(t);function o(c,u){let h;const g={...A.useContext(Qy),...c,layoutId:TL(c)},{isStatic:y}=g,v=yL(c),b=r(c,y);if(!y&&ky){SL();const k=kL(g);h=k.MeasureLayout,v.visualElement=_L(s,b,g,e,k.ProjectionNode)}return f.jsxs(Kf.Provider,{value:v,children:[h&&v.visualElement?f.jsx(h,{visualElement:v.visualElement,...g}):null,n(s,c,xL(b,v.visualElement,u),b,y,v.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const l=A.forwardRef(o);return l[vL]=s,l}function TL({layoutId:t}){const e=A.useContext(Ty).id;return e&&t!==void 0?e+"-"+t:t}function SL(t,e){A.useContext(ak).strict}function kL(t){const{drag:e,layout:n}=kl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Iu={};function CL(t){for(const e in t)Iu[e]=t[e],Dy(e)&&(Iu[e].isCSSVariable=!0)}function fk(t,{layout:e,layoutId:n}){return zl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Iu[t]||t==="opacity")}const AL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PL=Bl.length;function IL(t,e,n){let r="",s=!0;for(let o=0;o<PL;o++){const l=Bl[o],c=t[l];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(l.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=tk(c,qy[l]);if(!u){s=!1;const g=AL[l]||l;r+=`${g}(${h}) `}n&&(e[l]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Zy(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,c=!1;for(const u in e){const h=e[u];if(zl.has(u)){l=!0;continue}else if(Dy(u)){s[u]=h;continue}else{const g=tk(h,qy[u]);u.startsWith("origin")?(c=!0,o[u]=g):r[u]=g}}if(e.transform||(l||n?r.transform=IL(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:g=0}=o;r.transformOrigin=`${u} ${h} ${g}`}}const ev=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mk(t,e,n){for(const r in e)!pn(e[r])&&!fk(r,n)&&(t[r]=e[r])}function RL({transformTemplate:t},e){return A.useMemo(()=>{const n=ev();return Zy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function NL(t,e){const n=t.style||{},r={};return mk(r,n,t),Object.assign(r,RL(t,e)),r}function jL(t,e){const n={},r=NL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const DL={offset:"stroke-dashoffset",array:"stroke-dasharray"},OL={offset:"strokeDashoffset",array:"strokeDasharray"};function LL(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?DL:OL;t[o.offset]=Ne.transform(-r);const l=Ne.transform(e),c=Ne.transform(n);t[o.array]=`${l} ${c}`}function pk(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},u,h,g){if(Zy(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),s!==void 0&&LL(y,s,o,l,!1)}const gk=()=>({...ev(),attrs:{}}),yk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ML(t,e,n,r){const s=A.useMemo(()=>{const o=gk();return pk(o,e,yk(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};mk(o,t.style,t),s.style={...o,...s.style}}return s}const VL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tv(t){return typeof t!="string"||t.includes("-")?!1:!!(VL.indexOf(t)>-1||/[A-Z]/u.test(t))}function $L(t=!1){return(n,r,s,{latestValues:o},l)=>{const u=(tv(n)?ML:jL)(r,o,l,n),h=mL(r,typeof n=="string",t),g=n!==A.Fragment?{...h,...u,ref:s}:{},{children:y}=r,v=A.useMemo(()=>pn(y)?y.get():y,[y]);return A.createElement(n,{...g,children:v})}}function Fb(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function nv(t,e,n,r){if(typeof e=="function"){const[s,o]=Fb(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=Fb(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function Gh(t){return pn(t)?t.get():t}function FL({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:UL(n,r,s,t),renderState:e()}}const vk=t=>(e,n)=>{const r=A.useContext(Kf),s=A.useContext(Gf),o=()=>FL(t,e,r,s);return n?o():Sy(o)};function UL(t,e,n,r){const s={},o=r(t,{});for(const v in o)s[v]=Gh(o[v]);let{initial:l,animate:c}=t;const u=Jf(t),h=ck(t);e&&h&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const y=g?c:l;if(y&&typeof y!="boolean"&&!Qf(y)){const v=Array.isArray(y)?y:[y];for(let b=0;b<v.length;b++){const k=nv(t,v[b]);if(k){const{transitionEnd:D,transition:P,...O}=k;for(const $ in O){let M=O[$];if(Array.isArray(M)){const z=g?M.length-1:0;M=M[z]}M!==null&&(s[$]=M)}for(const $ in D)s[$]=D[$]}}}return s}function rv(t,e,n){var o;const{style:r}=t,s={};for(const l in r)(pn(r[l])||e.style&&pn(e.style[l])||fk(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(s[l]=r[l]);return s}const BL={useVisualState:vk({scrapeMotionValuesFromProps:rv,createRenderState:ev})};function xk(t,e,n){const r=rv(t,e,n);for(const s in t)if(pn(t[s])||pn(e[s])){const o=Bl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const zL={useVisualState:vk({scrapeMotionValuesFromProps:xk,createRenderState:gk})};function WL(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...tv(r)?zL:BL,preloadedFeatures:t,useRender:$L(s),createVisualElement:e,Component:r};return EL(l)}}function Ru(t,e,n){const r=t.getProps();return nv(r,e,n!==void 0?n:r.custom,t)}const S0=t=>Array.isArray(t);function HL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Sl(n))}function qL(t){return S0(t)?t[t.length-1]||0:t}function GL(t,e){const n=Ru(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const c=qL(o[l]);HL(t,l,c)}}function KL(t){return!!(pn(t)&&t.add)}function k0(t,e){const n=t.getValue("willChange");if(KL(n))return n.add(e);if(!n&&$s.WillChange){const r=new $s.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function wk(t){return t.props[uk]}const QL=t=>t!==null;function JL(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(QL),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const YL={type:"spring",stiffness:500,damping:25,restSpeed:10},XL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ZL={type:"keyframes",duration:.8},e3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},t3=(t,{keyframes:e})=>e.length>2?ZL:zl.has(t)?t.startsWith("scale")?XL(e[1]):YL:e3;function n3({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:u,elapsed:h,...g}){return!!Object.keys(g).length}const sv=(t,e,n,r={},s,o)=>l=>{const c=Hy(r,t)||{},u=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ss(u);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};n3(c)||Object.assign(g,t3(t,g)),g.duration&&(g.duration=ss(g.duration)),g.repeatDelay&&(g.repeatDelay=ss(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),($s.instantAnimations||$s.skipAnimations)&&(y=!0,g.duration=0,g.delay=0),g.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const v=JL(g.keyframes,c);if(v!==void 0){yt.update(()=>{g.onUpdate(v),g.onComplete()});return}}return c.isSync?new By(g):new LO(g)};function r3({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function _k(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(o=r);const u=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const g in c){const y=t.getValue(g,t.latestValues[g]??null),v=c[g];if(v===void 0||h&&r3(h,g))continue;const b={delay:n,...Hy(o||{},g)},k=y.get();if(k!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===k&&!b.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const O=wk(t);if(O){const $=window.MotionHandoffAnimation(O,g,yt);$!==null&&(b.startTime=$,D=!0)}}k0(t,g),y.start(sv(g,y,v,t.shouldReduceMotion&&J1.has(g)?{type:!1}:b,t,D));const P=y.animation;P&&u.push(P)}return l&&Promise.all(u).then(()=>{yt.update(()=>{l&&GL(t,l)})}),u}function C0(t,e,n={}){var u;const r=Ru(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(_k(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:v}=s;return s3(t,e,g+h,y,v,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,g]=c==="beforeChildren"?[o,l]:[l,o];return h().then(()=>g())}else return Promise.all([o(),l(n.delay)])}function s3(t,e,n=0,r=0,s=1,o){const l=[],c=(t.variantChildren.size-1)*r,u=s===1?(h=0)=>h*r:(h=0)=>c-h*r;return Array.from(t.variantChildren).sort(i3).forEach((h,g)=>{h.notify("AnimationStart",e),l.push(C0(h,e,{...o,delay:n+u(g)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function i3(t,e){return t.sortNodePosition(e)}function o3(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>C0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=C0(t,e,n);else{const s=typeof e=="function"?Ru(t,e,n.custom):e;r=Promise.all(_k(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function bk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const a3=Yy.length;function Ek(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ek(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<a3;n++){const r=Yy[n],s=t.props[r];(Pu(s)||s===!1)&&(e[r]=s)}return e}const l3=[...Jy].reverse(),c3=Jy.length;function u3(t){return e=>Promise.all(e.map(({animation:n,options:r})=>o3(t,n,r)))}function d3(t){let e=u3(t),n=Ub(),r=!0;const s=u=>(h,g)=>{var v;const y=Ru(t,g,u==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:b,transitionEnd:k,...D}=y;h={...h,...D,...k}}return h};function o(u){e=u(t)}function l(u){const{props:h}=t,g=Ek(t.parent)||{},y=[],v=new Set;let b={},k=1/0;for(let P=0;P<c3;P++){const O=l3[P],$=n[O],M=h[O]!==void 0?h[O]:g[O],z=Pu(M),B=O===u?$.isActive:null;B===!1&&(k=P);let G=M===g[O]&&M!==h[O]&&z;if(G&&r&&t.manuallyAnimateOnMount&&(G=!1),$.protectedKeys={...b},!$.isActive&&B===null||!M&&!$.prevProp||Qf(M)||typeof M=="boolean")continue;const I=h3($.prevProp,M);let S=I||O===u&&$.isActive&&!G&&z||P>k&&z,T=!1;const R=Array.isArray(M)?M:[M];let j=R.reduce(s(O),{});B===!1&&(j={});const{prevResolvedValues:F={}}=$,L={...F,...j},ge=be=>{S=!0,v.has(be)&&(T=!0,v.delete(be)),$.needsAnimating[be]=!0;const ue=t.getValue(be);ue&&(ue.liveStyle=!1)};for(const be in L){const ue=j[be],J=F[be];if(b.hasOwnProperty(be))continue;let te=!1;S0(ue)&&S0(J)?te=!bk(ue,J):te=ue!==J,te?ue!=null?ge(be):v.add(be):ue!==void 0&&v.has(be)?ge(be):$.protectedKeys[be]=!0}$.prevProp=M,$.prevResolvedValues=j,$.isActive&&(b={...b,...j}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(G&&I)||T)&&y.push(...R.map(be=>({animation:be,options:{type:O}})))}if(v.size){const P={};if(typeof h.initial!="boolean"){const O=Ru(t,Array.isArray(h.initial)?h.initial[0]:h.initial);O&&O.transition&&(P.transition=O.transition)}v.forEach(O=>{const $=t.getBaseTarget(O),M=t.getValue(O);M&&(M.liveStyle=!0),P[O]=$??null}),y.push({animation:P})}let D=!!y.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(y):Promise.resolve()}function c(u,h){var y;if(n[u].isActive===h)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(v=>{var b;return(b=v.animationState)==null?void 0:b.setActive(u,h)}),n[u].isActive=h;const g=l(u);for(const v in n)n[v].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Ub(),r=!0}}}function h3(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!bk(e,t):!1}function So(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ub(){return{animate:So(!0),whileInView:So(),whileHover:So(),whileTap:So(),whileDrag:So(),whileFocus:So(),exit:So()}}class Hi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class f3 extends Hi{constructor(e){super(e),e.animationState||(e.animationState=d3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Qf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let m3=0;class p3 extends Hi{constructor(){super(...arguments),this.id=m3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const g3={animation:{Feature:f3},exit:{Feature:p3}};function Nu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ju(t){return{point:{x:t.pageX,y:t.pageY}}}const y3=t=>e=>Ky(e)&&t(e,Ju(e));function fu(t,e,n,r){return Nu(t,e,y3(n),r)}function Tk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function v3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function x3(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Sk=1e-4,w3=1-Sk,_3=1+Sk,kk=.01,b3=0-kk,E3=0+kk;function bn(t){return t.max-t.min}function T3(t,e,n){return Math.abs(t-e)<=n}function Bb(t,e,n,r=.5){t.origin=r,t.originPoint=gt(e.min,e.max,t.origin),t.scale=bn(n)/bn(e),t.translate=gt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=w3&&t.scale<=_3||isNaN(t.scale))&&(t.scale=1),(t.translate>=b3&&t.translate<=E3||isNaN(t.translate))&&(t.translate=0)}function mu(t,e,n,r){Bb(t.x,e.x,n.x,r?r.originX:void 0),Bb(t.y,e.y,n.y,r?r.originY:void 0)}function zb(t,e,n){t.min=n.min+e.min,t.max=t.min+bn(e)}function S3(t,e,n){zb(t.x,e.x,n.x),zb(t.y,e.y,n.y)}function Wb(t,e,n){t.min=e.min-n.min,t.max=t.min+bn(e)}function pu(t,e,n){Wb(t.x,e.x,n.x),Wb(t.y,e.y,n.y)}const Hb=()=>({translate:0,scale:1,origin:0,originPoint:0}),ul=()=>({x:Hb(),y:Hb()}),qb=()=>({min:0,max:0}),At=()=>({x:qb(),y:qb()});function cr(t){return[t("x"),t("y")]}function Tg(t){return t===void 0||t===1}function A0({scale:t,scaleX:e,scaleY:n}){return!Tg(t)||!Tg(e)||!Tg(n)}function Po(t){return A0(t)||Ck(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ck(t){return Gb(t.x)||Gb(t.y)}function Gb(t){return t&&t!=="0%"}function yf(t,e,n){const r=t-n,s=e*r;return n+s}function Kb(t,e,n,r,s){return s!==void 0&&(t=yf(t,s,r)),yf(t,n,r)+e}function P0(t,e=0,n=1,r,s){t.min=Kb(t.min,e,n,r,s),t.max=Kb(t.max,e,n,r,s)}function Ak(t,{x:e,y:n}){P0(t.x,e.translate,e.scale,e.originPoint),P0(t.y,n.translate,n.scale,n.originPoint)}const Qb=.999999999999,Jb=1.0000000000001;function k3(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=n[c],l=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&hl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,Ak(t,l)),r&&Po(o.latestValues)&&hl(t,o.latestValues))}e.x<Jb&&e.x>Qb&&(e.x=1),e.y<Jb&&e.y>Qb&&(e.y=1)}function dl(t,e){t.min=t.min+e,t.max=t.max+e}function Yb(t,e,n,r,s=.5){const o=gt(t.min,t.max,s);P0(t,e,n,o,r)}function hl(t,e){Yb(t.x,e.x,e.scaleX,e.scale,e.originX),Yb(t.y,e.y,e.scaleY,e.scale,e.originY)}function Pk(t,e){return Tk(x3(t.getBoundingClientRect(),e))}function C3(t,e,n){const r=Pk(t,n),{scroll:s}=e;return s&&(dl(r.x,s.offset.x),dl(r.y,s.offset.y)),r}const Ik=({current:t})=>t?t.ownerDocument.defaultView:null,Xb=(t,e)=>Math.abs(t-e);function A3(t,e){const n=Xb(t.x,e.x),r=Xb(t.y,e.y);return Math.sqrt(n**2+r**2)}class Rk{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=kg(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=A3(y.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:k}=y,{timestamp:D}=en;this.history.push({...k,timestamp:D});const{onStart:P,onMove:O}=this.handlers;v||(P&&P(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,y)},this.handlePointerMove=(y,v)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Sg(v,this.transformPagePoint),yt.update(this.updatePoint,!0)},this.handlePointerUp=(y,v)=>{this.end();const{onEnd:b,onSessionEnd:k,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=kg(y.type==="pointercancel"?this.lastMoveEventInfo:Sg(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(y,P),k&&k(y,P)},!Ky(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const l=Ju(e),c=Sg(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=en;this.history=[{...u,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,kg(c,this.history)),this.removeListeners=Gu(fu(this.contextWindow,"pointermove",this.handlePointerMove),fu(this.contextWindow,"pointerup",this.handlePointerUp),fu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Li(this.updatePoint)}}function Sg(t,e){return e?{point:e(t.point)}:t}function Zb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kg({point:t},e){return{point:t,delta:Zb(t,Nk(e)),offset:Zb(t,P3(e)),velocity:I3(e,.1)}}function P3(t){return t[0]}function Nk(t){return t[t.length-1]}function I3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Nk(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ss(e)));)n--;if(!r)return{x:0,y:0};const o=is(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function R3(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?gt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?gt(n,t,r.max):Math.min(t,n)),t}function eE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function N3(t,{top:e,left:n,bottom:r,right:s}){return{x:eE(t.x,n,s),y:eE(t.y,e,r)}}function tE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function j3(t,e){return{x:tE(t.x,e.x),y:tE(t.y,e.y)}}function D3(t,e){let n=.5;const r=bn(t),s=bn(e);return s>r?n=ku(e.min,e.max-r,t.min):r>s&&(n=ku(t.min,t.max-s,e.min)),Vs(0,1,n)}function O3(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const I0=.35;function L3(t=I0){return t===!1?t=0:t===!0&&(t=I0),{x:nE(t,"left","right"),y:nE(t,"top","bottom")}}function nE(t,e,n){return{min:rE(t,e),max:rE(t,n)}}function rE(t,e){return typeof t=="number"?t:t[e]||0}const M3=new WeakMap;class V3{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=At(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ju(g).point)},o=(g,y)=>{const{drag:v,dragPropagation:b,onDragStart:k}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XO(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cr(P=>{let O=this.getAxisMotionValue(P).get()||0;if(os.test(O)){const{projection:$}=this.visualElement;if($&&$.layout){const M=$.layout.layoutBox[P];M&&(O=bn(M)*(parseFloat(O)/100))}}this.originPoint[P]=O}),k&&yt.postRender(()=>k(g,y)),k0(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},l=(g,y)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:k,onDrag:D}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:P}=y;if(b&&this.currentDirection===null){this.currentDirection=$3(P),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",y.point,P),this.updateAxis("y",y.point,P),this.visualElement.render(),D&&D(g,y)},c=(g,y)=>this.stop(g,y),u=()=>cr(g=>{var y;return this.getAnimationState(g)==="paused"&&((y=this.getAxisMotionValue(g).animation)==null?void 0:y.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Rk(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:Ik(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&yt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!jh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=R3(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&cl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=N3(r.layoutBox,e):this.constraints=!1,this.elastic=L3(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&cr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=O3(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=C3(r,s.root,this.visualElement.getTransformPagePoint());let l=j3(s.layout.layoutBox,o);if(n){const c=n(v3(l));this.hasMutatedConstraints=!!c,c&&(l=Tk(c))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=cr(g=>{if(!jh(g,n,this.currentDirection))return;let y=u&&u[g]||{};l&&(y={min:0,max:0});const v=s?200:1e6,b=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return k0(this.visualElement,e),r.start(sv(e,r,0,n,this.visualElement,!1))}stopAnimation(){cr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){cr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){cr(n=>{const{drag:r}=this.getProps();if(!jh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[n];o.set(e[n]-gt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!cl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};cr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const u=c.get();s[l]=D3({min:u,max:u},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),cr(l=>{if(!jh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];c.set(gt(u,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;M3.set(this.visualElement,this);const e=this.visualElement.current,n=fu(e,"pointerdown",u=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();cl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),yt.read(r);const l=Nu(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(cr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=u[g].translate,y.set(y.get()+u[g].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=I0,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function jh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $3(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class F3 extends Hi{constructor(e){super(e),this.removeGroupControls=hr,this.removeListeners=hr,this.controls=new V3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const sE=t=>(e,n)=>{t&&yt.postRender(()=>t(e,n))};class U3 extends Hi{constructor(){super(...arguments),this.removePointerDownListener=hr}onPointerDown(e){this.session=new Rk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ik(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:sE(e),onStart:sE(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&yt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=fu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Kh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ne.test(t))t=parseFloat(t);else return t;const n=iE(t,e.target.x),r=iE(t,e.target.y);return`${n}% ${r}%`}},B3={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Mi.parse(t);if(s.length>5)return r;const o=Mi.createTransformer(t),l=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;s[0+l]/=c,s[1+l]/=u;const h=gt(c,u,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};class z3 extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;CL(W3),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Kh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||yt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Gy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jk(t){const[e,n]=ok(),r=A.useContext(Ty);return f.jsx(z3,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(dk),isPresent:e,safeToRemove:n})}const W3={borderRadius:{...Yc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yc,borderTopRightRadius:Yc,borderBottomLeftRadius:Yc,borderBottomRightRadius:Yc,boxShadow:B3};function H3(t,e,n){const r=pn(t)?t:Sl(t);return r.start(sv("",r,e,n)),r.animation}const q3=(t,e)=>t.depth-e.depth;class G3{constructor(){this.children=[],this.isDirty=!1}add(e){Cy(this.children,e),this.isDirty=!0}remove(e){Ay(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(q3),this.isDirty=!1,this.children.forEach(e)}}function K3(t,e){const n=On.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Li(r),t(o-e))};return yt.setup(r,!0),()=>Li(r)}const Dk=["TopLeft","TopRight","BottomLeft","BottomRight"],Q3=Dk.length,oE=t=>typeof t=="string"?parseFloat(t):t,aE=t=>typeof t=="number"||Ne.test(t);function J3(t,e,n,r,s,o){s?(t.opacity=gt(0,n.opacity??1,Y3(r)),t.opacityExit=gt(e.opacity??1,0,X3(r))):o&&(t.opacity=gt(e.opacity??1,n.opacity??1,r));for(let l=0;l<Q3;l++){const c=`border${Dk[l]}Radius`;let u=lE(e,c),h=lE(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||aE(u)===aE(h)?(t[c]=Math.max(gt(oE(u),oE(h),r),0),(os.test(h)||os.test(u))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=gt(e.rotate||0,n.rotate||0,r))}function lE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Y3=Ok(0,.5,C1),X3=Ok(.5,.95,hr);function Ok(t,e,n){return r=>r<t?0:r>e?1:n(ku(t,e,r))}function cE(t,e){t.min=e.min,t.max=e.max}function lr(t,e){cE(t.x,e.x),cE(t.y,e.y)}function uE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function dE(t,e,n,r,s){return t-=e,t=yf(t,1/n,r),s!==void 0&&(t=yf(t,1/s,r)),t}function Z3(t,e=0,n=1,r=.5,s,o=t,l=t){if(os.test(e)&&(e=parseFloat(e),e=gt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=gt(o.min,o.max,r);t===o&&(c-=e),t.min=dE(t.min,e,n,c,s),t.max=dE(t.max,e,n,c,s)}function hE(t,e,[n,r,s],o,l){Z3(t,e[n],e[r],e[s],e.scale,o,l)}const e6=["x","scaleX","originX"],t6=["y","scaleY","originY"];function fE(t,e,n,r){hE(t.x,e,e6,n?n.x:void 0,r?r.x:void 0),hE(t.y,e,t6,n?n.y:void 0,r?r.y:void 0)}function mE(t){return t.translate===0&&t.scale===1}function Lk(t){return mE(t.x)&&mE(t.y)}function pE(t,e){return t.min===e.min&&t.max===e.max}function n6(t,e){return pE(t.x,e.x)&&pE(t.y,e.y)}function gE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Mk(t,e){return gE(t.x,e.x)&&gE(t.y,e.y)}function yE(t){return bn(t.x)/bn(t.y)}function vE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class r6{constructor(){this.members=[]}add(e){Cy(this.members,e),e.scheduleRender()}remove(e){if(Ay(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function s6(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:g,rotateX:y,rotateY:v,skewX:b,skewY:k}=n;h&&(r=`perspective(${h}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),v&&(r+=`rotateY(${v}deg) `),b&&(r+=`skewX(${b}deg) `),k&&(r+=`skewY(${k}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Cg=["","X","Y","Z"],i6={visibility:"hidden"},o6=1e3;let a6=0;function Ag(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Vk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=wk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",yt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Vk(r)}function $k({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=a6++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(u6),this.nodes.forEach(p6),this.nodes.forEach(g6),this.nodes.forEach(d6)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new G3)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Ry),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const u=this.eventHandlers.get(l);u&&u.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=ik(l)&&!sL(l),this.instance=l;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=K3(y,250),Kh.hasAnimatedSinceResize&&(Kh.hasAnimatedSinceResize=!1,this.nodes.forEach(wE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||h.getDefaultTransition()||_6,{onLayoutAnimationStart:D,onLayoutAnimationComplete:P}=h.getProps(),O=!this.targetLayout||!Mk(this.targetLayout,b),$=!y&&v;if(this.options.layoutRoot||this.resumeFrom||$||y&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,$);const M={...Hy(k,"layout"),onPlay:D,onComplete:P};(h.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else y||wE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Li(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(y6),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xE);return}this.isUpdating||this.nodes.forEach(f6),this.isUpdating=!1,this.nodes.forEach(m6),this.nodes.forEach(l6),this.nodes.forEach(c6),this.clearAllSnapshots();const c=On.now();en.delta=Vs(0,1e3/60,c-en.timestamp),en.timestamp=c,en.isProcessing=!0,xg.update.process(en),xg.preRender.process(en),xg.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(h6),this.sharedNodes.forEach(v6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=At(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Lk(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||Po(this.latestValues)||g)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return l&&(u=this.removeTransform(u)),b6(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:l}=this.options;if(!l)return At();const c=l.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(E6))){const{scroll:g}=this.root;g&&(dl(c.x,g.offset.x),dl(c.y,g.offset.y))}return c}removeElementScroll(l){var u;const c=At();if(lr(c,l),(u=this.scroll)!=null&&u.wasRoot)return c;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:y,options:v}=g;g!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&lr(c,l),dl(c.x,y.offset.x),dl(c.y,y.offset.y))}return c}applyTransform(l,c=!1){const u=At();lr(u,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&hl(u,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Po(g.latestValues)&&hl(u,g.latestValues)}return Po(this.latestValues)&&hl(u,this.latestValues),u}removeTransform(l){const c=At();lr(c,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Po(h.latestValues))continue;A0(h.latestValues)&&h.updateSnapshot();const g=At(),y=h.measurePageBox();lr(g,y),fE(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return Po(this.latestValues)&&fE(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var v;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(l||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),pu(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=At(),this.targetWithTransforms=At()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),S3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lr(this.target,this.layout.layoutBox),Ak(this.target,this.targetDelta)):lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),pu(this.relativeTargetOrigin,this.target,b.target),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||A0(this.parent.latestValues)||Ck(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===en.timestamp&&(u=!1),u)return;const{layout:h,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||g))return;lr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;k3(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=At());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(uE(this.prevProjectionDelta.x,this.projectionDelta.x),uE(this.prevProjectionDelta.y,this.projectionDelta.y)),mu(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!vE(this.projectionDelta.x,this.prevProjectionDelta.x)||!vE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ul(),this.projectionDelta=ul(),this.projectionDeltaWithTransform=ul()}setAnimationOrigin(l,c=!1){const u=this.snapshot,h=u?u.latestValues:{},g={...this.latestValues},y=ul();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=At(),b=u?u.source:void 0,k=this.layout?this.layout.source:void 0,D=b!==k,P=this.getStack(),O=!P||P.members.length<=1,$=!!(D&&!O&&this.options.crossfade===!0&&!this.path.some(w6));this.animationProgress=0;let M;this.mixTargetDelta=z=>{const B=z/1e3;_E(y.x,l.x,B),_E(y.y,l.y,B),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),x6(this.relativeTarget,this.relativeTargetOrigin,v,B),M&&n6(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=At()),lr(M,this.relativeTarget)),D&&(this.animationValues=g,J3(g,h,this.latestValues,B,$,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,u,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(!1),(h=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||h.stop(!1),this.pendingAnimation&&(Li(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yt.update(()=>{Kh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Sl(0)),this.currentAnimation=H3(this.motionValue,[0,1e3],{...l,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(o6),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:g}=l;if(!(!c||!u||!h)){if(this!==l&&this.layout&&h&&Fk(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||At();const y=bn(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+y;const v=bn(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+v}lr(c,u),hl(c,g),mu(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new r6),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&Ag("z",l,h,this.animationValues);for(let g=0;g<Cg.length;g++)Ag(`rotate${Cg[g]}`,l,h,this.animationValues),Ag(`skew${Cg[g]}`,l,h,this.animationValues);l.render();for(const g in h)l.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return i6;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Gh(l==null?void 0:l.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Gh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Po(this.latestValues)&&(b.transform=u?u({},""):"none",this.hasProjected=!1),b}const g=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=s6(this.projectionDeltaWithTransform,this.treeScale,g),u&&(c.transform=u(g,c.transform));const{x:y,y:v}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,h.animationValues?c.opacity=h===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const b in Iu){if(g[b]===void 0)continue;const{correct:k,applyTo:D,isCSSVariable:P}=Iu[b],O=c.transform==="none"?g[b]:k(g[b],h);if(D){const $=D.length;for(let M=0;M<$;M++)c[D[M]]=O}else P?this.options.visualElement.renderState.vars[b]=O:c[b]=O}return this.options.layoutId&&(c.pointerEvents=h===this?Gh(l==null?void 0:l.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop(!1)}),this.root.nodes.forEach(xE),this.root.sharedNodes.clear()}}}function l6(t){t.updateLayout()}function c6(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?cr(y=>{const v=l?e.measuredBox[y]:e.layoutBox[y],b=bn(v);v.min=r[y].min,v.max=v.min+b}):Fk(o,e.layoutBox,r)&&cr(y=>{const v=l?e.measuredBox[y]:e.layoutBox[y],b=bn(r[y]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+b)});const c=ul();mu(c,r,e.layoutBox);const u=ul();l?mu(u,t.applyTransform(s,!0),e.measuredBox):mu(u,r,e.layoutBox);const h=!Lk(c);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:b}=y;if(v&&b){const k=At();pu(k,e.layoutBox,v.layoutBox);const D=At();pu(D,r,b.layoutBox),Mk(k,D)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=D,t.relativeTargetOrigin=k,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function u6(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function d6(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function h6(t){t.clearSnapshot()}function xE(t){t.clearMeasurements()}function f6(t){t.isLayoutDirty=!1}function m6(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function p6(t){t.resolveTargetDelta()}function g6(t){t.calcProjection()}function y6(t){t.resetSkewAndRotation()}function v6(t){t.removeLeadSnapshot()}function _E(t,e,n){t.translate=gt(e.translate,0,n),t.scale=gt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function bE(t,e,n,r){t.min=gt(e.min,n.min,r),t.max=gt(e.max,n.max,r)}function x6(t,e,n,r){bE(t.x,e.x,n.x,r),bE(t.y,e.y,n.y,r)}function w6(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const _6={duration:.45,ease:[.4,0,.1,1]},EE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),TE=EE("applewebkit/")&&!EE("chrome/")?Math.round:hr;function SE(t){t.min=TE(t.min),t.max=TE(t.max)}function b6(t){SE(t.x),SE(t.y)}function Fk(t,e,n){return t==="position"||t==="preserve-aspect"&&!T3(yE(e),yE(n),.2)}function E6(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const T6=$k({attachResizeListener:(t,e)=>Nu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pg={current:void 0},Uk=$k({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Pg.current){const t=new T6({});t.mount(window),t.setOptions({layoutScroll:!0}),Pg.current=t}return Pg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),S6={pan:{Feature:U3},drag:{Feature:F3,ProjectionNode:Uk,MeasureLayout:jk}};function kE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&yt.postRender(()=>o(e,Ju(e)))}class k6 extends Hi{mount(){const{current:e}=this.node;e&&(this.unmount=ZO(e,(n,r)=>(kE(this.node,r,"Start"),s=>kE(this.node,s,"End"))))}unmount(){}}class C6 extends Hi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gu(Nu(this.node.current,"focus",()=>this.onFocus()),Nu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function CE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&yt.postRender(()=>o(e,Ju(e)))}class A6 extends Hi{mount(){const{current:e}=this.node;e&&(this.unmount=rL(e,(n,r)=>(CE(this.node,r,"Start"),(s,{success:o})=>CE(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const R0=new WeakMap,Ig=new WeakMap,P6=t=>{const e=R0.get(t.target);e&&e(t)},I6=t=>{t.forEach(P6)};function R6({root:t,...e}){const n=t||document;Ig.has(n)||Ig.set(n,{});const r=Ig.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(I6,{root:t,...e})),r[s]}function N6(t,e,n){const r=R6(e);return R0.set(t,n),r.observe(t),()=>{R0.delete(t),r.unobserve(t)}}const j6={some:0,all:1};class D6 extends Hi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:j6[s]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),v=h?g:y;v&&v(u)};return N6(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(O6(e,n))&&this.startObserver()}unmount(){}}function O6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const L6={inView:{Feature:D6},tap:{Feature:A6},focus:{Feature:C6},hover:{Feature:k6}},M6={layout:{ProjectionNode:Uk,MeasureLayout:jk}},N0={current:null},Bk={current:!1};function V6(){if(Bk.current=!0,!!ky)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>N0.current=t.matches;t.addListener(e),e()}else N0.current=!1}const $6=new WeakMap;function F6(t,e,n){for(const r in e){const s=e[r],o=n[r];if(pn(s))t.addValue(r,s);else if(pn(o))t.addValue(r,Sl(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,Sl(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const AE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class U6{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=On.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,yt.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Jf(n),this.isVariantNode=ck(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in y){const b=y[v];u[v]!==void 0&&pn(b)&&b.set(u[v],!1)}}mount(e){this.current=e,$6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Bk.current||V6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:N0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Li(this.notifyUpdate),Li(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=zl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&yt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kl){const n=kl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):At()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<AE.length;r++){const s=AE[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=F6(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Sl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(y1(r)||x1(r))?r=parseFloat(r):!oL(r)&&Mi.test(n)&&(r=ek(e,n)),this.setBaseTarget(e,pn(r)?r.get():r)),pn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=nv(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!pn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ry),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class zk extends U6{constructor(){super(...arguments),this.KeyframeResolver=KO}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Wk(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}function B6(t){return window.getComputedStyle(t)}class z6 extends zk{constructor(){super(...arguments),this.type="html",this.renderInstance=Wk}readValueFromInstance(e,n){var r;if(zl.has(n))return(r=this.projection)!=null&&r.isProjecting?v0(n):fO(e,n);{const s=B6(e),o=(Dy(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Pk(e,n)}build(e,n,r){Zy(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return rv(e,n,r)}}const Hk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function W6(t,e,n,r){Wk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Hk.has(s)?s:Xy(s),e.attrs[s])}class H6 extends zk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=At}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(zl.has(n)){const r=Z1(n);return r&&r.default||0}return n=Hk.has(n)?n:Xy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return xk(e,n,r)}build(e,n,r){pk(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){W6(e,n,r,s)}mount(e){this.isSVGTag=yk(e.tagName),super.mount(e)}}const q6=(t,e)=>tv(t)?new H6(e):new z6(e,{allowProjection:t!==A.Fragment}),G6=WL({...g3,...L6,...S6,...M6},q6),vf=pL(G6),K6=()=>{};var PE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Q6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],c=t[n++],u=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Gk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,c=l?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,g=o>>2,y=(o&3)<<4|c>>4;let v=(c&15)<<2|h>>6,b=h&63;u||(b=64,l||(v=64)),r.push(n[g],n[y],n[v],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Q6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||h==null||y==null)throw new J6;const v=o<<2|c>>4;if(r.push(v),h!==64){const b=c<<4&240|h>>2;if(r.push(b),y!==64){const k=h<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class J6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y6=function(t){const e=qk(t);return Gk.encodeByteArray(e,!0)},xf=function(t){return Y6(t).replace(/\./g,"")},Kk=function(t){try{return Gk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=()=>X6().__FIREBASE_DEFAULTS__,eM=()=>{if(typeof process>"u"||typeof PE>"u")return;const t=PE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kk(t[1]);return e&&JSON.parse(e)},Yf=()=>{try{return K6()||Z6()||eM()||tM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qk=t=>{var e,n;return(n=(e=Yf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Jk=t=>{const e=Qk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yk=()=>{var t;return(t=Yf())===null||t===void 0?void 0:t.config},Xk=t=>{var e;return(e=Yf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){return t.endsWith(".cloudworkstations.dev")}async function iv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xf(JSON.stringify(n)),xf(JSON.stringify(l)),""].join(".")}const gu={};function rM(){const t={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?t.emulator.push(e):t.prod.push(e);return t}function sM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let IE=!1;function Wl(t,e){if(typeof window>"u"||typeof document>"u"||!Yo(window.location.host)||gu[t]===e||gu[t]||IE)return;gu[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=rM().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function u(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{IE=!0,l()},v}function g(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=sM(r),b=n("text"),k=document.getElementById(b)||document.createElement("span"),D=n("learnmore"),P=document.getElementById(D)||document.createElement("a"),O=n("preprendIcon"),$=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;c(M),g(P,D);const z=h();u($,O),M.append($,k,P,z),document.body.appendChild(M)}o?(k.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function oM(){var t;const e=(t=Yf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cM(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uM(){return!oM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tC(){try{return typeof indexedDB=="object"}catch{return!1}}function nC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function dM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hM,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?fM(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new yr(s,c,r)}}function fM(t,e){return t.replace(mM,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mM=/\{\$([^}]+)}/g;function pM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(RE(o)&&RE(l)){if(!Uo(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function RE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ru(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gM(t,e){const n=new yM(t,e);return n.subscribe.bind(n)}class yM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vM(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Rg),s.error===void 0&&(s.error=Rg),s.complete===void 0&&(s.complete=Rg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=1e3,wM=2,_M=4*60*60*1e3,bM=.5;function NE(t,e=xM,n=wM){const r=e*Math.pow(n,t),s=Math.round(bM*r*(Math.random()-.5)*2);return Math.min(_M,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class pr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SM(e))try{this.getOrInitializeService({instanceIdentifier:Io})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Io){return this.instances.has(e)}getOptions(e=Io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Io){return this.component?this.component.multipleInstances?e:Io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TM(t){return t===Io?void 0:t}function SM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const CM={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},AM=Be.INFO,PM={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},IM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=PM[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xf{constructor(e){this.name=e,this._logLevel=AM,this._logHandler=IM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const RM=(t,e)=>e.some(n=>t instanceof n);let jE,DE;function NM(){return jE||(jE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jM(){return DE||(DE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rC=new WeakMap,j0=new WeakMap,sC=new WeakMap,Ng=new WeakMap,ov=new WeakMap;function DM(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Ri(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&rC.set(n,t)}).catch(()=>{}),ov.set(e,t),e}function OM(t){if(j0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});j0.set(t,e)}let D0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return j0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LM(t){D0=t(D0)}function MM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jg(this),e,...n);return sC.set(r,e.sort?e.sort():[e]),Ri(r)}:jM().includes(t)?function(...e){return t.apply(jg(this),e),Ri(rC.get(this))}:function(...e){return Ri(t.apply(jg(this),e))}}function VM(t){return typeof t=="function"?MM(t):(t instanceof IDBTransaction&&OM(t),RM(t,NM())?new Proxy(t,D0):t)}function Ri(t){if(t instanceof IDBRequest)return DM(t);if(Ng.has(t))return Ng.get(t);const e=VM(t);return e!==t&&(Ng.set(t,e),ov.set(e,t)),e}const jg=t=>ov.get(t);function iC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),c=Ri(l);return r&&l.addEventListener("upgradeneeded",u=>{r(Ri(l.result),u.oldVersion,u.newVersion,Ri(l.transaction),u)}),n&&l.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const $M=["get","getKey","getAll","getAllKeys","count"],FM=["put","add","delete","clear"],Dg=new Map;function OE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dg.get(e))return Dg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$M.includes(n)))return;const o=async function(l,...c){const u=this.transaction(l,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return Dg.set(e,o),o}LM(t=>({...t,get:(e,n,r)=>OE(e,n)||t.get(e,n,r),has:(e,n)=>!!OE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const O0="@firebase/app",LE="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Xf("@firebase/app"),zM="@firebase/app-compat",WM="@firebase/analytics-compat",HM="@firebase/analytics",qM="@firebase/app-check-compat",GM="@firebase/app-check",KM="@firebase/auth",QM="@firebase/auth-compat",JM="@firebase/database",YM="@firebase/data-connect",XM="@firebase/database-compat",ZM="@firebase/functions",eV="@firebase/functions-compat",tV="@firebase/installations",nV="@firebase/installations-compat",rV="@firebase/messaging",sV="@firebase/messaging-compat",iV="@firebase/performance",oV="@firebase/performance-compat",aV="@firebase/remote-config",lV="@firebase/remote-config-compat",cV="@firebase/storage",uV="@firebase/storage-compat",dV="@firebase/firestore",hV="@firebase/ai",fV="@firebase/firestore-compat",mV="firebase",pV="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="[DEFAULT]",gV={[O0]:"fire-core",[zM]:"fire-core-compat",[HM]:"fire-analytics",[WM]:"fire-analytics-compat",[GM]:"fire-app-check",[qM]:"fire-app-check-compat",[KM]:"fire-auth",[QM]:"fire-auth-compat",[JM]:"fire-rtdb",[YM]:"fire-data-connect",[XM]:"fire-rtdb-compat",[ZM]:"fire-fn",[eV]:"fire-fn-compat",[tV]:"fire-iid",[nV]:"fire-iid-compat",[rV]:"fire-fcm",[sV]:"fire-fcm-compat",[iV]:"fire-perf",[oV]:"fire-perf-compat",[aV]:"fire-rc",[lV]:"fire-rc-compat",[cV]:"fire-gcs",[uV]:"fire-gcs-compat",[dV]:"fire-fst",[fV]:"fire-fst-compat",[hV]:"fire-vertex","fire-js":"fire-js",[mV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new Map,yV=new Map,M0=new Map;function ME(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $r(t){const e=t.name;if(M0.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;M0.set(e,t);for(const n of wf.values())ME(n,t);for(const n of yV.values())ME(n,t);return!0}function Hl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new Xo("app","Firebase",vV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=pV;function oC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:L0,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ni.create("bad-app-name",{appName:String(s)});if(n||(n=Yk()),!n)throw Ni.create("no-options");const o=wf.get(s);if(o){if(Uo(n,o.options)&&Uo(r,o.config))return o;throw Ni.create("duplicate-app",{appName:s})}const l=new kM(s);for(const u of M0.values())l.addComponent(u);const c=new xV(n,r,l);return wf.set(s,c),c}function av(t=L0){const e=wf.get(t);if(!e&&t===L0&&Yk())return oC();if(!e)throw Ni.create("no-app",{appName:t});return e}function Ln(t,e,n){var r;let s=(r=gV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(c.join(" "));return}$r(new pr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="firebase-heartbeat-database",_V=1,ju="firebase-heartbeat-store";let Og=null;function aC(){return Og||(Og=iC(wV,_V,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),Og}async function bV(t){try{const n=(await aC()).transaction(ju),r=await n.objectStore(ju).get(lC(t));return await n.done,r}catch(e){if(e instanceof yr)Fs.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(n.message)}}}async function VE(t,e){try{const r=(await aC()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,lC(t)),await r.done}catch(n){if(n instanceof yr)Fs.warn(n.message);else{const r=Ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fs.warn(r.message)}}}function lC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=1024,TV=30;class SV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$E();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>TV){const l=AV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$E(),{heartbeatsToSend:r,unsentEntries:s}=kV(this._heartbeatsCache.heartbeats),o=xf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fs.warn(n),""}}}function $E(){return new Date().toISOString().substring(0,10)}function kV(t,e=EV){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),FE(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),FE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tC()?nC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function FE(t){return xf(JSON.stringify({version:2,heartbeats:t})).length}function AV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t){$r(new pr("platform-logger",e=>new UM(e),"PRIVATE")),$r(new pr("heartbeat",e=>new SV(e),"PRIVATE")),Ln(O0,LE,t),Ln(O0,LE,"esm2017"),Ln("fire-js","")}PV("");var IV="firebase",RV="11.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(IV,RV,"app");var UE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,cC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function T(){}T.prototype=S.prototype,I.D=S.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(R,j,F){for(var L=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)L[ge-2]=arguments[ge];return S.prototype[j].apply(R,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,S,T){T||(T=0);var R=Array(16);if(typeof S=="string")for(var j=0;16>j;++j)R[j]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(j=0;16>j;++j)R[j]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=I.g[0],T=I.g[1],j=I.g[2];var F=I.g[3],L=S+(F^T&(j^F))+R[0]+3614090360&4294967295;S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[1]+3905402710&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[2]+606105819&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[3]+3250441966&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[4]+4118548399&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[5]+1200080426&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[6]+2821735955&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[7]+4249261313&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[8]+1770035416&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[9]+2336552879&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[10]+4294925233&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[11]+2304563134&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[12]+1804603682&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[13]+4254626195&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[14]+2792965006&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[15]+1236535329&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(j^F&(T^j))+R[1]+4129170786&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[6]+3225465664&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[11]+643717713&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[0]+3921069994&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[5]+3593408605&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[10]+38016083&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[15]+3634488961&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[4]+3889429448&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[9]+568446438&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[14]+3275163606&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[3]+4107603335&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[8]+1163531501&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[13]+2850285829&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[2]+4243563512&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[7]+1735328473&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[12]+2368359562&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(T^j^F)+R[5]+4294588738&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[8]+2272392833&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[11]+1839030562&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[14]+4259657740&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[1]+2763975236&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[4]+1272893353&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[7]+4139469664&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[10]+3200236656&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[13]+681279174&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[0]+3936430074&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[3]+3572445317&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[6]+76029189&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[9]+3654602809&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[12]+3873151461&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[15]+530742520&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[2]+3299628645&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(j^(T|~F))+R[0]+4096336452&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[7]+1126891415&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[14]+2878612391&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[5]+4237533241&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[12]+1700485571&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[3]+2399980690&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[10]+4293915773&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[1]+2240044497&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[8]+1873313359&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[15]+4264355552&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[6]+2734768916&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[13]+1309151649&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[4]+4149444226&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[11]+3174756917&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[2]+718787259&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(j+(L<<21&4294967295|L>>>11))&4294967295,I.g[2]=I.g[2]+j&4294967295,I.g[3]=I.g[3]+F&4294967295}r.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var T=S-this.blockSize,R=this.B,j=this.h,F=0;F<S;){if(j==0)for(;F<=T;)s(this,I,F),F+=this.blockSize;if(typeof I=="string"){for(;F<S;)if(R[j++]=I.charCodeAt(F++),j==this.blockSize){s(this,R),j=0;break}}else for(;F<S;)if(R[j++]=I[F++],j==this.blockSize){s(this,R),j=0;break}}this.h=j,this.o+=S},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var T=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=T&255,T/=256;for(this.u(I),I=Array(16),S=T=0;4>S;++S)for(var R=0;32>R;R+=8)I[T++]=this.g[S]>>>R&255;return I};function o(I,S){var T=c;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=S(I)}function l(I,S){this.h=S;for(var T=[],R=!0,j=I.length-1;0<=j;j--){var F=I[j]|0;R&&F==S||(T[j]=F,R=!1)}this.g=T}var c={};function u(I){return-128<=I&&128>I?o(I,function(S){return new l([S|0],0>S?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return y;if(0>I)return P(h(-I));for(var S=[],T=1,R=0;I>=T;R++)S[R]=I/T|0,T*=4294967296;return new l(S,0)}function g(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return P(g(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(S,8)),R=y,j=0;j<I.length;j+=8){var F=Math.min(8,I.length-j),L=parseInt(I.substring(j,j+F),S);8>F?(F=h(Math.pow(S,F)),R=R.j(F).add(h(L))):(R=R.j(T),R=R.add(h(L)))}return R}var y=u(0),v=u(1),b=u(16777216);t=l.prototype,t.m=function(){if(D(this))return-P(this).m();for(var I=0,S=1,T=0;T<this.g.length;T++){var R=this.i(T);I+=(0<=R?R:4294967296+R)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(D(this))return"-"+P(this).toString(I);for(var S=h(Math.pow(I,6)),T=this,R="";;){var j=z(T,S).g;T=O(T,j.j(S));var F=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=j,k(T))return F+R;for(;6>F.length;)F="0"+F;R=F+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function D(I){return I.h==-1}t.l=function(I){return I=O(this,I),D(I)?-1:k(I)?0:1};function P(I){for(var S=I.g.length,T=[],R=0;R<S;R++)T[R]=~I.g[R];return new l(T,~I.h).add(v)}t.abs=function(){return D(this)?P(this):this},t.add=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0,j=0;j<=S;j++){var F=R+(this.i(j)&65535)+(I.i(j)&65535),L=(F>>>16)+(this.i(j)>>>16)+(I.i(j)>>>16);R=L>>>16,F&=65535,L&=65535,T[j]=L<<16|F}return new l(T,T[T.length-1]&-2147483648?-1:0)};function O(I,S){return I.add(P(S))}t.j=function(I){if(k(this)||k(I))return y;if(D(this))return D(I)?P(this).j(P(I)):P(P(this).j(I));if(D(I))return P(this.j(P(I)));if(0>this.l(b)&&0>I.l(b))return h(this.m()*I.m());for(var S=this.g.length+I.g.length,T=[],R=0;R<2*S;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var j=0;j<I.g.length;j++){var F=this.i(R)>>>16,L=this.i(R)&65535,ge=I.i(j)>>>16,$e=I.i(j)&65535;T[2*R+2*j]+=L*$e,$(T,2*R+2*j),T[2*R+2*j+1]+=F*$e,$(T,2*R+2*j+1),T[2*R+2*j+1]+=L*ge,$(T,2*R+2*j+1),T[2*R+2*j+2]+=F*ge,$(T,2*R+2*j+2)}for(R=0;R<S;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=S;R<2*S;R++)T[R]=0;return new l(T,0)};function $(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function M(I,S){this.g=I,this.h=S}function z(I,S){if(k(S))throw Error("division by zero");if(k(I))return new M(y,y);if(D(I))return S=z(P(I),S),new M(P(S.g),P(S.h));if(D(S))return S=z(I,P(S)),new M(P(S.g),S.h);if(30<I.g.length){if(D(I)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var T=v,R=S;0>=R.l(I);)T=B(T),R=B(R);var j=G(T,1),F=G(R,1);for(R=G(R,2),T=G(T,2);!k(R);){var L=F.add(R);0>=L.l(I)&&(j=j.add(T),F=L),R=G(R,1),T=G(T,1)}return S=O(I,j.j(S)),new M(j,S)}for(j=y;0<=I.l(S);){for(T=Math.max(1,Math.floor(I.m()/S.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),F=h(T),L=F.j(S);D(L)||0<L.l(I);)T-=R,F=h(T),L=F.j(S);k(F)&&(F=v),j=j.add(F),I=O(I,L)}return new M(j,I)}t.A=function(I){return z(this,I).h},t.and=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)&I.i(R);return new l(T,this.h&I.h)},t.or=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)|I.i(R);return new l(T,this.h|I.h)},t.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)^I.i(R);return new l(T,this.h^I.h)};function B(I){for(var S=I.g.length+1,T=[],R=0;R<S;R++)T[R]=I.i(R)<<1|I.i(R-1)>>>31;return new l(T,I.h)}function G(I,S){var T=S>>5;S%=32;for(var R=I.g.length-T,j=[],F=0;F<R;F++)j[F]=0<S?I.i(F+T)>>>S|I.i(F+T+1)<<32-S:I.i(F+T);return new l(j,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=g,ji=l}).apply(typeof UE<"u"?UE:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uC,su,dC,Qh,V0,hC,fC,mC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,w,E){return m==Array.prototype||m==Object.prototype||(m[w]=E.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var w=0;w<m.length;++w){var E=m[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(m,w){if(w)e:{var E=r;m=m.split(".");for(var N=0;N<m.length-1;N++){var K=m[N];if(!(K in E))break e;E=E[K]}m=m[m.length-1],N=E[m],w=w(N),w!=N&&w!=null&&e(E,m,{configurable:!0,writable:!0,value:w})}}function o(m,w){m instanceof String&&(m+="");var E=0,N=!1,K={next:function(){if(!N&&E<m.length){var ee=E++;return{value:w(ee,m[ee]),done:!1}}return N=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(m){return m||function(){return o(this,function(w,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function u(m){var w=typeof m;return w=w!="object"?w:m?Array.isArray(m)?"array":w:"null",w=="array"||w=="object"&&typeof m.length=="number"}function h(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function g(m,w,E){return m.call.apply(m.bind,arguments)}function y(m,w,E){if(!m)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,N),m.apply(w,K)}}return function(){return m.apply(w,arguments)}}function v(m,w,E){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function b(m,w){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),m.apply(this,N)}}function k(m,w){function E(){}E.prototype=w.prototype,m.aa=w.prototype,m.prototype=new E,m.prototype.constructor=m,m.Qb=function(N,K,ee){for(var pe=Array(arguments.length-2),et=2;et<arguments.length;et++)pe[et-2]=arguments[et];return w.prototype[K].apply(N,pe)}}function D(m){const w=m.length;if(0<w){const E=Array(w);for(let N=0;N<w;N++)E[N]=m[N];return E}return[]}function P(m,w){for(let E=1;E<arguments.length;E++){const N=arguments[E];if(u(N)){const K=m.length||0,ee=N.length||0;m.length=K+ee;for(let pe=0;pe<ee;pe++)m[K+pe]=N[pe]}else m.push(N)}}class O{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function $(m){return/^[\s\xa0]*$/.test(m)}function M(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function z(m){return z[" "](m),m}z[" "]=function(){};var B=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function G(m,w,E){for(const N in m)w.call(E,m[N],N,m)}function I(m,w){for(const E in m)w.call(void 0,m[E],E,m)}function S(m){const w={};for(const E in m)w[E]=m[E];return w}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(m,w){let E,N;for(let K=1;K<arguments.length;K++){N=arguments[K];for(E in N)m[E]=N[E];for(let ee=0;ee<T.length;ee++)E=T[ee],Object.prototype.hasOwnProperty.call(N,E)&&(m[E]=N[E])}}function j(m){var w=1;m=m.split(":");const E=[];for(;0<w&&m.length;)E.push(m.shift()),w--;return m.length&&E.push(m.join(":")),E}function F(m){c.setTimeout(()=>{throw m},0)}function L(){var m=J;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class ge{constructor(){this.h=this.g=null}add(w,E){const N=$e.get();N.set(w,E),this.h?this.h.next=N:this.g=N,this.h=N}}var $e=new O(()=>new Ke,m=>m.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ue=!1,J=new ge,te=()=>{const m=c.Promise.resolve(void 0);be=()=>{m.then(W)}};var W=()=>{for(var m;m=L();){try{m.h.call(m.g)}catch(E){F(E)}var w=$e;w.j(m),100>w.h&&(w.h++,m.next=w.g,w.g=m)}ue=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const E=()=>{};c.addEventListener("test",E,w),c.removeEventListener("test",E,w)}catch{}return m}();function je(m,w){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var E=this.type=m.type,N=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget){if(B){e:{try{z(w.nodeName);var K=!0;break e}catch{}K=!1}K||(w=null)}}else E=="mouseover"?w=m.fromElement:E=="mouseout"&&(w=m.toElement);this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:ie[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&je.aa.h.call(this)}}k(je,fe);var ie={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),he=0;function Z(m,w,E,N,K){this.listener=m,this.proxy=null,this.src=w,this.type=E,this.capture=!!N,this.ha=K,this.key=++he,this.da=this.fa=!1}function q(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function re(m){this.src=m,this.g={},this.h=0}re.prototype.add=function(m,w,E,N,K){var ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);var pe=We(m,w,N,K);return-1<pe?(w=m[pe],E||(w.fa=!1)):(w=new Z(w,this.src,ee,!!N,K),w.fa=E,m.push(w)),w};function ye(m,w){var E=w.type;if(E in m.g){var N=m.g[E],K=Array.prototype.indexOf.call(N,w,void 0),ee;(ee=0<=K)&&Array.prototype.splice.call(N,K,1),ee&&(q(w),m.g[E].length==0&&(delete m.g[E],m.h--))}}function We(m,w,E,N){for(var K=0;K<m.length;++K){var ee=m[K];if(!ee.da&&ee.listener==w&&ee.capture==!!E&&ee.ha==N)return K}return-1}var St="closure_lm_"+(1e6*Math.random()|0),vr={};function qs(m,w,E,N,K){if(Array.isArray(w)){for(var ee=0;ee<w.length;ee++)qs(m,w[ee],E,N,K);return null}return E=Zl(E),m&&m[oe]?m.K(w,E,h(N)?!!N.capture:!1,K):Gs(m,w,E,!1,N,K)}function Gs(m,w,E,N,K,ee){if(!w)throw Error("Invalid event type");var pe=h(K)?!!K.capture:!!K,et=ps(m);if(et||(m[St]=et=new re(m)),E=et.add(w,E,N,pe,ee),E.proxy)return E;if(N=Ks(),E.proxy=N,N.src=m,N.listener=E,m.addEventListener)Te||(K=pe),K===void 0&&(K=!1),m.addEventListener(w.toString(),N,K);else if(m.attachEvent)m.attachEvent(on(w.toString()),N);else if(m.addListener&&m.removeListener)m.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ks(){function m(E){return w.call(m.src,m.listener,E)}const w=Qi;return m}function ms(m,w,E,N,K){if(Array.isArray(w))for(var ee=0;ee<w.length;ee++)ms(m,w[ee],E,N,K);else N=h(N)?!!N.capture:!!N,E=Zl(E),m&&m[oe]?(m=m.i,w=String(w).toString(),w in m.g&&(ee=m.g[w],E=We(ee,E,N,K),-1<E&&(q(ee[E]),Array.prototype.splice.call(ee,E,1),ee.length==0&&(delete m.g[w],m.h--)))):m&&(m=ps(m))&&(w=m.g[w.toString()],m=-1,w&&(m=We(w,E,N,K)),(E=-1<m?w[m]:null)&&wt(E))}function wt(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[oe])ye(w.i,m);else{var E=m.type,N=m.proxy;w.removeEventListener?w.removeEventListener(E,N,m.capture):w.detachEvent?w.detachEvent(on(E),N):w.addListener&&w.removeListener&&w.removeListener(N),(E=ps(w))?(ye(E,m),E.h==0&&(E.src=null,w[St]=null)):q(m)}}}function on(m){return m in vr?vr[m]:vr[m]="on"+m}function Qi(m,w){if(m.da)m=!0;else{w=new je(w,this);var E=m.listener,N=m.ha||m.src;m.fa&&wt(m),m=E.call(N,w)}return m}function ps(m){return m=m[St],m instanceof re?m:null}var sa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zl(m){return typeof m=="function"?m:(m[sa]||(m[sa]=function(w){return m.handleEvent(w)}),m[sa])}function Dt(){ne.call(this),this.i=new re(this),this.M=this,this.F=null}k(Dt,ne),Dt.prototype[oe]=!0,Dt.prototype.removeEventListener=function(m,w,E,N){ms(this,m,w,E,N)};function Ot(m,w){var E,N=m.F;if(N)for(E=[];N;N=N.F)E.push(N);if(m=m.M,N=w.type||w,typeof w=="string")w=new fe(w,m);else if(w instanceof fe)w.target=w.target||m;else{var K=w;w=new fe(N,m),R(w,K)}if(K=!0,E)for(var ee=E.length-1;0<=ee;ee--){var pe=w.g=E[ee];K=gs(pe,N,!0,w)&&K}if(pe=w.g=m,K=gs(pe,N,!0,w)&&K,K=gs(pe,N,!1,w)&&K,E)for(ee=0;ee<E.length;ee++)pe=w.g=E[ee],K=gs(pe,N,!1,w)&&K}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var m=this.i,w;for(w in m.g){for(var E=m.g[w],N=0;N<E.length;N++)q(E[N]);delete m.g[w],m.h--}}this.F=null},Dt.prototype.K=function(m,w,E,N){return this.i.add(String(m),w,!1,E,N)},Dt.prototype.L=function(m,w,E,N){return this.i.add(String(m),w,!0,E,N)};function gs(m,w,E,N){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();for(var K=!0,ee=0;ee<w.length;++ee){var pe=w[ee];if(pe&&!pe.da&&pe.capture==E){var et=pe.listener,Lt=pe.ha||pe.src;pe.fa&&ye(m.i,pe),K=et.call(Lt,N)!==!1&&K}}return K&&!N.defaultPrevented}function ec(m,w,E){if(typeof m=="function")E&&(m=v(m,E));else if(m&&typeof m.handleEvent=="function")m=v(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(m,w||0)}function Qs(m){m.g=ec(()=>{m.g=null,m.i&&(m.i=!1,Qs(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class Ji extends ne{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Qs(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yi(m){ne.call(this),this.h=m,this.g={}}k(Yi,ne);var tc=[];function nc(m){G(m.g,function(w,E){this.g.hasOwnProperty(E)&&wt(w)},m),m.g={}}Yi.prototype.N=function(){Yi.aa.N.call(this),nc(this)},Yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rc=c.JSON.stringify,sc=c.JSON.parse,ic=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Xi(){}Xi.prototype.h=null;function ia(m){return m.h||(m.h=m.i())}function oa(){}var Xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wr(){fe.call(this,"d")}k(Wr,fe);function aa(){fe.call(this,"c")}k(aa,fe);var Hr={},oc=null;function Zi(){return oc=oc||new Dt}Hr.La="serverreachability";function ac(m){fe.call(this,Hr.La,m)}k(ac,fe);function ys(m){const w=Zi();Ot(w,new ac(w))}Hr.STAT_EVENT="statevent";function lc(m,w){fe.call(this,Hr.STAT_EVENT,m),this.stat=w}k(lc,fe);function kt(m){const w=Zi();Ot(w,new lc(w,m))}Hr.Ma="timingevent";function la(m,w){fe.call(this,Hr.Ma,m),this.size=w}k(la,fe);function xr(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},w)}function eo(){this.g=!0}eo.prototype.xa=function(){this.g=!1};function to(m,w,E,N,K,ee){m.info(function(){if(m.g)if(ee)for(var pe="",et=ee.split("&"),Lt=0;Lt<et.length;Lt++){var qe=et[Lt].split("=");if(1<qe.length){var Bt=qe[0];qe=qe[1];var It=Bt.split("_");pe=2<=It.length&&It[1]=="type"?pe+(Bt+"="+qe+"&"):pe+(Bt+"=redacted&")}}else pe=null;else pe=ee;return"XMLHTTP REQ ("+N+") [attempt "+K+"]: "+w+`
`+E+`
`+pe})}function ca(m,w,E,N,K,ee,pe){m.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+K+"]: "+w+`
`+E+`
`+ee+" "+pe})}function wr(m,w,E,N){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+Cm(m,E)+(N?" "+N:"")})}function cc(m,w){m.info(function(){return"TIMEOUT: "+w})}eo.prototype.info=function(){};function Cm(m,w){if(!m.g)return w;if(!w)return null;try{var E=JSON.parse(w);if(E){for(m=0;m<E.length;m++)if(Array.isArray(E[m])){var N=E[m];if(!(2>N.length)){var K=N[1];if(Array.isArray(K)&&!(1>K.length)){var ee=K[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var pe=1;pe<K.length;pe++)K[pe]=""}}}}return rc(E)}catch{return w}}var ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ad={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_r;function no(){}k(no,Xi),no.prototype.g=function(){return new XMLHttpRequest},no.prototype.i=function(){return{}},_r=new no;function br(m,w,E,N){this.j=m,this.i=w,this.l=E,this.R=N||1,this.U=new Yi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ld}function ld(){this.i=null,this.g="",this.h=!1}var uc={},da={};function ha(m,w,E){m.L=1,m.v=ei(Un(w)),m.m=E,m.P=!0,dc(m,null)}function dc(m,w){m.F=Date.now(),rt(m),m.A=Un(m.v);var E=m.A,N=m.R;Array.isArray(N)||(N=[String(N)]),ni(E.i,"t",N),m.C=0,E=m.j.J,m.h=new ld,m.g=kd(m.j,E?w:null,!m.m),0<m.O&&(m.M=new Ji(v(m.Y,m,m.g),m.O)),w=m.U,E=m.g,N=m.ca;var K="readystatechange";Array.isArray(K)||(K&&(tc[0]=K.toString()),K=tc);for(var ee=0;ee<K.length;ee++){var pe=qs(E,K[ee],N||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,w)):(m.u="GET",m.g.ea(m.A,m.u,null,w)),ys(),to(m.i,m.u,m.A,m.l,m.R,m.m)}br.prototype.ca=function(m){m=m.target;const w=this.M;w&&Tn(m)==3?w.j():this.Y(m)},br.prototype.Y=function(m){try{if(m==this.g)e:{const It=Tn(this.g);var w=this.g.Ba();const tr=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||yc(this.g)))){this.J||It!=4||w==7||(w==8||0>=tr?ys(3):ys(2)),ro(this);var E=this.g.Z();this.X=E;t:if(cd(this)){var N=yc(this.g);m="";var K=N.length,ee=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),Js(this);var pe="";break t}this.h.i=new c.TextDecoder}for(w=0;w<K;w++)this.h.h=!0,m+=this.h.i.decode(N[w],{stream:!(ee&&w==K-1)});N.length=0,this.h.g+=m,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=E==200,ca(this.i,this.u,this.A,this.l,this.R,It,E),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Lt=this.g;if((et=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(et)){var qe=et;break t}}qe=null}if(E=qe)wr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hc(this,E);else{this.o=!1,this.s=3,kt(12),Zn(this),Js(this);break e}}if(this.P){E=!0;let zn;for(;!this.J&&this.C<pe.length;)if(zn=Am(this,pe),zn==da){It==4&&(this.s=4,kt(14),E=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==uc){this.s=4,kt(15),wr(this.i,this.l,pe,"[Invalid Chunk]"),E=!1;break}else wr(this.i,this.l,zn,null),hc(this,zn);if(cd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||pe.length!=0||this.h.h||(this.s=1,kt(16),E=!1),this.o=this.o&&E,!E)wr(this.i,this.l,pe,"[Invalid Chunked Response]"),Zn(this),Js(this);else if(0<pe.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),xc(Bt),Bt.M=!0,kt(11))}}else wr(this.i,this.l,pe,null),hc(this,pe);It==4&&Zn(this),this.o&&!this.J&&(It==4?Ea(this.j,this):(this.o=!1,rt(this)))}else va(this.g),E==400&&0<pe.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Zn(this),Js(this)}}}catch{}finally{}};function cd(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Am(m,w){var E=m.C,N=w.indexOf(`
`,E);return N==-1?da:(E=Number(w.substring(E,N)),isNaN(E)?uc:(N+=1,N+E>w.length?da:(w=w.slice(N,N+E),m.C=N+E,w)))}br.prototype.cancel=function(){this.J=!0,Zn(this)};function rt(m){m.S=Date.now()+m.I,ud(m,m.I)}function ud(m,w){if(m.B!=null)throw Error("WatchDog timer not null");m.B=xr(v(m.ba,m),w)}function ro(m){m.B&&(c.clearTimeout(m.B),m.B=null)}br.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(cc(this.i,this.A),this.L!=2&&(ys(),kt(17)),Zn(this),this.s=2,Js(this)):ud(this,this.S-m)};function Js(m){m.j.G==0||m.J||Ea(m.j,m)}function Zn(m){ro(m);var w=m.M;w&&typeof w.ma=="function"&&w.ma(),m.M=null,nc(m.U),m.g&&(w=m.g,m.g=null,w.abort(),w.ma())}function hc(m,w){try{var E=m.j;if(E.G!=0&&(E.g==m||yn(E.h,m))){if(!m.K&&yn(E.h,m)&&E.G==3){try{var N=E.Da.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var K=N;if(K[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<m.F)ba(E),Cr(E);else break e;_a(E),kt(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&E.v==0&&!E.C&&(E.C=xr(v(E.Za,E),6e3));if(1>=hd(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else bs(E,11)}else if((m.K||E.g==m)&&ba(E),!$(w))for(K=E.Da.g.parse(w),w=0;w<K.length;w++){let qe=K[w];if(E.T=qe[0],qe=qe[1],E.G==2)if(qe[0]=="c"){E.K=qe[1],E.ia=qe[2];const Bt=qe[3];Bt!=null&&(E.la=Bt,E.j.info("VER="+E.la));const It=qe[4];It!=null&&(E.Aa=It,E.j.info("SVER="+E.Aa));const tr=qe[5];tr!=null&&typeof tr=="number"&&0<tr&&(N=1.5*tr,E.L=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const zn=m.g;if(zn){const uo=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uo){var ee=N.h;ee.g||uo.indexOf("spdy")==-1&&uo.indexOf("quic")==-1&&uo.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(fc(ee,ee.h),ee.h=null))}if(N.D){const Sa=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Sa&&(N.ya=Sa,tt(N.I,N.D,Sa))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-m.F,E.j.info("Handshake RTT: "+E.R+"ms")),N=E;var pe=m;if(N.qa=Sd(N,N.J?N.ia:null,N.W),pe.K){fd(N.h,pe);var et=pe,Lt=N.L;Lt&&(et.I=Lt),et.B&&(ro(et),rt(et)),N.g=pe}else co(N);0<E.i.length&&Qr(E)}else qe[0]!="stop"&&qe[0]!="close"||bs(E,7);else E.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?bs(E,7):Yt(E):qe[0]!="noop"&&E.l&&E.l.ta(qe),E.v=0)}}ys(4)}catch{}}var dd=class{constructor(m,w){this.g=m,this.map=w}};function so(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fn(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function hd(m){return m.h?1:m.g?m.g.size:0}function yn(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function fc(m,w){m.g?m.g.add(w):m.h=w}function fd(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}so.prototype.cancel=function(){if(this.i=md(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function md(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const E of m.g.values())w=w.concat(E.D);return w}return D(m.i)}function fa(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(u(m)){for(var w=[],E=m.length,N=0;N<E;N++)w.push(m[N]);return w}w=[],E=0;for(N in m)w[E++]=m[N];return w}function ma(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(u(m)||typeof m=="string"){var w=[];m=m.length;for(var E=0;E<m;E++)w.push(E);return w}w=[],E=0;for(const N in m)w[E++]=N;return w}}}function Ys(m,w){if(m.forEach&&typeof m.forEach=="function")m.forEach(w,void 0);else if(u(m)||typeof m=="string")Array.prototype.forEach.call(m,w,void 0);else for(var E=ma(m),N=fa(m),K=N.length,ee=0;ee<K;ee++)w.call(void 0,N[ee],E&&E[ee],m)}var io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pm(m,w){if(m){m=m.split("&");for(var E=0;E<m.length;E++){var N=m[E].indexOf("="),K=null;if(0<=N){var ee=m[E].substring(0,N);K=m[E].substring(N+1)}else ee=m[E];w(ee,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function vs(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof vs){this.h=m.h,oo(this,m.j),this.o=m.o,this.g=m.g,Xs(this,m.s),this.l=m.l;var w=m.i,E=new qr;E.i=w.i,w.g&&(E.g=new Map(w.g),E.h=w.h),Zs(this,E),this.m=m.m}else m&&(w=String(m).match(io))?(this.h=!1,oo(this,w[1]||"",!0),this.o=He(w[2]||""),this.g=He(w[3]||"",!0),Xs(this,w[4]),this.l=He(w[5]||"",!0),Zs(this,w[6]||"",!0),this.m=He(w[7]||"")):(this.h=!1,this.i=new qr(null,this.h))}vs.prototype.toString=function(){var m=[],w=this.j;w&&m.push(ti(w,pa,!0),":");var E=this.g;return(E||w=="file")&&(m.push("//"),(w=this.o)&&m.push(ti(w,pa,!0),"@"),m.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&m.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&m.push("/"),m.push(ti(E,E.charAt(0)=="/"?yd:gd,!0))),(E=this.i.toString())&&m.push("?",E),(E=this.m)&&m.push("#",ti(E,mc)),m.join("")};function Un(m){return new vs(m)}function oo(m,w,E){m.j=E?He(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function Xs(m,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);m.s=w}else m.s=null}function Zs(m,w,E){w instanceof qr?(m.i=w,Gr(m.i,m.h)):(E||(w=ti(w,vd)),m.i=new qr(w,m.h))}function tt(m,w,E){m.i.set(w,E)}function ei(m){return tt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function He(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ti(m,w,E){return typeof m=="string"?(m=encodeURI(m).replace(w,pd),E&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function pd(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var pa=/[#\/\?@]/g,gd=/[#\?:]/g,yd=/[#\?]/g,vd=/[#\?@]/g,mc=/#/g;function qr(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function Jt(m){m.g||(m.g=new Map,m.h=0,m.i&&Pm(m.i,function(w,E){m.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}t=qr.prototype,t.add=function(m,w){Jt(this),this.i=null,m=er(this,m);var E=this.g.get(m);return E||this.g.set(m,E=[]),E.push(w),this.h+=1,this};function Er(m,w){Jt(m),w=er(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Tr(m,w){return Jt(m),w=er(m,w),m.g.has(w)}t.forEach=function(m,w){Jt(this),this.g.forEach(function(E,N){E.forEach(function(K){m.call(w,K,N,this)},this)},this)},t.na=function(){Jt(this);const m=Array.from(this.g.values()),w=Array.from(this.g.keys()),E=[];for(let N=0;N<w.length;N++){const K=m[N];for(let ee=0;ee<K.length;ee++)E.push(w[N])}return E},t.V=function(m){Jt(this);let w=[];if(typeof m=="string")Tr(this,m)&&(w=w.concat(this.g.get(er(this,m))));else{m=Array.from(this.g.values());for(let E=0;E<m.length;E++)w=w.concat(m[E])}return w},t.set=function(m,w){return Jt(this),this.i=null,m=er(this,m),Tr(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},t.get=function(m,w){return m?(m=this.V(m),0<m.length?String(m[0]):w):w};function ni(m,w,E){Er(m,w),0<E.length&&(m.i=null,m.g.set(er(m,w),D(E)),m.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(var E=0;E<w.length;E++){var N=w[E];const ee=encodeURIComponent(String(N)),pe=this.V(N);for(N=0;N<pe.length;N++){var K=ee;pe[N]!==""&&(K+="="+encodeURIComponent(String(pe[N]))),m.push(K)}}return this.i=m.join("&")};function er(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function Gr(m,w){w&&!m.j&&(Jt(m),m.i=null,m.g.forEach(function(E,N){var K=N.toLowerCase();N!=K&&(Er(this,N),ni(this,K,E))},m)),m.j=w}function Im(m,w){const E=new eo;if(c.Image){const N=new Image;N.onload=b(En,E,"TestLoadImage: loaded",!0,w,N),N.onerror=b(En,E,"TestLoadImage: error",!1,w,N),N.onabort=b(En,E,"TestLoadImage: abort",!1,w,N),N.ontimeout=b(En,E,"TestLoadImage: timeout",!1,w,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=m}else w(!1)}function xd(m,w){const E=new eo,N=new AbortController,K=setTimeout(()=>{N.abort(),En(E,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:N.signal}).then(ee=>{clearTimeout(K),ee.ok?En(E,"TestPingServer: ok",!0,w):En(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(K),En(E,"TestPingServer: error",!1,w)})}function En(m,w,E,N,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),N(E)}catch{}}function Rm(){this.g=new ic}function wd(m,w,E){const N=E||"";try{Ys(m,function(K,ee){let pe=K;h(K)&&(pe=rc(K)),w.push(N+ee+"="+encodeURIComponent(pe))})}catch(K){throw w.push(N+"type="+encodeURIComponent("_badmap")),K}}function xs(m){this.l=m.Ub||null,this.j=m.eb||!1}k(xs,Xi),xs.prototype.g=function(){return new ao(this.l,this.j)},xs.prototype.i=function(m){return function(){return m}}({});function ao(m,w){Dt.call(this),this.D=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(ao,Dt),t=ao.prototype,t.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=w,this.readyState=1,kr(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(w.body=m),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_d(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function _d(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?Sr(this):kr(this),this.readyState==3&&_d(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Sr(this))},t.Qa=function(m){this.g&&(this.response=m,Sr(this))},t.ga=function(){this.g&&Sr(this)};function Sr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,kr(m)}t.setRequestHeader=function(m,w){this.u.append(m,w)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,m.push(E[0]+": "+E[1]),E=w.next();return m.join(`\r
`)};function kr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ao.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ws(m){let w="";return G(m,function(E,N){w+=N,w+=":",w+=E,w+=`\r
`}),w}function ri(m,w,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=ws(E),typeof m=="string"?E!=null&&encodeURIComponent(String(E)):tt(m,w,E))}function ct(m){Dt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ct,Dt);var Nm=/^https?$/i,pc=["POST","PUT"];t=ct.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,w,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_r.g(),this.v=this.o?ia(this.o):ia(_r),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(ee){lo(this,ee);return}if(m=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var K in N)E.set(K,N[K]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ee of N.keys())E.set(ee,N.get(ee));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(pc,w,void 0))||N||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,pe]of E)this.g.setRequestHeader(ee,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ya(this),this.u=!0,this.g.send(m),this.u=!1}catch(ee){lo(this,ee)}};function lo(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.m=5,ga(m),Bn(m)}function ga(m){m.A||(m.A=!0,Ot(m,"complete"),Ot(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ot(this,"complete"),Ot(this,"abort"),Bn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gc(this):this.bb())},t.bb=function(){gc(this)};function gc(m){if(m.h&&typeof l<"u"&&(!m.v[1]||Tn(m)!=4||m.Z()!=2)){if(m.u&&Tn(m)==4)ec(m.Ea,0,m);else if(Ot(m,"readystatechange"),Tn(m)==4){m.h=!1;try{const pe=m.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var N;if(N=pe===0){var K=String(m.D).match(io)[1]||null;!K&&c.self&&c.self.location&&(K=c.self.location.protocol.slice(0,-1)),N=!Nm.test(K?K.toLowerCase():"")}E=N}if(E)Ot(m,"complete"),Ot(m,"success");else{m.m=6;try{var ee=2<Tn(m)?m.g.statusText:""}catch{ee=""}m.l=ee+" ["+m.Z()+"]",ga(m)}}finally{Bn(m)}}}}function Bn(m,w){if(m.g){ya(m);const E=m.g,N=m.v[0]?()=>{}:null;m.g=null,m.v=null,w||Ot(m,"ready");try{E.onreadystatechange=N}catch{}}}function ya(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Tn(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),sc(w)}};function yc(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function va(m){const w={};m=(m.g&&2<=Tn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<m.length;N++){if($(m[N]))continue;var E=j(m[N]);const K=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ee=w[K]||[];w[K]=ee,ee.push(E)}I(w,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(m,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[m]||w}function vc(m){this.Aa=0,this.i=[],this.j=new eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kr("baseRetryDelayMs",5e3,m),this.cb=Kr("retryDelaySeedMs",1e4,m),this.Wa=Kr("forwardChannelMaxRetries",2,m),this.wa=Kr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new so(m&&m.concurrentRequestLimit),this.Da=new Rm,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vc.prototype,t.la=8,t.G=1,t.connect=function(m,w,E,N){kt(0),this.W=m,this.H=w||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.I=Sd(this,null,this.W),Qr(this)};function Yt(m){if(xa(m),m.G==3){var w=m.U++,E=Un(m.I);if(tt(E,"SID",m.K),tt(E,"RID",w),tt(E,"TYPE","terminate"),_s(m,E),w=new br(m,m.j,w),w.L=2,w.v=ei(Un(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=w.v,E=!0),E||(w.g=kd(w.j,null),w.g.ea(w.v)),w.F=Date.now(),rt(w)}Td(m)}function Cr(m){m.g&&(xc(m),m.g.cancel(),m.g=null)}function xa(m){Cr(m),m.u&&(c.clearTimeout(m.u),m.u=null),ba(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Qr(m){if(!Fn(m.h)&&!m.s){m.s=!0;var w=m.Ga;be||te(),ue||(be(),ue=!0),J.add(w,m),m.B=0}}function jm(m,w){return hd(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=w.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=xr(v(m.Ga,m,w),Ed(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const K=new br(this,this.j,m);let ee=this.o;if(this.S&&(ee?(ee=S(ee),R(ee,this.S)):ee=this.S),this.m!==null||this.O||(K.H=ee,ee=null),this.P)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,4096<w){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=si(this,K,w),E=Un(this.I),tt(E,"RID",m),tt(E,"CVER",22),this.D&&tt(E,"X-HTTP-Session-Id",this.D),_s(this,E),ee&&(this.O?w="headers="+encodeURIComponent(String(ws(ee)))+"&"+w:this.m&&ri(E,this.m,ee)),fc(this.h,K),this.Ua&&tt(E,"TYPE","init"),this.P?(tt(E,"$req",w),tt(E,"SID","null"),K.T=!0,ha(K,E,null)):ha(K,E,w),this.G=2}}else this.G==3&&(m?wa(this,m):this.i.length==0||Fn(this.h)||wa(this))};function wa(m,w){var E;w?E=w.l:E=m.U++;const N=Un(m.I);tt(N,"SID",m.K),tt(N,"RID",E),tt(N,"AID",m.T),_s(m,N),m.m&&m.o&&ri(N,m.m,m.o),E=new br(m,m.j,E,m.B+1),m.m===null&&(E.H=m.o),w&&(m.i=w.D.concat(m.i)),w=si(m,E,1e3),E.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),fc(m.h,E),ha(E,N,w)}function _s(m,w){m.H&&G(m.H,function(E,N){tt(w,N,E)}),m.l&&Ys({},function(E,N){tt(w,N,E)})}function si(m,w,E){E=Math.min(m.i.length,E);var N=m.l?v(m.l.Na,m.l,m):null;e:{var K=m.i;let ee=-1;for(;;){const pe=["count="+E];ee==-1?0<E?(ee=K[0].g,pe.push("ofs="+ee)):ee=0:pe.push("ofs="+ee);let et=!0;for(let Lt=0;Lt<E;Lt++){let qe=K[Lt].g;const Bt=K[Lt].map;if(qe-=ee,0>qe)ee=Math.max(0,K[Lt].g-100),et=!1;else try{wd(Bt,pe,"req"+qe+"_")}catch{N&&N(Bt)}}if(et){N=pe.join("&");break e}}}return m=m.i.splice(0,E),w.D=m,N}function co(m){if(!m.g&&!m.u){m.Y=1;var w=m.Fa;be||te(),ue||(be(),ue=!0),J.add(w,m),m.v=0}}function _a(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=xr(v(m.Fa,m),Ed(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,bd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=xr(v(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Cr(this),bd(this))};function xc(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function bd(m){m.g=new br(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var w=Un(m.qa);tt(w,"RID","rpc"),tt(w,"SID",m.K),tt(w,"AID",m.T),tt(w,"CI",m.F?"0":"1"),!m.F&&m.ja&&tt(w,"TO",m.ja),tt(w,"TYPE","xmlhttp"),_s(m,w),m.m&&m.o&&ri(w,m.m,m.o),m.L&&(m.g.I=m.L);var E=m.g;m=m.ia,E.L=1,E.v=ei(Un(w)),E.m=null,E.P=!0,dc(E,m)}t.Za=function(){this.C!=null&&(this.C=null,Cr(this),_a(this),kt(19))};function ba(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Ea(m,w){var E=null;if(m.g==w){ba(m),xc(m),m.g=null;var N=2}else if(yn(m.h,w))E=w.D,fd(m.h,w),N=1;else return;if(m.G!=0){if(w.o)if(N==1){E=w.m?w.m.length:0,w=Date.now()-w.F;var K=m.B;N=Zi(),Ot(N,new la(N,E)),Qr(m)}else co(m);else if(K=w.s,K==3||K==0&&0<w.X||!(N==1&&jm(m,w)||N==2&&_a(m)))switch(E&&0<E.length&&(w=m.h,w.i=w.i.concat(E)),K){case 1:bs(m,5);break;case 4:bs(m,10);break;case 3:bs(m,6);break;default:bs(m,2)}}}function Ed(m,w){let E=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(E*=2),E*w}function bs(m,w){if(m.j.info("Error code "+w),w==2){var E=v(m.fb,m),N=m.Xa;const K=!N;N=new vs(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||oo(N,"https"),ei(N),K?Im(N.toString(),E):xd(N.toString(),E)}else kt(2);m.G=0,m.l&&m.l.sa(w),Td(m),xa(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Td(m){if(m.G=0,m.ka=[],m.l){const w=md(m.h);(w.length!=0||m.i.length!=0)&&(P(m.ka,w),P(m.ka,m.i),m.h.i.length=0,D(m.i),m.i.length=0),m.l.ra()}}function Sd(m,w,E){var N=E instanceof vs?Un(E):new vs(E);if(N.g!="")w&&(N.g=w+"."+N.g),Xs(N,N.s);else{var K=c.location;N=K.protocol,w=w?w+"."+K.hostname:K.hostname,K=+K.port;var ee=new vs(null);N&&oo(ee,N),w&&(ee.g=w),K&&Xs(ee,K),E&&(ee.l=E),N=ee}return E=m.D,w=m.ya,E&&w&&tt(N,E,w),tt(N,"VER",m.la),_s(m,N),N}function kd(m,w,E){if(w&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Ca&&!m.pa?new ct(new xs({eb:E})):new ct(m.pa),w.Ha(m.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wc(){}t=wc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ta(){}Ta.prototype.g=function(m,w){return new vn(m,w)};function vn(m,w){Dt.call(this),this.g=new vc(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(m?m["X-WebChannel-Client-Profile"]=w.va:m={"X-WebChannel-Client-Profile":w.va}),this.g.S=m,(m=w&&w.Sb)&&!$(m)&&(this.g.m=m),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!$(w)&&(this.g.D=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Jr(this)}k(vn,Dt),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Yt(this.g)},vn.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var E={};E.__data__=m,m=E}else this.u&&(E={},E.__data__=rc(m),m=E);w.i.push(new dd(w.Ya++,m)),w.G==3&&Qr(w)},vn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,vn.aa.N.call(this)};function Cd(m){Wr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const E in w){m=E;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}k(Cd,Wr);function Ad(){aa.call(this),this.status=1}k(Ad,aa);function Jr(m){this.g=m}k(Jr,wc),Jr.prototype.ua=function(){Ot(this.g,"a")},Jr.prototype.ta=function(m){Ot(this.g,new Cd(m))},Jr.prototype.sa=function(m){Ot(this.g,new Ad)},Jr.prototype.ra=function(){Ot(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,mC=function(){return new Ta},fC=function(){return Zi()},hC=Hr,V0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ua.NO_ERROR=0,ua.TIMEOUT=8,ua.HTTP_ERROR=6,Qh=ua,ad.COMPLETE="complete",dC=ad,oa.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,su=oa,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,uC=ct}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});const BE="@firebase/firestore",zE="4.7.15";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql="11.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new Xf("@firebase/firestore");function sl(){return Bo.logLevel}function xe(t,...e){if(Bo.logLevel<=Be.DEBUG){const n=e.map(lv);Bo.debug(`Firestore (${ql}): ${t}`,...n)}}function Us(t,...e){if(Bo.logLevel<=Be.ERROR){const n=e.map(lv);Bo.error(`Firestore (${ql}): ${t}`,...n)}}function Cl(t,...e){if(Bo.logLevel<=Be.WARN){const n=e.map(lv);Bo.warn(`Firestore (${ql}): ${t}`,...n)}}function lv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pC(t,r,n)}function pC(t,e,n){let r=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Us(r),new Error(r)}function Xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||pC(e,s,r)}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}}class jV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DV{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ls,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ls)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new gC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class OV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new OV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const r=o=>{o.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new WE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new WE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=VV(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function $0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ve(r,s);{const o=yC(),l=$V(o.encode(HE(t,n)),o.encode(HE(e,n)));return l!==0?l:Ve(r,s)}}n+=r>65535?2:1}return Ve(t.length,e.length)}function HE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function $V(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ve(t[n],e[n]);return Ve(t.length,e.length)}function Al(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=-62135596800,GE=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*GE);return new Ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qE)throw new ke(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Ft(0,0))}static max(){return new Oe(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="__name__";class ns{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ns.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ns?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=ns.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ve(e.length,n.length)}static compareSegments(e,n){const r=ns.isNumericId(e),s=ns.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ns.extractNumericId(e).compare(ns.extractNumericId(n)):$0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ji.fromString(e.substring(4,e.length-2))}}class ht extends ns{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ht(n)}static emptyPath(){return new ht([])}}const FV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends ns{construct(e,n,r){return new rn(e,n,r)}static isValidIdentifier(e){return FV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KE}static keyField(){return new rn([KE])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ke(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ke(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ke(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new ke(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(ht.fromString(e))}static fromName(e){return new Pe(ht.fromString(e).popFirst(5))}static empty(){return new Pe(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;function UV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new Vi(s,Pe.empty(),e)}function BV(t){return new Vi(t.readTime,t.key,Du)}class Vi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vi(Oe.min(),Pe.empty(),Du)}static max(){return new Vi(Oe.max(),Pe.empty(),Du)}}function zV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==WV)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&n()},u=>r(u))}),l=!0,o===s&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(s=>s?se.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new se((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let u=0;u<o;u++){const h=u;n(e[h]).next(g=>{l[h]=g,++c,c===o&&r(l)},g=>s(g))}})}static doWhile(e,n){return new se((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function qV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Zf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-1;function em(t){return t==null}function _f(t){return t===0&&1/t==-1/0}function GV(t){return typeof t=="number"&&Number.isInteger(t)&&!_f(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="";function KV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=QE(e)),e=QV(t.get(n),e);return QE(e)}function QV(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case xC:n+="";break;default:n+=o}}return n}function QE(t){return t+xC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??tn.RED,this.left=s??tn.EMPTY,this.right=o??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new tn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YE(this.data.getIterator())}getIteratorFrom(e){return new YE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class YE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new Ut(rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _C("Invalid base64 string: "+o):o}}(e);return new sn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const JV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if(Xe(!!t,39018),typeof t=="string"){let e=0;const n=JV.exec(t);if(Xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fi(t){return typeof t=="string"?sn.fromBase64String(t):sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="server_timestamp",EC="__type__",TC="__previous_value__",SC="__local_write_time__";function uv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[EC])===null||n===void 0?void 0:n.stringValue)===bC}function tm(t){const e=t.mapValue.fields[TC];return uv(e)?tm(e):e}function Ou(t){const e=$i(t.mapValue.fields[SC].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,r,s,o,l,c,u,h,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=g}}const bf="(default)";class Lu{constructor(e,n){this.projectId=e,this.database=n||bf}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===bf}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="__type__",XV="__max__",Lh={mapValue:{}},CC="__vector__",Ef="value";function Ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uv(t)?4:e$(t)?9007199254740991:ZV(t)?10:11:Re(28295,{value:t})}function hs(t,e){if(t===e)return!0;const n=Ui(t);if(n!==Ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ou(t).isEqual(Ou(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=$i(s.timestampValue),c=$i(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Fi(s.bytesValue).isEqual(Fi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Pt(s.geoPointValue.latitude)===Pt(o.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Pt(s.integerValue)===Pt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Pt(s.doubleValue),c=Pt(o.doubleValue);return l===c?_f(l)===_f(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return Al(t.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(JE(l)!==JE(c))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(c[u]===void 0||!hs(l[u],c[u])))return!1;return!0}(t,e);default:return Re(52216,{left:t})}}function Mu(t,e){return(t.values||[]).find(n=>hs(n,e))!==void 0}function Pl(t,e){if(t===e)return 0;const n=Ui(t),r=Ui(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Pt(o.integerValue||o.doubleValue),u=Pt(l.integerValue||l.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return XE(t.timestampValue,e.timestampValue);case 4:return XE(Ou(t),Ou(e));case 5:return $0(t.stringValue,e.stringValue);case 6:return function(o,l){const c=Fi(o),u=Fi(l);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),u=l.split("/");for(let h=0;h<c.length&&h<u.length;h++){const g=Ve(c[h],u[h]);if(g!==0)return g}return Ve(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Ve(Pt(o.latitude),Pt(l.latitude));return c!==0?c:Ve(Pt(o.longitude),Pt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ZE(t.arrayValue,e.arrayValue);case 10:return function(o,l){var c,u,h,g;const y=o.fields||{},v=l.fields||{},b=(c=y[Ef])===null||c===void 0?void 0:c.arrayValue,k=(u=v[Ef])===null||u===void 0?void 0:u.arrayValue,D=Ve(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0);return D!==0?D:ZE(b,k)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Lh.mapValue&&l===Lh.mapValue)return 0;if(o===Lh.mapValue)return 1;if(l===Lh.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),h=l.fields||{},g=Object.keys(h);u.sort(),g.sort();for(let y=0;y<u.length&&y<g.length;++y){const v=$0(u[y],g[y]);if(v!==0)return v;const b=Pl(c[u[y]],h[g[y]]);if(b!==0)return b}return Ve(u.length,g.length)}(t.mapValue,e.mapValue);default:throw Re(23264,{Pe:n})}}function XE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=$i(t),r=$i(e),s=Ve(n.seconds,r.seconds);return s!==0?s:Ve(n.nanos,r.nanos)}function ZE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Pl(n[s],r[s]);if(o)return o}return Ve(n.length,r.length)}function Il(t){return F0(t)}function F0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=$i(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=F0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${F0(n.fields[l])}`;return s+"}"}(t.mapValue):Re(61005,{value:t})}function Jh(t){switch(Ui(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tm(t);return e?16+Jh(e):16;case 5:return 2*t.stringValue.length;case 6:return Fi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Jh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return qi(r.fields,(o,l)=>{s+=o.length+Jh(l)}),s}(t.mapValue);default:throw Re(13486,{value:t})}}function U0(t){return!!t&&"integerValue"in t}function dv(t){return!!t&&"arrayValue"in t}function eT(t){return!!t&&"nullValue"in t}function tT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yh(t){return!!t&&"mapValue"in t}function ZV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[kC])===null||n===void 0?void 0:n.stringValue)===CC}function yu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function e$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(n)}setAll(e){let n=rn.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}l?r[c.lastSegment()]=yu(l):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){qi(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new jn(yu(this.value))}}function AC(t){const e=[];return qi(t.fields,(n,r)=>{const s=new rn([n]);if(Yh(r)){const o=AC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,r,s,o,l,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new mn(e,0,Oe.min(),Oe.min(),Oe.min(),jn.empty(),0)}static newFoundDocument(e,n,r,s){return new mn(e,1,n,Oe.min(),r,s,0)}static newNoDocument(e,n){return new mn(e,2,n,Oe.min(),Oe.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,Oe.min(),Oe.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){this.position=e,this.inclusive=n}}function nT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Pe.comparator(Pe.fromName(l.referenceValue),n.key):r=Pl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function rT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n="asc"){this.field=e,this.dir=n}}function t$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{}class $t extends PC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new r$(e,n,r):n==="array-contains"?new o$(e,r):n==="in"?new a$(e,r):n==="not-in"?new l$(e,r):n==="array-contains-any"?new c$(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new s$(e,r):new i$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pl(n,this.value)):n!==null&&Ui(this.value)===Ui(n)&&this.matchesComparison(Pl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fs extends PC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new fs(e,n)}matches(e){return IC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function IC(t){return t.op==="and"}function RC(t){return n$(t)&&IC(t)}function n$(t){for(const e of t.filters)if(e instanceof fs)return!1;return!0}function B0(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+Il(t.value);if(RC(t))return t.filters.map(e=>B0(e)).join(",");{const e=t.filters.map(n=>B0(n)).join(",");return`${t.op}(${e})`}}function NC(t,e){return t instanceof $t?function(r,s){return s instanceof $t&&r.op===s.op&&r.field.isEqual(s.field)&&hs(r.value,s.value)}(t,e):t instanceof fs?function(r,s){return s instanceof fs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&NC(l,s.filters[c]),!0):!1}(t,e):void Re(19439)}function jC(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${Il(n.value)}`}(t):t instanceof fs?function(n){return n.op.toString()+" {"+n.getFilters().map(jC).join(" ,")+"}"}(t):"Filter"}class r$ extends $t{constructor(e,n,r){super(e,n,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const n=Pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class s$ extends $t{constructor(e,n){super(e,"in",n),this.keys=DC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class i$ extends $t{constructor(e,n){super(e,"not-in",n),this.keys=DC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class o$ extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dv(n)&&Mu(n.arrayValue,this.value)}}class a$ extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mu(this.value.arrayValue,n)}}class l$ extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mu(this.value.arrayValue,n)}}class c$ extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e,n=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Ie=null}}function sT(t,e=null,n=[],r=[],s=null,o=null,l=null){return new u$(t,e,n,r,s,o,l)}function hv(t){const e=Le(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>B0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),em(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Il(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Il(r)).join(",")),e.Ie=n}return e.Ie}function fv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rT(t.startAt,e.startAt)&&rT(t.endAt,e.endAt)}function z0(t){return Pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n=null,r=[],s=[],o=null,l="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function d$(t,e,n,r,s,o,l,c){return new nm(t,e,n,r,s,o,l,c)}function mv(t){return new nm(t)}function iT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h$(t){return t.collectionGroup!==null}function vu(t){const e=Le(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ut(rn.comparator);return l.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Sf(o,r))}),n.has(rn.keyField().canonicalString())||e.Ee.push(new Sf(rn.keyField(),r))}return e.Ee}function as(t){const e=Le(t);return e.de||(e.de=f$(e,vu(t))),e.de}function f$(t,e){if(t.limitType==="F")return sT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Sf(s.field,o)});const n=t.endAt?new Tf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tf(t.startAt.position,t.startAt.inclusive):null;return sT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function W0(t,e,n){return new nm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rm(t,e){return fv(as(t),as(e))&&t.limitType===e.limitType}function OC(t){return`${hv(as(t))}|lt:${t.limitType}`}function il(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jC(s)).join(", ")}]`),em(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Il(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Il(s)).join(",")),`Target(${r})`}(as(t))}; limitType=${t.limitType})`}function sm(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of vu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,c,u){const h=nT(l,c,u);return l.inclusive?h<=0:h<0}(r.startAt,vu(r),s)||r.endAt&&!function(l,c,u){const h=nT(l,c,u);return l.inclusive?h>=0:h>0}(r.endAt,vu(r),s))}(t,e)}function m$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LC(t){return(e,n)=>{let r=!1;for(const s of vu(t)){const o=p$(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function p$(t,e,n){const r=t.field.isKeyField()?Pe.comparator(e.key,n.key):function(o,l,c){const u=l.data.field(o),h=c.data.field(o);return u!==null&&h!==null?Pl(u,h):Re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return wC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=new xt(Pe.comparator);function Bs(){return g$}const MC=new xt(Pe.comparator);function iu(...t){let e=MC;for(const n of t)e=e.insert(n.key,n);return e}function VC(t){let e=MC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oo(){return xu()}function $C(){return xu()}function xu(){return new ea(t=>t.toString(),(t,e)=>t.isEqual(e))}const y$=new xt(Pe.comparator),v$=new Ut(Pe.comparator);function ze(...t){let e=v$;for(const n of t)e=e.add(n);return e}const x$=new Ut(Ve);function w$(){return x$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_f(e)?"-0":e}}function FC(t){return{integerValue:""+t}}function _$(t,e){return GV(e)?FC(e):pv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this._=void 0}}function b$(t,e,n){return t instanceof kf?function(s,o){const l={fields:{[EC]:{stringValue:bC},[SC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&uv(o)&&(o=tm(o)),o&&(l.fields[TC]=o),{mapValue:l}}(n,e):t instanceof Vu?BC(t,e):t instanceof $u?zC(t,e):function(s,o){const l=UC(s,o),c=oT(l)+oT(s.Re);return U0(l)&&U0(s.Re)?FC(c):pv(s.serializer,c)}(t,e)}function E$(t,e,n){return t instanceof Vu?BC(t,e):t instanceof $u?zC(t,e):n}function UC(t,e){return t instanceof Cf?function(r){return U0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class kf extends im{}class Vu extends im{constructor(e){super(),this.elements=e}}function BC(t,e){const n=WC(e);for(const r of t.elements)n.some(s=>hs(s,r))||n.push(r);return{arrayValue:{values:n}}}class $u extends im{constructor(e){super(),this.elements=e}}function zC(t,e){let n=WC(e);for(const r of t.elements)n=n.filter(s=>!hs(s,r));return{arrayValue:{values:n}}}class Cf extends im{constructor(e,n){super(),this.serializer=e,this.Re=n}}function oT(t){return Pt(t.integerValue||t.doubleValue)}function WC(t){return dv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function T$(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Vu&&s instanceof Vu||r instanceof $u&&s instanceof $u?Al(r.elements,s.elements,hs):r instanceof Cf&&s instanceof Cf?hs(r.Re,s.Re):r instanceof kf&&s instanceof kf}(t.transform,e.transform)}class S${constructor(e,n){this.version=e,this.transformResults=n}}class fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class om{}function HC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gv(t.key,fr.none()):new Xu(t.key,t.data,fr.none());{const n=t.data,r=jn.empty();let s=new Ut(rn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Gi(t.key,r,new Jn(s.toArray()),fr.none())}}function k$(t,e,n){t instanceof Xu?function(s,o,l){const c=s.value.clone(),u=lT(s.fieldTransforms,o,l.transformResults);c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Gi?function(s,o,l){if(!Xh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=lT(s.fieldTransforms,o,l.transformResults),u=o.data;u.setAll(qC(s)),u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function wu(t,e,n,r){return t instanceof Xu?function(o,l,c,u){if(!Xh(o.precondition,l))return c;const h=o.value.clone(),g=cT(o.fieldTransforms,u,l);return h.setAll(g),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gi?function(o,l,c,u){if(!Xh(o.precondition,l))return c;const h=cT(o.fieldTransforms,u,l),g=l.data;return g.setAll(qC(o)),g.setAll(h),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,l,c){return Xh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,n)}function C$(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=UC(r.transform,s||null);o!=null&&(n===null&&(n=jn.empty()),n.set(r.field,o))}return n||null}function aT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Al(r,s,(o,l)=>T$(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xu extends om{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gi extends om{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function qC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lT(t,e,n){const r=new Map;Xe(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,E$(l,c,n[s]))}return r}function cT(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,b$(o,l,e))}return r}class gv extends om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A$ extends om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&k$(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$C();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(s.key)?null:c;const u=HC(l,c);u!==null&&r.set(s.key,u),l.isValidDocument()||l.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,(n,r)=>aT(n,r))&&Al(this.baseMutations,e.baseMutations,(n,r)=>aT(n,r))}}class yv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return y$}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new yv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ge;function N$(t){switch(t){case ce.OK:return Re(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function GC(t){if(t===void 0)return Us("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Nt.OK:return ce.OK;case Nt.CANCELLED:return ce.CANCELLED;case Nt.UNKNOWN:return ce.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ce.INTERNAL;case Nt.UNAVAILABLE:return ce.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ce.NOT_FOUND;case Nt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Nt.ABORTED:return ce.ABORTED;case Nt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Nt.DATA_LOSS:return ce.DATA_LOSS;default:return Re(39323,{code:t})}}(Ge=Nt||(Nt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$=new ji([4294967295,4294967295],0);function uT(t){const e=yC().encode(t),n=new cC;return n.update(e),new Uint8Array(n.digest())}function dT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ji([n,r],0),new ji([s,o],0)]}class vv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ou(`Invalid padding: ${n}`);if(r<0)throw new ou(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ou(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ji.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(ji.fromNumber(r)));return s.compare(j$)===1&&(s=new ji([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=uT(e),[r,s]=dT(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);if(!this.Se(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new vv(o,s,n);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.pe===0)return;const n=uT(e),[r,s]=dT(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);this.be(l)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new am(Oe.min(),s,new xt(Ve),Bs(),ze())}}class Zu{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zu(r,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class KC{constructor(e,n){this.targetId=e,this.Ce=n}}class QC{constructor(e,n,r=sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hT{constructor(){this.Fe=0,this.Me=fT(),this.xe=sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ze(),n=ze(),r=ze();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Re(38017,{changeType:o})}}),new Zu(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=fT()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Xe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class D${constructor(e){this.ze=e,this.je=new Map,this.He=Bs(),this.Je=Mh(),this.Ye=Mh(),this.Ze=new xt(Ve)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(z0(o))if(r===0){const l=new Pe(o.path);this.tt(n,l,mn.newNoDocument(l,Oe.min()))}else Xe(r===1,20013,{expectedCount:r});else{const l=this.ut(n);if(l!==r){const c=this.ct(e),u=c?this.lt(c,e,l):1;if(u!==0){this.st(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,c;try{l=Fi(r).toUint8Array()}catch(u){if(u instanceof _C)return Cl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new vv(l,s,o)}catch(u){return Cl(u instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.ze.Pt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,l)=>{const c=this._t(l);if(c){if(o.current&&z0(c.target)){const u=new Pe(c.target.path);this.Et(u).has(l)||this.dt(l,u)||this.tt(l,u,mn.newNoDocument(u,e))}o.Le&&(n.set(l,o.qe()),o.Qe())}});let r=ze();this.Ye.forEach((o,l)=>{let c=!0;l.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,l)=>l.setReadTime(e));const s=new am(e,n,this.Ze,this.He,r);return this.He=Bs(),this.Je=Mh(),this.Ye=Mh(),this.Ze=new xt(Ve),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new hT,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ut(Ve),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ut(Ve),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new hT),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Mh(){return new xt(Pe.comparator)}function fT(){return new xt(Pe.comparator)}const O$={asc:"ASCENDING",desc:"DESCENDING"},L$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M$={and:"AND",or:"OR"};class V${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function H0(t,e){return t.useProto3Json||em(e)?e:{value:e}}function Af(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $$(t,e){return Af(t,e.toTimestamp())}function ls(t){return Xe(!!t,49232),Oe.fromTimestamp(function(n){const r=$i(n);return new Ft(r.seconds,r.nanos)}(t))}function xv(t,e){return q0(t,e).canonicalString()}function q0(t,e){const n=function(s){return new ht(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function YC(t){const e=ht.fromString(t);return Xe(nA(e),10190,{key:e.toString()}),e}function G0(t,e){return xv(t.databaseId,e.path)}function Lg(t,e){const n=YC(e);if(n.get(1)!==t.databaseId.projectId)throw new ke(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ke(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Pe(ZC(n))}function XC(t,e){return xv(t.databaseId,e)}function F$(t){const e=YC(t);return e.length===4?ht.emptyPath():ZC(e)}function K0(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZC(t){return Xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mT(t,e,n){return{name:G0(t,e),fields:n.value.mapValue.fields}}function U$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(Xe(g===void 0||typeof g=="string",58123),sn.fromBase64String(g||"")):(Xe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),sn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(h){const g=h.code===void 0?ce.UNKNOWN:GC(h.code);return new ke(g,h.message||"")}(l);n=new QC(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Lg(t,r.document.name),o=ls(r.document.updateTime),l=r.document.createTime?ls(r.document.createTime):Oe.min(),c=new jn({mapValue:{fields:r.document.fields}}),u=mn.newFoundDocument(s,o,l,c),h=r.targetIds||[],g=r.removedTargetIds||[];n=new Zh(h,g,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Lg(t,r.document),o=r.readTime?ls(r.readTime):Oe.min(),l=mn.newNoDocument(s,o),c=r.removedTargetIds||[];n=new Zh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Lg(t,r.document),o=r.removedTargetIds||[];n=new Zh([],o,s,null)}else{if(!("filter"in e))return Re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new R$(s,o),c=r.targetId;n=new KC(c,l)}}return n}function B$(t,e){let n;if(e instanceof Xu)n={update:mT(t,e.key,e.value)};else if(e instanceof gv)n={delete:G0(t,e.key)};else if(e instanceof Gi)n={update:mT(t,e.key,e.data),updateMask:Y$(e.fieldMask)};else{if(!(e instanceof A$))return Re(16599,{ft:e.type});n={verify:G0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof kf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Vu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $u)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Cf)return{fieldPath:l.field.canonicalString(),increment:c.Re};throw Re(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:$$(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Re(27497)}(t,e.precondition)),n}function z$(t,e){return t&&t.length>0?(Xe(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?ls(s.updateTime):ls(o);return l.isEqual(Oe.min())&&(l=ls(o)),new S$(l,s.transformResults||[])}(n,e))):[]}function W$(t,e){return{documents:[XC(t,e.path)]}}function H$(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=XC(t,s);const o=function(h){if(h.length!==0)return tA(fs.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(g=>function(v){return{field:ol(v.field),direction:K$(v.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=H0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:n,parent:s}}function q$(t){let e=F$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Xe(r===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const v=eA(y);return v instanceof fs&&RC(v)?v.getFilters():[v]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(v=>function(k){return new Sf(al(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(y){let v;return v=typeof y=="object"?y.value:y,em(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(y){const v=!!y.before,b=y.values||[];return new Tf(b,v)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const v=!y.before,b=y.values||[];return new Tf(b,v)}(n.endAt)),d$(e,s,l,o,c,"F",u,h)}function G$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=al(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=al(n.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=al(n.unaryFilter.field);return $t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=al(n.unaryFilter.field);return $t.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}}(t):t.fieldFilter!==void 0?function(n){return $t.create(al(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fs.create(n.compositeFilter.filters.map(r=>eA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re(1026)}}(n.compositeFilter.op))}(t):Re(30097,{filter:t})}function K$(t){return O$[t]}function Q$(t){return L$[t]}function J$(t){return M$[t]}function ol(t){return{fieldPath:t.canonicalString()}}function al(t){return rn.fromServerFormat(t.fieldPath)}function tA(t){return t instanceof $t?function(n){if(n.op==="=="){if(tT(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(eT(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tT(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(eT(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:Q$(n.op),value:n.value}}}(t):t instanceof fs?function(n){const r=n.getFilters().map(s=>tA(s));return r.length===1?r[0]:{compositeFilter:{op:J$(n.op),filters:r}}}(t):Re(54877,{filter:t})}function Y$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,r,s,o=Oe.min(),l=Oe.min(),c=sn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e){this.wt=e}}function Z$(t){const e=q$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?W0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(){this.Cn=new tF}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Vi.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class tF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ut(ht.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ut(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rA=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(rA,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Rl(0)}static lr(){return new Rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="LruGarbageCollector",nF=1048576;function yT([t,e],[n,r]){const s=Ve(t,n);return s===0?Ve(e,r):s}class rF{constructor(e){this.Er=e,this.buffer=new Ut(yT),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){xe(gT,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kl(n)?xe(gT,"Ignoring IndexedDB error during garbage collection: ",n):await Gl(n)}await this.mr(3e5)})}}class iF{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Zf.le);const r=new rF(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(pT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,l,c,u,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(h=Date.now(),sl()<=Be.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${y} documents in `+(h-u)+`ms
Total Duration: ${h-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function oF(t,e){return new iF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(){this.changes=new ea(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wu(r.mutation,s,Jn.empty(),Ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ze()){const s=Oo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=iu();return o.forEach((c,u)=>{l=l.insert(c,u.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Oo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ze()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{n.set(l,c)})})}computeViews(e,n,r,s){let o=Bs();const l=xu(),c=function(){return xu()}();return n.forEach((u,h)=>{const g=r.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof Gi)?o=o.insert(h.key,h):g!==void 0?(l.set(h.key,g.mutation.getFieldMask()),wu(g.mutation,h,g.mutation.getFieldMask(),Ft.now())):l.set(h.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((h,g)=>l.set(h,g)),n.forEach((h,g)=>{var y;return c.set(h,new lF(g,(y=l.get(h))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,n){const r=xu();let s=new xt((l,c)=>l-c),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const c of l)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let g=r.get(u)||Jn.empty();g=c.applyToLocalView(h,g),r.set(u,g);const y=(s.get(c.batchId)||ze()).add(u);s=s.insert(c.batchId,y)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,g=u.value,y=$C();g.forEach(v=>{if(!o.has(v)){const b=HC(n.get(v),r.get(v));b!==null&&y.set(v,b),o=o.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,y))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return Pe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):h$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):se.resolve(Oo());let c=Du,u=o;return l.next(h=>se.forEach(h,(g,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{u=u.insert(g,v)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,u,h,ze())).next(g=>({batchId:c,changes:VC(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pe(n)).next(r=>{let s=iu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=iu();return this.indexManager.getCollectionParents(e,o).next(c=>se.forEach(c,u=>{const h=function(y,v){return new nm(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(g=>{g.forEach((y,v)=>{l=l.insert(y,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((u,h)=>{const g=h.getKey();l.get(g)===null&&(l=l.insert(g,mn.newInvalidDocument(g)))});let c=iu();return l.forEach((u,h)=>{const g=o.get(u);g!==void 0&&wu(g.mutation,h,Jn.empty(),Ft.now()),sm(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return se.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ls(s.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:Z$(s.bundledQuery),readTime:ls(s.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(){this.overlays=new xt(Pe.comparator),this.Qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oo();return se.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.bt(e,n,o)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const s=Oo(),o=n.length+1,l=new Pe(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&u.largestBatchId>r&&s.set(u.getKey(),u)}return se.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new xt((h,g)=>h-g);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let g=o.get(h.largestBatchId);g===null&&(g=Oo(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const c=Oo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,g)=>c.set(h,g)),!(c.size()>=s)););return se.resolve(c)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new I$(n,r));let o=this.Qr.get(n);o===void 0&&(o=ze(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.$r=new Ut(Kt.Ur),this.Kr=new Ut(Kt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Kt(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Kt(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Pe(new ht([])),r=new Kt(n,e),s=new Kt(n,e+1),o=[];return this.Kr.forEachInRange([r,s],l=>{this.zr(l),o.push(l.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Pe(new ht([])),r=new Kt(n,e),s=new Kt(n,e+1);let o=ze();return this.Kr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Kt(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Pe.comparator(e.key,n.key)||Ve(e.Zr,n.Zr)}static Wr(e,n){return Ve(e.Zr,n.Zr)||Pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ut(Kt.Ur)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new P$(o,n,r,s);this.mutationQueue.push(l);for(const c of s)this.Xr=this.Xr.add(new Kt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,n){return se.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?cv:this.nr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kt(n,0),s=new Kt(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],l=>{const c=this.ei(l.Zr);o.push(c)}),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(Ve);return n.forEach(s=>{const o=new Kt(s,0),l=new Kt(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,l],c=>{r=r.add(c.Zr)})}),se.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Pe.isDocumentKey(o)||(o=o.child(""));const l=new Kt(new Pe(o),0);let c=new Ut(Ve);return this.Xr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Zr)),!0)},l),se.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Xe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return se.forEach(n.mutations,s=>{const o=new Kt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Kt(n,0),s=this.Xr.firstAfterOrEqual(r);return se.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.ii=e,this.docs=function(){return new xt(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=Bs();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():mn.newInvalidDocument(s))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Bs();const l=n.path,c=new Pe(l.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:g}}=u.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||zV(BV(g),r)<=0||(s.has(g.key)||sm(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Re(9500)}si(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pF(this)}getSize(e){return se.resolve(this.size)}}class pF extends aF{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.persistence=e,this.oi=new ea(n=>hv(n),fv),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this._i=0,this.ai=new wv,this.targetCount=0,this.ui=Rl.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),se.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Rl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Tr(n),se.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),se.waitFor(o).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),se.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n){this.ci={},this.overlays={},this.li=new Zf(0),this.hi=!1,this.hi=!0,this.Pi=new hF,this.referenceDelegate=e(this),this.Ti=new gF(this),this.indexManager=new eF,this.remoteDocumentCache=function(s){return new mF(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new X$(n),this.Ei=new uF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new fF(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){xe("MemoryPersistence","Starting transaction:",e);const s=new yF(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return se.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class yF extends HV{constructor(e){super(),this.currentSequenceNumber=e}}class _v{constructor(e){this.persistence=e,this.Vi=new wv,this.mi=null}static fi(e){return new _v(e)}get gi(){if(this.mi)return this.mi;throw Re(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.gi,r=>{const s=Pe.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,Oe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return se.or([()=>se.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Pf{constructor(e,n){this.persistence=e,this.yi=new ea(r=>KV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=oF(this,n)}static fi(e,n){return new Pf(e,n)}di(){}Ai(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return se.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?se.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,l=>this.Dr(e,l,n).next(c=>{c||(r++,o.removeEntry(l,Oe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),se.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jh(e.data.value)),n}Dr(e,n,r){return se.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return se.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=ze(),s=ze();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new bv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return uM()?8:qV(gn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Ss(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new vF;return this.bs(e,n,l).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,l,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(sl()<=Be.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",il(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),se.resolve()):(sl()<=Be.DEBUG&&xe("QueryEngine","Query:",il(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(sl()<=Be.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",il(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,as(n))):se.resolve())}ws(e,n){if(iT(n))return se.resolve(null);let r=as(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=W0(n,null,"F"),r=as(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=ze(...o);return this.ys.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.vs(n,c);return this.Cs(n,h,l,u.readTime)?this.ws(e,W0(n,null,"F")):this.Fs(e,h,n,u)}))})))}Ss(e,n,r,s){return iT(n)||s.isEqual(Oe.min())?se.resolve(null):this.ys.getDocuments(e,r).next(o=>{const l=this.vs(n,o);return this.Cs(n,l,r,s)?se.resolve(null):(sl()<=Be.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),il(n)),this.Fs(e,l,n,UV(s,Du)).next(c=>c))})}vs(e,n){let r=new Ut(LC(e));return n.forEach((s,o)=>{sm(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}bs(e,n,r){return sl()<=Be.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",il(n)),this.ys.getDocumentsMatchingQuery(e,n,Vi.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="LocalStore",wF=3e8;class _F{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new xt(Ve),this.Os=new ea(o=>hv(o),fv),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cF(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function bF(t,e,n,r){return new _F(t,e,n,r)}async function iA(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let u=ze();for(const h of s){l.push(h.batchId);for(const g of h.mutations)u=u.add(g.key)}for(const h of o){c.push(h.batchId);for(const g of h.mutations)u=u.add(g.key)}return n.localDocuments.getDocuments(r,u).next(h=>({ks:h,removedBatchIds:l,addedBatchIds:c}))})})}function EF(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,g){const y=h.batch,v=y.keys();let b=se.resolve();return v.forEach(k=>{b=b.next(()=>g.getEntry(u,k)).next(D=>{const P=h.docVersions.get(k);Xe(P!==null,48541),D.version.compareTo(P)<0&&(y.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),g.addEntry(D)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(u,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ze();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function oA(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function TF(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((g,y)=>{const v=s.get(y);if(!v)return;c.push(n.Ti.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.Ti.addMatchingKeys(o,g.addedDocuments,y)));let b=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(sn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(y,b),function(D,P,O){return D.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=wF?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(v,b,g)&&c.push(n.Ti.updateTargetData(o,b))});let u=Bs(),h=ze();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),c.push(SF(o,l,e.documentUpdates).next(g=>{u=g.qs,h=g.Qs})),!r.isEqual(Oe.min())){const g=n.Ti.getLastRemoteSnapshotVersion(o).next(y=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(g)}return se.waitFor(c).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,h)).next(()=>u)}).then(o=>(n.xs=s,o))}function SF(t,e,n){let r=ze(),s=ze();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Bs();return n.forEach((c,u)=>{const h=o.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Oe.min())?(e.removeEntry(c,u.readTime),l=l.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),l=l.insert(c,u)):xe(Ev,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{qs:l,Qs:s}})}function kF(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=cv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CF(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,se.resolve(s)):n.Ti.allocateTargetId(r).next(l=>(s=new Ii(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Q0(t,e,n){const r=Le(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Kl(l))throw l;xe(Ev,`Failed to update sequence numbers for target ${e}: ${l}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function vT(t,e,n){const r=Le(t);let s=Oe.min(),o=ze();return r.persistence.runTransaction("Execute query","readwrite",l=>function(u,h,g){const y=Le(u),v=y.Os.get(g);return v!==void 0?se.resolve(y.xs.get(v)):y.Ti.getTargetData(h,g)}(r,l,as(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(l,c.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(l,e,n?s:Oe.min(),n?o:ze())).next(c=>(AF(r,m$(e),c),{documents:c,$s:o})))}function AF(t,e,n){let r=t.Ns.get(e)||Oe.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class xT{constructor(){this.activeTargetIds=w$()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PF{constructor(){this.xo=new xT,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new xT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="ConnectivityMonitor";class _T{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){xe(wT,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){xe(wT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function J0(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="RestConnection",RF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NF{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const l=J0(),c=this.jo(e,n.toUriEncodedString());xe(Mg,`Sending RPC '${e}' ${l}:`,c,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,o);const{host:h}=new URL(c),g=Yo(h);return this.Jo(e,c,u,r,g).then(y=>(xe(Mg,`Received RPC '${e}' ${l}: `,y),y),y=>{throw Cl(Mg,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y})}Yo(e,n,r,s,o,l){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ql}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=RF[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class DF extends NF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=J0();return new Promise((c,u)=>{const h=new uC;h.setWithCredentials(!0),h.listenOnce(dC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Qh.NO_ERROR:const y=h.getResponseJson();xe(dn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Qh.TIMEOUT:xe(dn,`RPC '${e}' ${l} timed out`),u(new ke(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Qh.HTTP_ERROR:const v=h.getStatus();if(xe(dn,`RPC '${e}' ${l} failed with status:`,v,"response text:",h.getResponseText()),v>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const k=b==null?void 0:b.error;if(k&&k.status&&k.message){const D=function(O){const $=O.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf($)>=0?$:ce.UNKNOWN}(k.status);u(new ke(D,k.message))}else u(new ke(ce.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ke(ce.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:l,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{xe(dn,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(s);xe(dn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",g,r,15)})}T_(e,n,r){const s=J0(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=mC(),c=fC(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const g=o.join("");xe(dn,`Creating RPC '${e}' stream ${s}: ${g}`,u);const y=l.createWebChannel(g,u);let v=!1,b=!1;const k=new jF({Zo:P=>{b?xe(dn,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(v||(xe(dn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),xe(dn,`RPC '${e}' stream ${s} sending:`,P),y.send(P))},Xo:()=>y.close()}),D=(P,O,$)=>{P.listen(O,M=>{try{$(M)}catch(z){setTimeout(()=>{throw z},0)}})};return D(y,su.EventType.OPEN,()=>{b||(xe(dn,`RPC '${e}' stream ${s} transport opened.`),k.__())}),D(y,su.EventType.CLOSE,()=>{b||(b=!0,xe(dn,`RPC '${e}' stream ${s} transport closed`),k.u_())}),D(y,su.EventType.ERROR,P=>{b||(b=!0,Cl(dn,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),k.u_(new ke(ce.UNAVAILABLE,"The operation could not be completed")))}),D(y,su.EventType.MESSAGE,P=>{var O;if(!b){const $=P.data[0];Xe(!!$,16349);const M=$,z=(M==null?void 0:M.error)||((O=M[0])===null||O===void 0?void 0:O.error);if(z){xe(dn,`RPC '${e}' stream ${s} received error:`,z);const B=z.status;let G=function(T){const R=Nt[T];if(R!==void 0)return GC(R)}(B),I=z.message;G===void 0&&(G=ce.INTERNAL,I="Unknown error status: "+B+" with message "+z.message),b=!0,k.u_(new ke(G,I)),y.close()}else xe(dn,`RPC '${e}' stream ${s} received:`,$),k.c_($)}}),D(c,hC.STAT_EVENT,P=>{P.stat===V0.PROXY?xe(dn,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===V0.NOPROXY&&xe(dn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.a_()},0),k}}function Vg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t){return new V$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=s,this.d_=o,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),s=Math.max(0,n-r);s>0&&xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="PersistentStream";class lA{constructor(e,n,r,s,o,l,c,u){this.xi=e,this.y_=r,this.w_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new aA(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Us(n.toString()),Us("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.S_===n&&this.K_(r,s)},r=>{e(()=>{const s=new ke(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(s)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.W_(s))}),this.stream.onMessage(s=>{r(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return xe(bT,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(xe(bT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OF extends lA{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=U$(this.serializer,e),r=function(o){if(!("targetChange"in o))return Oe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?ls(l.readTime):Oe.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=K0(this.serializer),n.addTarget=function(o,l){let c;const u=l.target;if(c=z0(u)?{documents:W$(o,u)}:{query:H$(o,u).gt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=JC(o,l.resumeToken);const h=H0(o,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Oe.min())>0){c.readTime=Af(o,l.snapshotVersion.toTimestamp());const h=H0(o,l.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=G$(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=K0(this.serializer),n.removeTarget=e,this.L_(n)}}class LF extends lA{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=z$(e.writeResults,e.commitTime),r=ls(e.commitTime);return this.listener.ea(r,n)}ta(){const e={};e.database=K0(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>B$(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{}class VF extends MF{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.na=!1}ra(){if(this.na)throw new ke(ce.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.zo(e,q0(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(ce.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Yo(e,q0(n,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ce.UNKNOWN,l.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class $F{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Us(n),this.oa=!1):xe("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="RemoteStore";class FF{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=o,this.Ea.No(l=>{r.enqueueAndForget(async()=>{ta(this)&&(xe(zo,"Restarting streams for network reachability change."),await async function(u){const h=Le(u);h.Ta.add(4),await ed(h),h.da.set("Unknown"),h.Ta.delete(4),await cm(h)}(this))})}),this.da=new $F(r,s)}}async function cm(t){if(ta(t))for(const e of t.Ia)await e(!0)}async function ed(t){for(const e of t.Ia)await e(!1)}function cA(t,e){const n=Le(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),Cv(n)?kv(n):Ql(n).M_()&&Sv(n,e))}function Tv(t,e){const n=Le(t),r=Ql(n);n.Pa.delete(e),r.M_()&&uA(n,e),n.Pa.size===0&&(r.M_()?r.N_():ta(n)&&n.da.set("Unknown"))}function Sv(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ql(t).H_(e)}function uA(t,e){t.Aa.Ke(e),Ql(t).J_(e)}function kv(t){t.Aa=new D$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ql(t).start(),t.da._a()}function Cv(t){return ta(t)&&!Ql(t).F_()&&t.Pa.size>0}function ta(t){return Le(t).Ta.size===0}function dA(t){t.Aa=void 0}async function UF(t){t.da.set("Online")}async function BF(t){t.Pa.forEach((e,n)=>{Sv(t,e)})}async function zF(t,e){dA(t),Cv(t)?(t.da.ca(e),kv(t)):t.da.set("Unknown")}async function WF(t,e,n){if(t.da.set("Online"),e instanceof QC&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Pa.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Pa.delete(c),s.Aa.removeTarget(c))}(t,e)}catch(r){xe(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await If(t,r)}else if(e instanceof Zh?t.Aa.Xe(e):e instanceof KC?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(Oe.min()))try{const r=await oA(t.localStore);n.compareTo(r)>=0&&await function(o,l){const c=o.Aa.It(l);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const g=o.Pa.get(h);g&&o.Pa.set(h,g.withResumeToken(u.resumeToken,l))}}),c.targetMismatches.forEach((u,h)=>{const g=o.Pa.get(u);if(!g)return;o.Pa.set(u,g.withResumeToken(sn.EMPTY_BYTE_STRING,g.snapshotVersion)),uA(o,u);const y=new Ii(g.target,u,h,g.sequenceNumber);Sv(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){xe(zo,"Failed to raise snapshot:",r),await If(t,r)}}async function If(t,e,n){if(!Kl(e))throw e;t.Ta.add(1),await ed(t),t.da.set("Offline"),n||(n=()=>oA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{xe(zo,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await cm(t)})}function hA(t,e){return e().catch(n=>If(t,n,e))}async function um(t){const e=Le(t),n=Bi(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:cv;for(;HF(e);)try{const s=await kF(e.localStore,r);if(s===null){e.ha.length===0&&n.N_();break}r=s.batchId,qF(e,s)}catch(s){await If(e,s)}fA(e)&&mA(e)}function HF(t){return ta(t)&&t.ha.length<10}function qF(t,e){t.ha.push(e);const n=Bi(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function fA(t){return ta(t)&&!Bi(t).F_()&&t.ha.length>0}function mA(t){Bi(t).start()}async function GF(t){Bi(t).ta()}async function KF(t){const e=Bi(t);for(const n of t.ha)e.Z_(n.mutations)}async function QF(t,e,n){const r=t.ha.shift(),s=yv.from(r,e,n);await hA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await um(t)}async function JF(t,e){e&&Bi(t).Y_&&await async function(r,s){if(function(l){return N$(l)&&l!==ce.ABORTED}(s.code)){const o=r.ha.shift();Bi(r).O_(),await hA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await um(r)}}(t,e),fA(t)&&mA(t)}async function ET(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),xe(zo,"RemoteStore received new credentials");const r=ta(n);n.Ta.add(3),await ed(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await cm(n)}async function YF(t,e){const n=Le(t);e?(n.Ta.delete(2),await cm(n)):e||(n.Ta.add(2),await ed(n),n.da.set("Unknown"))}function Ql(t){return t.Ra||(t.Ra=function(n,r,s){const o=Le(n);return o.ra(),new OF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:UF.bind(null,t),n_:BF.bind(null,t),i_:zF.bind(null,t),j_:WF.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),Cv(t)?kv(t):t.da.set("Unknown")):(await t.Ra.stop(),dA(t))})),t.Ra}function Bi(t){return t.Va||(t.Va=function(n,r,s){const o=Le(n);return o.ra(),new LF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:GF.bind(null,t),i_:JF.bind(null,t),X_:KF.bind(null,t),ea:QF.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await um(t)):(await t.Va.stop(),t.ha.length>0&&(xe(zo,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,c=new Av(e,n,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pv(t,e){if(Us("AsyncQueue",`${e}: ${t}`),Kl(t))return new ke(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{static emptySet(e){return new yl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Pe.comparator(n.key,r.key):(n,r)=>Pe.comparator(n.key,r.key),this.keyedMap=iu(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.ma=new xt(Pe.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):Re(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nl{constructor(e,n,r,s,o,l,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(c=>{l.push({type:0,doc:c})}),new Nl(e,n,yl.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class ZF{constructor(){this.queries=ST(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const s=Le(n),o=s.queries;s.queries=ST(),o.forEach((l,c)=>{for(const u of c.ya)u.onError(r)})})(this,new ke(ce.ABORTED,"Firestore shutting down"))}}function ST(){return new ea(t=>OC(t),rm)}async function pA(t,e){const n=Le(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.wa()&&e.Sa()&&(r=2):(o=new XF,r=e.Sa()?0:1);try{switch(r){case 0:o.pa=await n.onListen(s,!0);break;case 1:o.pa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=Pv(l,`Initialization of query '${il(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.ya.push(e),e.Da(n.onlineState),o.pa&&e.va(o.pa)&&Iv(n)}async function gA(t,e){const n=Le(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.ya.indexOf(e);l>=0&&(o.ya.splice(l,1),o.ya.length===0?s=e.Sa()?0:1:!o.wa()&&e.Sa()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function e8(t,e){const n=Le(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const c of l.ya)c.va(s)&&(r=!0);l.pa=s}}r&&Iv(n)}function t8(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const o of s.ya)o.onError(n);r.queries.delete(e)}function Iv(t){t.ba.forEach(e=>{e.next()})}var Y0,kT;(kT=Y0||(Y0={})).Ca="default",kT.Cache="cache";class yA{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Y0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.key=e}}class xA{constructor(e){this.key=e}}class n8{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=ze(),this.mutatedKeys=ze(),this.Ha=LC(e),this.Ja=new yl(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new TT,s=n?n.Ja:this.Ja;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,y)=>{const v=s.get(g),b=sm(this.query,y)?y:null,k=!!v&&this.mutatedKeys.has(v.key),D=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let P=!1;v&&b?v.data.isEqual(b.data)?k!==D&&(r.track({type:3,doc:b}),P=!0):this.eu(v,b)||(r.track({type:2,doc:b}),P=!0,(u&&this.Ha(b,u)>0||h&&this.Ha(b,h)<0)&&(c=!0)):!v&&b?(r.track({type:0,doc:b}),P=!0):v&&!b&&(r.track({type:1,doc:v}),P=!0,(u||h)&&(c=!0)),P&&(b?(l=l.add(b),o=D?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Ja:l,Xa:r,Cs:c,mutatedKeys:o}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const l=e.Xa.ga();l.sort((g,y)=>function(b,k){const D=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:P})}};return D(b)-D(k)}(g.type,y.type)||this.Ha(g.doc,y.doc)),this.tu(r),s=s!=null&&s;const c=n&&!s?this.nu():[],u=this.ja.size===0&&this.current&&!s?1:0,h=u!==this.za;return this.za=u,l.length!==0||h?{snapshot:new Nl(this.query,e.Ja,o,l,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:c}:{ru:c}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new TT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=ze(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new xA(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new vA(r))}),n}su(e){this.Ga=e.$s,this.ja=ze();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return Nl.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Rv="SyncEngine";class r8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class s8{constructor(e){this.key=e,this._u=!1}}class i8{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.au={},this.uu=new ea(c=>OC(c),rm),this.cu=new Map,this.lu=new Set,this.hu=new xt(Pe.comparator),this.Pu=new Map,this.Tu=new wv,this.Iu={},this.Eu=new Map,this.du=Rl.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function o8(t,e,n=!0){const r=SA(t);let s;const o=r.uu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.ou()):s=await wA(r,e,n,!0),s}async function a8(t,e){const n=SA(t);await wA(n,e,!0,!1)}async function wA(t,e,n,r){const s=await CF(t.localStore,as(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await l8(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&cA(t.remoteStore,s),c}async function l8(t,e,n,r,s){t.Ru=(y,v,b)=>async function(D,P,O,$){let M=P.view.Za(O);M.Cs&&(M=await vT(D.localStore,P.query,!1).then(({documents:I})=>P.view.Za(I,M)));const z=$&&$.targetChanges.get(P.targetId),B=$&&$.targetMismatches.get(P.targetId)!=null,G=P.view.applyChanges(M,D.isPrimaryClient,z,B);return AT(D,P.targetId,G.ru),G.snapshot}(t,y,v,b);const o=await vT(t.localStore,e,!0),l=new n8(e,o.$s),c=l.Za(o.documents),u=Zu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,u);AT(t,n,h.ru);const g=new r8(e,n,l);return t.uu.set(e,g),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),h.snapshot}async function c8(t,e,n){const r=Le(t),s=r.uu.get(e),o=r.cu.get(s.targetId);if(o.length>1)return r.cu.set(s.targetId,o.filter(l=>!rm(l,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Q0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Tv(r.remoteStore,s.targetId),X0(r,s.targetId)}).catch(Gl)):(X0(r,s.targetId),await Q0(r.localStore,s.targetId,!0))}async function u8(t,e){const n=Le(t),r=n.uu.get(e),s=n.cu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tv(n.remoteStore,r.targetId))}async function d8(t,e,n){const r=v8(t);try{const s=await function(l,c){const u=Le(l),h=Ft.now(),g=c.reduce((b,k)=>b.add(k.key),ze());let y,v;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=Bs(),D=ze();return u.Bs.getEntries(b,g).next(P=>{k=P,k.forEach((O,$)=>{$.isValidDocument()||(D=D.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,k)).next(P=>{y=P;const O=[];for(const $ of c){const M=C$($,y.get($.key).overlayedDocument);M!=null&&O.push(new Gi($.key,M,AC(M.value.mapValue),fr.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,O,c)}).next(P=>{v=P;const O=P.applyToLocalDocumentSet(y,D);return u.documentOverlayCache.saveOverlays(b,P.batchId,O)})}).then(()=>({batchId:v.batchId,changes:VC(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,u){let h=l.Iu[l.currentUser.toKey()];h||(h=new xt(Ve)),h=h.insert(c,u),l.Iu[l.currentUser.toKey()]=h}(r,s.batchId,n),await td(r,s.changes),await um(r.remoteStore)}catch(s){const o=Pv(s,"Failed to persist write");n.reject(o)}}async function _A(t,e){const n=Le(t);try{const r=await TF(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Pu.get(o);l&&(Xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l._u=!0:s.modifiedDocuments.size>0?Xe(l._u,14607):s.removedDocuments.size>0&&(Xe(l._u,42227),l._u=!1))}),await td(n,r,e)}catch(r){await Gl(r)}}function CT(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.uu.forEach((o,l)=>{const c=l.view.Da(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const u=Le(l);u.onlineState=c;let h=!1;u.queries.forEach((g,y)=>{for(const v of y.ya)v.Da(c)&&(h=!0)}),h&&Iv(u)}(r.eventManager,e),s.length&&r.au.j_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function h8(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Pu.get(e),o=s&&s.key;if(o){let l=new xt(Pe.comparator);l=l.insert(o,mn.newNoDocument(o,Oe.min()));const c=ze().add(o),u=new am(Oe.min(),new Map,new xt(Ve),l,c);await _A(r,u),r.hu=r.hu.remove(o),r.Pu.delete(e),Nv(r)}else await Q0(r.localStore,e,!1).then(()=>X0(r,e,n)).catch(Gl)}async function f8(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await EF(n.localStore,e);EA(n,r,null),bA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await td(n,s)}catch(s){await Gl(s)}}async function m8(t,e,n){const r=Le(t);try{const s=await function(l,c){const u=Le(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return u.mutationQueue.lookupMutationBatch(h,c).next(y=>(Xe(y!==null,37113),g=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,g,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>u.localDocuments.getDocuments(h,g))})}(r.localStore,e);EA(r,e,n),bA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await td(r,s)}catch(s){await Gl(s)}}function bA(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function EA(t,e,n){const r=Le(t);let s=r.Iu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Iu[r.currentUser.toKey()]=s}}function X0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||TA(t,r)})}function TA(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(Tv(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),Nv(t))}function AT(t,e,n){for(const r of n)r instanceof vA?(t.Tu.addReference(r.key,e),p8(t,r)):r instanceof xA?(xe(Rv,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||TA(t,r.key)):Re(19791,{mu:r})}function p8(t,e){const n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(xe(Rv,"New document in limbo: "+n),t.lu.add(r),Nv(t))}function Nv(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new Pe(ht.fromString(e)),r=t.du.next();t.Pu.set(r,new s8(n)),t.hu=t.hu.insert(n,r),cA(t.remoteStore,new Ii(as(mv(n.path)),r,"TargetPurposeLimboResolution",Zf.le))}}async function td(t,e,n){const r=Le(t),s=[],o=[],l=[];r.uu.isEmpty()||(r.uu.forEach((c,u)=>{l.push(r.Ru(u,e,n).then(h=>{var g;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(u.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){s.push(h);const y=bv.Rs(u.targetId,h);o.push(y)}}))}),await Promise.all(l),r.au.j_(s),await async function(u,h){const g=Le(u);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>se.forEach(h,v=>se.forEach(v.ds,b=>g.persistence.referenceDelegate.addReference(y,v.targetId,b)).next(()=>se.forEach(v.As,b=>g.persistence.referenceDelegate.removeReference(y,v.targetId,b)))))}catch(y){if(!Kl(y))throw y;xe(Ev,"Failed to update sequence numbers: "+y)}for(const y of h){const v=y.targetId;if(!y.fromCache){const b=g.xs.get(v),k=b.snapshotVersion,D=b.withLastLimboFreeSnapshotVersion(k);g.xs=g.xs.insert(v,D)}}}(r.localStore,o))}async function g8(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){xe(Rv,"User change. New user:",e.toKey());const r=await iA(n.localStore,e);n.currentUser=e,function(o,l){o.Eu.forEach(c=>{c.forEach(u=>{u.reject(new ke(ce.CANCELLED,l))})}),o.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await td(n,r.ks)}}function y8(t,e){const n=Le(t),r=n.Pu.get(e);if(r&&r._u)return ze().add(r.key);{let s=ze();const o=n.cu.get(e);if(!o)return s;for(const l of o){const c=n.uu.get(l);s=s.unionWith(c.view.Ya)}return s}}function SA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h8.bind(null,e),e.au.j_=e8.bind(null,e.eventManager),e.au.Vu=t8.bind(null,e.eventManager),e}function v8(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m8.bind(null,e),e}class Rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lm(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return bF(this.persistence,new xF,e.initialUser,this.serializer)}yu(e){return new sA(_v.fi,this.serializer)}pu(e){return new PF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rf.provider={build:()=>new Rf};class x8 extends Rf{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){Xe(this.persistence.referenceDelegate instanceof Pf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sF(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new sA(r=>Pf.fi(r,n),this.serializer)}}class Z0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=g8.bind(null,this.syncEngine),await YF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZF}()}createDatastore(e){const n=lm(e.databaseInfo.databaseId),r=function(o){return new DF(o)}(e.databaseInfo);return function(o,l,c,u){return new VF(o,l,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,c){return new FF(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,n=>CT(this.syncEngine,n,0),function(){return _T.C()?new _T:new IF}())}createSyncEngine(e,n){return function(s,o,l,c,u,h,g){const y=new i8(s,o,l,c,u,h);return g&&(y.Au=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Le(s);xe(zo,"RemoteStore shutting down."),o.Ta.add(5),await ed(o),o.Ea.shutdown(),o.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Z0.provider={build:()=>new Z0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Us("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="FirestoreClient";class w8{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=vC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{xe(zi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(xe(zi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $g(t,e){t.asyncQueue.verifyOperationInProgress(),xe(zi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await iA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _8(t);xe(zi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ET(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ET(e.remoteStore,s)),t._onlineComponents=e}async function _8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe(zi,"Using user provided OfflineComponentProvider");try{await $g(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Cl("Error using user provided cache. Falling back to memory cache: "+n),await $g(t,new Rf)}}else xe(zi,"Using default OfflineComponentProvider"),await $g(t,new x8(void 0));return t._offlineComponents}async function CA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe(zi,"Using user provided OnlineComponentProvider"),await PT(t,t._uninitializedComponentsProvider._online)):(xe(zi,"Using default OnlineComponentProvider"),await PT(t,new Z0))),t._onlineComponents}function b8(t){return CA(t).then(e=>e.syncEngine)}async function AA(t){const e=await CA(t),n=e.eventManager;return n.onListen=o8.bind(null,e.syncEngine),n.onUnlisten=c8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=a8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u8.bind(null,e.syncEngine),n}function E8(t,e,n={}){const r=new Ls;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,u,h){const g=new kA({next:v=>{g.Cu(),l.enqueueAndForget(()=>gA(o,y));const b=v.docs.has(c);!b&&v.fromCache?h.reject(new ke(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&u&&u.source==="server"?h.reject(new ke(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),y=new yA(mv(c.path),g,{includeMetadataChanges:!0,La:!0});return pA(o,y)}(await AA(t),t.asyncQueue,e,n,r)),r.promise}function T8(t,e,n={}){const r=new Ls;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,u,h){const g=new kA({next:v=>{g.Cu(),l.enqueueAndForget(()=>gA(o,y)),v.fromCache&&u.source==="server"?h.reject(new ke(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),y=new yA(c,g,{includeMetadataChanges:!0,La:!0});return pA(o,y)}(await AA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e,n){if(!n)throw new ke(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S8(t,e,n,r){if(e===!0&&r===!0)throw new ke(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RT(t){if(!Pe.isDocumentKey(t))throw new ke(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NT(t){if(Pe.isDocumentKey(t))throw new ke(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function Fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ke(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jv(t);throw new ke(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="firestore.googleapis.com",jT=!0;class DT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RA,this.ssl=jT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:jT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nF)throw new ke(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ke(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ke(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ke(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NV;switch(r.type){case"firstParty":return new LV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Wl("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IT.get(n);r&&(xe("ComponentProvider","Removing Datastore"),IT.delete(n),r.terminate())}(this),Promise.resolve()}}function k8(t,e,n,r={}){var s;t=Fr(t,dm);const o=Yo(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;l.host!==RA&&l.host!==u&&Cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:u,ssl:o,emulatorOptions:r});if(!Uo(h,c)&&(t._setSettings(h),o&&(iv(`https://${u}`),Wl("Firestore",!0)),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=fn.MOCK_USER;else{g=Zk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ke(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new fn(v)}t._authCredentials=new jV(new gC(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hm(this.firestore,e,this._query)}}class Mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class Di extends hm{constructor(e,n,r){super(e,n,mv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new Pe(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function jt(t,e,...n){if(t=vt(t),IA("collection","path",e),t instanceof dm){const r=ht.fromString(e,...n);return NT(r),new Di(t,null,r)}{if(!(t instanceof Mn||t instanceof Di))throw new ke(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return NT(r),new Di(t.firestore,null,r)}}function Qn(t,e,...n){if(t=vt(t),arguments.length===1&&(e=vC.newId()),IA("doc","path",e),t instanceof dm){const r=ht.fromString(e,...n);return RT(r),new Mn(t,null,new Pe(r))}{if(!(t instanceof Mn||t instanceof Di))throw new ke(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return RT(r),new Mn(t.firestore,t instanceof Di?t.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="AsyncQueue";class LT{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new aA(this,"async_queue_retry"),this.ec=()=>{const r=Vg();r&&xe(OT,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=Vg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Vg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new Ls;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Kl(e))throw e;xe(OT,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Us("INTERNAL UNHANDLED ERROR: ",MT(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const s=Av.createAndSchedule(this,e,n,r,o=>this.oc(o));return this.Hu.push(s),s}nc(){this.Ju&&Re(47125,{_c:MT(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function MT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class na extends dm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new LT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LT(e),this._firestoreClient=void 0,await e}}}function Wo(t,e){const n=typeof t=="object"?t:av(),r=typeof t=="string"?t:bf,s=Hl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Jk("firestore");o&&k8(s,...o)}return s}function Dv(t){if(t._terminated)throw new ke(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||C8(t),t._firestoreClient}function C8(t){var e,n,r;const s=t._freezeSettings(),o=function(c,u,h,g){return new YV(c,u,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,PA(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new w8(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jl(sn.fromBase64String(e))}catch(n){throw new ke(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jl(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=/^__.*__$/;class P8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xu(e,this.data,n,this.fieldTransforms)}}class NA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{hc:t})}}class Vv{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Pc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Vv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Tc({path:r,Ec:!1});return s.dc(e),s}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Tc({path:r,Ec:!1});return s.Pc(),s}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Nf(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(jA(this.hc)&&A8.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class I8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lm(e)}gc(e,n,r,s=!1){return new Vv({hc:e,methodName:n,fc:r,path:rn.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $v(t){const e=t._freezeSettings(),n=lm(t._databaseId);return new I8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DA(t,e,n,r,s,o={}){const l=t.gc(o.merge||o.mergeFields?2:0,e,n,s);Fv("Data must be an object, but it was:",l,r);const c=OA(r,l);let u,h;if(o.merge)u=new Jn(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=ey(e,y,n);if(!l.contains(v))throw new ke(ce.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);MA(g,v)||g.push(v)}u=new Jn(g),h=l.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,h=l.fieldTransforms;return new P8(new jn(c),u,h)}class mm extends Ov{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mm}}function R8(t,e,n,r){const s=t.gc(1,e,n);Fv("Data must be an object, but it was:",s,r);const o=[],l=jn.empty();qi(r,(u,h)=>{const g=Uv(e,u,n);h=vt(h);const y=s.Ac(g);if(h instanceof mm)o.push(g);else{const v=pm(h,y);v!=null&&(o.push(g),l.set(g,v))}});const c=new Jn(o);return new NA(l,c,s.fieldTransforms)}function N8(t,e,n,r,s,o){const l=t.gc(1,e,n),c=[ey(e,r,n)],u=[s];if(o.length%2!=0)throw new ke(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)c.push(ey(e,o[v])),u.push(o[v+1]);const h=[],g=jn.empty();for(let v=c.length-1;v>=0;--v)if(!MA(h,c[v])){const b=c[v];let k=u[v];k=vt(k);const D=l.Ac(b);if(k instanceof mm)h.push(b);else{const P=pm(k,D);P!=null&&(h.push(b),g.set(b,P))}}const y=new Jn(h);return new NA(g,y,l.fieldTransforms)}function pm(t,e){if(LA(t=vt(t)))return Fv("Unsupported field value:",e,t),OA(t,e);if(t instanceof Ov)return function(r,s){if(!jA(s.hc))throw s.Vc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let u=pm(c,s.Rc(l));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _$(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ft.fromDate(r);return{timestampValue:Af(s.serializer,o)}}if(r instanceof Ft){const o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Af(s.serializer,o)}}if(r instanceof Lv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jl)return{bytesValue:JC(s.serializer,r._byteString)};if(r instanceof Mn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Vc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:xv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Mv)return function(l,c){return{mapValue:{fields:{[kC]:{stringValue:CC},[Ef]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw c.Vc("VectorValues must only contain numeric values.");return pv(c.serializer,h)})}}}}}}(r,s);throw s.Vc(`Unsupported field value: ${jv(r)}`)}(t,e)}function OA(t,e){const n={};return wC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(t,(r,s)=>{const o=pm(s,e.Ic(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function LA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof Lv||t instanceof jl||t instanceof Mn||t instanceof Ov||t instanceof Mv)}function Fv(t,e,n){if(!LA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=jv(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}function ey(t,e,n){if((e=vt(e))instanceof fm)return e._internalPath;if(typeof e=="string")return Uv(t,e);throw Nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const j8=new RegExp("[~\\*/\\[\\]]");function Uv(t,e,n){if(e.search(j8)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fm(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nf(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||l)&&(u+=" (found",o&&(u+=` in field ${r}`),l&&(u+=` in document ${s}`),u+=")"),new ke(ce.INVALID_ARGUMENT,c+t+u)}function MA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($A("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D8 extends VA{data(){return super.data()}}function $A(t,e){return typeof e=="string"?Uv(t,e):e instanceof fm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ke(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L8{convertValue(e,n="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qi(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Ef].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Pt(l.doubleValue));return new Mv(o)}convertGeoPoint(e){return new Lv(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const n=$i(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);Xe(nA(r),9688,{name:e});const s=new Lu(r.get(1),r.get(3)),o=new Pe(r.popFirst(5));return s.isEqual(n)||Us(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UA extends VA{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($A("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ef extends UA{data(e={}){return super.data(e)}}class M8{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new au(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ef(this._firestore,this._userDataWriter,r.key,r,new au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const u=new ef(s._firestore,s._userDataWriter,c.doc.key,c.doc,new au(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new ef(s._firestore,s._userDataWriter,c.doc.key,c.doc,new au(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:V8(c.type),doc:u,oldIndex:h,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function V8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){t=Fr(t,Mn);const e=Fr(t.firestore,na);return E8(Dv(e),t._key).then(n=>$8(e,t,n))}class BA extends L8{constructor(e){super(),this.firestore=e}convertBytes(e){return new jl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,n)}}function $n(t){t=Fr(t,hm);const e=Fr(t.firestore,na),n=Dv(e),r=new BA(e);return O8(t._query),T8(n,t._query).then(s=>new M8(e,r,t,s))}function jf(t,e,n){t=Fr(t,Mn);const r=Fr(t.firestore,na),s=FA(t.converter,e,n);return gm(r,[DA($v(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fr.none())])}function VT(t,e,n,...r){t=Fr(t,Mn);const s=Fr(t.firestore,na),o=$v(s);let l;return l=typeof(e=vt(e))=="string"||e instanceof fm?N8(o,"updateDoc",t._key,e,n,r):R8(o,"updateDoc",t._key,e),gm(s,[l.toMutation(t._key,fr.exists(!0))])}function tf(t){return gm(Fr(t.firestore,na),[new gv(t._key,fr.none())])}function Dl(t,e){const n=Fr(t.firestore,na),r=Qn(t),s=FA(t.converter,e);return gm(n,[DA($v(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}function gm(t,e){return function(r,s){const o=new Ls;return r.asyncQueue.enqueueAndForget(async()=>d8(await b8(r),s,o)),o.promise}(Dv(t),e)}function $8(t,e,n){const r=n.docs.get(e._key),s=new BA(t);return new UA(t,s,e._key,r,new au(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ql=s})(Zo),$r(new pr("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new na(new DV(r.getProvider("auth-internal")),new MV(l,r.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(h.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ln(BE,zE,e),Ln(BE,zE,"esm2017")})();function Bv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function zA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F8=zA,WA=new Xo("auth","Firebase",zA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=new Xf("@firebase/auth");function U8(t,...e){Df.logLevel<=Be.WARN&&Df.warn(`Auth (${Zo}): ${t}`,...e)}function nf(t,...e){Df.logLevel<=Be.ERROR&&Df.error(`Auth (${Zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,...e){throw zv(t,...e)}function cs(t,...e){return zv(t,...e)}function HA(t,e,n){const r=Object.assign(Object.assign({},F8()),{[e]:n});return new Xo("auth","Firebase",r).create(e,{appName:t.name})}function Oi(t){return HA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WA.create(t,...e)}function Ie(t,e,...n){if(!t)throw zv(e,...n)}function js(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nf(e),new Error(e)}function zs(t,e){t||js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B8(){return $T()==="http:"||$T()==="https:"}function $T(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B8()||eC()||"connection"in navigator)?navigator.onLine:!0}function W8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.shortDelay=e,this.longDelay=n,zs(n>e,"Short delay should be less than long delay!"),this.isMobile=iM()||lM()}get(){return z8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t,e){zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G8=new rd(3e4,6e4);function ra(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ki(t,e,n,r,s={}){return GA(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Yu(Object.assign({key:t.config.apiKey},l)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},o);return aM()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(h.credentials="include"),qA.fetch()(await KA(t,t.config.apiHost,n,c),h)})}async function GA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},H8),e);try{const s=new Q8(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw $h(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw $h(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw $h(t,"user-disabled",l);const g=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw HA(t,g,h);Ur(t,g)}}catch(s){if(s instanceof yr)throw s;Ur(t,"network-request-failed",{message:String(s)})}}async function ym(t,e,n,r,s={}){const o=await Ki(t,e,n,r,s);return"mfaPendingCredential"in o&&Ur(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function KA(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?Wv(t.config,s):`${t.config.apiScheme}://${s}`;return q8.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function K8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cs(this.auth,"network-request-failed")),G8.get())})}}function $h(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=cs(t,e,r);return s.customData._tokenResponse=n,s}function FT(t){return t!==void 0&&t.enterprise!==void 0}class J8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return K8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Y8(t,e){return Ki(t,"GET","/v2/recaptchaConfig",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X8(t,e){return Ki(t,"POST","/v1/accounts:delete",e)}async function Of(t,e){return Ki(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Z8(t,e=!1){const n=vt(t),r=await n.getIdToken(e),s=Hv(r);Ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:_u(Fg(s.auth_time)),issuedAtTime:_u(Fg(s.iat)),expirationTime:_u(Fg(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Fg(t){return Number(t)*1e3}function Hv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{const s=Kk(n);return s?JSON.parse(s):(nf("Failed to decode base64 JWT payload"),null)}catch(s){return nf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function UT(t){const e=Hv(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&eU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Fu(t,Of(n,{idToken:r}));Ie(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?QA(o.providerUserInfo):[],c=rU(t.providerData,l),u=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),g=u?h:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ny(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function nU(t){const e=vt(t);await Lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function QA(t){return t.map(e=>{var{providerId:n}=e,r=Bv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(t,e){const n=await GA(t,{},async()=>{const r=Yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await KA(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",qA.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iU(t,e){return Ki(t,"POST","/v2/accounts:revokeToken",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=UT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await sU(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new vl;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ie(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ny(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Fu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Z8(this,e)}reload(){return nU(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await Fu(this,X8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,c,u,h,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,k=(l=n.photoURL)!==null&&l!==void 0?l:void 0,D=(c=n.tenantId)!==null&&c!==void 0?c:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(h=n.createdAt)!==null&&h!==void 0?h:void 0,$=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:M,emailVerified:z,isAnonymous:B,providerData:G,stsTokenManager:I}=n;Ie(M&&I,e,"internal-error");const S=vl.fromJSON(this.name,I);Ie(typeof M=="string",e,"internal-error"),xi(y,e.name),xi(v,e.name),Ie(typeof z=="boolean",e,"internal-error"),Ie(typeof B=="boolean",e,"internal-error"),xi(b,e.name),xi(k,e.name),xi(D,e.name),xi(P,e.name),xi(O,e.name),xi($,e.name);const T=new Mr({uid:M,auth:e,email:v,emailVerified:z,displayName:y,isAnonymous:B,photoURL:k,phoneNumber:b,tenantId:D,stsTokenManager:S,createdAt:O,lastLoginAt:$});return G&&Array.isArray(G)&&(T.providerData=G.map(R=>Object.assign({},R))),P&&(T._redirectEventId=P),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new vl;s.updateFromServerResponse(n);const o=new Mr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lf(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ie(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?QA(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new vl;c.updateFromIdToken(r);const u=new Mr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ny(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Map;function Ds(t){zs(t instanceof Function,"Expected a class definition");let e=BT.get(t);return e?(zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JA.type="NONE";const zT=JA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t,e,n){return`firebase:${t}:${e}:${n}`}class xl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=rf(this.userKey,s.apiKey,o),this.fullPersistenceKey=rf("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Of(this.auth,{idToken:e}).catch(()=>{});return n?Mr._fromGetAccountInfoResponse(this.auth,n,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xl(Ds(zT),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Ds(zT);const l=rf(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const g=await h._get(l);if(g){let y;if(typeof g=="string"){const v=await Of(e,{idToken:g}).catch(()=>{});if(!v)break;y=await Mr._fromGetAccountInfoResponse(e,v,g)}else y=Mr._fromJSON(e,g);h!==o&&(c=y),o=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new xl(o,e,r):(o=u[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new xl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nP(e))return"Blackberry";if(rP(e))return"Webos";if(XA(e))return"Safari";if((e.includes("chrome/")||ZA(e))&&!e.includes("edge/"))return"Chrome";if(tP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YA(t=gn()){return/firefox\//i.test(t)}function XA(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZA(t=gn()){return/crios\//i.test(t)}function eP(t=gn()){return/iemobile/i.test(t)}function tP(t=gn()){return/android/i.test(t)}function nP(t=gn()){return/blackberry/i.test(t)}function rP(t=gn()){return/webos/i.test(t)}function qv(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oU(t=gn()){var e;return qv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aU(){return cM()&&document.documentMode===10}function sP(t=gn()){return qv(t)||tP(t)||rP(t)||nP(t)||/windows phone/i.test(t)||eP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t,e=[]){let n;switch(t){case"Browser":n=WT(gn());break;case"Worker":n=`${WT(gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,c)=>{try{const u=e(o);l(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(t,e={}){return Ki(t,"GET","/v2/passwordPolicy",ra(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=6;class dU{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:uU,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HT(this),this.idTokenSubscription=new HT(this),this.beforeStateQueue=new lU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ds(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Of(this,{idToken:e}),r=await Mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===c)&&(u!=null&&u.user)&&(s=u.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=W8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(Oi(this));const n=e?vt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cU(this),n=new dU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ds(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[Ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{l=!0,u()}}else{const u=e.addObserver(n);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&U8(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Jl(t){return vt(t)}class HT{constructor(e){this.auth=e,this.observer=null,this.addObserver=gM(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fU(t){vm=t}function oP(t){return vm.loadJS(t)}function mU(){return vm.recaptchaEnterpriseScript}function pU(){return vm.gapiScript}function gU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yU{constructor(){this.enterprise=new vU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xU="recaptcha-enterprise",aP="NO_RECAPTCHA";class wU{constructor(e){this.type=xU,this.auth=Jl(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{Y8(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new J8(u);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(u=>{c(u)})})}function s(o,l,c){const u=window.grecaptcha;FT(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(aP)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!n&&FT(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mU();u.length!==0&&(u+=c),oP(u).then(()=>{s(c,o,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function qT(t,e,n,r=!1,s=!1){const o=new wU(t);let l;if(s)l=aP;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function GT(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await qT(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await qT(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t,e){const n=Hl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Uo(o,e??{}))return s;Ur(s,"already-initialized")}return n.initialize({options:e})}function bU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EU(t,e,n){const r=Jl(t);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=lP(e),{host:l,port:c}=TU(e),u=c===null?"":`:${c}`,h={url:`${o}//${l}${u}/`},g=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Uo(h,r.config.emulator)&&Uo(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Yo(l)?(Wl("Auth",!0),iv(`${o}//${l}${u}`)):SU()}function lP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TU(t){const e=lP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:KT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:KT(l)}}}function KT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return js("not implemented")}_getIdTokenResponse(e){return js("not implemented")}_linkToIdToken(e,n){return js("not implemented")}_getReauthenticationResolver(e){return js("not implemented")}}async function kU(t,e){return Ki(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(t,e){return ym(t,"POST","/v1/accounts:signInWithPassword",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e){return ym(t,"POST","/v1/accounts:signInWithEmailLink",ra(t,e))}async function PU(t,e){return ym(t,"POST","/v1/accounts:signInWithEmailLink",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends Gv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Uu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Uu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GT(e,n,"signInWithPassword",CU);case"emailLink":return AU(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GT(e,r,"signUpPassword",kU);case"emailLink":return PU(e,{idToken:n,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e){return ym(t,"POST","/v1/accounts:signInWithIdp",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU="http://localhost";class Ho extends Gv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Bv(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Ho(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return wl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wl(e,n)}buildRequest(){const e={requestUri:IU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NU(t){const e=nu(ru(t)).link,n=e?nu(ru(e)).deep_link_id:null,r=nu(ru(t)).deep_link_id;return(r?nu(ru(r)).link:null)||r||n||e||t}class Kv{constructor(e){var n,r,s,o,l,c;const u=nu(ru(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,g=(r=u.oobCode)!==null&&r!==void 0?r:null,y=RU((s=u.mode)!==null&&s!==void 0?s:null);Ie(h&&g&&y,"argument-error"),this.apiKey=h,this.operation=y,this.code=g,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=u.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=NU(e);try{return new Kv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.providerId=Yl.PROVIDER_ID}static credential(e,n){return Uu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Kv.parseLink(n);return Ie(r,"argument-error"),Uu._fromEmailAndCode(e,r.code,r.tenantId)}}Yl.PROVIDER_ID="password";Yl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends cP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends sd{constructor(){super("facebook.com")}static credential(e){return Ho._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com";Si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends sd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ho._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ki.credential(n,r)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends sd{constructor(){super("github.com")}static credential(e){return Ho._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends sd{constructor(){super("twitter.com")}static credential(e,n){return Ho._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ai.credential(n,r)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Mr._fromIdTokenResponse(e,r,s),l=QT(r);return new Ol({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=QT(r);return new Ol({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function QT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends yr{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Mf(e,n,r,s)}}function uP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Mf._fromErrorAndOperation(t,o,e,r):o})}async function jU(t,e,n=!1){const r=await Fu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ol._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e,n=!1){const{auth:r}=t;if(dr(r.app))return Promise.reject(Oi(r));const s="reauthenticate";try{const o=await Fu(t,uP(r,s,e,t),n);Ie(o.idToken,r,"internal-error");const l=Hv(o.idToken);Ie(l,r,"internal-error");const{sub:c}=l;return Ie(t.uid===c,r,"user-mismatch"),Ol._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(t,e,n=!1){if(dr(t.app))return Promise.reject(Oi(t));const r="signIn",s=await uP(t,r,e),o=await Ol._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function OU(t,e){return dP(Jl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(t){const e=Jl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function MU(t,e,n){return dr(t.app)?Promise.reject(Oi(t)):OU(vt(t),Yl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LU(t),r})}function VU(t,e,n,r){return vt(t).onIdTokenChanged(e,n,r)}function $U(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function xm(t,e,n,r){return vt(t).onAuthStateChanged(e,n,r)}function wm(t){return vt(t).signOut()}const Vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vf,"1"),this.storage.removeItem(Vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=1e3,UU=10;class fP extends hP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,u)=>{this.notifyListeners(l,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);aU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fP.type="LOCAL";const BU=fP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP extends hP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mP.type="SESSION";const pP=mP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _m(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,o)),u=await zU(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_m.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,u)=>{const h=Qv("",20);s.port1.start();const g=setTimeout(()=>{u(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(g),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function HU(t){us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function qU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function KU(){return gP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="firebaseLocalStorageDb",QU=1,$f="firebaseLocalStorage",vP="fbase_key";class id{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bm(t,e){return t.transaction([$f],e?"readwrite":"readonly").objectStore($f)}function JU(){const t=indexedDB.deleteDatabase(yP);return new id(t).toPromise()}function ry(){const t=indexedDB.open(yP,QU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($f,{keyPath:vP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($f)?e(r):(r.close(),await JU(),e(await ry()))})})}async function JT(t,e,n){const r=bm(t,!0).put({[vP]:e,value:n});return new id(r).toPromise()}async function YU(t,e){const n=bm(t,!1).get(e),r=await new id(n).toPromise();return r===void 0?null:r.value}function YT(t,e){const n=bm(t,!0).delete(e);return new id(n).toPromise()}const XU=800,ZU=3;class xP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ry(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ZU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_m._getInstance(KU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qU(),!this.activeServiceWorker)return;this.sender=new WU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ry();return await JT(e,Vf,"1"),await YT(e,Vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>JT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>YU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>YT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=bm(s,!1).getAll();return new id(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xP.type="LOCAL";const e5=xP;new rd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(t,e){return e?Ds(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends Gv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function n5(t){return dP(t.auth,new Jv(t),t.bypassAuthState)}function r5(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),DU(n,new Jv(t),t.bypassAuthState)}async function s5(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),jU(n,new Jv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n5;case"linkViaPopup":case"linkViaRedirect":return s5;case"reauthViaPopup":case"reauthViaRedirect":return r5;default:Ur(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=new rd(2e3,1e4);class fl extends wP{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,fl.currentPopupAction&&fl.currentPopupAction.cancel(),fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=Qv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i5.get())};e()}}fl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5="pendingRedirect",sf=new Map;class a5 extends wP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sf.get(this.auth._key());if(!e){try{const r=await l5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sf.set(this.auth._key(),e)}return this.bypassAuthState||sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function l5(t,e){const n=d5(e),r=u5(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function c5(t,e){sf.set(t._key(),e)}function u5(t){return Ds(t._redirectPersistence)}function d5(t){return rf(o5,t.config.apiKey,t.name)}async function h5(t,e,n=!1){if(dr(t.app))return Promise.reject(Oi(t));const r=Jl(t),s=t5(r,e),l=await new a5(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=10*60*1e3;class m5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!p5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_P(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cs(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f5&&this.cachedEventUids.clear(),this.cachedEventUids.has(XT(e))}saveEventToCache(e){this.cachedEventUids.add(XT(e)),this.lastProcessedEventTime=Date.now()}}function XT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _P({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function p5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _P(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t,e={}){return Ki(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v5=/^https?/;async function x5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await g5(t);for(const n of e)try{if(w5(n))return}catch{}Ur(t,"unauthorized-domain")}function w5(t){const e=ty(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!v5.test(n))return!1;if(y5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=new rd(3e4,6e4);function ZT(){const t=us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function b5(t){return new Promise((e,n)=>{var r,s,o;function l(){ZT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZT(),n(cs(t,"network-request-failed"))},timeout:_5.get()})}if(!((s=(r=us().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=us().gapi)===null||o===void 0)&&o.load)l();else{const c=gU("iframefcb");return us()[c]=()=>{gapi.load?l():n(cs(t,"network-request-failed"))},oP(`${pU()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw of=null,e})}let of=null;function E5(t){return of=of||b5(t),of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new rd(5e3,15e3),S5="__/auth/iframe",k5="emulator/auth/iframe",C5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P5(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wv(e,k5):`https://${t.config.authDomain}/${S5}`,r={apiKey:e.apiKey,appName:t.name,v:Zo},s=A5.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Yu(r).slice(1)}`}async function I5(t){const e=await E5(t),n=us().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:P5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C5,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=cs(t,"network-request-failed"),c=us().setTimeout(()=>{o(l)},T5.get());function u(){us().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N5=500,j5=600,D5="_blank",O5="http://localhost";class eS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L5(t,e,n,r=N5,s=j5){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},R5),{width:r.toString(),height:s.toString(),top:o,left:l}),h=gn().toLowerCase();n&&(c=ZA(h)?D5:n),YA(h)&&(e=e||O5,u.scrollbars="yes");const g=Object.entries(u).reduce((v,[b,k])=>`${v}${b}=${k},`,"");if(oU(h)&&c!=="_self")return M5(e||"",c),new eS(null);const y=window.open(e||"",c,g);Ie(y,t,"popup-blocked");try{y.focus()}catch{}return new eS(y)}function M5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="__/auth/handler",$5="emulator/auth/handler",F5=encodeURIComponent("fac");async function tS(t,e,n,r,s,o){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zo,eventId:s};if(e instanceof cP){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",pM(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))l[g]=y}if(e instanceof sd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const u=await t._getAppCheckToken(),h=u?`#${F5}=${encodeURIComponent(u)}`:"";return`${U5(t)}?${Yu(c).slice(1)}${h}`}function U5({config:t}){return t.emulator?Wv(t,$5):`https://${t.authDomain}/${V5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="webStorageSupport";class B5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pP,this._completeRedirectFn=h5,this._overrideRedirectResult=c5}async _openPopup(e,n,r,s){var o;zs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await tS(e,n,r,ty(),s);return L5(e,l,Qv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await tS(e,n,r,ty(),s);return HU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(zs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await I5(e),r=new m5(e);return n.register("authEvent",s=>(Ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ug,{type:Ug},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Ug];l!==void 0&&n(!!l),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=x5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sP()||XA()||qv()}}const z5=B5;var nS="@firebase/auth",rS="1.10.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q5(t){$r(new pr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ie(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iP(t)},h=new hU(r,s,o,u);return bU(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$r(new pr("auth-internal",e=>{const n=Jl(e.getProvider("auth").getImmediate());return(r=>new W5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(nS,rS,H5(t)),Ln(nS,rS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=5*60,K5=Xk("authIdTokenMaxAge")||G5;let sS=null;const Q5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>K5)return;const s=n==null?void 0:n.token;sS!==s&&(sS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function J5(t=av()){const e=Hl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_U(t,{popupRedirectResolver:z5,persistence:[e5,BU,pP]}),r=Xk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=Q5(o.toString());$U(n,l,()=>l(n.currentUser)),VU(n,c=>l(c))}}const s=Qk("auth");return s?EU(n,`http://${s}`):Wl("Auth",!1),n}function Y5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=cs("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",Y5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q5("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="firebasestorage.googleapis.com",EP="storageBucket",X5=2*60*1e3,Z5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends yr{constructor(e,n,r=0){super(Bg(e),`Firebase Storage: ${n} (${Bg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function Bg(t){return"storage/"+t}function Yv(){const t="An unknown error occurred, please check the error payload for server response.";return new Tt(Et.UNKNOWN,t)}function e9(t){return new Tt(Et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function t9(t){return new Tt(Et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function n9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(Et.UNAUTHENTICATED,t)}function r9(){return new Tt(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function s9(t){return new Tt(Et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function i9(){return new Tt(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function o9(){return new Tt(Et.CANCELED,"User canceled the upload/download.")}function a9(t){return new Tt(Et.INVALID_URL,"Invalid URL '"+t+"'.")}function l9(t){return new Tt(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function c9(){return new Tt(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+EP+"' property when initializing the app?")}function u9(){return new Tt(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d9(){return new Tt(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function h9(t){return new Tt(Et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sy(t){return new Tt(Et.INVALID_ARGUMENT,t)}function TP(){return new Tt(Et.APP_DELETED,"The Firebase app was deleted.")}function f9(t){return new Tt(Et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bu(t,e){return new Tt(Et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Xc(t){throw new Tt(Et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Yn.makeFromUrl(e,n)}catch{return new Yn(e,"")}if(r.path==="")return r;throw l9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),u={bucket:1,path:3};function h(z){z.path_=decodeURIComponent(z.path)}const g="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),k={bucket:1,path:3},D=n===bP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${D}/${s}/${P}`,"i"),M=[{regex:c,indices:u,postModify:o},{regex:b,indices:k,postModify:h},{regex:O,indices:{bucket:1,path:2},postModify:h}];for(let z=0;z<M.length;z++){const B=M[z],G=B.regex.exec(e);if(G){const I=G[B.indices.bucket];let S=G[B.indices.path];S||(S=""),r=new Yn(I,S),B.postModify(r);break}}if(r==null)throw a9(e);return r}}class m9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(t,e,n){let r=1,s=null,o=null,l=!1,c=0;function u(){return c===2}let h=!1;function g(...P){h||(h=!0,e.apply(null,P))}function y(P){s=setTimeout(()=>{s=null,t(b,u())},P)}function v(){o&&clearTimeout(o)}function b(P,...O){if(h){v();return}if(P){v(),g.call(null,P,...O);return}if(u()||l){v(),g.call(null,P,...O);return}r<64&&(r*=2);let M;c===1?(c=2,M=0):M=(r+Math.random())*1e3,y(M)}let k=!1;function D(P){k||(k=!0,v(),!h&&(s!==null?(P||(c=2),clearTimeout(s),y(0)):P||(c=1)))}return y(0),o=setTimeout(()=>{l=!0,D(!0)},n),D}function g9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(t){return t!==void 0}function v9(t){return typeof t=="object"&&!Array.isArray(t)}function Xv(t){return typeof t=="string"||t instanceof String}function iS(t){return Zv()&&t instanceof Blob}function Zv(){return typeof Blob<"u"}function oS(t,e,n,r){if(r<e)throw sy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw sy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function SP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Fo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fo||(Fo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,n,r,s,o,l,c,u,h,g,y,v=!0,b=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,D)=>{this.resolve_=k,this.reject_=D,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Fh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Fo.NO_ERROR,u=o.getStatus();if(!c||x9(u,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Fo.ABORT;r(!1,new Fh(!1,null,g));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new Fh(h,o))})},n=(r,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());y9(u)?o(u):o()}catch(u){l(u)}else if(c!==null){const u=Yv();u.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,u)):l(u)}else if(s.canceled){const u=this.appDelete_?TP():o9();l(u)}else{const u=i9();l(u)}};this.canceled_?n(!1,new Fh(!1,null,!0)):this.backoffId_=p9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function b9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function T9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function S9(t,e,n,r,s,o,l=!0,c=!1){const u=SP(t.urlParams),h=t.url+u,g=Object.assign({},t.headers);return E9(g,e),_9(g,n),b9(g,o),T9(g,r),new w9(h,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function C9(...t){const e=k9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Zv())return new Blob(t);throw new Tt(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function A9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t){if(typeof atob>"u")throw h9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zg{constructor(e,n){this.data=e,this.contentType=n||null}}function I9(t,e){switch(t){case rs.RAW:return new zg(kP(e));case rs.BASE64:case rs.BASE64URL:return new zg(CP(t,e));case rs.DATA_URL:return new zg(N9(e),j9(e))}throw Yv()}function kP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=t.charCodeAt(++n);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function R9(t){let e;try{e=decodeURIComponent(t)}catch{throw bu(rs.DATA_URL,"Malformed data URL.")}return kP(e)}function CP(t,e){switch(t){case rs.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw bu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw bu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=P9(e)}catch(s){throw s.message.includes("polyfill")?s:bu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class AP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw bu(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=D9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function N9(t){const e=new AP(t);return e.base64?CP(rs.BASE64,e.rest):R9(e.rest)}function j9(t){return new AP(t).contentType}function D9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){let r=0,s="";iS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(iS(this.data_)){const r=this.data_,s=A9(r,e,n);return s===null?null:new Pi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Pi(r,!0)}}static getBlob(...e){if(Zv()){const n=e.map(r=>r instanceof Pi?r.data_:r);return new Pi(C9.apply(null,n))}else{const n=e.map(l=>Xv(l)?I9(rs.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)s[o++]=l[c]}),new Pi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){let e;try{e=JSON.parse(t)}catch{return null}return v9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function IP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t,e){return e}class _n{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||M9}}let Uh=null;function V9(t){return!Xv(t)||t.length<2?t:IP(t)}function RP(){if(Uh)return Uh;const t=[];t.push(new _n("bucket")),t.push(new _n("generation")),t.push(new _n("metageneration")),t.push(new _n("name","fullPath",!0));function e(o,l){return V9(l)}const n=new _n("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const s=new _n("size");return s.xform=r,t.push(s),t.push(new _n("timeCreated")),t.push(new _n("updated")),t.push(new _n("md5Hash",null,!0)),t.push(new _n("cacheControl",null,!0)),t.push(new _n("contentDisposition",null,!0)),t.push(new _n("contentEncoding",null,!0)),t.push(new _n("contentLanguage",null,!0)),t.push(new _n("contentType",null,!0)),t.push(new _n("metadata","customMetadata",!0)),Uh=t,Uh}function $9(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new Yn(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function F9(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return $9(r,t),r}function NP(t,e,n){const r=PP(e);return r===null?null:F9(t,r,n)}function U9(t,e,n,r){const s=PP(e);if(s===null||!Xv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(h=>{const g=t.bucket,y=t.fullPath,v="/b/"+l(g)+"/o/"+l(y),b=Em(v,n,r),k=SP({alt:"media",token:h});return b+k})[0]}function B9(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class ex{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t){if(!t)throw Yv()}function z9(t,e){function n(r,s){const o=NP(t,s,e);return jP(o!==null),o}return n}function W9(t,e){function n(r,s){const o=NP(t,s,e);return jP(o!==null),U9(o,s,t.host,t._protocol)}return n}function DP(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=r9():s=n9():n.getStatus()===402?s=t9(t.bucket):n.getStatus()===403?s=s9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function OP(t){const e=DP(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=e9(t.path)),o.serverResponse=s.serverResponse,o}return n}function H9(t,e,n){const r=e.fullServerUrl(),s=Em(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new ex(s,o,W9(t,n),l);return c.errorHandler=OP(e),c}function q9(t,e){const n=e.fullServerUrl(),r=Em(n,t.host,t._protocol),s="DELETE",o=t.maxOperationRetryTime;function l(u,h){}const c=new ex(r,s,l,o);return c.successCodes=[200,204],c.errorHandler=OP(e),c}function G9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function K9(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=G9(null,e)),r}function Q9(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let M="";for(let z=0;z<2;z++)M=M+Math.random().toString().slice(2);return M}const u=c();l["Content-Type"]="multipart/related; boundary="+u;const h=K9(e,r,s),g=B9(h,n),y="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,v=`\r
--`+u+"--",b=Pi.getBlob(y,r,v);if(b===null)throw u9();const k={name:h.fullPath},D=Em(o,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,$=new ex(D,P,z9(t,n),O);return $.urlParams=k,$.headers=l,$.body=b.uploadData(),$.errorHandler=DP(e),$}class J9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,o){if(this.sent_)throw Xc("cannot .send() more than once");if(Yo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Y9 extends J9{initXhr(){this.xhr_.responseType="text"}}function tx(){return new Y9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this._service=e,n instanceof Yn?this._location=n:this._location=Yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new qo(e,n)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IP(this._location.path)}get storage(){return this._service}get parent(){const e=O9(this._location.path);if(e===null)return null;const n=new Yn(this._location.bucket,e);return new qo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw f9(e)}}function X9(t,e,n){t._throwIfRoot("uploadBytes");const r=Q9(t.storage,t._location,RP(),new Pi(e,!0),n);return t.storage.makeRequestWithTokens(r,tx).then(s=>({metadata:s,ref:t}))}function Z9(t){t._throwIfRoot("getDownloadURL");const e=H9(t.storage,t._location,RP());return t.storage.makeRequestWithTokens(e,tx).then(n=>{if(n===null)throw d9();return n})}function eB(t){t._throwIfRoot("deleteObject");const e=q9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,tx)}function tB(t,e){const n=L9(t._location.path,e),r=new Yn(t._location.bucket,n);return new qo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t){return/^[A-Za-z]+:\/\//.test(t)}function rB(t,e){return new qo(t,e)}function LP(t,e){if(t instanceof nx){const n=t;if(n._bucket==null)throw c9();const r=new qo(n,n._bucket);return e!=null?LP(r,e):r}else return e!==void 0?tB(t,e):t}function sB(t,e){if(e&&nB(e)){if(t instanceof nx)return rB(t,e);throw sy("To use ref(service, url), the first argument must be a Storage instance.")}else return LP(t,e)}function aS(t,e){const n=e==null?void 0:e[EP];return n==null?null:Yn.makeFromBucketSpec(n,t)}function iB(t,e,n,r={}){t.host=`${e}:${n}`;const s=Yo(e);s&&(iv(`https://${t.host}`),Wl("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:Zk(o,t.app.options.projectId))}class nx{constructor(e,n,r,s,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=bP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X5,this._maxUploadRetryTime=Z5,this._requests=new Set,s!=null?this._bucket=Yn.makeFromBucketSpec(s,this._host):this._bucket=aS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=aS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qo(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new m9(TP());{const l=S9(e,this._appId,r,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const lS="@firebase/storage",cS="0.13.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="storage";function oB(t,e,n){return t=vt(t),X9(t,e,n)}function aB(t){return t=vt(t),Z9(t)}function uS(t){return t=vt(t),eB(t)}function Wg(t,e){return t=vt(t),sB(t,e)}function lB(t=av(),e){t=vt(t),Wl("Storage",!1);const r=Hl(t,MP).getImmediate({identifier:e}),s=Jk("storage");return s&&cB(r,...s),r}function cB(t,e,n,r={}){iB(t,e,n,r)}function uB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new nx(n,r,s,e,Zo)}function dB(){$r(new pr(MP,uB,"PUBLIC").setMultipleInstances(!0)),Ln(lS,cS,""),Ln(lS,cS,"esm2017")}dB();const VP="@firebase/installations",rx="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=1e4,FP=`w:${rx}`,UP="FIS_v2",hB="https://firebaseinstallations.googleapis.com/v1",fB=60*60*1e3,mB="installations",pB="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Go=new Xo(mB,pB,gB);function BP(t){return t instanceof yr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP({projectId:t}){return`${hB}/projects/${t}/installations`}function WP(t){return{token:t.token,requestStatus:2,expiresIn:vB(t.expiresIn),creationTime:Date.now()}}async function HP(t,e){const r=(await e.json()).error;return Go.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function qP({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yB(t,{refreshToken:e}){const n=qP(t);return n.append("Authorization",xB(e)),n}async function GP(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vB(t){return Number(t.replace("s","000"))}function xB(t){return`${UP} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=zP(t),s=qP(t),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const l={fid:n,authVersion:UP,appId:t.appId,sdkVersion:FP},c={method:"POST",headers:s,body:JSON.stringify(l)},u=await GP(()=>fetch(r,c));if(u.ok){const h=await u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:WP(h.authToken)}}else throw await HP("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _B(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=/^[cdef][\w-]{21}$/,iy="";function EB(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=TB(t);return bB.test(n)?n:iy}catch{return iy}}function TB(t){return _B(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new Map;function JP(t,e){const n=Tm(t);YP(n,e),SB(n,e)}function YP(t,e){const n=QP.get(t);if(n)for(const r of n)r(e)}function SB(t,e){const n=kB();n&&n.postMessage({key:t,fid:e}),CB()}let Lo=null;function kB(){return!Lo&&"BroadcastChannel"in self&&(Lo=new BroadcastChannel("[Firebase] FID Change"),Lo.onmessage=t=>{YP(t.data.key,t.data.fid)}),Lo}function CB(){QP.size===0&&Lo&&(Lo.close(),Lo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="firebase-installations-database",PB=1,Ko="firebase-installations-store";let Hg=null;function sx(){return Hg||(Hg=iC(AB,PB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ko)}}})),Hg}async function Ff(t,e){const n=Tm(t),s=(await sx()).transaction(Ko,"readwrite"),o=s.objectStore(Ko),l=await o.get(n);return await o.put(e,n),await s.done,(!l||l.fid!==e.fid)&&JP(t,e.fid),e}async function XP(t){const e=Tm(t),r=(await sx()).transaction(Ko,"readwrite");await r.objectStore(Ko).delete(e),await r.done}async function Sm(t,e){const n=Tm(t),s=(await sx()).transaction(Ko,"readwrite"),o=s.objectStore(Ko),l=await o.get(n),c=e(l);return c===void 0?await o.delete(n):await o.put(c,n),await s.done,c&&(!l||l.fid!==c.fid)&&JP(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(t){let e;const n=await Sm(t.appConfig,r=>{const s=IB(r),o=RB(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===iy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function IB(t){const e=t||{fid:EB(),registrationStatus:0};return ZP(e)}function RB(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Go.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=NB(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:jB(t)}:{installationEntry:e}}async function NB(t,e){try{const n=await wB(t,e);return Ff(t.appConfig,n)}catch(n){throw BP(n)&&n.customData.serverCode===409?await XP(t.appConfig):await Ff(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function jB(t){let e=await dS(t.appConfig);for(;e.registrationStatus===1;)await KP(100),e=await dS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ix(t);return r||n}return e}function dS(t){return Sm(t,e=>{if(!e)throw Go.create("installation-not-found");return ZP(e)})}function ZP(t){return DB(t)?{fid:t.fid,registrationStatus:0}:t}function DB(t){return t.registrationStatus===1&&t.registrationTime+$P<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OB({appConfig:t,heartbeatServiceProvider:e},n){const r=LB(t,n),s=yB(t,n),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const l={installation:{sdkVersion:FP,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},u=await GP(()=>fetch(r,c));if(u.ok){const h=await u.json();return WP(h)}else throw await HP("Generate Auth Token",u)}function LB(t,{fid:e}){return`${zP(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(t,e=!1){let n;const r=await Sm(t.appConfig,o=>{if(!eI(o))throw Go.create("not-registered");const l=o.authToken;if(!e&&$B(l))return o;if(l.requestStatus===1)return n=MB(t,e),o;{if(!navigator.onLine)throw Go.create("app-offline");const c=UB(o);return n=VB(t,c),c}});return n?await n:r.authToken}async function MB(t,e){let n=await hS(t.appConfig);for(;n.authToken.requestStatus===1;)await KP(100),n=await hS(t.appConfig);const r=n.authToken;return r.requestStatus===0?ox(t,e):r}function hS(t){return Sm(t,e=>{if(!eI(e))throw Go.create("not-registered");const n=e.authToken;return BB(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function VB(t,e){try{const n=await OB(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ff(t.appConfig,r),n}catch(n){if(BP(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await XP(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ff(t.appConfig,r)}throw n}}function eI(t){return t!==void 0&&t.registrationStatus===2}function $B(t){return t.requestStatus===2&&!FB(t)}function FB(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fB}function UB(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function BB(t){return t.requestStatus===1&&t.requestTime+$P<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zB(t){const e=t,{installationEntry:n,registrationPromise:r}=await ix(e);return r?r.catch(console.error):ox(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e=!1){const n=t;return await HB(n),(await ox(n,e)).token}async function HB(t){const{registrationPromise:e}=await ix(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t){if(!t||!t.options)throw qg("App Configuration");if(!t.name)throw qg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw qg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function qg(t){return Go.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="installations",GB="installations-internal",KB=t=>{const e=t.getProvider("app").getImmediate(),n=qB(e),r=Hl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},QB=t=>{const e=t.getProvider("app").getImmediate(),n=Hl(e,tI).getImmediate();return{getId:()=>zB(n),getToken:s=>WB(n,s)}};function JB(){$r(new pr(tI,KB,"PUBLIC")),$r(new pr(GB,QB,"PRIVATE"))}JB();Ln(VP,rx);Ln(VP,rx,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="analytics",YB="firebase_id",XB="origin",ZB=60*1e3,e7="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ax="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new Xf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},mr=new Xo("analytics","Analytics",t7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(t){if(!t.startsWith(ax)){const e=mr.create("invalid-gtag-resource",{gtagURL:t});return Vn.warn(e.message),""}return t}function nI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function r7(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function s7(t,e){const n=r7("firebase-js-sdk-policy",{createScriptURL:n7}),r=document.createElement("script"),s=`${ax}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function i7(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function o7(t,e,n,r,s,o){const l=r[s];try{if(l)await e[l];else{const u=(await nI(n)).find(h=>h.measurementId===s);u&&await e[u.appId]}}catch(c){Vn.error(c)}t("config",s,o)}async function a7(t,e,n,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const c=await nI(n);for(const u of l){const h=c.find(y=>y.measurementId===u),g=h&&e[h.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,s||{})}catch(o){Vn.error(o)}}function l7(t,e,n,r){async function s(o,...l){try{if(o==="event"){const[c,u]=l;await a7(t,e,n,c,u)}else if(o==="config"){const[c,u]=l;await o7(t,e,n,r,c,u)}else if(o==="consent"){const[c,u]=l;t("consent",c,u)}else if(o==="get"){const[c,u,h]=l;t("get",c,u,h)}else if(o==="set"){const[c]=l;t("set",c)}else t(o,...l)}catch(c){Vn.error(c)}}return s}function c7(t,e,n,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=l7(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function u7(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ax)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=30,h7=1e3;class f7{constructor(e={},n=h7){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const rI=new f7;function m7(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function p7(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:m7(r)},o=e7.replace("{app-id}",n),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let c="";try{const u=await l.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw mr.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function g7(t,e=rI,n){const{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw mr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw mr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new x7;return setTimeout(async()=>{c.abort()},ZB),sI({appId:r,apiKey:s,measurementId:o},l,c,e)}async function sI(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=rI){var o;const{appId:l,measurementId:c}=t;try{await y7(r,e)}catch(u){if(c)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:l,measurementId:c};throw u}try{const u=await p7(t);return s.deleteThrottleMetadata(l),u}catch(u){const h=u;if(!v7(h)){if(s.deleteThrottleMetadata(l),c)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:l,measurementId:c};throw u}const g=Number((o=h==null?void 0:h.customData)===null||o===void 0?void 0:o.httpStatus)===503?NE(n,s.intervalMillis,d7):NE(n,s.intervalMillis),y={throttleEndTimeMillis:Date.now()+g,backoffCount:n+1};return s.setThrottleMetadata(l,y),Vn.debug(`Calling attemptFetch again in ${g} millis`),sI(t,y,r,s)}}function y7(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),r(mr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function v7(t){if(!(t instanceof yr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class x7{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function w7(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const o=await e,l=Object.assign(Object.assign({},r),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _7(){if(tC())try{await nC()}catch(t){return Vn.warn(mr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Vn.warn(mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function b7(t,e,n,r,s,o,l){var c;const u=g7(t);u.then(b=>{n[b.measurementId]=b.appId,t.options.measurementId&&b.measurementId!==t.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>Vn.error(b)),e.push(u);const h=_7().then(b=>{if(b)return r.getId()}),[g,y]=await Promise.all([u,h]);u7(o)||s7(o,g.measurementId),s("js",new Date);const v=(c=l==null?void 0:l.config)!==null&&c!==void 0?c:{};return v[XB]="firebase",v.update=!0,y!=null&&(v[YB]=y),s("config",g.measurementId,v),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e){this.app=e}_delete(){return delete Eu[this.app.options.appId],Promise.resolve()}}let Eu={},mS=[];const pS={};let Gg="dataLayer",T7="gtag",gS,iI,yS=!1;function S7(){const t=[];if(eC()&&t.push("This is a browser extension environment."),dM()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=mr.create("invalid-analytics-context",{errorInfo:e});Vn.warn(n.message)}}function k7(t,e,n){S7();const r=t.options.appId;if(!r)throw mr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw mr.create("no-api-key");if(Eu[r]!=null)throw mr.create("already-exists",{id:r});if(!yS){i7(Gg);const{wrappedGtag:o,gtagCore:l}=c7(Eu,mS,pS,Gg,T7);iI=o,gS=l,yS=!0}return Eu[r]=b7(t,mS,pS,e,gS,Gg,n),new E7(t)}function C7(t,e,n,r){t=vt(t),w7(iI,Eu[t.app.options.appId],e,n,r).catch(s=>Vn.error(s))}const vS="@firebase/analytics",xS="0.10.16";function A7(){$r(new pr(fS,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return k7(r,s,n)},"PUBLIC")),$r(new pr("analytics-internal",t,"PRIVATE")),Ln(vS,xS),Ln(vS,xS,"esm2017");function t(e){try{const n=e.getProvider(fS).getImmediate();return{logEvent:(r,s,o)=>C7(n,r,s,o)}}catch(n){throw mr.create("interop-component-reg-failed",{reason:n})}}}A7();const P7={apiKey:"AIzaSyAjVDbvzmbogD_lbGqB4MmVf3aTnTQzEh8",authDomain:"aussie-gut-pack-a896e.firebaseapp.com",projectId:"aussie-gut-pack-a896e",storageBucket:"aussie-gut-pack-a896e.firebasestorage.app",messagingSenderId:"817190270687",appId:"1:817190270687:web:357c740b79d6e243e3db6a",measurementId:"G-NEV6BN8ZKT"},lx=oC(P7),dt=Wo(lx),ds=J5(lx),Kg=lB(lx);function I7(){const{isDarkMode:t}=A.useContext(Ze),e=A.useRef(null),n=A.useRef(null),r=zr(),[s,o]=A.useState(!0),[l,c]=A.useState(null),[u,h]=A.useState(!1),[g,y]=A.useState(!1),[v,b]=A.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[k,D]=A.useState(0),[P,O]=A.useState(null),[$,M]=A.useState(null),[z,B]=A.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);A.useEffect(()=>{(async()=>{var ge,$e,Ke;o(!0),c(null);try{const be=Qn(dt,"content","home");console.log("Fetching content/home...");const ue=await nd(be);console.log("Document exists:",ue.exists());let J={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"Here at Aussie Gut Pack, we believe life should beeel less like a chore and more like an adventure.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin.","Eat a fiber-rich meal.","Practice 5 minutes of deep breathing."],lastUpdated:null};if(ue.exists()){const fe=ue.data();console.log("Firestore data:",fe),J={...J,...fe,quotes:Array.isArray(fe.quotes)?fe.quotes:J.quotes,currentWorkout:{description:((ge=fe.currentWorkout)==null?void 0:ge.description)||J.currentWorkout.description,warmup:Array.isArray(($e=fe.currentWorkout)==null?void 0:$e.warmup)?fe.currentWorkout.warmup:J.currentWorkout.warmup,main:Array.isArray((Ke=fe.currentWorkout)==null?void 0:Ke.main)?fe.currentWorkout.main:J.currentWorkout.main},scheduledWorkouts:Array.isArray(fe.scheduledWorkouts)?fe.scheduledWorkouts:[],aboutUs:fe.aboutUs||J.aboutUs,dailyChallenges:Array.isArray(fe.dailyChallenges)?fe.dailyChallenges:J.dailyChallenges,lastUpdated:fe.lastUpdated||J.lastUpdated}}else console.warn("No document found at content/home, initializing..."),await jf(be,J);const te=new Date,W=[...J.scheduledWorkouts];let ne=!1;if(W.sort((fe,Te)=>new Date(fe.updateDateTime)-new Date(Te.updateDateTime)),W.length>0){const fe=W[0],Te=new Date(fe.updateDateTime);te>=Te&&(!J.lastUpdated||new Date(J.lastUpdated)<Te)&&(J.currentWorkout={description:fe.description||"",warmup:fe.warmup||[],main:fe.main||[]},W.shift(),J.scheduledWorkouts=W,J.lastUpdated=te.toISOString(),ne=!0)}ne&&(await jf(be,J,{merge:!0}),console.log("Updated Firestore document with new workout")),console.log("Setting content:",J),b(J);try{const fe=jt(dt,"content","blog","posts"),Te=await $n(fe);if(Te.empty){console.log("No blog posts found"),O({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."});return}const je=Te.docs.map(ie=>({id:ie.id,title:ie.data().title||"Untitled Post",date:ie.data().date||new Date().toISOString(),blocks:ie.data().blocks||[]}));if(je.length>0){je.sort((q,re)=>new Date(re.date)-new Date(q.date));const ie=je[0],oe=G(ie);O({...ie,excerpt:oe});const he=new Date("2025-04-16T00:00:00Z"),Z=je.filter(q=>new Date(q.date)>he).sort((q,re)=>new Date(q.date)-new Date(re.date));if(Z.length>0){const q=Z[0],re=G(q);M({...q,excerpt:re})}}}catch(fe){console.error("Error fetching blog posts:",fe),O({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}}catch(be){console.error("Error in fetchAndUpdateContent:",be),c("Failed to load content. Please try again later.")}finally{o(!1),console.log("isLoading set to false")}})()},[]);const G=L=>{if(!L||!L.blocks||L.blocks.length===0)return"Read more...";const ge=L.blocks.find($e=>$e.type==="paragraph"||$e.type==="list"||$e.type==="bullet");return ge?ge.type==="paragraph"&&ge.content?ge.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(ge.content)&&ge.content.length>0?ge.content[0]+(ge.content.length>1?"...":""):"Read more...":"Read more..."};A.useEffect(()=>{const L=new IntersectionObserver($e=>{$e.forEach(Ke=>{const be=Ke.isIntersecting;console.log(`IntersectionObserver: ${Ke.target===e.current?"headerRef":"roofRef"} isIntersecting: ${be}`),Ke.target===e.current&&h(be),Ke.target===n.current&&y(be)})},{threshold:.1});e.current&&L.observe(e.current),n.current&&L.observe(n.current);const ge=setTimeout(()=>{g||(console.log("IntersectionObserver timeout: Forcing isRoofVisible to true"),y(!0)),u||(console.log("IntersectionObserver timeout: Forcing isHeaderVisible to true"),h(!0))},2e3);return()=>{e.current&&L.unobserve(e.current),n.current&&L.unobserve(n.current),clearTimeout(ge)}},[u,g]),A.useEffect(()=>{const L=setInterval(()=>{D(ge=>(ge+1)%(v.quotes.length||1))},4e3);return()=>clearInterval(L)},[v.quotes.length]),A.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(z))},[z]);const I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},S={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},T=L=>{B(ge=>ge.includes(L)?ge.filter($e=>$e!==L):[...ge,L])},R=v.dailyChallenges.length>0&&z.length===v.dailyChallenges.length&&v.dailyChallenges.every((L,ge)=>z.includes(ge)),j="https://aussiegutpack.com",F=`${j}${r.pathname==="/"?"":r.pathname}`;return f.jsxs(f.Fragment,{children:[f.jsxs(R2,{children:[f.jsx("title",{children:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{name:"description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{name:"keywords",content:"gut health, digestive health, Australian Shepherd, wellness, fitness, daily challenges, Aussie Gut Pack"}),f.jsx("meta",{name:"robots",content:"index, follow"}),f.jsx("meta",{property:"og:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{property:"og:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{property:"og:type",content:"website"}),f.jsx("meta",{property:"og:url",content:F}),f.jsx("meta",{property:"og:image",content:`${j}/images/og-image.jpg`}),f.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),f.jsx("meta",{name:"twitter:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{name:"twitter:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{name:"twitter:image",content:`${j}/images/og-image.jpg`}),P&&f.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:P.title,datePublished:P.date,description:P.excerpt,author:{"@type":"Organization",name:"Aussie Gut Pack"},publisher:{"@type":"Organization",name:"Aussie Gut Pack",logo:{"@type":"ImageObject",url:`${j}/images/creatine.png`}},mainEntityOfPage:{"@type":"WebPage","@id":`${j}/blog/${P.id}`}})})]}),f.jsx("main",{id:"main-content",className:`min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"100vh"},children:s?f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsx("p",{className:`text-xl ${t?"text-white":"text-red-600"}`,children:"Loading content..."})}):l?f.jsx("div",{className:"text-center text-red-600 p-4",children:l}):f.jsxs(f.Fragment,{children:[console.log("Rendering sections, content:",v),f.jsx("section",{ref:e,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:"container mx-auto text-center",children:[f.jsxs("header",{children:[f.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),f.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."})]}),f.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${u?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[f.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[f.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"About Us"}),f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:v.aboutUs||"No about us content available."}),f.jsx("div",{className:"flex justify-center gap-4 mt-6",children:f.jsx(Dn,{to:"/login",variant:"primary",className:"join-the-pack-button","aria-label":"Join the Aussie Gut Pack community",children:"Join the Pack"})})]}),f.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:f.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:f.jsx(u4,{className:"w-full h-full object-cover"})})})]})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsx("section",{ref:n,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${g?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[f.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),f.jsx("div",{className:"max-w-2xl mx-auto mb-8",style:{minHeight:"80px"},children:f.jsx(T0,{mode:"wait",children:v.quotes.length>0?f.jsxs(vf.p,{variants:I,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:['"',v.quotes[k],'"']},k):f.jsx("p",{className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No quotes available."})})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[f.jsxs("section",{className:"workout-section","aria-labelledby":"workout-heading",children:[f.jsx("h3",{id:"workout-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),v.currentWorkout.description?f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:v.currentWorkout.description}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No workout description available."}),f.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Warm Up"}),v.currentWorkout.warmup.length>0?f.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:v.currentWorkout.warmup.map((L,ge)=>f.jsx("li",{className:"mb-2 text-lg",children:L},`warmup-${ge}`))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No warmup exercises available."}),f.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Main Workout"}),v.currentWorkout.main.length>0?f.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:v.currentWorkout.main.map((L,ge)=>f.jsx("li",{className:"mb-2 text-lg",children:L},`main-${ge}`))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No main workout exercises available."}),f.jsx(Dn,{to:"/fitness-tips",variant:"primary",className:"mx-auto btn-primary bg-red-800 text-white hover:bg-red-900","aria-label":"View more fitness tips",children:"More Fitness Tips"})]}),f.jsxs("section",{className:"challenges-section","aria-labelledby":"challenges-heading",children:[f.jsx("h3",{id:"challenges-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),v.dailyChallenges.length>0?f.jsx("ul",{className:`text-left list-none pl-6 mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,role:"list",children:v.dailyChallenges.map((L,ge)=>f.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[f.jsx("input",{type:"checkbox",id:`challenge-${ge}`,checked:z.includes(ge),onChange:()=>T(ge),className:"mr-2","aria-label":`Mark challenge as completed: ${L}`,"aria-checked":z.includes(ge)}),f.jsx("label",{htmlFor:`challenge-${ge}`,children:L})]},`challenge-${ge}`))}):f.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No challenges available."}),f.jsx(T0,{children:R&&f.jsx(vf.p,{variants:S,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-green-400":"text-green-600"}`,"aria-live":"polite",children:"Great job, Pack Leader!"})})]})]})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsx("section",{className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:"container mx-auto text-center",children:[f.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),P?f.jsxs("article",{className:"mb-8",children:[f.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:P.title}),f.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:new Date(P.date).toLocaleDateString()}),f.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:P.excerpt}),f.jsx(Dn,{to:`/blog/${P.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900","aria-label":`Read more about ${P.title}`,children:"Read More"})]}):f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No blog posts available."}),$?f.jsxs("article",{children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Upcoming: ",$.title]}),f.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:["Coming on"," ",new Date($.date).toLocaleDateString()]}),f.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:$.excerpt}),f.jsx("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-500"}`,children:"Stay tuned for this upcoming post!"})]}):f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No upcoming blog posts at this time."})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsxs("section",{className:`py-8 ${t?"bg-stone-800":"bg-stone-100"} text-center`,children:[f.jsx("p",{className:`text-lg mb-4 ${t?"text-white":"text-red-600"}`,children:"Want more? Sign up with us today!"}),f.jsx(Dn,{to:"/login",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900","aria-label":"Sign up for Aussie Gut Pack",children:"Sign Up"})]})]})})]})}const oI=A.createContext(),R7=({children:t})=>{const[e,n]=A.useState([]),r=u=>{n(h=>h.find(y=>y.id===u.id)?h.map(y=>y.id===u.id?{...y,quantity:y.quantity+1}:y):[...h,{...u,quantity:1}])},s=(u,h)=>{h<=0?o(u):n(g=>g.map(y=>y.id===u?{...y,quantity:h}:y))},o=u=>{n(h=>h.filter(g=>g.id!==u))},l=()=>{n([])},c=()=>e.reduce((u,h)=>u+h.price*h.quantity,0);return f.jsx(oI.Provider,{value:{cart:e,addToCart:r,updateQuantity:s,removeFromCart:o,clearCart:l,getTotalPrice:c},children:t})},km=()=>A.useContext(oI);function N7(){var ue;const{isDarkMode:t}=A.useContext(Ze),{cart:e,addToCart:n,updateQuantity:r,removeFromCart:s,getTotalPrice:o}=km(),[l,c]=A.useState([]),[u,h]=A.useState([]),[g,y]=A.useState(!1),[v,b]=A.useState(""),[k,D]=A.useState(""),[P,O]=A.useState(""),[$,M]=A.useState(!1),[z,B]=A.useState(!0),[G,I]=A.useState(!1),[S,T]=A.useState(!1),R=A.useRef(null),j=A.useRef(null),F=Qt();A.useEffect(()=>{console.log("isMiniCartOpen updated to:",$)},[$]),A.useEffect(()=>{console.log("showAll updated to:",g)},[g]),A.useEffect(()=>{const J=te=>{const W=document.querySelector(".cart-button"),ne=te.target.closest(".add-to-cart-button"),fe=Date.now(),Te=j.current?fe-j.current:1/0;console.log("Outside click handler triggered, target:",te.target),console.log("Is target an Add to Cart button?",!!ne),console.log("Time since last Add to Cart click:",Te),console.log("IsMiniCartOpen?",$),console.log("OpenedByAdd?",G),$&&!te.target.closest(".mini-cart-sidebar")&&!(W!=null&&W.contains(te.target))&&!ne&&Te>100&&!G&&(console.log("Outside click detected, closing sidebar"),M(!1))};return document.addEventListener("click",J),()=>document.removeEventListener("click",J)},[$,G]),A.useEffect(()=>{(async()=>{try{B(!0);const W=(await $n(jt(dt,"categories"))).docs.map(Te=>({id:Te.id,...Te.data()}));c(W);const fe=(await $n(jt(dt,"products"))).docs.map(Te=>({id:Te.id,...Te.data()}));h(fe)}catch(te){console.error("Error fetching data from Firestore:",te)}finally{B(!1)}})()},[]),A.useEffect(()=>(e.length>0&&(R.current&&clearTimeout(R.current),console.log("Cart updated, opening sidebar, cart length:",e.length),I(!0),M(!0),e.length!==1&&(R.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),M(!1),I(!1)},3e3))),()=>{R.current&&clearTimeout(R.current)}),[e]),A.useEffect(()=>{e.length===0&&$&&(console.log("Cart is empty, closing sidebar"),M(!1),I(!1))},[e,$]);const L=J=>{j.current=Date.now(),n(J)},ge=J=>{const te=[...J];switch(v){case"price-asc":return te.sort((W,ne)=>W.price-ne.price);case"price-desc":return te.sort((W,ne)=>ne.price-W.price);case"name-asc":return te.sort((W,ne)=>W.name.localeCompare(ne.name));case"name-desc":return te.sort((W,ne)=>ne.name.localeCompare(W.name));default:return te}},$e=u.filter(J=>P?J.name.toLowerCase().includes(P.toLowerCase())||J.description.toLowerCase().includes(P.toLowerCase()):!0),Ke=k?$e.filter(J=>J.categoryId===k):$e,be=ge(Ke);return f.jsxs("div",{className:`min-h-screen container mx-auto px-4 py-8 md:px-6 md:py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:`text-3xl md:text-4xl font-bold transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Pack"}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-3 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950 md:px-4",onClick:J=>{J.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",$),M(!$)},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),f.jsx("span",{className:"hidden md:inline",children:"Cart"}),Array.isArray(e)&&e.length>0&&f.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-5 w-5 md:h-6 md:w-6 flex items-center justify-center text-xs md:text-sm transition-all duration-300 ease-in-out ${e.length>0?"animate-bounce":""}`,children:e.reduce((J,te)=>J+te.quantity,0)})]}),f.jsx("button",{onClick:()=>T(!S),className:"md:hidden text-white focus:outline-none",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})})]})]}),f.jsxs("div",{className:`${S?"block":"hidden"} md:block mb-6 transition-all duration-300 ease-in-out`,children:[f.jsx("h2",{className:`text-2xl md:text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Products"}),f.jsx("div",{className:"mb-6",children:f.jsx("input",{type:"text",placeholder:"Search products by name or description...",value:P,onChange:J=>O(J.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`})}),f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full",children:[f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Filter by Section:"}),f.jsxs("select",{value:k,onChange:J=>D(J.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[f.jsx("option",{value:"",children:"All Sections"}),l.map(J=>f.jsx("option",{value:J.id,children:J.name},J.id))]})]}),f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Sort By:"}),f.jsxs("select",{value:v,onChange:J=>b(J.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[f.jsx("option",{value:"",children:"None"}),f.jsx("option",{value:"price-asc",children:"Price: Low to High"}),f.jsx("option",{value:"price-desc",children:"Price: High to Low"}),f.jsx("option",{value:"name-asc",children:"Name: A-Z"}),f.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),f.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",g),y(J=>{const te=!J;return console.log("Setting showAll to:",te),te&&(console.log("Resetting filterCategory to show all products"),D("")),te})},className:`w-full sm:w-auto px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${t?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:g?"Group by Category":"Show All Products"})]})]}),z?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):k?f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:((ue=l.find(J=>J.id===k))==null?void 0:ue.name)||"Section"}),be.length===0?f.jsx("p",{className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:be.map(J=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:te=>{te.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${J.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:J.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",J.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:te=>{te.stopPropagation(),j.current=Date.now(),L(J)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${J.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},J.id))})]}):g?f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:be.map(J=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:te=>{te.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${J.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:J.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",J.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:te=>{te.stopPropagation(),j.current=Date.now(),L(J)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${J.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},J.id))}):l.map(J=>f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:ge(u.filter(te=>te.categoryId===J.id)).map(te=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:te.image,alt:te.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:W=>{W.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${te.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:te.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:te.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",te.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:W=>{W.stopPropagation(),j.current=Date.now(),L(te)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${te.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},te.id))})]},J.id)),$&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:J=>{J.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),M(!1)}}),f.jsx("div",{className:`mini-cart-sidebar w-64 md:w-80 p-4 md:p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${$?"translate-x-0":"translate-x-full"} ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:f.jsxs("div",{className:`mini-cart-content ${$?"active":""}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:`text-lg md:text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Your Cart"}),f.jsx("button",{onClick:J=>{J.stopPropagation(),console.log("Close button clicked, closing sidebar"),M(!1)},className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:""})]}),!Array.isArray(e)||e.length===0?f.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):f.jsxs("div",{className:"space-y-4",children:[f.jsx(qf,{component:null,children:e.map(J=>f.jsx(Hf,{timeout:300,classNames:"cart-item",children:f.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-12 h-12 md:w-16 md:h-16 object-cover rounded-md",onError:te=>{te.target.src="/UW_placeholder.jpg"}}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:`text-xs md:text-sm font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["$",J.price.toFixed(2)," x ",J.quantity]}),f.jsx("div",{className:"flex items-center gap-2 mt-2",children:f.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[J.quantity===1?f.jsx("button",{onClick:te=>{te.stopPropagation(),s(J.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):f.jsx("button",{onClick:te=>{te.stopPropagation(),r(J.id,J.quantity-1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),f.jsx("span",{className:`text-xs md:text-sm mx-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.quantity}),f.jsx("button",{onClick:te=>{te.stopPropagation(),r(J.id,J.quantity+1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),f.jsx("button",{onClick:te=>{te.stopPropagation(),s(J.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:""})]})},J.id))}),f.jsxs("div",{className:"border-t pt-4 mt-4",children:[f.jsxs("p",{className:`text-base md:text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Subtotal: $",o().toFixed(2)]}),f.jsx("button",{onClick:J=>{J.stopPropagation(),M(!1),F("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4 text-sm md:text-base",children:"Go to Cart"}),f.jsx("button",{onClick:J=>{J.stopPropagation(),M(!1),F("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2 text-sm md:text-base",children:"Proceed to Checkout"})]})]})]})})]})]})}function j7(){const{id:t}=Wu(),{isDarkMode:e}=A.useContext(Ze),{addToCart:n}=km(),[r,s]=A.useState(null),[o,l]=A.useState(!0),[c,u]=A.useState([]),[h,g]=A.useState(0),[y,v]=A.useState(0),[b,k]=A.useState(""),[D,P]=A.useState(null),O=Qt();A.useEffect(()=>{const B=ds.onAuthStateChanged(G=>{P(G)});return()=>B()},[]),A.useEffect(()=>{(async()=>{try{l(!0);const G=Qn(dt,"products",t),I=await nd(G);I.exists()?s({id:I.id,...I.data()}):(console.error("Product not found"),O("/products"));const S=jt(dt,"products",t,"reviews"),R=(await $n(S)).docs.map(j=>({id:j.id,...j.data()}));if(u(R),R.length>0){const j=R.reduce((F,L)=>F+L.rating,0);g(j/R.length)}else g(0)}catch(G){console.error("Error fetching product or reviews:",G),O("/products")}finally{l(!1)}})()},[t,O]);const $=B=>{v(B)},M=B=>{v(B)},z=async B=>{if(B.preventDefault(),!D){alert("Please sign in to submit a review.");return}if(y<1||y>5){alert("Please select a rating between 1 and 5 stars.");return}if(!b.trim()){alert("Please enter a review comment.");return}try{const G={rating:y,comment:b,userId:D.uid,userEmail:D.email,timestamp:new Date().toISOString()},I=jt(dt,"products",t,"reviews");await Dl(I,G),u([...c,G]);const S=[...c,G].reduce((T,R)=>T+R.rating,0);g(S/(c.length+1)),v(0),k("")}catch(G){console.error("Error submitting review:",G),alert("Failed to submit review. Please try again.")}};return o?f.jsx("div",{className:"flex justify-center items-center h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):r?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("button",{onClick:()=>O("/products"),className:`mb-6 text-sm font-semibold transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-500":"text-red-600 hover:text-red-800"}`,children:" Back to Products"}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[f.jsx("div",{className:"md:w-1/2",children:f.jsx("img",{src:r.image,alt:r.name,className:"w-full h-96 object-cover rounded-md",onError:B=>{B.target.src="https://via.placeholder.com/300x200.png?text=No+Image",console.error(`Failed to load image for ${r.name}`)}})}),f.jsxs("div",{className:"md:w-1/2",children:[f.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:r.name}),f.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:r.description}),f.jsxs("p",{className:`text-xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["Price: $",r.price.toFixed(2)]}),f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(B=>f.jsx("svg",{className:`w-6 h-6 ${B<=Math.round(h)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},B))}),f.jsxs("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["(",h.toFixed(1)," from ",c.length," reviews)"]})]}),f.jsx("button",{onClick:()=>n(r),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Add to Cart"})]})]}),f.jsxs("div",{className:"mt-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:"Customer Reviews"}),f.jsxs("div",{className:`p-6 border rounded-md mb-8 ${e?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("h3",{className:`text-lg font-medium mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:"Write a Review"}),D?f.jsxs("form",{onSubmit:z,children:[f.jsx("div",{className:"flex mb-4",children:[1,2,3,4,5].map(B=>f.jsx("svg",{onMouseEnter:()=>$(B),onMouseLeave:()=>$(y),onClick:()=>M(B),className:`w-8 h-8 cursor-pointer ${B<=y?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},B))}),f.jsx("textarea",{value:b,onChange:B=>k(B.target.value),placeholder:"Write your review here...",className:`w-full p-3 border rounded-md focus:outline-none transition-all duration-300 ease-in-out mb-4 ${e?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`,rows:"4"}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Submit Review"})]}):f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["Please"," ",f.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"sign in"})," ","to write a review."]})]}),c.length===0?f.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:"No reviews yet. Be the first to review this product!"}):f.jsx("div",{className:"space-y-6",children:c.map(B=>f.jsxs("div",{className:`p-4 border rounded-md ${e?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(G=>f.jsx("svg",{className:`w-5 h-5 ${G<=B.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},G))}),f.jsx("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:new Date(B.timestamp).toLocaleDateString()})]}),f.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:B.comment}),f.jsxs("p",{className:`text-xs mt-2 transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"}`,children:["By: ",B.userEmail]})]},B.id))})]})]}):null}function D7(){const{isDarkMode:t}=A.useContext(Ze),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:s,getTotalPrice:o}=km(),[l,c]=A.useState(!1),[u,h]=A.useState({name:"",email:"",address:""}),g=Qt(),y=async v=>{if(v.preventDefault(),!u.name||!u.email||!u.address){alert("Please fill in all fields to proceed with checkout.");return}c(!0);try{const b={items:e,total:o(),customer:u,createdAt:new Date().toISOString(),status:"pending"};await Dl(jt(dt,"orders"),b),s(),alert("Order placed successfully! Thank you for your purchase."),g("/")}catch(b){console.error("Error placing order:",b),alert("Failed to place order. Please try again.")}finally{c(!1),h({name:"",email:"",address:""})}};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Your Cart"}),e.length===0?f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),f.jsx("button",{onClick:()=>g("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):f.jsxs("div",{className:"space-y-8",children:[f.jsx("div",{className:"space-y-4",children:e.map(v=>f.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:v.image,alt:v.name,className:"w-20 h-20 object-cover rounded-md",onError:b=>{b.target.src="https://via.placeholder.com/80"}}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:v.name}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",v.price.toFixed(2)]}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(v.price*v.quantity).toFixed(2)]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>n(v.id,v.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"-"}),f.jsx("span",{className:`text-lg ${t?"text-white":"text-red-600"}`,children:v.quantity}),f.jsx("button",{onClick:()=>n(v.id,v.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"+"})]}),f.jsx("button",{onClick:()=>r(v.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:l,children:"Remove"})]},v.id))}),f.jsxs("div",{className:`p-6 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-white":"text-red-600"}`,children:"Order Summary"}),f.jsxs("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:["Total: $",o().toFixed(2)]}),f.jsxs("form",{onSubmit:y,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Full Name"}),f.jsx("input",{type:"text",value:u.name,onChange:v=>h({...u,name:v.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:l})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Email"}),f.jsx("input",{type:"email",value:u.email,onChange:v=>h({...u,email:v.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:l})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Shipping Address"}),f.jsx("textarea",{value:u.address,onChange:v=>h({...u,address:v.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:l})]}),f.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${l?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:l,children:l?"Processing...":"Place Order"})]})]})]})]})}function O7(){const{isDarkMode:t}=A.useContext(Ze),{cart:e,updateQuantity:n,removeFromCart:r}=km(),s=Object.values(e).reduce((l,c)=>l+c.price*c.quantity,0),o=()=>{alert("Order placed successfully!"),Object.keys(e).forEach(l=>r(l))};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsxs("header",{className:"text-center mb-12",children:[f.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Checkout"}),f.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(e).length===0?f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),f.jsx(Dn,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([l,c])=>f.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[f.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:f.jsx("img",{src:c.image||"https://via.placeholder.com/80",alt:c.name,className:"w-full h-full object-cover rounded"})}),f.jsxs("div",{className:"flex-1 ml-4",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:c.name}),f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Color: ",c.color]}),f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Size: ",c.size]})]}),f.jsx("button",{onClick:()=>r(l),className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:""})]}),f.jsxs("div",{className:"flex items-center mt-2",children:[f.jsx("button",{onClick:()=>n(l,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),f.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${t?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:c.quantity}),f.jsx("button",{onClick:()=>n(l,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),f.jsx("div",{className:"text-right ml-4",children:c.originalPrice?f.jsxs("div",{children:[f.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["$",(c.originalPrice*c.quantity).toFixed(2)]}),f.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(c.price*c.quantity).toFixed(2)]})]}):f.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(c.price*c.quantity).toFixed(2)]})})]},l))}),f.jsxs("div",{className:"mt-12 text-right",children:[f.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Total: $",s.toFixed(2)]}),f.jsx(Dn,{onClick:o,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const oy=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):"," Stress: Elevates cortisol, disrupting gut flora and increasing permeability"," Glyphosate: Kills beneficial bacteria, feeds pathogenic ones"," Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections"," Seed Oils: Feed pathogenic bacteria, have a long half-life"," Refined Sugars: Feed harmful bacteria, promote dysbiosis"," Long-term Restrictive Diets: Reduce microbiome diversity"," Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
 Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
 Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
 Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesnt survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
 Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
 A nutrient-dense, diverse, unprocessed diet with prebiotics
 Healthy exercise, sleep, and an uplifting social life worth enjoying
 Sun exposure and skin contact with nature
 Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connectedgood gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function Uf({title:t,content:e,footer:n,className:r}){const{isDarkMode:s}=A.useContext(Ze);return f.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${s?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${r}`,children:[f.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:t}),e&&f.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:e}),n&&f.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:n})]})}function L7(){const{isDarkMode:t}=A.useContext(Ze);A.useEffect(()=>{});const e=oy.filter(r=>r.category==="Benefits"),n=oy.filter(r=>r.category!=="Benefits");return f.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("div",{className:"pt-16"}),f.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),f.jsxs("section",{className:"mb-8 flex-grow",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),f.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),f.jsxs("section",{className:"py-12 px-6 flex-grow",children:[f.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(r=>f.jsx(ot,{to:`/gut-health/${r.id}`,children:f.jsx(Uf,{title:r.title,content:r.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},r.id))})]}),f.jsxs("section",{className:"flex-grow",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:n.map(r=>f.jsx(ot,{to:`/gut-health/${r.id}`,children:f.jsx(Uf,{title:r.title,content:r.content,footer:`Category: ${r.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${t?"bg-stone-800":"bg-stone-50"}`})},r.id))})]})]})}function M7(){const{id:t}=Wu(),{isDarkMode:e}=A.useContext(Ze);Qt();const n=oy.find(r=>r.id.toString()===t);return n?f.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[f.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),f.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:["Category: ",n.category]}),Array.isArray(n.content)?f.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content.map((r,s)=>f.jsx("li",{className:"mb-2",children:r},s))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content}),f.jsx(Dn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):f.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[f.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),f.jsx(Dn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const V7=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function $7(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),r=l=>n([...e,l]),s=l=>n(e.filter(c=>c.id!==l)),o=e.reduce((l,c)=>l+c.price,0);return f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsx("h1",{className:`text-3xl font-bold mb-6 ${t?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Available Products"}),V7.map(l=>f.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${t?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[f.jsxs("div",{children:[f.jsx("h3",{className:`font-bold ${t?"text-gray-300":"text-gray-800"}`,children:l.name}),f.jsxs("p",{className:`${t?"text-green-400":"text-green-700"}`,children:["$",l.price]})]}),f.jsx(Dn,{onClick:()=>r(l),variant:"primary",children:"Add to Cart"})]},l.id))]}),f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Your Cart"}),e.length===0?f.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):f.jsxs(f.Fragment,{children:[e.map(l=>f.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${t?"border-gray-700":"border-gray-300"}`,children:[f.jsx("span",{className:`${t?"text-gray-300":"text-gray-800"}`,children:l.name}),f.jsxs("div",{children:[f.jsxs("span",{className:`mr-4 ${t?"text-green-400":"text-green-700"}`,children:["$",l.price]}),f.jsx("button",{onClick:()=>s(l.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},l.id)),f.jsxs("div",{className:`mt-4 font-bold ${t?"text-green-300":"text-green-800"}`,children:["Total: $",o.toFixed(2)]}),f.jsx(Dn,{className:"mt-4 w-full",variant:"primary",disabled:e.length===0,children:"Checkout"})]})]})]})]})}var F7={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function U7(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return F7[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function wS(t){var e=U7(t);return"".concat(e.value).concat(e.unit)}var B7=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var s=document.createElement("style");document.head.appendChild(s);var o=s.sheet,l=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return o&&o.insertRule(l,0),r},Bf=function(){return Bf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Bf.apply(this,arguments)},z7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n},W7=B7("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function Bu(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,s=r===void 0?"#000000":r,o=t.speedMultiplier,l=o===void 0?1:o,c=t.cssOverride,u=c===void 0?{}:c,h=t.size,g=h===void 0?35:h,y=z7(t,["loading","color","speedMultiplier","cssOverride","size"]),v=Bf({background:"transparent !important",width:wS(g),height:wS(g),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(W7," ").concat(.75/l,"s 0s infinite linear"),animationFillMode:"both"},u);return n?A.createElement("span",Bf({style:v},y)):null}const H7=()=>{const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState(!0),[o,l]=A.useState(null);A.useEffect(()=>{(async()=>{try{const b=jt(dt,"content","blog","posts"),D=(await $n(b)).docs.map(P=>{var O,$;return{id:P.id,title:P.data().title,blocks:P.data().blocks||[{type:"paragraph",content:""}],date:P.data().date||"",lastEdited:P.data().lastEdited||"",image:(($=(O=P.data().blocks)==null?void 0:O.find(M=>M.type==="image"))==null?void 0:$.content)||""}});if(console.log("Fetched blog posts:",D),D.length>0){const P=D.sort((O,$)=>{const M=O.date?new Date(O.date):null,z=$.date?new Date($.date):null;return console.log(`Sorting: ${O.title} (${O.date}) -> ${M}, ${$.title} (${$.date}) -> ${z}`),!M||isNaN(M.getTime())?1:!z||isNaN(z.getTime())?-1:z-M});console.log("Sorted blog posts:",P),n(P)}else n([])}catch(b){console.error("Error fetching blog posts:",b),l("Failed to load blog posts. Please try again later."),n([])}finally{s(!1)}})()},[]);const c=v=>{if(!v)return"Date not set";const b=new Date(v);return isNaN(b.getTime())?"Invalid Date":b.toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"})},u=v=>{if(!v)return"Never edited";const b=new Date(v);return isNaN(b.getTime())?"Invalid Timestamp":b.toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},h=v=>{if(!v.blocks||v.blocks.length===0)return"Read more...";const b=v.blocks.find(k=>k.type==="paragraph"||k.type==="list"||k.type==="bullet");return b?b.type==="paragraph"?b.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(b.content)?b.content[0]+(b.content.length>1?"...":""):"Read more...":"Read more..."},g=v=>{if(!v.date)return!1;const b=new Date("2025-04-16T00:00:00Z"),k=new Date(v.date);return isNaN(k.getTime())?!1:k>b},y={hidden:{opacity:0,y:20},visible:v=>({opacity:1,y:0,transition:{delay:v*.1,duration:.5,ease:"easeOut"}})};return r?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),f.jsx("div",{className:"text-center",children:f.jsx(Bu,{color:t?"#f87171":"#b91c1c"})})]}):o?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:o})]}):f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.length===0?f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:f.jsx(T0,{children:e.map((v,b)=>{const k=g(v);return f.jsx(vf.div,{custom:b,initial:"hidden",animate:"visible",variants:y,className:"group",children:k?f.jsx(Uf,{title:f.jsxs("span",{className:"flex items-center",children:[f.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-700"} group-hover:underline`,children:v.title}),f.jsx("span",{className:`ml-2 text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:"(Coming Soon)"})]}),footer:f.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[f.jsxs("p",{children:["Publish Date: ",c(v.date)]}),f.jsxs("p",{children:["Last Edited: ",u(v.lastEdited)]})]}),content:f.jsxs(f.Fragment,{children:[v.image&&f.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:f.jsx("img",{src:v.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out"})}),f.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(v)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 opacity-50":"bg-white border-red-800/50 opacity-50"} cursor-not-allowed overflow-hidden`}):f.jsx(ot,{to:`/blog/${v.id}`,className:"block",children:f.jsx(Uf,{title:f.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-200":"text-stone-800"} group-hover:underline`,children:v.title}),footer:f.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[f.jsxs("p",{children:["Published: ",c(v.date)]}),f.jsxs("p",{children:["Last Edited: ",u(v.lastEdited)]})]}),content:f.jsxs(f.Fragment,{children:[v.image&&f.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:f.jsx("img",{src:v.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"})}),f.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(v)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 hover:bg-stone-700 hover:shadow-xl":"bg-white border-red-800/50 hover:bg-stone-100 hover:shadow-xl"} overflow-hidden`})})},v.id)})})})]})},q7=()=>{const{id:t}=Wu(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0),[l,c]=A.useState(null),[u,h]=A.useState(!1);A.useEffect(()=>{(async()=>{try{o(!0),c(null);const k=Qn(dt,"content","blog","posts",t),D=await nd(k);if(D.exists()){const P={id:D.id,...D.data()},O=new Date("2025-04-16T00:00:00Z"),$=P.date?new Date(P.date):null;$&&$>O?h(!0):h(!1),r(P)}else r(null)}catch(k){console.error("Error fetching blog post:",k),c("Failed to load blog post. Please try again later.")}finally{o(!1)}})()},[t]);const g=b=>b?new Date(b).toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"}):"Date not set",y=b=>b?new Date(b).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",v={hidden:{opacity:0,y:20},visible:b=>({opacity:1,y:0,transition:{delay:b*.1,duration:.5,ease:"easeOut"}})};return s?f.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:f.jsx("div",{className:"text-center",children:f.jsx(Bu,{color:e?"#f87171":"b91c1c"})})}):l?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Error"}),f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-600"}`,children:l}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):n?u?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Coming Soon"}),f.jsxs("p",{className:`text-lg transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["This blog post will be available on ",g(n.date),"."]}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):f.jsx("div",{className:`min-h-screen container mx-auto px-4 sm:px-6 lg:px-8 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsxs("div",{className:`relative rounded-xl shadow-lg p-8 mb-12 overflow-hidden border-t-4 ${e?"bg-gradient-to-r from-stone-800 to-stone-700 border-red-400/50":"bg-gradient-to-r from-white to-stone-100 border-red-800/50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),f.jsxs("div",{className:`text-lg transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"} flex flex-col sm:flex-row sm:items-center sm:space-x-4`,children:[f.jsxs("p",{children:["Published: ",g(n.date)]}),f.jsxs("p",{children:["Last Edited: ",y(n.lastEdited)]})]})]}),f.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${e?"text-stone-200 prose-invert":"text-stone-700"}`,children:n.blocks&&n.blocks.length>0?n.blocks.map((b,k)=>f.jsx(vf.div,{custom:k,initial:"hidden",animate:"visible",variants:v,className:"mb-8",children:b.type==="paragraph"?f.jsx("p",{className:"leading-relaxed",children:b.content}):b.type==="list"&&Array.isArray(b.content)?f.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:b.content.map((D,P)=>f.jsx("li",{className:"leading-relaxed",children:D},P))}):b.type==="bullet"&&Array.isArray(b.content)?f.jsx("ul",{className:"list-disc pl-6 space-y-2",children:b.content.map((D,P)=>f.jsx("li",{className:"leading-relaxed",children:D},P))}):b.type==="image"&&b.content?f.jsx("div",{className:"my-6",children:f.jsx("img",{src:b.content,alt:"Blog content",className:"w-full max-w-lg mx-auto rounded-lg shadow-md"})}):b.type==="link"&&b.content.url?f.jsx(ot,{to:b.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:b.content.text||b.content.url}):f.jsx("p",{className:"text-red-500",children:"Invalid block format"})},k)):f.jsx("p",{children:"No content available."})}),f.jsxs(Dn,{to:"/blog",variant:"primary",className:"mt-12 inline-flex items-center px-6 py-3 rounded-lg shadow-md transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 hover:shadow-lg",children:[f.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Blog"]})]})}):f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},G7=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function K7(){const{isDarkMode:t}=A.useContext(Ze);return f.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[f.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${t?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),f.jsx("div",{className:"space-y-4",children:G7.map((e,n)=>f.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${t?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[f.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${t?"group-open:text-green-400":"group-open:text-green-600"}`,children:[e.question,f.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:""})]}),f.jsx("p",{className:"mt-2 text-gray-600",children:e.answer})]},n))})]})}class od{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const Q7=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},nn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Q7()},cx=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},J7=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=cx(t);nn.publicKey=n.publicKey,nn.blockHeadless=n.blockHeadless,nn.storageProvider=n.storageProvider,nn.blockList=n.blockList,nn.limitRate=n.limitRate,nn.origin=n.origin||e},aI=async(t,e,n={})=>{const r=await fetch(nn.origin+t,{method:"POST",headers:n,body:e}),s=await r.text(),o=new od(r.status,s);if(r.ok)return o;throw o},lI=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Y7=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},cI=t=>t.webdriver||!t.languages||t.languages.length===0,uI=()=>new od(451,"Unavailable For Headless Browser"),X7=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Z7=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},ez=(t,e)=>t instanceof FormData?t.get(e):t[e],dI=(t,e)=>{if(Z7(t))return!1;X7(t.list,t.watchVariable);const n=ez(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},hI=()=>new od(403,"Forbidden"),tz=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},nz=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},fI=async(t,e,n)=>{if(!e.throttle||!n)return!1;tz(e.throttle,e.id);const r=e.id||t;return await nz(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},mI=()=>new od(429,"Too Many Requests"),rz=async(t,e,n,r)=>{const s=cx(r),o=s.publicKey||nn.publicKey,l=s.blockHeadless||nn.blockHeadless,c=s.storageProvider||nn.storageProvider,u={...nn.blockList,...s.blockList},h={...nn.limitRate,...s.limitRate};return l&&cI(navigator)?Promise.reject(uI()):(lI(o,t,e),Y7(n),n&&dI(u,n)?Promise.reject(hI()):await fI(location.pathname,h,c)?Promise.reject(mI()):aI("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},sz=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},iz=t=>typeof t=="string"?document.querySelector(t):t,oz=async(t,e,n,r)=>{const s=cx(r),o=s.publicKey||nn.publicKey,l=s.blockHeadless||nn.blockHeadless,c=nn.storageProvider||s.storageProvider,u={...nn.blockList,...s.blockList},h={...nn.limitRate,...s.limitRate};if(l&&cI(navigator))return Promise.reject(uI());const g=iz(n);lI(o,t,e),sz(g);const y=new FormData(g);return dI(u,y)?Promise.reject(hI()):await fI(location.pathname,h,c)?Promise.reject(mI()):(y.append("lib_version","4.4.1"),y.append("service_id",t),y.append("template_id",e),y.append("user_id",o),aI("/api/v1.0/email/send-form",y))},az={init:J7,send:rz,sendForm:oz,EmailJSResponseStatus:od};function lz(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState({name:"",email:"",message:""}),[r,s]=A.useState(""),o=c=>{const{name:u,value:h}=c.target;n(g=>({...g,[u]:h}))},l=c=>{c.preventDefault(),s("Sending..."),az.send("service_abc123","template_xyz789",{from_name:e.name,from_email:e.email,message:e.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(u=>{s("Thank you! Your inquiry has been sent."),n({name:"",email:"",message:""}),setTimeout(()=>s(""),3e3)},u=>{s("Failed to send message. Please try again."),console.error("EmailJS error:",u.text),setTimeout(()=>s(""),3e3)})};return f.jsx("div",{className:`min-h-screen py-12 px-4 ${t?"bg-stone-900":"bg-white"}`,children:f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Contact Us"}),f.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),f.jsxs("form",{onSubmit:l,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Message"}),f.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:o,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),r&&f.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:r})]})]})})}function cz(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState(""),[r,s]=A.useState(""),[o,l]=A.useState(!1),[c,u]=A.useState(null),h=Qt();A.useEffect(()=>{const v=xm(ds,b=>{l(!!b)});return()=>v()},[]);const g=async v=>{v.preventDefault(),u(null);try{await MU(ds,e,r),l(!0)}catch(b){u("Failed to log in: "+b.message)}},y=async()=>{try{await wm(ds),l(!1),h("/admin")}catch(v){u("Failed to log out: "+v.message)}};return o?f.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("button",{onClick:()=>h("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),f.jsx("button",{onClick:()=>h("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),f.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),f.jsx("button",{onClick:()=>h("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),f.jsx("button",{onClick:y,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):f.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:f.jsxs("div",{className:`p-6 ${t?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[f.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),c&&f.jsx("p",{className:`text-red-500 mb-4 ${t?"text-red-400":"text-red-600"}`,children:c}),f.jsxs("form",{onSubmit:g,children:[f.jsx("div",{className:"mb-4",children:f.jsx("input",{type:"email",value:e,onChange:v=>n(v.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),f.jsx("div",{className:"mb-4",children:f.jsx("input",{type:"password",value:r,onChange:v=>s(v.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function uz(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([""]),[r,s]=A.useState(""),[o,l]=A.useState([""]),[c,u]=A.useState([{title:"Main Workout",exercises:[""]}]),[h,g]=A.useState([]),[y,v]=A.useState(""),[b,k]=A.useState([""]),[D,P]=A.useState(null),O=Qt();A.useEffect(()=>{const Z=xm(ds,q=>{q||O("/admin")});return()=>Z()},[O]),A.useEffect(()=>{(async()=>{var q,re,ye,We,St,vr,qs,Gs;try{const Ks=Qn(dt,"content","home"),ms=await nd(Ks);if(ms.exists()){const wt=ms.data();n((q=wt.quotes)!=null&&q.length?wt.quotes:[""]),s(((re=wt.currentWorkout)==null?void 0:re.description)||""),l((We=(ye=wt.currentWorkout)==null?void 0:ye.warmup)!=null&&We.length?wt.currentWorkout.warmup:[""]),u((vr=(St=wt.currentWorkout)==null?void 0:St.sections)!=null&&vr.length?wt.currentWorkout.sections:[{title:"Main Workout",exercises:[""]}]),g((qs=wt.scheduledWorkouts)!=null&&qs.length?wt.scheduledWorkouts.map(on=>{var ps;const Qi=(ps=on.sections)!=null&&ps.length?on.sections:[{title:"Warm Up",exercises:on.warmup||[""]},{title:"Main Workout",exercises:on.main||[""]}];return{description:on.description||"",sections:Qi,updateDateTime:on.updateDateTime||""}}):[{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),v(wt.aboutUs||""),k((Gs=wt.dailyChallenges)!=null&&Gs.length?wt.dailyChallenges:[""])}}catch(Ks){P("Failed to load content: "+Ks.message)}})()},[]);const $=async()=>{P(null);const Z={quotes:e.filter(q=>q.trim()!==""),currentWorkout:{description:r,warmup:o.filter(q=>q.trim()!==""),sections:c.filter(q=>q.title.trim()&&q.exercises.some(re=>re.trim())).map(q=>({title:q.title,exercises:q.exercises.filter(re=>re.trim()!=="")}))},scheduledWorkouts:h.filter(q=>q.description.trim()&&q.sections.some(re=>re.title.trim()&&re.exercises.some(ye=>ye.trim()))&&q.updateDateTime.trim()).map(q=>({description:q.description,sections:q.sections.filter(re=>re.title.trim()&&re.exercises.some(ye=>ye.trim())).map(re=>({title:re.title,exercises:re.exercises.filter(ye=>ye.trim()!=="")})),updateDateTime:q.updateDateTime})),aboutUs:y.trim(),dailyChallenges:b.filter(q=>q.trim()!==""),lastUpdated:new Date().toISOString()};try{await jf(Qn(dt,"content","home"),Z),alert("Home page content saved successfully!"),O("/admin")}catch(q){P("Error saving changes: "+q.message)}},M=async()=>{try{await wm(ds),O("/admin")}catch(Z){P("Failed to log out: "+Z.message)}},z=()=>n([...e,""]),B=Z=>n(e.filter((q,re)=>re!==Z)),G=(Z,q)=>{const re=[...e];re[Z]=q,n(re)},I=()=>l([...o,""]),S=Z=>l(o.filter((q,re)=>re!==Z)),T=(Z,q)=>{const re=[...o];re[Z]=q,l(re)},R=()=>u([...c,{title:"",exercises:[""]}]),j=Z=>u(c.filter((q,re)=>re!==Z)),F=(Z,q)=>{const re=[...c];re[Z].title=q,u(re)},L=Z=>{const q=[...c];q[Z].exercises.push(""),u(q)},ge=(Z,q)=>{const re=[...c];re[Z].exercises=re[Z].exercises.filter((ye,We)=>We!==q),u(re)},$e=(Z,q,re)=>{const ye=[...c];ye[Z].exercises[q]=re,u(ye)},Ke=()=>g([...h,{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),be=Z=>g(h.filter((q,re)=>re!==Z)),ue=Z=>{if(!Z)return"";const q=new Date(Z);return new Date(q.getTime()-5*60*60*1e3).toISOString().slice(0,16)},J=(Z,q,re)=>{const ye=[...h];if(q==="updateDateTime"){const We=new Date(re),St=new Date(We.getTime()-5*60*60*1e3);ye[Z][q]=St.toISOString(),console.log(`Scheduled workout ${Z} updateDateTime set to (UTC): ${ye[Z][q]}`)}else ye[Z][q]=re;g(ye)},te=Z=>{const q=[...h];q[Z].sections.push({title:"",exercises:[""]}),g(q)},W=(Z,q)=>{const re=[...h];re[Z].sections=re[Z].sections.filter((ye,We)=>We!==q),g(re)},ne=(Z,q,re)=>{const ye=[...h];ye[Z].sections[q].title=re,g(ye)},fe=(Z,q)=>{const re=[...h];re[Z].sections[q].exercises.push(""),g(re)},Te=(Z,q,re)=>{const ye=[...h];ye[Z].sections[q].exercises=ye[Z].sections[q].exercises.filter((We,St)=>St!==re),g(ye)},je=(Z,q,re,ye)=>{const We=[...h];We[Z].sections[q].exercises[re]=ye,g(We)},ie=()=>k([...b,""]),oe=Z=>k(b.filter((q,re)=>re!==Z)),he=(Z,q)=>{const re=[...b];re[Z]=q,k(re)};return f.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),D&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:D}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),e.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>G(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${q+1}`}),f.jsx("button",{onClick:()=>B(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e.length===1,children:"Remove"})]},q)),f.jsx("button",{onClick:z,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),f.jsx("textarea",{value:y,onChange:Z=>v(Z.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),f.jsx("textarea",{value:r,onChange:Z=>s(Z.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),f.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),o.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>T(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${q+1}`}),f.jsx("button",{onClick:()=>S(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:o.length===1,children:"Remove"})]},`warmup-${q}`)),f.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),c.map((Z,q)=>f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("input",{type:"text",value:Z.title,onChange:re=>F(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),f.jsx("button",{onClick:()=>j(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:c.length===1,children:"Remove Section"})]}),Z.exercises.map((re,ye)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:re,onChange:We=>$e(q,ye,We.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${ye+1}`}),f.jsx("button",{onClick:()=>ge(q,ye),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Z.exercises.length===1,children:"Remove"})]},`section-${q}-exercise-${ye}`)),f.jsx("button",{onClick:()=>L(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`section-${q}`)),f.jsx("button",{onClick:R,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Workout Section"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),h.map((Z,q)=>f.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("input",{type:"datetime-local",value:ue(Z.updateDateTime),onChange:re=>J(q,"updateDateTime",re.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),f.jsx("textarea",{value:Z.description,onChange:re=>J(q,"description",re.target.value),className:`border p-2 w-full h-24 mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),Z.sections.map((re,ye)=>f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("input",{type:"text",value:re.title,onChange:We=>ne(q,ye,We.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),f.jsx("button",{onClick:()=>W(q,ye),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Z.sections.length===1,children:"Remove Section"})]}),re.exercises.map((We,St)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:We,onChange:vr=>je(q,ye,St,vr.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${St+1}`}),f.jsx("button",{onClick:()=>Te(q,ye,St),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:re.exercises.length===1,children:"Remove"})]},`scheduled-section-${q}-${ye}-exercise-${St}`)),f.jsx("button",{onClick:()=>fe(q,ye),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`scheduled-section-${q}-${ye}`)),f.jsx("button",{onClick:()=>te(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 mr-2",children:"Add Workout Section"}),f.jsx("button",{onClick:()=>be(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:h.length===1&&!h[0].description,children:"Remove Workout"})]},q)),f.jsx("button",{onClick:Ke,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),b.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>he(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${q+1}`}),f.jsx("button",{onClick:()=>oe(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:b.length===1,children:"Remove"})]},q)),f.jsx("button",{onClick:ie,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),f.jsx("button",{onClick:$,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),f.jsx("button",{onClick:()=>O("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:M,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function dz(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState(null),[o,l]=A.useState(null),c=Qt();A.useEffect(()=>{const I=xm(ds,S=>{S||c("/admin")});return()=>I()},[c]),A.useEffect(()=>{(async()=>{try{const S=jt(dt,"content","blog","posts"),j=(await $n(S)).docs.map(F=>({id:F.id,title:F.data().title||"",blocks:F.data().blocks||[{type:"paragraph",content:""}],date:F.data().date||"",lastEdited:F.data().lastEdited||""})).sort((F,L)=>{const ge=F.date?new Date(F.date):new Date(0);return(L.date?new Date(L.date):new Date(0))-ge});n(j.length?j:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:""}])}catch(S){l("Failed to load blog posts: "+S.message)}})()},[]);const u=async()=>{l(null);try{const I=jt(dt,"content","blog","posts"),S=await $n(I);for(const T of S.docs)await tf(T.ref);for(const T of e)if(T.title.trim()&&T.blocks.some(R=>R.type==="paragraph"||R.type==="image"||R.type==="link"?R.content.trim():R.content.some(j=>j.trim()))){const R=T.id||Date.now().toString();await jf(Qn(I,R),{id:R,title:T.title,blocks:T.blocks.map(j=>({type:j.type,content:j.type==="paragraph"||j.type==="image"?j.content:j.type==="link"?{url:j.content.url,text:j.content.text}:j.content.filter(F=>F.trim()!=="")})),date:T.date||new Date().toISOString(),lastEdited:T.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),s(null),c("/admin")}catch(I){l("Error saving blog posts: "+I.message)}},h=async()=>{try{await wm(ds),c("/admin")}catch(I){l("Failed to log out: "+I.message)}},g=()=>{const I=[...e,{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:new Date().toISOString()}];n(I),s(I.length-1)},y=I=>{const S=e.filter((T,R)=>R!==I);n(S),s(null)},v=(I,S,T)=>{const R=[...e];R[I]={...R[I],[S]:T,lastEdited:new Date().toISOString()},n(R)},b=(I,S)=>{const T=[...e];T[I].blocks.push({type:S,content:S==="paragraph"||S==="image"?"":S==="link"?{url:"",text:""}:[""]}),T[I].lastEdited=new Date().toISOString(),n(T)},k=(I,S)=>{const T=[...e];T[I].blocks=T[I].blocks.filter((R,j)=>j!==S),T[I].lastEdited=new Date().toISOString(),n(T)},D=(I,S,T)=>{const R=[...e];R[I].blocks[S]={type:T,content:T==="paragraph"||T==="image"?"":T==="link"?{url:"",text:""}:[""]},R[I].lastEdited=new Date().toISOString(),n(R)},P=(I,S,T)=>{const R=[...e];R[I].blocks[S].content=T,R[I].lastEdited=new Date().toISOString(),n(R)},O=(I,S,T,R)=>{const j=[...e];j[I].blocks[S].content[T]=R,j[I].lastEdited=new Date().toISOString(),n(j)},$=(I,S)=>{const T=[...e];T[I].blocks[S].content.push(""),T[I].lastEdited=new Date().toISOString(),n(T)},M=(I,S,T)=>{const R=[...e];R[I].blocks[S].content=R[I].blocks[S].content.filter((j,F)=>F!==T),R[I].lastEdited=new Date().toISOString(),n(R)},z=(I,S,T,R)=>{const j=[...e];j[I].blocks[S].content[T]=R,j[I].lastEdited=new Date().toISOString(),n(j)},B=I=>I?new Date(I).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",G=I=>I?new Date(I).toLocaleDateString():"Not set";return f.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),o&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:o}),r===null?f.jsxs("div",{className:"mb-6",children:[e.length===0?f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):f.jsx("div",{className:"grid gap-4",children:e.map((I,S)=>f.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>s(S),children:[f.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:I.title||"Untitled Post"}),f.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Publish Date: ",G(I.date)]}),f.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",B(I.lastEdited)]})]},S))}),f.jsx("button",{onClick:g,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),f.jsx("button",{onClick:()=>c("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("input",{type:"text",value:e[r].title,onChange:I=>v(r,"title",I.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Publish Date:"}),f.jsx("input",{type:"date",value:e[r].date.split("T")[0]||"",onChange:I=>v(r,"date",I.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`})]}),f.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",B(e[r].lastEdited)]}),f.jsxs("div",{className:"mb-2",children:[f.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Content Blocks"}),e[r].blocks.map((I,S)=>f.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Block Type:"}),f.jsxs("select",{value:I.type,onChange:T=>D(r,S,T.target.value),className:`border p-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[f.jsx("option",{value:"paragraph",children:"Paragraph"}),f.jsx("option",{value:"list",children:"Numbered List"}),f.jsx("option",{value:"bullet",children:"Bullet Points"}),f.jsx("option",{value:"image",children:"Image"}),f.jsx("option",{value:"link",children:"Link"})]}),f.jsx("button",{onClick:()=>k(r,S),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks.length===1,children:"Remove Block"})]}),I.type==="paragraph"?f.jsx("textarea",{value:I.content,onChange:T=>P(r,S,T.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):I.type==="image"?f.jsxs("div",{className:"space-y-2",children:[f.jsx("input",{type:"text",value:I.content,onChange:T=>P(r,S,T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),I.content&&f.jsx("img",{src:I.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):I.type==="link"?f.jsxs("div",{className:"space-y-2",children:[f.jsx("input",{type:"text",value:I.content.url,onChange:T=>O(r,S,"url",T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),f.jsx("input",{type:"text",value:I.content.text,onChange:T=>O(r,S,"text",T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):f.jsxs("div",{children:[I.content.map((T,R)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:T,onChange:j=>z(r,S,R,j.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${R+1}`}),f.jsx("button",{onClick:()=>M(r,S,R),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks[S].content.length===1,children:"Remove"})]},R)),f.jsx("button",{onClick:()=>$(r,S),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},S)),f.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[f.jsx("button",{onClick:()=>b(r,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),f.jsx("button",{onClick:()=>b(r,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),f.jsx("button",{onClick:()=>b(r,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),f.jsx("button",{onClick:()=>b(r,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 easement-in-out",children:"Add Image"}),f.jsx("button",{onClick:()=>b(r,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),f.jsx("button",{onClick:()=>y(r),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:e.length===1,children:"Remove Post"}),f.jsx("button",{onClick:()=>s(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),f.jsx("button",{onClick:u,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),f.jsx("button",{onClick:()=>c("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function hz(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState([]),[o,l]=A.useState(""),[c,u]=A.useState({categoryId:"",name:"",price:"",description:"",image:null}),[h,g]=A.useState(null),[y,v]=A.useState(null),[b,k]=A.useState(null),D=Qt();A.useEffect(()=>{const T=xm(ds,R=>{R||D("/admin")});return()=>T()},[D]),A.useEffect(()=>{(async()=>{try{const j=(await $n(jt(dt,"categories"))).docs.map(ge=>({id:ge.id,...ge.data()}));n(j);const L=(await $n(jt(dt,"products"))).docs.map(ge=>({id:ge.id,...ge.data()}));s(L)}catch(R){k("Error fetching data from Firestore: "+R.message)}})()},[]);const P=async T=>{if(T.preventDefault(),!!o)try{const R=await Dl(jt(dt,"categories"),{name:o});n([...e,{id:R.id,name:o}]),l("")}catch(R){k("Error adding category: "+R.message)}},O=async T=>{try{const R=Qn(dt,"categories",T.id);await VT(R,{name:T.name}),n(e.map(j=>j.id===T.id?{...j,name:T.name}:j)),g(null)}catch(R){k("Error updating category: "+R.message)}},$=async T=>{try{await tf(Qn(dt,"categories",T)),n(e.filter(j=>j.id!==T));const R=r.filter(j=>j.categoryId===T);for(const j of R){if(j.image&&j.image!=="https://via.placeholder.com/80"){const F=j.image.split("/products%2F")[1].split("?")[0],L=Wg(Kg,`products/${decodeURIComponent(F)}`);await uS(L).catch(ge=>{k(`Error deleting image for product ${j.id}: `+ge.message)})}await tf(Qn(dt,"products",j.id))}s(r.filter(j=>j.categoryId!==T))}catch(R){k("Error deleting category: "+R.message)}},M=async T=>{if(!T)return null;const R=Wg(Kg,`products/${T.name}`);return await oB(R,T),await aB(R)},z=T=>T.categoryId?T.name.trim()?T.description.trim()?!T.price||isNaN(T.price)||Number(T.price)<=0?"A valid price is required.":T.image?"":"An image is required.":"Description is required.":"Name is required.":"Category is required.",B=async T=>{T.preventDefault();const R=z(c);if(R){k(R);return}try{const j=await M(c.image),F=await Dl(jt(dt,"products"),{categoryId:c.categoryId,name:c.name,price:parseFloat(c.price),description:c.description,image:j||"https://via.placeholder.com/80"});s([...r,{id:F.id,categoryId:c.categoryId,name:c.name,price:parseFloat(c.price),description:c.description,image:j||"https://via.placeholder.com/80"}]),u({categoryId:"",name:"",price:"",description:"",image:null}),k(null)}catch(j){k("Error adding product: "+j.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},G=async T=>{const R=z(T);if(R){k(R);return}try{const j=T.image instanceof File?await M(T.image):T.image,F=Qn(dt,"products",T.id);await VT(F,{categoryId:T.categoryId,name:T.name,price:parseFloat(T.price),description:T.description,image:j||"https://via.placeholder.com/80"}),s(r.map(L=>L.id===T.id?{...L,categoryId:T.categoryId,name:T.name,price:parseFloat(T.price),description:T.description,image:j||"https://via.placeholder.com/80"}:L)),v(null),k(null)}catch(j){k("Error updating product: "+j.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},I=async T=>{try{const R=r.find(j=>j.id===T);if(R.image&&R.image!=="https://via.placeholder.com/80"){const j=R.image.split("/products%2F")[1].split("?")[0],F=Wg(Kg,`products/${decodeURIComponent(j)}`);await uS(F).catch(L=>{k(`Error deleting image for product ${T}: `+L.message)})}await tf(Qn(dt,"products",T)),s(r.filter(j=>j.id!==T)),k(null)}catch(R){k("Error deleting product: "+R.message)}},S=async()=>{try{await wm(ds),D("/admin")}catch(T){k("Failed to log out: "+T.message)}};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),b&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:b}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Category"}),f.jsxs("form",{onSubmit:P,className:"flex gap-4",children:[f.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Categories"}),f.jsx("div",{className:"space-y-4",children:e.map(T=>f.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(h==null?void 0:h.id)===T.id?f.jsxs("div",{className:"flex gap-4",children:[f.jsx("input",{type:"text",value:h.name,onChange:R=>g({...h,name:R.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),f.jsx("button",{onClick:()=>O(h),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),f.jsx("button",{onClick:()=>g(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:T.name}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>g(T),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),f.jsx("button",{onClick:()=>$(T.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},T.id))})]}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Product"}),f.jsxs("form",{onSubmit:B,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),f.jsxs("select",{value:c.categoryId,onChange:T=>u({...c,categoryId:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[f.jsx("option",{value:"",children:"Select a category"}),e.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",value:c.name,onChange:T=>u({...c,name:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),f.jsx("input",{type:"number",step:"0.01",value:c.price,onChange:T=>u({...c,price:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),f.jsx("textarea",{value:c.description,onChange:T=>u({...c,description:T.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),f.jsx("input",{type:"file",accept:"image/*",onChange:T=>u({...c,image:T.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Products"}),f.jsx("div",{className:"space-y-4",children:r.map(T=>{var R;return f.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(y==null?void 0:y.id)===T.id?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),f.jsxs("select",{value:y.categoryId,onChange:j=>v({...y,categoryId:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[f.jsx("option",{value:"",children:"Select a category"}),e.map(j=>f.jsx("option",{value:j.id,children:j.name},j.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",value:y.name,onChange:j=>v({...y,name:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),f.jsx("input",{type:"number",step:"0.01",value:y.price,onChange:j=>v({...y,price:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),f.jsx("textarea",{value:y.description,onChange:j=>v({...y,description:j.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),f.jsx("input",{type:"file",accept:"image/*",onChange:j=>v({...y,image:j.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),y.image&&typeof y.image=="string"&&f.jsx("img",{src:y.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>G(y),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),f.jsx("button",{onClick:()=>v(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[T.image&&T.image!=="https://via.placeholder.com/80"&&f.jsx("img",{src:T.image,alt:T.name,className:"w-16 h-16 object-cover rounded-md"}),f.jsxs("div",{children:[f.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:T.name}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((R=e.find(j=>j.id===T.categoryId))==null?void 0:R.name)||"Unknown"]}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",T.price.toFixed(2)]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>v(T),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),f.jsx("button",{onClick:()=>I(T.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},T.id)})})]}),f.jsxs("div",{className:"mt-6 flex gap-4",children:[f.jsx("button",{onClick:()=>D("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:S,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const fz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),n=()=>{t("/fitness-tracker/create-custom-plan")};return f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),f.jsx("div",{className:"text-center",children:f.jsx("button",{onClick:n,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),f.jsxs("div",{className:"flex justify-center space-x-4",children:[f.jsx(ot,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),f.jsx(ot,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},mz=()=>{const{id:t}=Wu(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0);A.useEffect(()=>{(async()=>{const h=Wo(),g=await nd(Qn(h,"customPlans",t));g.exists()&&r({id:g.id,...g.data()}),o(!1)})()},[t]);const l=u=>{if(!(n!=null&&n.startDate))return"";const h=new Date(n.startDate);return h.setDate(h.getDate()+u*7),h.toLocaleDateString()},c=(u,h)=>{if(!(n!=null&&n.startDate))return"";const g=new Date(n.startDate);return g.setDate(g.getDate()+u*7+h),g.toLocaleDateString()};return s?f.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsx("p",{className:"text-xl",children:"Loading..."})}):n?f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:n.name}),f.jsx("div",{className:"max-w-4xl mx-auto",children:n.weeks.map((u,h)=>f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:["Week ",u.week," (",l(h),")"]}),u.days.map((g,y)=>f.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[g.day," (",c(h,y),")"]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h4",{className:`font-semibold mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),f.jsx("ul",{className:"list-disc pl-5",children:g.workouts.map((v,b)=>f.jsxs("li",{children:[v.name,": ",v.sets," sets x ",v.reps," ","reps"]},b))})]})]},y))]},h))})]})}):f.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsx("p",{className:"text-xl",children:"Plan not found."})})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},u)=>A.createElement("svg",{ref:u,...gz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:pI("lucide",s),...c},[...l.map(([h,g])=>A.createElement(h,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=(t,e)=>{const n=A.forwardRef(({className:r,...s},o)=>A.createElement(yz,{ref:o,iconNode:e,className:pI(`lucide-${pz(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ux=Xl("ChevronDown",vz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dx=Xl("ChevronUp",xz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_l=Xl("CircleCheckBig",wz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bl=Xl("CircleX",_z);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ez=Xl("SquarePen",bz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Sz=Xl("Trash2",Tz),kz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(""),[s,o]=A.useState(new Date().toISOString().split("T")[0]),[l,c]=A.useState([]),[u,h]=A.useState({}),[g,y]=A.useState(Array.from({length:6},(z,B)=>({week:B+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[v,b]=A.useState(Array(6).fill(!1));A.useEffect(()=>{(async()=>{const B=Wo(),I=(await $n(jt(B,"workouts"))).docs.map(T=>({id:T.id,...T.data()})),S=I.reduce((T,R)=>{const j=R.muscleGroup||"Other";return T[j]||(T[j]=[]),T[j].push(R),T},{});c(I),h(S)})()},[]);const k=z=>{const B=[...v];B[z]=!B[z],b(B)},D=(z,B)=>{var I;const G=[...g];G[z].days[B].workouts.push({name:((I=l[0])==null?void 0:I.name)||"",sets:3,reps:10}),y(G)},P=(z,B,G,I,S)=>{const T=[...g];T[z].days[B].workouts[G][I]=S,y(T)},O=async z=>{z.preventDefault();const B=Wo(),G={userId:"anonymous",name:n,startDate:new Date(s).toISOString(),weeks:g},I=await Dl(jt(B,"customPlans"),G);t(`/fitness-tracker/plan/${I.id}`)},$=z=>{const B=new Date(s);return B.setDate(B.getDate()+z*7),B.toLocaleDateString()},M=(z,B)=>{const G=new Date(s);return G.setDate(G.getDate()+z*7+B),G.toLocaleDateString()};return f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),f.jsxs("form",{onSubmit:O,children:[f.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Plan Name"}),f.jsx("input",{type:"text",value:n,onChange:z=>r(z.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Start Date"}),f.jsx("input",{type:"date",value:s,onChange:z=>o(z.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((z,B)=>f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>k(B),children:[f.jsxs("h2",{className:`text-2xl font-semibold ${e?"text-red-400":"text-red-800"}`,children:["Week ",z.week," (",$(B),")"]}),v[B]?f.jsx(dx,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`}):f.jsx(ux,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`})]}),v[B]&&f.jsx("div",{className:"mt-4",children:z.days.map((G,I)=>f.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[G.day," (",M(B,I),")"]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("h4",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),G.workouts.length>0?G.workouts.map((S,T)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:S.name,onChange:R=>P(B,I,T,"name",R.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(u).map(R=>f.jsx("optgroup",{label:R,children:u[R].map(j=>f.jsx("option",{value:j.name,children:j.name},j.id))},R))}),f.jsx("input",{type:"number",value:S.sets,onChange:R=>P(B,I,T,"sets",Number(R.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),f.jsx("input",{type:"text",value:S.reps,onChange:R=>P(B,I,T,"reps",R.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},T)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),f.jsx("button",{type:"button",onClick:()=>D(B,I),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},I))})]},B))}),f.jsx("div",{className:"mt-8 max-w-md mx-auto",children:f.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},Cz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),{user:n,loading:r}=A.useContext(Hs),[s,o]=A.useState([]),[l,c]=A.useState([]),[u,h]=A.useState([]),[g,y]=A.useState([]),[v,b]=A.useState(new Date().toISOString().split("T")[0]);A.useEffect(()=>{(async()=>{try{const I=Wo(),S=await $n(jt(I,"workouts")),T=await $n(jt(I,"foods")),R=S.docs.map(F=>({id:F.id,...F.data()})),j=T.docs.map(F=>({id:F.id,...F.data()}));console.log("Fetched workouts from 'workouts' collection:",R),console.log("Fetched meals from 'foods' collection:",j),o(R),c(j),R.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),j.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(I){console.error("Error fetching data:",I)}})()},[]);const k=l.reduce((G,I)=>{const S=I.category||"Misc";return G[S]||(G[S]=[]),G[S].push(I),G},{}),D=["Meat","Fruit","Vegetable","Starch","Misc"],P=()=>{if(s.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}h([...u,{name:s[0].name,sets:0,reps:0}])},O=(G,I,S)=>{const T=[...u];T[G][I]=I==="sets"||I==="reps"?Number(S):S,h(T)},$=()=>{if(l.length===0){alert("No meals available to add. Please add meals in Firestore.");return}y([...g,{name:l[0].name,quantity:1}])},M=(G,I,S)=>{const T=[...g];T[G][I]=I==="quantity"?Number(S):S,y(T)},z=G=>{const I=l.find(S=>S.name===G.name);return I?{protein:I.macros.protein*G.quantity,carbs:I.macros.carbs*G.quantity,fats:I.macros.fats*G.quantity}:{protein:0,carbs:0,fats:0}},B=async G=>{if(G.preventDefault(),!n){alert("Please log in to save a fitness log."),t("/login");return}const I=Wo(),S={userId:n.uid,date:new Date(v).toISOString(),workouts:u,meals:g.map(T=>({...T,macros:z(T)}))};await Dl(jt(I,"userLogs"),S),t("/fitness-tracker/history")};return r?f.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),f.jsxs("form",{onSubmit:B,className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Date"}),f.jsx("input",{type:"date",value:v,onChange:G=>b(G.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Workouts"}),s.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):u.length>0?u.map((G,I)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:G.name,onChange:S=>O(I,"name",S.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:s.map(S=>f.jsx("option",{value:S.name,children:S.name},S.id))}),f.jsx("input",{type:"number",value:G.sets,onChange:S=>O(I,"sets",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),f.jsx("input",{type:"number",value:G.reps,onChange:S=>O(I,"reps",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},I)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),f.jsx("button",{type:"button",onClick:P,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Meals"}),l.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):g.length>0?g.map((G,I)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:G.name,onChange:S=>M(I,"name",S.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:D.map(S=>k[S]&&f.jsx("optgroup",{label:S,children:k[S].map(T=>f.jsx("option",{value:T.name,children:T.name},T.id))},S))}),f.jsx("input",{type:"number",value:G.quantity,onChange:S=>M(I,"quantity",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},I)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),f.jsx("button",{type:"button",onClick:$,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),f.jsx("div",{className:"text-center",children:f.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},Az=()=>{const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]);return A.useEffect(()=>{(async()=>{const s=Wo(),l=(await $n(jt(s,"userLogs"))).docs.map(c=>({id:c.id,...c.data()}));n(l.sort((c,u)=>new Date(u.date)-new Date(c.date)))})()},[]),f.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Fitness History"}),f.jsx("div",{className:"max-w-2xl mx-auto",children:e.length>0?e.map(r=>f.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${t?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[f.jsx("h2",{className:`text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:new Date(r.date).toLocaleDateString()}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Workouts:"}),f.jsx("ul",{className:"list-disc pl-5",children:r.workouts.map((s,o)=>f.jsxs("li",{children:[s.name,": ",s.sets," sets x ",s.reps," ","reps"]},o))})]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Meals:"}),f.jsx("ul",{className:"list-disc pl-5",children:r.meals.map((s,o)=>f.jsxs("li",{children:[s.name," (",s.quantity,"g): Protein"," ",s.macros.protein.toFixed(1),"g, Carbs"," ",s.macros.carbs.toFixed(1),"g, Fats"," ",s.macros.fats.toFixed(1),"g"]},o))})]})]},r.id)):f.jsx("p",{className:`text-center text-lg ${t?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},Pz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),{user:n,loading:r}=A.useContext(Hs),[s,o]=A.useState(""),[l,c]=A.useState(new Date().toISOString().split("T")[0]),[u,h]=A.useState([]),[g,y]=A.useState([]),[v,b]=A.useState(!0),[k,D]=A.useState(!0),[P,O]=A.useState(null),[$,M]=A.useState(null),[z,B]=A.useState(Array.from({length:6},(ie,oe)=>({week:oe+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[G,I]=A.useState(Array(6).fill(!1)),[S,T]=A.useState(null);A.useEffect(()=>{(async()=>{try{b(!0),O(null);const{data:oe,error:he}=await Kn.from("foods").select("*");if(he)throw he;console.log("Fetched meals from Supabase 'foods' table:",oe),h(oe),oe.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(oe){console.error("Error fetching meals:",oe),O("Failed to load meals. Please try again later.")}finally{b(!1)}})()},[]),A.useEffect(()=>{(async()=>{if(n)try{D(!0),M(null);const{data:oe,error:he}=await Kn.from("nutrition_plans").select("*").eq("user_id",n.id);if(he)throw he;console.log("Fetched nutrition plans from Supabase:",oe),y(oe)}catch(oe){console.error("Error fetching nutrition plans:",oe),M("Failed to load your nutrition plans. Please try again later.")}finally{D(!1)}})()},[n]);const R=u.reduce((ie,oe)=>{const he=oe.category||"Misc";return ie[he]||(ie[he]=[]),ie[he].push(oe),ie},{}),j=["Meat","Fruit","Vegetable","Starch","Misc"],F=["Breakfast","Lunch","Dinner","Snacks"],L=ie=>{const oe=[...G];oe[ie]=!oe[ie],I(oe)},ge=(ie,oe)=>{if(u.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const he=[...z];he[ie].days[oe].meals.push({name:u[0].name,grams:u[0].portion||100,referencePortion:u[0].portion||100,macros:u[0].macros,mealTime:"Breakfast"}),B(he)},$e=(ie,oe,he,Z,q)=>{const re=[...z],ye=re[ie].days[oe].meals[he];if(Z==="name"){const We=u.find(St=>St.name===q);ye.name=q,ye.grams=We.portion||100,ye.referencePortion=We.portion||100,ye.macros=We.macros}else ye[Z]=Z==="grams"?Number(q):q;B(re)},Ke=(ie,oe,he,Z)=>{const q=[...z];q[ie].days[oe].macros[he]=Number(Z),B(q)},be=(ie,oe)=>{const he=[...z],Z=he[ie].days[oe],q={...Z.meals[Z.meals.length-1]};q.name&&(Z.loggedMeals[q.mealTime].push(q),Z.meals[Z.meals.length-1]={name:u[0].name,grams:u[0].portion||100,referencePortion:u[0].portion||100,macros:u[0].macros,mealTime:"Breakfast"},B(he))},ue=(ie,oe,he,Z,q)=>{T({weekIndex:ie,dayIndex:oe,mealTime:he,mealIndex:Z,meal:q})},J=()=>{if(!S)return;const{weekIndex:ie,dayIndex:oe,mealTime:he,mealIndex:Z,meal:q}=S,re=[...z];re[ie].days[oe].loggedMeals[he][Z]=q,B(re),T(null)},te=(ie,oe,he,Z)=>{const q=[...z];q[ie].days[oe].loggedMeals[he].splice(Z,1),B(q)},W=ie=>Object.values(ie).flat().reduce((he,Z)=>{const q=Z.grams/Z.referencePortion;return{protein:he.protein+Z.macros.protein*q,carbs:he.carbs+Z.macros.carbs*q,fats:he.fats+Z.macros.fats*q}},{protein:0,carbs:0,fats:0}),ne=(ie,oe)=>({protein:ie.protein>=oe.protein,carbs:ie.carbs>=oe.carbs,fats:ie.fats>=oe.fats}),fe=ie=>{const oe=new Date(l);return oe.setDate(oe.getDate()+ie*7),oe.toLocaleDateString()},Te=(ie,oe)=>{const he=new Date(l);return he.setDate(he.getDate()+ie*7+oe),he.toLocaleDateString()},je=async ie=>{if(ie.preventDefault(),!n){alert("Please log in to save a nutrition plan."),t("/login");return}try{const oe={user_id:n.id,name:s,start_date:new Date(l).toISOString().split("T")[0],weeks:JSON.stringify(z)},{data:he,error:Z}=await Kn.from("nutrition_plans").insert(oe).select();if(Z)throw Z;t(`/nutrition-plan/${he[0].id}`)}catch(oe){console.error("Error saving nutrition plan:",oe),alert("Failed to save nutrition plan. Please try again.")}};return r?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx(Bu,{color:e?"#f87171":"#b91c1c"})}):v||k?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx(Bu,{color:e?"#f87171":"#b91c1c"})}):P?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:P}):f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),$?f.jsx("div",{className:"text-center text-red-500 mb-12",children:$}):g.length>0?f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-3xl font-bold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(ie=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${e?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${e?"border-stone-700":"border-red-200"}`,onClick:()=>t(`/nutrition-plan/${ie.id}`),children:[f.jsx("h3",{className:`text-xl font-semibold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:ie.name}),f.jsxs("p",{className:`text-sm mt-2 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",ie.start_date]})]},ie.id))})]}):f.jsx("div",{className:"text-center text-lg mb-12",children:"No nutrition plans yet. Create one below!"}),f.jsxs("form",{onSubmit:je,children:[f.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"}`,children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),f.jsx("input",{type:"text",value:s,onChange:ie=>o(ie.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),f.jsx("input",{type:"date",value:l,onChange:ie=>c(ie.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:z.map((ie,oe)=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>L(oe),children:[f.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",ie.week," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",fe(oe),")"]})]}),G[oe]?f.jsx(dx,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):f.jsx(ux,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),G[oe]&&f.jsx("div",{className:"mt-6 space-y-6",children:ie.days.map((he,Z)=>f.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[he.day," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",Te(oe,Z),")"]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),f.jsx("input",{type:"number",value:he.macros.protein,onChange:q=>Ke(oe,Z,"protein",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),f.jsx("input",{type:"number",value:he.macros.carbs,onChange:q=>Ke(oe,Z,"carbs",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),f.jsx("input",{type:"number",value:he.macros.fats,onChange:q=>Ke(oe,Z,"fats",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),u.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):he.meals.length>0?he.meals.map((q,re)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[f.jsx("select",{value:q.name,onChange:ye=>$e(oe,Z,re,"name",ye.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:j.map(ye=>R[ye]&&f.jsx("optgroup",{label:ye,children:R[ye].map(We=>f.jsx("option",{value:We.name,children:We.name},We.id))},ye))}),f.jsx("input",{type:"number",value:q.grams,onChange:ye=>$e(oe,Z,re,"grams",ye.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),f.jsx("select",{value:q.mealTime,onChange:ye=>$e(oe,Z,re,"mealTime",ye.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(ye=>f.jsx("option",{value:ye,children:ye},ye))}),f.jsx("button",{type:"button",onClick:()=>be(oe,Z),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},re)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),f.jsx("button",{type:"button",onClick:()=>ge(oe,Z),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(he.loggedMeals).every(q=>he.loggedMeals[q].length===0)?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):F.map(q=>f.jsxs("div",{className:"mb-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:q}),he.loggedMeals[q].length>0?f.jsx("ul",{className:"space-y-2",children:he.loggedMeals[q].map((re,ye)=>f.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[f.jsxs("span",{className:"text-sm",children:[re.name,": ",re.grams,"g"]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{type:"button",onClick:()=>ue(oe,Z,q,ye,{...re}),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:f.jsx(Ez,{className:"w-5 h-5"})}),f.jsx("button",{type:"button",onClick:()=>te(oe,Z,q,ye),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:f.jsx(Sz,{className:"w-5 h-5"})})]})]},ye))}):f.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",q.toLowerCase()," logged."]})]},q)),f.jsxs("div",{className:"mt-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const q=W(he.loggedMeals),re=ne(q,he.macros);return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.protein/he.macros.protein*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.protein.toFixed(1),"g /"," ",he.macros.protein,"g"]}),re.protein?f.jsx(_l,{className:"w-5 h-5 text-green-500"}):f.jsx(bl,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.carbs/he.macros.carbs*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.carbs.toFixed(1),"g /"," ",he.macros.carbs,"g"]}),re.carbs?f.jsx(_l,{className:"w-5 h-5 text-green-500"}):f.jsx(bl,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.fats/he.macros.fats*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.fats.toFixed(1),"g /"," ",he.macros.fats,"g"]}),re.fats?f.jsx(_l,{className:"w-5 h-5 text-green-500"}):f.jsx(bl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},Z))})]},oe))}),f.jsx("div",{className:"mt-12 max-w-md mx-auto",children:f.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),S&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:f.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${e?"bg-stone-800":"bg-red-50"} border ${e?"border-stone-700":"border-red-200"}`,children:[f.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),f.jsx("select",{value:S.meal.name,onChange:ie=>{const oe=u.find(he=>he.name===ie.target.value);T({...S,meal:{...S.meal,name:ie.target.value,grams:oe.portion||100,referencePortion:oe.portion||100,macros:oe.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:j.map(ie=>R[ie]&&f.jsx("optgroup",{label:ie,children:R[ie].map(oe=>f.jsx("option",{value:oe.name,children:oe.name},oe.id))},ie))})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),f.jsx("input",{type:"number",value:S.meal.grams,onChange:ie=>T({...S,meal:{...S.meal,grams:Number(ie.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),f.jsx("select",{value:S.meal.mealTime,onChange:ie=>T({...S,meal:{...S.meal,mealTime:ie.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(ie=>f.jsx("option",{value:ie,children:ie},ie))})]}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsx("button",{type:"button",onClick:J,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),f.jsx("button",{type:"button",onClick:()=>T(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},Iz=()=>{const{id:t}=Wu(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0),[l,c]=A.useState(null),[u,h]=A.useState([]);A.useEffect(()=>{(async()=>{try{o(!0),c(null);const{data:O,error:$}=await Kn.from("nutrition_plans").select("*").eq("id",t).single();if($)throw $;const M=JSON.parse(O.weeks);r({...O,weeks:M}),h(Array(M.length).fill(!1))}catch(O){console.error("Error fetching nutrition plan:",O),c("Failed to load nutrition plan. Please try again later.")}finally{o(!1)}})()},[t]);const g=P=>{const O=[...u];O[P]=!O[P],h(O)},y=P=>Object.values(P).flat().reduce(($,M)=>{const z=M.grams/M.referencePortion;return{protein:$.protein+M.macros.protein*z,carbs:$.carbs+M.macros.carbs*z,fats:$.fats+M.macros.fats*z}},{protein:0,carbs:0,fats:0}),v=(P,O)=>({protein:P.protein>=O.protein,carbs:P.carbs>=O.carbs,fats:P.fats>=O.fats}),b=P=>{const O=new Date(n.start_date);return O.setDate(O.getDate()+P*7),O.toLocaleDateString()},k=(P,O)=>{const $=new Date(n.start_date);return $.setDate($.getDate()+P*7+O),$.toLocaleDateString()};if(s)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx(Bu,{color:e?"#f87171":"#b91c1c"})});if(l)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:l});if(!n)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Nutrition plan not found."});const D=["Breakfast","Lunch","Dinner","Snacks"];return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:n.name}),f.jsxs("p",{className:`text-center text-lg mb-10 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(n.start_date).toLocaleDateString()]}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:n.weeks.map((P,O)=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>g(O),children:[f.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",P.week," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",b(O),")"]})]}),u[O]?f.jsx(dx,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):f.jsx(ux,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),u[O]&&f.jsx("div",{className:"mt-6 space-y-6",children:P.days.map(($,M)=>f.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[$.day," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",k(O,M),")"]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[$.macros.protein,"g"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[$.macros.carbs,"g"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[$.macros.fats,"g"]})]})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys($.loggedMeals).every(z=>$.loggedMeals[z].length===0)?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):D.map(z=>f.jsxs("div",{className:"mb-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:z}),$.loggedMeals[z].length>0?f.jsx("ul",{className:"space-y-2",children:$.loggedMeals[z].map((B,G)=>f.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:f.jsxs("span",{className:"text-sm",children:[B.name,": ",B.grams,"g"]})},G))}):f.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",z.toLowerCase()," logged."]})]},z)),f.jsxs("div",{className:"mt-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const z=y($.loggedMeals),B=v(z,$.macros);return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(z.protein/$.macros.protein*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[z.protein.toFixed(1),"g /"," ",$.macros.protein,"g"]}),B.protein?f.jsx(_l,{className:"w-5 h-5 text-green-500"}):f.jsx(bl,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(z.carbs/$.macros.carbs*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[z.carbs.toFixed(1),"g /"," ",$.macros.carbs,"g"]}),B.carbs?f.jsx(_l,{className:"w-5 h-5 text-green-500"}):f.jsx(bl,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(z.fats/$.macros.fats*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[z.fats.toFixed(1),"g /"," ",$.macros.fats,"g"]}),B.fats?f.jsx(_l,{className:"w-5 h-5 text-green-500"}):f.jsx(bl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},M))})]},O))})]})},Rz=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(null),[l,c]=A.useState(!1),{login:u}=A.useContext(Hs),{isDarkMode:h}=A.useContext(Ze),g=Qt(),y=async v=>{var b,k;v.preventDefault(),o(null),c(!0);try{await u(t,n);const D=((k=(b=location.state)==null?void 0:b.from)==null?void 0:k.pathname)||"/profile";g(D,{replace:!0})}catch(D){o(D.message),console.error("Login error:",D.message)}finally{c(!1)}};return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${h?"text-red-400":"text-red-800"}`,children:"Login"}),f.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${h?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsxs("form",{onSubmit:y,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),f.jsx("input",{type:"email",value:t,onChange:v=>e(v.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),f.jsx("input",{type:"password",value:n,onChange:v=>r(v.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),s&&f.jsx("p",{className:`text-center text-sm mb-4 ${h?"text-red-400":"text-red-800"}`,children:s}),f.jsx("button",{type:"submit",disabled:l,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${h?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:l?f.jsxs(f.Fragment,{children:[f.jsx(o4,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx(ot,{to:"/forgot-password",className:`text-sm hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),f.jsx("div",{className:"mt-2 text-center",children:f.jsxs("p",{className:`text-sm ${h?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",f.jsx(ot,{to:"/signup",className:`hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},Nz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),{signup:n,user:r,loading:s}=A.useContext(Hs),[o,l]=A.useState(""),[c,u]=A.useState(""),[h,g]=A.useState(null),y=async v=>{v.preventDefault(),g(null);try{await n(o,c),t("/login")}catch(b){b.message.includes("User already exists")?g("Email already in use. A confirmation email has been resent."):b.message.includes("rate limit")?g("Too many signup attempts. Please wait and try again later."):g("An error occurred during signup. Please try again.")}};return s?f.jsx("div",{children:"Loading..."}):r?(t("/nutrition"),null):f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Sign Up"}),f.jsxs("form",{onSubmit:y,className:"max-w-md mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),f.jsx("input",{type:"email",value:o,onChange:v=>l(v.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),f.jsx("input",{type:"password",value:c,onChange:v=>u(v.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),h&&f.jsx("p",{className:`text-center text-sm mb-6 ${e?"text-red-400":"text-red-800"}`,children:h}),f.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Sign Up"})]}),f.jsxs("p",{className:`text-center mt-6 text-sm ${e?"text-stone-400":"text-stone-600"}`,children:["Already have an account?"," ",f.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"Log in"})]})]})},jz=()=>{var D,P,O;const{user:t,loading:e,refreshUser:n}=A.useContext(Hs),{isDarkMode:r}=A.useContext(Ze),s=Qt(),[o,l]=A.useState(((D=t==null?void 0:t.user_metadata)==null?void 0:D.displayName)||""),[c,u]=A.useState([]),[h,g]=A.useState(null),[y,v]=A.useState(null);if(A.useEffect(()=>{(async()=>{if(t)try{const{data:M,error:z}=await Kn.from("nutrition_plans").select("*").eq("user_id",t.id);if(z)throw z;u(M||[])}catch(M){console.error("Error fetching nutrition plans:",M.message)}})()},[t]),e)return f.jsx("div",{children:"Loading..."});if(!t)return s("/login"),null;const b=async $=>{$.preventDefault(),g(null),v(null);try{const{error:M}=await Kn.auth.updateUser({data:{displayName:o}});if(M)throw M;v("Profile updated successfully!"),await n()}catch(M){g("Failed to update profile. Please try again."),console.error("Update profile error:",M.message)}},k=(P=t==null?void 0:t.user_metadata)!=null&&P.displayName?t.user_metadata.displayName.charAt(0).toUpperCase()+t.user_metadata.displayName.slice(1):"User";return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${r?"text-red-400":"text-red-800"}`,children:[k," - Dashboard "]}),f.jsxs("p",{className:`text-center text-lg mb-10 ${r?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",k,"!"]}),f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Email:"})," ",t.email]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Username:"})," ",((O=t.user_metadata)==null?void 0:O.displayName)||"Not set"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(t.created_at).toLocaleDateString()]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(t.updated_at).toLocaleDateString()]}),t.user_metadata&&Object.keys(t.user_metadata).length>0?f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Additional Info:"}),f.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(t.user_metadata).map(([$,M])=>f.jsxs("li",{children:[$,": ",M]},$))})]}):f.jsx("p",{children:"No additional user metadata available."})]})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),c.length>0?f.jsx("ul",{className:"space-y-2",children:c.map($=>f.jsx("li",{children:f.jsx(Link,{to:`/nutrition-plan/${$.id}`,className:"hover:text-red-600 transition-colors duration-200",children:$.name||`Plan ${$.id}`})},$.id))}):f.jsx("p",{children:"No nutrition plans found."})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),f.jsxs("form",{onSubmit:b,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${r?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),f.jsx("input",{type:"text",value:o,onChange:$=>l($.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${r?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),h&&f.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-red-400":"text-red-800"}`,children:h}),y&&f.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-green-400":"text-green-600"}`,children:y}),f.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),f.jsx("button",{onClick:()=>s("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),f.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),f.jsx("button",{onClick:()=>s("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},Dz=()=>{const{user:t,loading:e}=A.useContext(Hs),n=zr();return e?f.jsx("div",{children:"Loading..."}):t?f.jsx(RS,{}):f.jsx(bN,{to:"/login",state:{from:n},replace:!0})},Oz=()=>(A.useEffect(()=>{(async()=>{try{const e=jt(dt,"content","blog","posts"),r=(await $n(e)).docs.map(h=>({id:h.id,date:h.data().date||new Date().toISOString()})),o=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  ${[{url:"https://yourdomain.com/",date:new Date().toISOString()},{url:"https://yourdomain.com/about",date:new Date().toISOString()},{url:"https://yourdomain.com/contact",date:new Date().toISOString()}].map(h=>`
  <url>
    <loc>${h.url}</loc>
    <lastmod>${h.date}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.8</priority>
  </url>`).join("")}
  ${r.map(h=>`
  <url>
    <loc>https://yourdomain.com/blog/${h.id}</loc>
    <lastmod>${new Date(h.date).toISOString()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.9</priority>
  </url>`).join("")}
</urlset>`,l=new Blob([o],{type:"application/xml"}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download="sitemap.xml",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c),console.log("Sitemap generated:",o)}catch(e){console.error("Error generating sitemap:",e)}})()},[]),f.jsx("div",{children:"Generating sitemap..."})),Ze=A.createContext();function Lz(){const[t,e]=A.useState(()=>{const s=localStorage.getItem("theme");return s?JSON.parse(s):!0});A.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(t))},[t]);const n=()=>e(s=>!s),r="/aussie-gut-pack/";return console.log("Basename:",r),f.jsx(zS,{children:f.jsx(R7,{children:f.jsx(qD,{children:f.jsx(Ze.Provider,{value:{isDarkMode:t,toggleTheme:n},children:f.jsx(KN,{basename:r,children:f.jsx(qf,{children:f.jsx(Hf,{classNames:"fade",timeout:300,children:f.jsx(TN,{children:f.jsxs(Ye,{path:"/",element:f.jsx(a4,{}),children:[f.jsx(Ye,{index:!0,element:f.jsx(I7,{})}),f.jsx(Ye,{path:"products",element:f.jsx(N7,{})}),f.jsx(Ye,{path:"cart",element:f.jsx(D7,{})}),f.jsx(Ye,{path:"checkout",element:f.jsx(O7,{})}),f.jsx(Ye,{path:"gut-health",element:f.jsx(L7,{})}),f.jsx(Ye,{path:"gut-health/:id",element:f.jsx(M7,{})}),f.jsx(Ye,{path:"purchase",element:f.jsx($7,{})}),f.jsx(Ye,{path:"blog",element:f.jsx(H7,{})}),f.jsx(Ye,{path:"blog/:id",element:f.jsx(q7,{})}),f.jsx(Ye,{path:"/sitemap.xml",element:f.jsx(Oz,{})}),f.jsx(Ye,{path:"faq",element:f.jsx(K7,{})}),f.jsx(Ye,{path:"contact",element:f.jsx(lz,{})}),f.jsx(Ye,{path:"admin",element:f.jsx(cz,{})}),f.jsx(Ye,{path:"admin/home",element:f.jsx(uz,{})}),f.jsx(Ye,{path:"admin/blog",element:f.jsx(dz,{})}),f.jsx(Ye,{path:"admin/products",element:f.jsx(hz,{})}),f.jsx(Ye,{path:"/shop/product/:id",element:f.jsx(j7,{})}),f.jsx(Ye,{path:"fitness-tracker",element:f.jsx(fz,{})}),f.jsx(Ye,{path:"fitness-tracker/plan/:id",element:f.jsx(mz,{})}),f.jsx(Ye,{path:"fitness-tracker/create-custom-plan",element:f.jsx(kz,{})}),f.jsx(Ye,{path:"fitness-tracker/log",element:f.jsx(Cz,{})}),f.jsx(Ye,{path:"fitness-tracker/history",element:f.jsx(Az,{})}),f.jsx(Ye,{path:"nutrition",element:f.jsx(Pz,{})}),f.jsx(Ye,{path:"nutrition-plan/:id",element:f.jsx(Iz,{})}),f.jsx(Ye,{path:"login",element:f.jsx(Rz,{})}),f.jsx(Ye,{path:"signup",element:f.jsx(Nz,{})}),f.jsx(Ye,{element:f.jsx(Dz,{}),children:f.jsx(Ye,{path:"profile",element:f.jsx(jz,{})})}),f.jsx(Ye,{path:"*",element:f.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})})}console.log("Main.jsx is running");IR.createRoot(document.getElementById("root")).render(f.jsx(nt.StrictMode,{children:f.jsx(Lz,{})}));export{Qo as g};
