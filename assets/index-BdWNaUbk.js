var mR=Object.defineProperty;var gR=(t,e,n)=>e in t?mR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Is=(t,e,n)=>gR(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Ko(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yR(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Ym={exports:{}},Fu={},Xm={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function vR(){if(p_)return Fe;p_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function P(z,ne,fe){this.props=z,this.context=ne,this.refs=O,this.updater=fe||b}P.prototype.isReactComponent={},P.prototype.setState=function(z,ne){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ne,"setState")},P.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function D(){}D.prototype=P.prototype;function V(z,ne,fe){this.props=z,this.context=ne,this.refs=O,this.updater=fe||b}var $=V.prototype=new D;$.constructor=V,k($,P.prototype),$.isPureReactComponent=!0;var W=Array.isArray,B=Object.prototype.hasOwnProperty,K={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(z,ne,fe){var Te,je={},ie=null,oe=null;if(ne!=null)for(Te in ne.ref!==void 0&&(oe=ne.ref),ne.key!==void 0&&(ie=""+ne.key),ne)B.call(ne,Te)&&!I.hasOwnProperty(Te)&&(je[Te]=ne[Te]);var he=arguments.length-2;if(he===1)je.children=fe;else if(1<he){for(var Z=Array(he),q=0;q<he;q++)Z[q]=arguments[q+2];je.children=Z}if(z&&z.defaultProps)for(Te in he=z.defaultProps,he)je[Te]===void 0&&(je[Te]=he[Te]);return{$$typeof:t,type:z,key:ie,ref:oe,props:je,_owner:K.current}}function T(z,ne){return{$$typeof:t,type:z.type,key:ne,ref:z.ref,props:z.props,_owner:z._owner}}function R(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function j(z){var ne={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(fe){return ne[fe]})}var F=/\/+/g;function L(z,ne){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):ne.toString(36)}function ge(z,ne,fe,Te,je){var ie=typeof z;(ie==="undefined"||ie==="boolean")&&(z=null);var oe=!1;if(z===null)oe=!0;else switch(ie){case"string":case"number":oe=!0;break;case"object":switch(z.$$typeof){case t:case e:oe=!0}}if(oe)return oe=z,je=je(oe),z=Te===""?"."+L(oe,0):Te,W(je)?(fe="",z!=null&&(fe=z.replace(F,"$&/")+"/"),ge(je,ne,fe,"",function(q){return q})):je!=null&&(R(je)&&(je=T(je,fe+(!je.key||oe&&oe.key===je.key?"":(""+je.key).replace(F,"$&/")+"/")+z)),ne.push(je)),1;if(oe=0,Te=Te===""?".":Te+":",W(z))for(var he=0;he<z.length;he++){ie=z[he];var Z=Te+L(ie,he);oe+=ge(ie,ne,fe,Z,je)}else if(Z=x(z),typeof Z=="function")for(z=Z.call(z),he=0;!(ie=z.next()).done;)ie=ie.value,Z=Te+L(ie,he++),oe+=ge(ie,ne,fe,Z,je);else if(ie==="object")throw ne=String(z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return oe}function $e(z,ne,fe){if(z==null)return z;var Te=[],je=0;return ge(z,Te,"","",function(ie){return ne.call(fe,ie,je++)}),Te}function Ge(z){if(z._status===-1){var ne=z._result;ne=ne(),ne.then(function(fe){(z._status===0||z._status===-1)&&(z._status=1,z._result=fe)},function(fe){(z._status===0||z._status===-1)&&(z._status=2,z._result=fe)}),z._status===-1&&(z._status=0,z._result=ne)}if(z._status===1)return z._result.default;throw z._result}var be={current:null},ce={transition:null},J={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ce,ReactCurrentOwner:K};function te(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:$e,forEach:function(z,ne,fe){$e(z,function(){ne.apply(this,arguments)},fe)},count:function(z){var ne=0;return $e(z,function(){ne++}),ne},toArray:function(z){return $e(z,function(ne){return ne})||[]},only:function(z){if(!R(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Fe.Component=P,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=V,Fe.StrictMode=r,Fe.Suspense=c,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Fe.act=te,Fe.cloneElement=function(z,ne,fe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Te=k({},z.props),je=z.key,ie=z.ref,oe=z._owner;if(ne!=null){if(ne.ref!==void 0&&(ie=ne.ref,oe=K.current),ne.key!==void 0&&(je=""+ne.key),z.type&&z.type.defaultProps)var he=z.type.defaultProps;for(Z in ne)B.call(ne,Z)&&!I.hasOwnProperty(Z)&&(Te[Z]=ne[Z]===void 0&&he!==void 0?he[Z]:ne[Z])}var Z=arguments.length-2;if(Z===1)Te.children=fe;else if(1<Z){he=Array(Z);for(var q=0;q<Z;q++)he[q]=arguments[q+2];Te.children=he}return{$$typeof:t,type:z.type,key:je,ref:ie,props:Te,_owner:oe}},Fe.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Fe.createElement=S,Fe.createFactory=function(z){var ne=S.bind(null,z);return ne.type=z,ne},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(z){return{$$typeof:u,render:z}},Fe.isValidElement=R,Fe.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:Ge}},Fe.memo=function(z,ne){return{$$typeof:h,type:z,compare:ne===void 0?null:ne}},Fe.startTransition=function(z){var ne=ce.transition;ce.transition={};try{z()}finally{ce.transition=ne}},Fe.unstable_act=te,Fe.useCallback=function(z,ne){return be.current.useCallback(z,ne)},Fe.useContext=function(z){return be.current.useContext(z)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(z){return be.current.useDeferredValue(z)},Fe.useEffect=function(z,ne){return be.current.useEffect(z,ne)},Fe.useId=function(){return be.current.useId()},Fe.useImperativeHandle=function(z,ne,fe){return be.current.useImperativeHandle(z,ne,fe)},Fe.useInsertionEffect=function(z,ne){return be.current.useInsertionEffect(z,ne)},Fe.useLayoutEffect=function(z,ne){return be.current.useLayoutEffect(z,ne)},Fe.useMemo=function(z,ne){return be.current.useMemo(z,ne)},Fe.useReducer=function(z,ne,fe){return be.current.useReducer(z,ne,fe)},Fe.useRef=function(z){return be.current.useRef(z)},Fe.useState=function(z){return be.current.useState(z)},Fe.useSyncExternalStore=function(z,ne,fe){return be.current.useSyncExternalStore(z,ne,fe)},Fe.useTransition=function(){return be.current.useTransition()},Fe.version="18.3.1",Fe}var m_;function sy(){return m_||(m_=1,Xm.exports=vR()),Xm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function xR(){if(g_)return Fu;g_=1;var t=sy(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,h){var g,v={},x=null,b=null;h!==void 0&&(x=""+h),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(b=c.ref);for(g in c)r.call(c,g)&&!o.hasOwnProperty(g)&&(v[g]=c[g]);if(u&&u.defaultProps)for(g in c=u.defaultProps,c)v[g]===void 0&&(v[g]=c[g]);return{$$typeof:e,type:u,key:x,ref:b,props:v,_owner:s.current}}return Fu.Fragment=n,Fu.jsx=l,Fu.jsxs=l,Fu}var y_;function wR(){return y_||(y_=1,Ym.exports=xR()),Ym.exports}var f=wR(),A=sy();const nt=Ko(A);var vh={},Zm={exports:{}},In={},eg={exports:{}},tg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function _R(){return v_||(v_=1,function(t){function e(ce,J){var te=ce.length;ce.push(J);e:for(;0<te;){var z=te-1>>>1,ne=ce[z];if(0<s(ne,J))ce[z]=J,ce[te]=ne,te=z;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var J=ce[0],te=ce.pop();if(te!==J){ce[0]=te;e:for(var z=0,ne=ce.length,fe=ne>>>1;z<fe;){var Te=2*(z+1)-1,je=ce[Te],ie=Te+1,oe=ce[ie];if(0>s(je,te))ie<ne&&0>s(oe,je)?(ce[z]=oe,ce[ie]=te,z=ie):(ce[z]=je,ce[Te]=te,z=Te);else if(ie<ne&&0>s(oe,te))ce[z]=oe,ce[ie]=te,z=ie;else break e}}return J}function s(ce,J){var te=ce.sortIndex-J.sortIndex;return te!==0?te:ce.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],h=[],g=1,v=null,x=3,b=!1,k=!1,O=!1,P=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(ce){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=ce)r(h),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(h)}}function W(ce){if(O=!1,$(ce),!k)if(n(c)!==null)k=!0,Ge(B);else{var J=n(h);J!==null&&be(W,J.startTime-ce)}}function B(ce,J){k=!1,O&&(O=!1,D(S),S=-1),b=!0;var te=x;try{for($(J),v=n(c);v!==null&&(!(v.expirationTime>J)||ce&&!j());){var z=v.callback;if(typeof z=="function"){v.callback=null,x=v.priorityLevel;var ne=z(v.expirationTime<=J);J=t.unstable_now(),typeof ne=="function"?v.callback=ne:v===n(c)&&r(c),$(J)}else r(c);v=n(c)}if(v!==null)var fe=!0;else{var Te=n(h);Te!==null&&be(W,Te.startTime-J),fe=!1}return fe}finally{v=null,x=te,b=!1}}var K=!1,I=null,S=-1,T=5,R=-1;function j(){return!(t.unstable_now()-R<T)}function F(){if(I!==null){var ce=t.unstable_now();R=ce;var J=!0;try{J=I(!0,ce)}finally{J?L():(K=!1,I=null)}}else K=!1}var L;if(typeof V=="function")L=function(){V(F)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,$e=ge.port2;ge.port1.onmessage=F,L=function(){$e.postMessage(null)}}else L=function(){P(F,0)};function Ge(ce){I=ce,K||(K=!0,L())}function be(ce,J){S=P(function(){ce(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,Ge(B))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(ce){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var te=x;x=J;try{return ce()}finally{x=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,J){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var te=x;x=ce;try{return J()}finally{x=te}},t.unstable_scheduleCallback=function(ce,J,te){var z=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?z+te:z):te=z,ce){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=te+ne,ce={id:g++,callback:J,priorityLevel:ce,startTime:te,expirationTime:ne,sortIndex:-1},te>z?(ce.sortIndex=te,e(h,ce),n(c)===null&&ce===n(h)&&(O?(D(S),S=-1):O=!0,be(W,te-z))):(ce.sortIndex=ne,e(c,ce),k||b||(k=!0,Ge(B))),ce},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(ce){var J=x;return function(){var te=x;x=J;try{return ce.apply(this,arguments)}finally{x=te}}}}(tg)),tg}var x_;function bR(){return x_||(x_=1,eg.exports=_R()),eg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function ER(){if(w_)return In;w_=1;var t=sy(),e=bR();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function x(i){return c.call(v,i)?!0:c.call(g,i)?!1:h.test(i)?v[i]=!0:(g[i]=!0,!1)}function b(i,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,a,d,m){if(a===null||typeof a>"u"||b(i,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function O(i,a,d,m,y,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new O(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];P[a]=new O(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new O(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new O(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new O(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new O(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new O(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new O(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new O(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(D,V);P[a]=new O(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(D,V);P[a]=new O(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(D,V);P[a]=new O(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new O(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new O(i,1,!1,i.toLowerCase(),null,!0,!0)});function $(i,a,d,m){var y=P.hasOwnProperty(a)?P[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,d,y,m)&&(d=null),m||y===null?x(a)&&(d===null?i.removeAttribute(a):i.setAttribute(a,""+d)):y.mustUseProperty?i[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,m=y.attributeNamespace,d===null?i.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,m?i.setAttributeNS(m,a,d):i.setAttribute(a,d))))}var W=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),K=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),j=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ce=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=ce&&i[ce]||i["@@iterator"],typeof i=="function"?i:null)}var te=Object.assign,z;function ne(i){if(z===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var fe=!1;function Te(i,a){if(!i||fe)return"";fe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var m=X}Reflect.construct(i,[],a)}else{try{a.call()}catch(X){m=X}i.call(a.prototype)}else{try{throw Error()}catch(X){m=X}i()}}catch(X){if(X&&m&&typeof X.stack=="string"){for(var y=X.stack.split(`
`),_=m.stack.split(`
`),C=y.length-1,M=_.length-1;1<=C&&0<=M&&y[C]!==_[M];)M--;for(;1<=C&&0<=M;C--,M--)if(y[C]!==_[M]){if(C!==1||M!==1)do if(C--,M--,0>M||y[C]!==_[M]){var U=`
`+y[C].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=C&&0<=M);break}}}finally{fe=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?ne(i):""}function je(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=Te(i.type,!1),i;case 11:return i=Te(i.type.render,!1),i;case 1:return i=Te(i.type,!0),i;default:return""}}function ie(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case K:return"Portal";case T:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case ge:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case $e:return a=i.displayName||null,a!==null?a:ie(i.type)||"Memo";case Ge:a=i._payload,i=i._init;try{return ie(i(a))}catch{}}return null}function oe(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(a);case 8:return a===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function he(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Z(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function q(i){var a=Z(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){m=""+C,_.call(this,C)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function re(i){i._valueTracker||(i._valueTracker=q(i))}function ye(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return i&&(m=Z(i)?i.checked?"true":"false":i.value),i=m,i!==d?(a.setValue(i),!0):!1}function We(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function St(i,a){var d=a.checked;return te({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function vr(i,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=he(a.value!=null?a.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ws(i,a){a=a.checked,a!=null&&$(i,"checked",a,!1)}function Hs(i,a){Ws(i,a);var d=he(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?fs(i,a.type,d):a.hasOwnProperty("defaultValue")&&fs(i,a.type,he(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function qs(i,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,d||a===i.value||(i.value=a),i.defaultValue=a}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function fs(i,a,d){(a!=="number"||We(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var wt=Array.isArray;function on(i,a,d,m){if(i=i.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<i.length;d++)y=a.hasOwnProperty("$"+i[d].value),i[d].selected!==y&&(i[d].selected=y),y&&m&&(i[d].defaultSelected=!0)}else{for(d=""+he(d),a=null,y=0;y<i.length;y++){if(i[y].value===d){i[y].selected=!0,m&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function Gi(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return te({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ps(i,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(wt(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}i._wrapperState={initialValue:he(d)}}function ra(i,a){var d=he(a.value),m=he(a.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),a.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function Ql(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Dt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ot(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Dt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ms,Jl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,y){MSApp.execUnsafeLocalFunction(function(){return i(a,d,m,y)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(ms=ms||document.createElement("div"),ms.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ms.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Ks(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ji=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(i){Ji.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Qi[a]=Qi[i]})});function Yl(i,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Qi.hasOwnProperty(i)&&Qi[i]?(""+a).trim():a+"px"}function Xl(i,a){i=i.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,y=Yl(d,a[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,y):i[d]=y}}var Zl=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eu(i,a){if(a){if(Zl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function tu(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yi=null;function sa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ia=null,Yn=null,Br=null;function oa(i){if(i=Su(i)){if(typeof ia!="function")throw Error(n(280));var a=i.stateNode;a&&(a=jd(a),ia(i.stateNode,i.type,a))}}function zr(i){Yn?Br?Br.push(i):Br=[i]:Yn=i}function nu(){if(Yn){var i=Yn,a=Br;if(Br=Yn=null,oa(i),a)for(i=0;i<a.length;i++)oa(a[i])}}function Xi(i,a){return i(a)}function ru(){}var gs=!1;function su(i,a,d){if(gs)return i(a,d);gs=!0;try{return Xi(i,a,d)}finally{gs=!1,(Yn!==null||Br!==null)&&(ru(),nu())}}function kt(i,a){var d=i.stateNode;if(d===null)return null;var m=jd(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var aa=!1;if(u)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){aa=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{aa=!1}function Zi(i,a,d,m,y,_,C,M,U){var X=Array.prototype.slice.call(arguments,3);try{a.apply(d,X)}catch(le){this.onError(le)}}var eo=!1,la=null,wr=!1,iu=null,Sp={onError:function(i){eo=!0,la=i}};function ua(i,a,d,m,y,_,C,M,U){eo=!1,la=null,Zi.apply(Sp,arguments)}function sd(i,a,d,m,y,_,C,M,U){if(ua.apply(this,arguments),eo){if(eo){var X=la;eo=!1,la=null}else throw Error(n(198));wr||(wr=!0,iu=X)}}function _r(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function to(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function br(i){if(_r(i)!==i)throw Error(n(188))}function id(i){var a=i.alternate;if(!a){if(a=_r(i),a===null)throw Error(n(188));return a!==i?null:i}for(var d=i,m=a;;){var y=d.return;if(y===null)break;var _=y.alternate;if(_===null){if(m=y.return,m!==null){d=m;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===d)return br(y),i;if(_===m)return br(y),a;_=_.sibling}throw Error(n(188))}if(d.return!==m.return)d=y,m=_;else{for(var C=!1,M=y.child;M;){if(M===d){C=!0,d=y,m=_;break}if(M===m){C=!0,m=y,d=_;break}M=M.sibling}if(!C){for(M=_.child;M;){if(M===d){C=!0,d=_,m=y;break}if(M===m){C=!0,m=_,d=y;break}M=M.sibling}if(!C)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:a}function ou(i){return i=id(i),i!==null?ca(i):null}function ca(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=ca(i);if(a!==null)return a;i=i.sibling}return null}var da=e.unstable_scheduleCallback,au=e.unstable_cancelCallback,od=e.unstable_shouldYield,kp=e.unstable_requestPaint,rt=e.unstable_now,ad=e.unstable_getCurrentPriorityLevel,no=e.unstable_ImmediatePriority,Gs=e.unstable_UserBlockingPriority,Xn=e.unstable_NormalPriority,lu=e.unstable_LowPriority,ld=e.unstable_IdlePriority,ro=null,$n=null;function ud(i){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(ro,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:dd,uu=Math.log,cd=Math.LN2;function dd(i){return i>>>=0,i===0?32:31-(uu(i)/cd|0)|0}var ha=64,fa=4194304;function Qs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function so(i,a){var d=i.pendingLanes;if(d===0)return 0;var m=0,y=i.suspendedLanes,_=i.pingedLanes,C=d&268435455;if(C!==0){var M=C&~y;M!==0?m=Qs(M):(_&=C,_!==0&&(m=Qs(_)))}else C=d&~y,C!==0?m=Qs(C):_!==0&&(m=Qs(_));if(m===0)return 0;if(a!==0&&a!==m&&!(a&y)&&(y=m&-m,_=a&-a,y>=_||y===16&&(_&4194240)!==0))return a;if(m&4&&(m|=d&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)d=31-yn(a),y=1<<d,m|=i[d],a&=~y;return m}function Cp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(i,a){for(var d=i.suspendedLanes,m=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes;0<_;){var C=31-yn(_),M=1<<C,U=y[C];U===-1?(!(M&d)||M&m)&&(y[C]=Cp(M,a)):U<=a&&(i.expiredLanes|=M),_&=~M}}function Fn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function io(){var i=ha;return ha<<=1,!(ha&4194240)&&(ha=64),i}function Js(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function Ys(i,a,d){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-yn(a),i[a]=d}function tt(i,a){var d=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var y=31-yn(d),_=1<<y;a[y]=0,m[y]=-1,i[y]=-1,d&=~_}}function Xs(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var m=31-yn(d),y=1<<m;y&a|i[m]&a&&(i[m]|=a),d&=~y}}var He=0;function Zs(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var hd,pa,fd,pd,md,cu=!1,Wr=[],Jt=null,Er=null,Tr=null,ei=new Map,Zn=new Map,Hr=[],Ap="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gd(i,a){switch(i){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":ei.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zn.delete(a.pointerId)}}function En(i,a,d,m,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:_,targetContainers:[y]},a!==null&&(a=Su(a),a!==null&&pa(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function Pp(i,a,d,m,y){switch(a){case"focusin":return Jt=En(Jt,i,a,d,m,y),!0;case"dragenter":return Er=En(Er,i,a,d,m,y),!0;case"mouseover":return Tr=En(Tr,i,a,d,m,y),!0;case"pointerover":var _=y.pointerId;return ei.set(_,En(ei.get(_)||null,i,a,d,m,y)),!0;case"gotpointercapture":return _=y.pointerId,Zn.set(_,En(Zn.get(_)||null,i,a,d,m,y)),!0}return!1}function yd(i){var a=co(i.target);if(a!==null){var d=_r(a);if(d!==null){if(a=d.tag,a===13){if(a=to(d),a!==null){i.blockedOn=a,md(i.priority,function(){fd(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function vs(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=ma(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Yi=m,d.target.dispatchEvent(m),Yi=null}else return a=Su(d),a!==null&&pa(a),i.blockedOn=d,!1;a.shift()}return!0}function oo(i,a,d){vs(i)&&d.delete(a)}function vd(){cu=!1,Jt!==null&&vs(Jt)&&(Jt=null),Er!==null&&vs(Er)&&(Er=null),Tr!==null&&vs(Tr)&&(Tr=null),ei.forEach(oo),Zn.forEach(oo)}function Sr(i,a){i.blockedOn===a&&(i.blockedOn=null,cu||(cu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vd)))}function kr(i){function a(y){return Sr(y,i)}if(0<Wr.length){Sr(Wr[0],i);for(var d=1;d<Wr.length;d++){var m=Wr[d];m.blockedOn===i&&(m.blockedOn=null)}}for(Jt!==null&&Sr(Jt,i),Er!==null&&Sr(Er,i),Tr!==null&&Sr(Tr,i),ei.forEach(a),Zn.forEach(a),d=0;d<Hr.length;d++)m=Hr[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<Hr.length&&(d=Hr[0],d.blockedOn===null);)yd(d),d.blockedOn===null&&Hr.shift()}var xs=W.ReactCurrentBatchConfig,ti=!0;function ct(i,a,d,m){var y=He,_=xs.transition;xs.transition=null;try{He=1,du(i,a,d,m)}finally{He=y,xs.transition=_}}function Ip(i,a,d,m){var y=He,_=xs.transition;xs.transition=null;try{He=4,du(i,a,d,m)}finally{He=y,xs.transition=_}}function du(i,a,d,m){if(ti){var y=ma(i,a,d,m);if(y===null)Up(i,a,m,ao,d),gd(i,m);else if(Pp(y,i,a,d,m))m.stopPropagation();else if(gd(i,m),a&4&&-1<Ap.indexOf(i)){for(;y!==null;){var _=Su(y);if(_!==null&&hd(_),_=ma(i,a,d,m),_===null&&Up(i,a,m,ao,d),_===y)break;y=_}y!==null&&m.stopPropagation()}else Up(i,a,m,null,d)}}var ao=null;function ma(i,a,d,m){if(ao=null,i=sa(m),i=co(i),i!==null)if(a=_r(i),a===null)i=null;else if(d=a.tag,d===13){if(i=to(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return ao=i,null}function hu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ad()){case no:return 1;case Gs:return 4;case Xn:case lu:return 16;case ld:return 536870912;default:return 16}default:return 16}}var Un=null,ga=null,Tn=null;function fu(){if(Tn)return Tn;var i,a=ga,d=a.length,m,y="value"in Un?Un.value:Un.textContent,_=y.length;for(i=0;i<d&&a[i]===y[i];i++);var C=d-i;for(m=1;m<=C&&a[d-m]===y[_-m];m++);return Tn=y.slice(i,1<m?1-m:void 0)}function ya(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function qr(){return!0}function pu(){return!1}function Yt(i){function a(d,m,y,_,C){this._reactName=d,this._targetInst=y,this.type=m,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(d=i[M],this[M]=d?d(_):_[M]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?qr:pu,this.isPropagationStopped=pu,this}return te(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),a}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=Yt(Cr),Kr=te({},Cr,{view:0,detail:0}),Rp=Yt(Kr),xa,ws,ni,lo=te({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ni&&(ni&&i.type==="mousemove"?(xa=i.screenX-ni.screenX,ws=i.screenY-ni.screenY):ws=xa=0,ni=i),xa)},movementY:function(i){return"movementY"in i?i.movementY:ws}}),wa=Yt(lo),mu=te({},lo,{dataTransfer:0}),xd=Yt(mu),_a=te({},Kr,{relatedTarget:0}),ba=Yt(_a),wd=te({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),_s=Yt(wd),_d=te({},Cr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),bd=Yt(_d),Ed=te({},Cr,{data:0}),gu=Yt(Ed),Ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Td={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Td[i])?!!a[i]:!1}function Gr(){return Sd}var p=te({},Kr,{key:function(i){if(i.key){var a=Ea[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ya(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(i){return i.type==="keypress"?ya(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ya(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),w=Yt(p),E=te({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Yt(E),G=te({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),ee=Yt(G),me=te({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=Yt(me),Lt=te({},lo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Yt(Lt),Bt=[9,13,27,32],It=u&&"CompositionEvent"in window,er=null;u&&"documentMode"in document&&(er=document.documentMode);var Bn=u&&"TextEvent"in window&&!er,uo=u&&(!It||er&&8<er&&11>=er),Ta=" ",lx=!1;function ux(i,a){switch(i){case"keyup":return Bt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Sa=!1;function hI(i,a){switch(i){case"compositionend":return cx(a);case"keypress":return a.which!==32?null:(lx=!0,Ta);case"textInput":return i=a.data,i===Ta&&lx?null:i;default:return null}}function fI(i,a){if(Sa)return i==="compositionend"||!It&&ux(i,a)?(i=fu(),Tn=ga=Un=null,Sa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return uo&&a.locale!=="ko"?null:a.data;default:return null}}var pI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dx(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!pI[i.type]:a==="textarea"}function hx(i,a,d,m){zr(m),a=Id(a,"onChange"),0<a.length&&(d=new va("onChange","change",null,d,m),i.push({event:d,listeners:a}))}var yu=null,vu=null;function mI(i){Ix(i,0)}function kd(i){var a=Ia(i);if(ye(a))return i}function gI(i,a){if(i==="change")return a}var fx=!1;if(u){var Np;if(u){var jp="oninput"in document;if(!jp){var px=document.createElement("div");px.setAttribute("oninput","return;"),jp=typeof px.oninput=="function"}Np=jp}else Np=!1;fx=Np&&(!document.documentMode||9<document.documentMode)}function mx(){yu&&(yu.detachEvent("onpropertychange",gx),vu=yu=null)}function gx(i){if(i.propertyName==="value"&&kd(vu)){var a=[];hx(a,vu,i,sa(i)),su(mI,a)}}function yI(i,a,d){i==="focusin"?(mx(),yu=a,vu=d,yu.attachEvent("onpropertychange",gx)):i==="focusout"&&mx()}function vI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return kd(vu)}function xI(i,a){if(i==="click")return kd(a)}function wI(i,a){if(i==="input"||i==="change")return kd(a)}function _I(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Ar=typeof Object.is=="function"?Object.is:_I;function xu(i,a){if(Ar(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var y=d[m];if(!c.call(a,y)||!Ar(i[y],a[y]))return!1}return!0}function yx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function vx(i,a){var d=yx(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=a&&m>=a)return{node:d,offset:a-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=yx(d)}}function xx(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?xx(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function wx(){for(var i=window,a=We();a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=We(i.document)}return a}function Dp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function bI(i){var a=wx(),d=i.focusedElem,m=i.selectionRange;if(a!==d&&d&&d.ownerDocument&&xx(d.ownerDocument.documentElement,d)){if(m!==null&&Dp(d)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(i,d.value.length);else if(i=(a=d.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=d.textContent.length,_=Math.min(m.start,y);m=m.end===void 0?_:Math.min(m.end,y),!i.extend&&_>m&&(y=m,m=_,_=y),y=vx(d,_);var C=vx(d,m);y&&C&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),_>m?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=d;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)i=a[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var EI=u&&"documentMode"in document&&11>=document.documentMode,ka=null,Op=null,wu=null,Lp=!1;function _x(i,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Lp||ka==null||ka!==We(m)||(m=ka,"selectionStart"in m&&Dp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),wu&&xu(wu,m)||(wu=m,m=Id(Op,"onSelect"),0<m.length&&(a=new va("onSelect","select",null,a,d),i.push({event:a,listeners:m}),a.target=ka)))}function Cd(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var Ca={animationend:Cd("Animation","AnimationEnd"),animationiteration:Cd("Animation","AnimationIteration"),animationstart:Cd("Animation","AnimationStart"),transitionend:Cd("Transition","TransitionEnd")},Mp={},bx={};u&&(bx=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Ad(i){if(Mp[i])return Mp[i];if(!Ca[i])return i;var a=Ca[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in bx)return Mp[i]=a[d];return i}var Ex=Ad("animationend"),Tx=Ad("animationiteration"),Sx=Ad("animationstart"),kx=Ad("transitionend"),Cx=new Map,Ax="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(i,a){Cx.set(i,a),o(a,[i])}for(var Vp=0;Vp<Ax.length;Vp++){var $p=Ax[Vp],TI=$p.toLowerCase(),SI=$p[0].toUpperCase()+$p.slice(1);ri(TI,"on"+SI)}ri(Ex,"onAnimationEnd"),ri(Tx,"onAnimationIteration"),ri(Sx,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(kx,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kI=new Set("cancel close invalid load scroll toggle".split(" ").concat(_u));function Px(i,a,d){var m=i.type||"unknown-event";i.currentTarget=d,sd(m,a,void 0,i),i.currentTarget=null}function Ix(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],y=m.event;m=m.listeners;e:{var _=void 0;if(a)for(var C=m.length-1;0<=C;C--){var M=m[C],U=M.instance,X=M.currentTarget;if(M=M.listener,U!==_&&y.isPropagationStopped())break e;Px(y,M,X),_=U}else for(C=0;C<m.length;C++){if(M=m[C],U=M.instance,X=M.currentTarget,M=M.listener,U!==_&&y.isPropagationStopped())break e;Px(y,M,X),_=U}}}if(wr)throw i=iu,wr=!1,iu=null,i}function lt(i,a){var d=a[Kp];d===void 0&&(d=a[Kp]=new Set);var m=i+"__bubble";d.has(m)||(Rx(a,i,2,!1),d.add(m))}function Fp(i,a,d){var m=0;a&&(m|=4),Rx(d,i,m,a)}var Pd="_reactListening"+Math.random().toString(36).slice(2);function bu(i){if(!i[Pd]){i[Pd]=!0,r.forEach(function(d){d!=="selectionchange"&&(kI.has(d)||Fp(d,!1,i),Fp(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Pd]||(a[Pd]=!0,Fp("selectionchange",!1,a))}}function Rx(i,a,d,m){switch(hu(a)){case 1:var y=ct;break;case 4:y=Ip;break;default:y=du}d=y.bind(null,a,d,i),y=void 0,!aa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?i.addEventListener(a,d,{capture:!0,passive:y}):i.addEventListener(a,d,!0):y!==void 0?i.addEventListener(a,d,{passive:y}):i.addEventListener(a,d,!1)}function Up(i,a,d,m,y){var _=m;if(!(a&1)&&!(a&2)&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var M=m.stateNode.containerInfo;if(M===y||M.nodeType===8&&M.parentNode===y)break;if(C===4)for(C=m.return;C!==null;){var U=C.tag;if((U===3||U===4)&&(U=C.stateNode.containerInfo,U===y||U.nodeType===8&&U.parentNode===y))return;C=C.return}for(;M!==null;){if(C=co(M),C===null)return;if(U=C.tag,U===5||U===6){m=_=C;continue e}M=M.parentNode}}m=m.return}su(function(){var X=_,le=sa(d),de=[];e:{var ae=Cx.get(i);if(ae!==void 0){var ve=va,_e=i;switch(i){case"keypress":if(ya(d)===0)break e;case"keydown":case"keyup":ve=w;break;case"focusin":_e="focus",ve=ba;break;case"focusout":_e="blur",ve=ba;break;case"beforeblur":case"afterblur":ve=ba;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ee;break;case Ex:case Tx:case Sx:ve=_s;break;case kx:ve=et;break;case"scroll":ve=Rp;break;case"wheel":ve=qe;break;case"copy":case"cut":case"paste":ve=bd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=N}var Ee=(a&4)!==0,Ct=!Ee&&i==="scroll",Q=Ee?ae!==null?ae+"Capture":null:ae;Ee=[];for(var H=X,Y;H!==null;){Y=H;var pe=Y.stateNode;if(Y.tag===5&&pe!==null&&(Y=pe,Q!==null&&(pe=kt(H,Q),pe!=null&&Ee.push(Eu(H,pe,Y)))),Ct)break;H=H.return}0<Ee.length&&(ae=new ve(ae,_e,null,d,le),de.push({event:ae,listeners:Ee}))}}if(!(a&7)){e:{if(ae=i==="mouseover"||i==="pointerover",ve=i==="mouseout"||i==="pointerout",ae&&d!==Yi&&(_e=d.relatedTarget||d.fromElement)&&(co(_e)||_e[bs]))break e;if((ve||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,ve?(_e=d.relatedTarget||d.toElement,ve=X,_e=_e?co(_e):null,_e!==null&&(Ct=_r(_e),_e!==Ct||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(ve=null,_e=X),ve!==_e)){if(Ee=wa,pe="onMouseLeave",Q="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=N,pe="onPointerLeave",Q="onPointerEnter",H="pointer"),Ct=ve==null?ae:Ia(ve),Y=_e==null?ae:Ia(_e),ae=new Ee(pe,H+"leave",ve,d,le),ae.target=Ct,ae.relatedTarget=Y,pe=null,co(le)===X&&(Ee=new Ee(Q,H+"enter",_e,d,le),Ee.target=Y,Ee.relatedTarget=Ct,pe=Ee),Ct=pe,ve&&_e)t:{for(Ee=ve,Q=_e,H=0,Y=Ee;Y;Y=Aa(Y))H++;for(Y=0,pe=Q;pe;pe=Aa(pe))Y++;for(;0<H-Y;)Ee=Aa(Ee),H--;for(;0<Y-H;)Q=Aa(Q),Y--;for(;H--;){if(Ee===Q||Q!==null&&Ee===Q.alternate)break t;Ee=Aa(Ee),Q=Aa(Q)}Ee=null}else Ee=null;ve!==null&&Nx(de,ae,ve,Ee,!1),_e!==null&&Ct!==null&&Nx(de,Ct,_e,Ee,!0)}}e:{if(ae=X?Ia(X):window,ve=ae.nodeName&&ae.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ae.type==="file")var Se=gI;else if(dx(ae))if(fx)Se=wI;else{Se=vI;var Ce=yI}else(ve=ae.nodeName)&&ve.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Se=xI);if(Se&&(Se=Se(i,X))){hx(de,Se,d,le);break e}Ce&&Ce(i,ae,X),i==="focusout"&&(Ce=ae._wrapperState)&&Ce.controlled&&ae.type==="number"&&fs(ae,"number",ae.value)}switch(Ce=X?Ia(X):window,i){case"focusin":(dx(Ce)||Ce.contentEditable==="true")&&(ka=Ce,Op=X,wu=null);break;case"focusout":wu=Op=ka=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,_x(de,d,le);break;case"selectionchange":if(EI)break;case"keydown":case"keyup":_x(de,d,le)}var Ae;if(It)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Sa?ux(i,d)&&(De="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(De="onCompositionStart");De&&(uo&&d.locale!=="ko"&&(Sa||De!=="onCompositionStart"?De==="onCompositionEnd"&&Sa&&(Ae=fu()):(Un=le,ga="value"in Un?Un.value:Un.textContent,Sa=!0)),Ce=Id(X,De),0<Ce.length&&(De=new gu(De,i,null,d,le),de.push({event:De,listeners:Ce}),Ae?De.data=Ae:(Ae=cx(d),Ae!==null&&(De.data=Ae)))),(Ae=Bn?hI(i,d):fI(i,d))&&(X=Id(X,"onBeforeInput"),0<X.length&&(le=new gu("onBeforeInput","beforeinput",null,d,le),de.push({event:le,listeners:X}),le.data=Ae))}Ix(de,a)})}function Eu(i,a,d){return{instance:i,listener:a,currentTarget:d}}function Id(i,a){for(var d=a+"Capture",m=[];i!==null;){var y=i,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=kt(i,d),_!=null&&m.unshift(Eu(i,_,y)),_=kt(i,a),_!=null&&m.push(Eu(i,_,y))),i=i.return}return m}function Aa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Nx(i,a,d,m,y){for(var _=a._reactName,C=[];d!==null&&d!==m;){var M=d,U=M.alternate,X=M.stateNode;if(U!==null&&U===m)break;M.tag===5&&X!==null&&(M=X,y?(U=kt(d,_),U!=null&&C.unshift(Eu(d,U,M))):y||(U=kt(d,_),U!=null&&C.push(Eu(d,U,M)))),d=d.return}C.length!==0&&i.push({event:a,listeners:C})}var CI=/\r\n?/g,AI=/\u0000|\uFFFD/g;function jx(i){return(typeof i=="string"?i:""+i).replace(CI,`
`).replace(AI,"")}function Rd(i,a,d){if(a=jx(a),jx(i)!==a&&d)throw Error(n(425))}function Nd(){}var Bp=null,zp=null;function Wp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Hp=typeof setTimeout=="function"?setTimeout:void 0,PI=typeof clearTimeout=="function"?clearTimeout:void 0,Dx=typeof Promise=="function"?Promise:void 0,II=typeof queueMicrotask=="function"?queueMicrotask:typeof Dx<"u"?function(i){return Dx.resolve(null).then(i).catch(RI)}:Hp;function RI(i){setTimeout(function(){throw i})}function qp(i,a){var d=a,m=0;do{var y=d.nextSibling;if(i.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(m===0){i.removeChild(y),kr(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=y}while(d);kr(a)}function si(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Ox(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Pa,Tu="__reactProps$"+Pa,bs="__reactContainer$"+Pa,Kp="__reactEvents$"+Pa,NI="__reactListeners$"+Pa,jI="__reactHandles$"+Pa;function co(i){var a=i[Qr];if(a)return a;for(var d=i.parentNode;d;){if(a=d[bs]||d[Qr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=Ox(i);i!==null;){if(d=i[Qr])return d;i=Ox(i)}return a}i=d,d=i.parentNode}return null}function Su(i){return i=i[Qr]||i[bs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ia(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function jd(i){return i[Tu]||null}var Gp=[],Ra=-1;function ii(i){return{current:i}}function ut(i){0>Ra||(i.current=Gp[Ra],Gp[Ra]=null,Ra--)}function st(i,a){Ra++,Gp[Ra]=i.current,i.current=a}var oi={},an=ii(oi),Sn=ii(!1),ho=oi;function Na(i,a){var d=i.type.contextTypes;if(!d)return oi;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in d)y[_]=a[_];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function kn(i){return i=i.childContextTypes,i!=null}function Dd(){ut(Sn),ut(an)}function Lx(i,a,d){if(an.current!==oi)throw Error(n(168));st(an,a),st(Sn,d)}function Mx(i,a,d){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(n(108,oe(i)||"Unknown",y));return te({},d,m)}function Od(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||oi,ho=an.current,st(an,i),st(Sn,Sn.current),!0}function Vx(i,a,d){var m=i.stateNode;if(!m)throw Error(n(169));d?(i=Mx(i,a,ho),m.__reactInternalMemoizedMergedChildContext=i,ut(Sn),ut(an),st(an,i)):ut(Sn),st(Sn,d)}var Es=null,Ld=!1,Qp=!1;function $x(i){Es===null?Es=[i]:Es.push(i)}function DI(i){Ld=!0,$x(i)}function ai(){if(!Qp&&Es!==null){Qp=!0;var i=0,a=He;try{var d=Es;for(He=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}Es=null,Ld=!1}catch(y){throw Es!==null&&(Es=Es.slice(i+1)),da(no,ai),y}finally{He=a,Qp=!1}}return null}var ja=[],Da=0,Md=null,Vd=0,tr=[],nr=0,fo=null,Ts=1,Ss="";function po(i,a){ja[Da++]=Vd,ja[Da++]=Md,Md=i,Vd=a}function Fx(i,a,d){tr[nr++]=Ts,tr[nr++]=Ss,tr[nr++]=fo,fo=i;var m=Ts;i=Ss;var y=32-yn(m)-1;m&=~(1<<y),d+=1;var _=32-yn(a)+y;if(30<_){var C=y-y%5;_=(m&(1<<C)-1).toString(32),m>>=C,y-=C,Ts=1<<32-yn(a)+y|d<<y|m,Ss=_+i}else Ts=1<<_|d<<y|m,Ss=i}function Jp(i){i.return!==null&&(po(i,1),Fx(i,1,0))}function Yp(i){for(;i===Md;)Md=ja[--Da],ja[Da]=null,Vd=ja[--Da],ja[Da]=null;for(;i===fo;)fo=tr[--nr],tr[nr]=null,Ss=tr[--nr],tr[nr]=null,Ts=tr[--nr],tr[nr]=null}var zn=null,Wn=null,dt=!1,Pr=null;function Ux(i,a){var d=or(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=i,a=i.deletions,a===null?(i.deletions=[d],i.flags|=16):a.push(d)}function Bx(i,a){switch(i.tag){case 5:var d=i.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,zn=i,Wn=si(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,zn=i,Wn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=fo!==null?{id:Ts,overflow:Ss}:null,i.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=or(18,null,null,0),d.stateNode=a,d.return=i,i.child=d,zn=i,Wn=null,!0):!1;default:return!1}}function Xp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Zp(i){if(dt){var a=Wn;if(a){var d=a;if(!Bx(i,a)){if(Xp(i))throw Error(n(418));a=si(d.nextSibling);var m=zn;a&&Bx(i,a)?Ux(m,d):(i.flags=i.flags&-4097|2,dt=!1,zn=i)}}else{if(Xp(i))throw Error(n(418));i.flags=i.flags&-4097|2,dt=!1,zn=i}}}function zx(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;zn=i}function $d(i){if(i!==zn)return!1;if(!dt)return zx(i),dt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Wp(i.type,i.memoizedProps)),a&&(a=Wn)){if(Xp(i))throw Wx(),Error(n(418));for(;a;)Ux(i,a),a=si(a.nextSibling)}if(zx(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(a===0){Wn=si(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}i=i.nextSibling}Wn=null}}else Wn=zn?si(i.stateNode.nextSibling):null;return!0}function Wx(){for(var i=Wn;i;)i=si(i.nextSibling)}function Oa(){Wn=zn=null,dt=!1}function em(i){Pr===null?Pr=[i]:Pr.push(i)}var OI=W.ReactCurrentBatchConfig;function ku(i,a,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,i));var y=m,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var M=y.refs;C===null?delete M[_]:M[_]=C},a._stringRef=_,a)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function Fd(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Hx(i){var a=i._init;return a(i._payload)}function qx(i){function a(Q,H){if(i){var Y=Q.deletions;Y===null?(Q.deletions=[H],Q.flags|=16):Y.push(H)}}function d(Q,H){if(!i)return null;for(;H!==null;)a(Q,H),H=H.sibling;return null}function m(Q,H){for(Q=new Map;H!==null;)H.key!==null?Q.set(H.key,H):Q.set(H.index,H),H=H.sibling;return Q}function y(Q,H){return Q=mi(Q,H),Q.index=0,Q.sibling=null,Q}function _(Q,H,Y){return Q.index=Y,i?(Y=Q.alternate,Y!==null?(Y=Y.index,Y<H?(Q.flags|=2,H):Y):(Q.flags|=2,H)):(Q.flags|=1048576,H)}function C(Q){return i&&Q.alternate===null&&(Q.flags|=2),Q}function M(Q,H,Y,pe){return H===null||H.tag!==6?(H=Hm(Y,Q.mode,pe),H.return=Q,H):(H=y(H,Y),H.return=Q,H)}function U(Q,H,Y,pe){var Se=Y.type;return Se===I?le(Q,H,Y.props.children,pe,Y.key):H!==null&&(H.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ge&&Hx(Se)===H.type)?(pe=y(H,Y.props),pe.ref=ku(Q,H,Y),pe.return=Q,pe):(pe=ch(Y.type,Y.key,Y.props,null,Q.mode,pe),pe.ref=ku(Q,H,Y),pe.return=Q,pe)}function X(Q,H,Y,pe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=qm(Y,Q.mode,pe),H.return=Q,H):(H=y(H,Y.children||[]),H.return=Q,H)}function le(Q,H,Y,pe,Se){return H===null||H.tag!==7?(H=bo(Y,Q.mode,pe,Se),H.return=Q,H):(H=y(H,Y),H.return=Q,H)}function de(Q,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Hm(""+H,Q.mode,Y),H.return=Q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case B:return Y=ch(H.type,H.key,H.props,null,Q.mode,Y),Y.ref=ku(Q,null,H),Y.return=Q,Y;case K:return H=qm(H,Q.mode,Y),H.return=Q,H;case Ge:var pe=H._init;return de(Q,pe(H._payload),Y)}if(wt(H)||J(H))return H=bo(H,Q.mode,Y,null),H.return=Q,H;Fd(Q,H)}return null}function ae(Q,H,Y,pe){var Se=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Se!==null?null:M(Q,H,""+Y,pe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:return Y.key===Se?U(Q,H,Y,pe):null;case K:return Y.key===Se?X(Q,H,Y,pe):null;case Ge:return Se=Y._init,ae(Q,H,Se(Y._payload),pe)}if(wt(Y)||J(Y))return Se!==null?null:le(Q,H,Y,pe,null);Fd(Q,Y)}return null}function ve(Q,H,Y,pe,Se){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Q=Q.get(Y)||null,M(H,Q,""+pe,Se);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case B:return Q=Q.get(pe.key===null?Y:pe.key)||null,U(H,Q,pe,Se);case K:return Q=Q.get(pe.key===null?Y:pe.key)||null,X(H,Q,pe,Se);case Ge:var Ce=pe._init;return ve(Q,H,Y,Ce(pe._payload),Se)}if(wt(pe)||J(pe))return Q=Q.get(Y)||null,le(H,Q,pe,Se,null);Fd(H,pe)}return null}function _e(Q,H,Y,pe){for(var Se=null,Ce=null,Ae=H,De=H=0,Ht=null;Ae!==null&&De<Y.length;De++){Ae.index>De?(Ht=Ae,Ae=null):Ht=Ae.sibling;var Je=ae(Q,Ae,Y[De],pe);if(Je===null){Ae===null&&(Ae=Ht);break}i&&Ae&&Je.alternate===null&&a(Q,Ae),H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je,Ae=Ht}if(De===Y.length)return d(Q,Ae),dt&&po(Q,De),Se;if(Ae===null){for(;De<Y.length;De++)Ae=de(Q,Y[De],pe),Ae!==null&&(H=_(Ae,H,De),Ce===null?Se=Ae:Ce.sibling=Ae,Ce=Ae);return dt&&po(Q,De),Se}for(Ae=m(Q,Ae);De<Y.length;De++)Ht=ve(Ae,Q,De,Y[De],pe),Ht!==null&&(i&&Ht.alternate!==null&&Ae.delete(Ht.key===null?De:Ht.key),H=_(Ht,H,De),Ce===null?Se=Ht:Ce.sibling=Ht,Ce=Ht);return i&&Ae.forEach(function(gi){return a(Q,gi)}),dt&&po(Q,De),Se}function Ee(Q,H,Y,pe){var Se=J(Y);if(typeof Se!="function")throw Error(n(150));if(Y=Se.call(Y),Y==null)throw Error(n(151));for(var Ce=Se=null,Ae=H,De=H=0,Ht=null,Je=Y.next();Ae!==null&&!Je.done;De++,Je=Y.next()){Ae.index>De?(Ht=Ae,Ae=null):Ht=Ae.sibling;var gi=ae(Q,Ae,Je.value,pe);if(gi===null){Ae===null&&(Ae=Ht);break}i&&Ae&&gi.alternate===null&&a(Q,Ae),H=_(gi,H,De),Ce===null?Se=gi:Ce.sibling=gi,Ce=gi,Ae=Ht}if(Je.done)return d(Q,Ae),dt&&po(Q,De),Se;if(Ae===null){for(;!Je.done;De++,Je=Y.next())Je=de(Q,Je.value,pe),Je!==null&&(H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je);return dt&&po(Q,De),Se}for(Ae=m(Q,Ae);!Je.done;De++,Je=Y.next())Je=ve(Ae,Q,De,Je.value,pe),Je!==null&&(i&&Je.alternate!==null&&Ae.delete(Je.key===null?De:Je.key),H=_(Je,H,De),Ce===null?Se=Je:Ce.sibling=Je,Ce=Je);return i&&Ae.forEach(function(pR){return a(Q,pR)}),dt&&po(Q,De),Se}function Ct(Q,H,Y,pe){if(typeof Y=="object"&&Y!==null&&Y.type===I&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:e:{for(var Se=Y.key,Ce=H;Ce!==null;){if(Ce.key===Se){if(Se=Y.type,Se===I){if(Ce.tag===7){d(Q,Ce.sibling),H=y(Ce,Y.props.children),H.return=Q,Q=H;break e}}else if(Ce.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===Ge&&Hx(Se)===Ce.type){d(Q,Ce.sibling),H=y(Ce,Y.props),H.ref=ku(Q,Ce,Y),H.return=Q,Q=H;break e}d(Q,Ce);break}else a(Q,Ce);Ce=Ce.sibling}Y.type===I?(H=bo(Y.props.children,Q.mode,pe,Y.key),H.return=Q,Q=H):(pe=ch(Y.type,Y.key,Y.props,null,Q.mode,pe),pe.ref=ku(Q,H,Y),pe.return=Q,Q=pe)}return C(Q);case K:e:{for(Ce=Y.key;H!==null;){if(H.key===Ce)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){d(Q,H.sibling),H=y(H,Y.children||[]),H.return=Q,Q=H;break e}else{d(Q,H);break}else a(Q,H);H=H.sibling}H=qm(Y,Q.mode,pe),H.return=Q,Q=H}return C(Q);case Ge:return Ce=Y._init,Ct(Q,H,Ce(Y._payload),pe)}if(wt(Y))return _e(Q,H,Y,pe);if(J(Y))return Ee(Q,H,Y,pe);Fd(Q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,H!==null&&H.tag===6?(d(Q,H.sibling),H=y(H,Y),H.return=Q,Q=H):(d(Q,H),H=Hm(Y,Q.mode,pe),H.return=Q,Q=H),C(Q)):d(Q,H)}return Ct}var La=qx(!0),Kx=qx(!1),Ud=ii(null),Bd=null,Ma=null,tm=null;function nm(){tm=Ma=Bd=null}function rm(i){var a=Ud.current;ut(Ud),i._currentValue=a}function sm(i,a,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===d)break;i=i.return}}function Va(i,a){Bd=i,tm=Ma=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(Cn=!0),i.firstContext=null)}function rr(i){var a=i._currentValue;if(tm!==i)if(i={context:i,memoizedValue:a,next:null},Ma===null){if(Bd===null)throw Error(n(308));Ma=i,Bd.dependencies={lanes:0,firstContext:i}}else Ma=Ma.next=i;return a}var mo=null;function im(i){mo===null?mo=[i]:mo.push(i)}function Gx(i,a,d,m){var y=a.interleaved;return y===null?(d.next=d,im(a)):(d.next=y.next,y.next=d),a.interleaved=d,ks(i,m)}function ks(i,a){i.lanes|=a;var d=i.alternate;for(d!==null&&(d.lanes|=a),d=i,i=i.return;i!==null;)i.childLanes|=a,d=i.alternate,d!==null&&(d.childLanes|=a),d=i,i=i.return;return d.tag===3?d.stateNode:null}var li=!1;function om(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qx(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Cs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function ui(i,a,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,Qe&2){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,ks(i,d)}return y=m.interleaved,y===null?(a.next=a,im(m)):(a.next=y.next,y.next=a),m.interleaved=a,ks(i,d)}function zd(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,Xs(i,d)}}function Jx(i,a){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var y=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var C={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?y=_=C:_=_.next=C,d=d.next}while(d!==null);_===null?y=_=a:_=_.next=a}else y=_=a;d={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}function Wd(i,a,d,m){var y=i.updateQueue;li=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var U=M,X=U.next;U.next=null,C===null?_=X:C.next=X,C=U;var le=i.alternate;le!==null&&(le=le.updateQueue,M=le.lastBaseUpdate,M!==C&&(M===null?le.firstBaseUpdate=X:M.next=X,le.lastBaseUpdate=U))}if(_!==null){var de=y.baseState;C=0,le=X=U=null,M=_;do{var ae=M.lane,ve=M.eventTime;if((m&ae)===ae){le!==null&&(le=le.next={eventTime:ve,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var _e=i,Ee=M;switch(ae=a,ve=d,Ee.tag){case 1:if(_e=Ee.payload,typeof _e=="function"){de=_e.call(ve,de,ae);break e}de=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ee.payload,ae=typeof _e=="function"?_e.call(ve,de,ae):_e,ae==null)break e;de=te({},de,ae);break e;case 2:li=!0}}M.callback!==null&&M.lane!==0&&(i.flags|=64,ae=y.effects,ae===null?y.effects=[M]:ae.push(M))}else ve={eventTime:ve,lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},le===null?(X=le=ve,U=de):le=le.next=ve,C|=ae;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);if(le===null&&(U=de),y.baseState=U,y.firstBaseUpdate=X,y.lastBaseUpdate=le,a=y.shared.interleaved,a!==null){y=a;do C|=y.lane,y=y.next;while(y!==a)}else _===null&&(y.shared.lanes=0);vo|=C,i.lanes=C,i.memoizedState=de}}function Yx(i,a,d){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],y=m.callback;if(y!==null){if(m.callback=null,m=d,typeof y!="function")throw Error(n(191,y));y.call(m)}}}var Cu={},Jr=ii(Cu),Au=ii(Cu),Pu=ii(Cu);function go(i){if(i===Cu)throw Error(n(174));return i}function am(i,a){switch(st(Pu,a),st(Au,i),st(Jr,Cu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ot(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Ot(a,i)}ut(Jr),st(Jr,a)}function $a(){ut(Jr),ut(Au),ut(Pu)}function Xx(i){go(Pu.current);var a=go(Jr.current),d=Ot(a,i.type);a!==d&&(st(Au,i),st(Jr,d))}function lm(i){Au.current===i&&(ut(Jr),ut(Au))}var mt=ii(0);function Hd(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var um=[];function cm(){for(var i=0;i<um.length;i++)um[i]._workInProgressVersionPrimary=null;um.length=0}var qd=W.ReactCurrentDispatcher,dm=W.ReactCurrentBatchConfig,yo=0,gt=null,Mt=null,zt=null,Kd=!1,Iu=!1,Ru=0,LI=0;function ln(){throw Error(n(321))}function hm(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!Ar(i[d],a[d]))return!1;return!0}function fm(i,a,d,m,y,_){if(yo=_,gt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,qd.current=i===null||i.memoizedState===null?FI:UI,i=d(m,y),Iu){_=0;do{if(Iu=!1,Ru=0,25<=_)throw Error(n(301));_+=1,zt=Mt=null,a.updateQueue=null,qd.current=BI,i=d(m,y)}while(Iu)}if(qd.current=Jd,a=Mt!==null&&Mt.next!==null,yo=0,zt=Mt=gt=null,Kd=!1,a)throw Error(n(300));return i}function pm(){var i=Ru!==0;return Ru=0,i}function Yr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?gt.memoizedState=zt=i:zt=zt.next=i,zt}function sr(){if(Mt===null){var i=gt.alternate;i=i!==null?i.memoizedState:null}else i=Mt.next;var a=zt===null?gt.memoizedState:zt.next;if(a!==null)zt=a,Mt=i;else{if(i===null)throw Error(n(310));Mt=i,i={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},zt===null?gt.memoizedState=zt=i:zt=zt.next=i}return zt}function Nu(i,a){return typeof a=="function"?a(i):a}function mm(i){var a=sr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var m=Mt,y=m.baseQueue,_=d.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}m.baseQueue=y=_,d.pending=null}if(y!==null){_=y.next,m=m.baseState;var M=C=null,U=null,X=_;do{var le=X.lane;if((yo&le)===le)U!==null&&(U=U.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),m=X.hasEagerState?X.eagerState:i(m,X.action);else{var de={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};U===null?(M=U=de,C=m):U=U.next=de,gt.lanes|=le,vo|=le}X=X.next}while(X!==null&&X!==_);U===null?C=m:U.next=M,Ar(m,a.memoizedState)||(Cn=!0),a.memoizedState=m,a.baseState=C,a.baseQueue=U,d.lastRenderedState=m}if(i=d.interleaved,i!==null){y=i;do _=y.lane,gt.lanes|=_,vo|=_,y=y.next;while(y!==i)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function gm(i){var a=sr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var m=d.dispatch,y=d.pending,_=a.memoizedState;if(y!==null){d.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);Ar(_,a.memoizedState)||(Cn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),d.lastRenderedState=_}return[_,m]}function Zx(){}function ew(i,a){var d=gt,m=sr(),y=a(),_=!Ar(m.memoizedState,y);if(_&&(m.memoizedState=y,Cn=!0),m=m.queue,ym(rw.bind(null,d,m,i),[i]),m.getSnapshot!==a||_||zt!==null&&zt.memoizedState.tag&1){if(d.flags|=2048,ju(9,nw.bind(null,d,m,y,a),void 0,null),Wt===null)throw Error(n(349));yo&30||tw(d,a,y)}return y}function tw(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function nw(i,a,d,m){a.value=d,a.getSnapshot=m,sw(a)&&iw(i)}function rw(i,a,d){return d(function(){sw(a)&&iw(i)})}function sw(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!Ar(i,d)}catch{return!0}}function iw(i){var a=ks(i,1);a!==null&&jr(a,i,1,-1)}function ow(i){var a=Yr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:i},a.queue=i,i=i.dispatch=$I.bind(null,gt,i),[a.memoizedState,i]}function ju(i,a,d,m){return i={tag:i,create:a,destroy:d,deps:m,next:null},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.lastEffect=i.next=i):(d=a.lastEffect,d===null?a.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,a.lastEffect=i)),i}function aw(){return sr().memoizedState}function Gd(i,a,d,m){var y=Yr();gt.flags|=i,y.memoizedState=ju(1|a,d,void 0,m===void 0?null:m)}function Qd(i,a,d,m){var y=sr();m=m===void 0?null:m;var _=void 0;if(Mt!==null){var C=Mt.memoizedState;if(_=C.destroy,m!==null&&hm(m,C.deps)){y.memoizedState=ju(a,d,_,m);return}}gt.flags|=i,y.memoizedState=ju(1|a,d,_,m)}function lw(i,a){return Gd(8390656,8,i,a)}function ym(i,a){return Qd(2048,8,i,a)}function uw(i,a){return Qd(4,2,i,a)}function cw(i,a){return Qd(4,4,i,a)}function dw(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function hw(i,a,d){return d=d!=null?d.concat([i]):null,Qd(4,4,dw.bind(null,a,i),d)}function vm(){}function fw(i,a){var d=sr();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&hm(a,m[1])?m[0]:(d.memoizedState=[i,a],i)}function pw(i,a){var d=sr();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&hm(a,m[1])?m[0]:(i=i(),d.memoizedState=[i,a],i)}function mw(i,a,d){return yo&21?(Ar(d,a)||(d=io(),gt.lanes|=d,vo|=d,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,Cn=!0),i.memoizedState=d)}function MI(i,a){var d=He;He=d!==0&&4>d?d:4,i(!0);var m=dm.transition;dm.transition={};try{i(!1),a()}finally{He=d,dm.transition=m}}function gw(){return sr().memoizedState}function VI(i,a,d){var m=fi(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},yw(i))vw(a,d);else if(d=Gx(i,a,d,m),d!==null){var y=wn();jr(d,i,m,y),xw(d,a,m)}}function $I(i,a,d){var m=fi(i),y={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(yw(i))vw(a,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,M=_(C,d);if(y.hasEagerState=!0,y.eagerState=M,Ar(M,C)){var U=a.interleaved;U===null?(y.next=y,im(a)):(y.next=U.next,U.next=y),a.interleaved=y;return}}catch{}finally{}d=Gx(i,a,y,m),d!==null&&(y=wn(),jr(d,i,m,y),xw(d,a,m))}}function yw(i){var a=i.alternate;return i===gt||a!==null&&a===gt}function vw(i,a){Iu=Kd=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function xw(i,a,d){if(d&4194240){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,Xs(i,d)}}var Jd={readContext:rr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},FI={readContext:rr,useCallback:function(i,a){return Yr().memoizedState=[i,a===void 0?null:a],i},useContext:rr,useEffect:lw,useImperativeHandle:function(i,a,d){return d=d!=null?d.concat([i]):null,Gd(4194308,4,dw.bind(null,a,i),d)},useLayoutEffect:function(i,a){return Gd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Gd(4,2,i,a)},useMemo:function(i,a){var d=Yr();return a=a===void 0?null:a,i=i(),d.memoizedState=[i,a],i},useReducer:function(i,a,d){var m=Yr();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=VI.bind(null,gt,i),[m.memoizedState,i]},useRef:function(i){var a=Yr();return i={current:i},a.memoizedState=i},useState:ow,useDebugValue:vm,useDeferredValue:function(i){return Yr().memoizedState=i},useTransition:function(){var i=ow(!1),a=i[0];return i=MI.bind(null,i[1]),Yr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,d){var m=gt,y=Yr();if(dt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),Wt===null)throw Error(n(349));yo&30||tw(m,a,d)}y.memoizedState=d;var _={value:d,getSnapshot:a};return y.queue=_,lw(rw.bind(null,m,_,i),[i]),m.flags|=2048,ju(9,nw.bind(null,m,_,d,a),void 0,null),d},useId:function(){var i=Yr(),a=Wt.identifierPrefix;if(dt){var d=Ss,m=Ts;d=(m&~(1<<32-yn(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=Ru++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=LI++,a=":"+a+"r"+d.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},UI={readContext:rr,useCallback:fw,useContext:rr,useEffect:ym,useImperativeHandle:hw,useInsertionEffect:uw,useLayoutEffect:cw,useMemo:pw,useReducer:mm,useRef:aw,useState:function(){return mm(Nu)},useDebugValue:vm,useDeferredValue:function(i){var a=sr();return mw(a,Mt.memoizedState,i)},useTransition:function(){var i=mm(Nu)[0],a=sr().memoizedState;return[i,a]},useMutableSource:Zx,useSyncExternalStore:ew,useId:gw,unstable_isNewReconciler:!1},BI={readContext:rr,useCallback:fw,useContext:rr,useEffect:ym,useImperativeHandle:hw,useInsertionEffect:uw,useLayoutEffect:cw,useMemo:pw,useReducer:gm,useRef:aw,useState:function(){return gm(Nu)},useDebugValue:vm,useDeferredValue:function(i){var a=sr();return Mt===null?a.memoizedState=i:mw(a,Mt.memoizedState,i)},useTransition:function(){var i=gm(Nu)[0],a=sr().memoizedState;return[i,a]},useMutableSource:Zx,useSyncExternalStore:ew,useId:gw,unstable_isNewReconciler:!1};function Ir(i,a){if(i&&i.defaultProps){a=te({},a),i=i.defaultProps;for(var d in i)a[d]===void 0&&(a[d]=i[d]);return a}return a}function xm(i,a,d,m){a=i.memoizedState,d=d(m,a),d=d==null?a:te({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Yd={isMounted:function(i){return(i=i._reactInternals)?_r(i)===i:!1},enqueueSetState:function(i,a,d){i=i._reactInternals;var m=wn(),y=fi(i),_=Cs(m,y);_.payload=a,d!=null&&(_.callback=d),a=ui(i,_,y),a!==null&&(jr(a,i,y,m),zd(a,i,y))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var m=wn(),y=fi(i),_=Cs(m,y);_.tag=1,_.payload=a,d!=null&&(_.callback=d),a=ui(i,_,y),a!==null&&(jr(a,i,y,m),zd(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=wn(),m=fi(i),y=Cs(d,m);y.tag=2,a!=null&&(y.callback=a),a=ui(i,y,m),a!==null&&(jr(a,i,m,d),zd(a,i,m))}};function ww(i,a,d,m,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,_,C):a.prototype&&a.prototype.isPureReactComponent?!xu(d,m)||!xu(y,_):!0}function _w(i,a,d){var m=!1,y=oi,_=a.contextType;return typeof _=="object"&&_!==null?_=rr(_):(y=kn(a)?ho:an.current,m=a.contextTypes,_=(m=m!=null)?Na(i,y):oi),a=new a(d,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Yd,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=_),a}function bw(i,a,d,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==i&&Yd.enqueueReplaceState(a,a.state,null)}function wm(i,a,d,m){var y=i.stateNode;y.props=d,y.state=i.memoizedState,y.refs={},om(i);var _=a.contextType;typeof _=="object"&&_!==null?y.context=rr(_):(_=kn(a)?ho:an.current,y.context=Na(i,_)),y.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(xm(i,a,_,d),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Yd.enqueueReplaceState(y,y.state,null),Wd(i,d,y,m),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function Fa(i,a){try{var d="",m=a;do d+=je(m),m=m.return;while(m);var y=d}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:y,digest:null}}function _m(i,a,d){return{value:i,source:null,stack:d??null,digest:a??null}}function bm(i,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var zI=typeof WeakMap=="function"?WeakMap:Map;function Ew(i,a,d){d=Cs(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){sh||(sh=!0,Mm=m),bm(i,a)},d}function Tw(i,a,d){d=Cs(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;d.payload=function(){return m(y)},d.callback=function(){bm(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){bm(i,a),typeof m!="function"&&(di===null?di=new Set([this]):di.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),d}function Sw(i,a,d){var m=i.pingCache;if(m===null){m=i.pingCache=new zI;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(d)||(y.add(d),i=rR.bind(null,i,a,d),a.then(i,i))}function kw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function Cw(i,a,d,m,y){return i.mode&1?(i.flags|=65536,i.lanes=y,i):(i===a?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Cs(-1,1),a.tag=2,ui(d,a,1))),d.lanes|=1),i)}var WI=W.ReactCurrentOwner,Cn=!1;function xn(i,a,d,m){a.child=i===null?Kx(a,null,d,m):La(a,i.child,d,m)}function Aw(i,a,d,m,y){d=d.render;var _=a.ref;return Va(a,y),m=fm(i,a,d,m,_,y),d=pm(),i!==null&&!Cn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,As(i,a,y)):(dt&&d&&Jp(a),a.flags|=1,xn(i,a,m,y),a.child)}function Pw(i,a,d,m,y){if(i===null){var _=d.type;return typeof _=="function"&&!Wm(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=_,Iw(i,a,_,m,y)):(i=ch(d.type,null,m,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!(i.lanes&y)){var C=_.memoizedProps;if(d=d.compare,d=d!==null?d:xu,d(C,m)&&i.ref===a.ref)return As(i,a,y)}return a.flags|=1,i=mi(_,m),i.ref=a.ref,i.return=a,a.child=i}function Iw(i,a,d,m,y){if(i!==null){var _=i.memoizedProps;if(xu(_,m)&&i.ref===a.ref)if(Cn=!1,a.pendingProps=m=_,(i.lanes&y)!==0)i.flags&131072&&(Cn=!0);else return a.lanes=i.lanes,As(i,a,y)}return Em(i,a,d,m,y)}function Rw(i,a,d){var m=a.pendingProps,y=m.children,_=i!==null?i.memoizedState:null;if(m.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Ba,Hn),Hn|=d;else{if(!(d&1073741824))return i=_!==null?_.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,st(Ba,Hn),Hn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=_!==null?_.baseLanes:d,st(Ba,Hn),Hn|=m}else _!==null?(m=_.baseLanes|d,a.memoizedState=null):m=d,st(Ba,Hn),Hn|=m;return xn(i,a,y,d),a.child}function Nw(i,a){var d=a.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Em(i,a,d,m,y){var _=kn(d)?ho:an.current;return _=Na(a,_),Va(a,y),d=fm(i,a,d,m,_,y),m=pm(),i!==null&&!Cn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,As(i,a,y)):(dt&&m&&Jp(a),a.flags|=1,xn(i,a,d,y),a.child)}function jw(i,a,d,m,y){if(kn(d)){var _=!0;Od(a)}else _=!1;if(Va(a,y),a.stateNode===null)Zd(i,a),_w(a,d,m),wm(a,d,m,y),m=!0;else if(i===null){var C=a.stateNode,M=a.memoizedProps;C.props=M;var U=C.context,X=d.contextType;typeof X=="object"&&X!==null?X=rr(X):(X=kn(d)?ho:an.current,X=Na(a,X));var le=d.getDerivedStateFromProps,de=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==m||U!==X)&&bw(a,C,m,X),li=!1;var ae=a.memoizedState;C.state=ae,Wd(a,m,C,y),U=a.memoizedState,M!==m||ae!==U||Sn.current||li?(typeof le=="function"&&(xm(a,d,le,m),U=a.memoizedState),(M=li||ww(a,d,M,m,ae,U,X))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=U),C.props=m,C.state=U,C.context=X,m=M):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{C=a.stateNode,Qx(i,a),M=a.memoizedProps,X=a.type===a.elementType?M:Ir(a.type,M),C.props=X,de=a.pendingProps,ae=C.context,U=d.contextType,typeof U=="object"&&U!==null?U=rr(U):(U=kn(d)?ho:an.current,U=Na(a,U));var ve=d.getDerivedStateFromProps;(le=typeof ve=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==de||ae!==U)&&bw(a,C,m,U),li=!1,ae=a.memoizedState,C.state=ae,Wd(a,m,C,y);var _e=a.memoizedState;M!==de||ae!==_e||Sn.current||li?(typeof ve=="function"&&(xm(a,d,ve,m),_e=a.memoizedState),(X=li||ww(a,d,X,m,ae,_e,U)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,_e,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,_e,U)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=_e),C.props=m,C.state=_e,C.context=U,m=X):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),m=!1)}return Tm(i,a,d,m,_,y)}function Tm(i,a,d,m,y,_){Nw(i,a);var C=(a.flags&128)!==0;if(!m&&!C)return y&&Vx(a,d,!1),As(i,a,_);m=a.stateNode,WI.current=a;var M=C&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&C?(a.child=La(a,i.child,null,_),a.child=La(a,null,M,_)):xn(i,a,M,_),a.memoizedState=m.state,y&&Vx(a,d,!0),a.child}function Dw(i){var a=i.stateNode;a.pendingContext?Lx(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Lx(i,a.context,!1),am(i,a.containerInfo)}function Ow(i,a,d,m,y){return Oa(),em(y),a.flags|=256,xn(i,a,d,m),a.child}var Sm={dehydrated:null,treeContext:null,retryLane:0};function km(i){return{baseLanes:i,cachePool:null,transitions:null}}function Lw(i,a,d){var m=a.pendingProps,y=mt.current,_=!1,C=(a.flags&128)!==0,M;if((M=C)||(M=i!==null&&i.memoizedState===null?!1:(y&2)!==0),M?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),st(mt,y&1),i===null)return Zp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?i.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(C=m.children,i=m.fallback,_?(m=a.mode,_=a.child,C={mode:"hidden",children:C},!(m&1)&&_!==null?(_.childLanes=0,_.pendingProps=C):_=dh(C,m,0,null),i=bo(i,m,d,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=km(d),a.memoizedState=Sm,i):Cm(a,C));if(y=i.memoizedState,y!==null&&(M=y.dehydrated,M!==null))return HI(i,a,C,m,M,y,d);if(_){_=m.fallback,C=a.mode,y=i.child,M=y.sibling;var U={mode:"hidden",children:m.children};return!(C&1)&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=U,a.deletions=null):(m=mi(y,U),m.subtreeFlags=y.subtreeFlags&14680064),M!==null?_=mi(M,_):(_=bo(_,C,d,null),_.flags|=2),_.return=a,m.return=a,m.sibling=_,a.child=m,m=_,_=a.child,C=i.child.memoizedState,C=C===null?km(d):{baseLanes:C.baseLanes|d,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=i.childLanes&~d,a.memoizedState=Sm,m}return _=i.child,i=_.sibling,m=mi(_,{mode:"visible",children:m.children}),!(a.mode&1)&&(m.lanes=d),m.return=a,m.sibling=null,i!==null&&(d=a.deletions,d===null?(a.deletions=[i],a.flags|=16):d.push(i)),a.child=m,a.memoizedState=null,m}function Cm(i,a){return a=dh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Xd(i,a,d,m){return m!==null&&em(m),La(a,i.child,null,d),i=Cm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function HI(i,a,d,m,y,_,C){if(d)return a.flags&256?(a.flags&=-257,m=_m(Error(n(422))),Xd(i,a,C,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=m.fallback,y=a.mode,m=dh({mode:"visible",children:m.children},y,0,null),_=bo(_,y,C,null),_.flags|=2,m.return=a,_.return=a,m.sibling=_,a.child=m,a.mode&1&&La(a,i.child,null,C),a.child.memoizedState=km(C),a.memoizedState=Sm,_);if(!(a.mode&1))return Xd(i,a,C,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var M=m.dgst;return m=M,_=Error(n(419)),m=_m(_,m,void 0),Xd(i,a,C,m)}if(M=(C&i.childLanes)!==0,Cn||M){if(m=Wt,m!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(m.suspendedLanes|C)?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,ks(i,y),jr(m,i,y,-1))}return zm(),m=_m(Error(n(421))),Xd(i,a,C,m)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=sR.bind(null,i),y._reactRetry=a,null):(i=_.treeContext,Wn=si(y.nextSibling),zn=a,dt=!0,Pr=null,i!==null&&(tr[nr++]=Ts,tr[nr++]=Ss,tr[nr++]=fo,Ts=i.id,Ss=i.overflow,fo=a),a=Cm(a,m.children),a.flags|=4096,a)}function Mw(i,a,d){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),sm(i.return,a,d)}function Am(i,a,d,m,y){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:y}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=d,_.tailMode=y)}function Vw(i,a,d){var m=a.pendingProps,y=m.revealOrder,_=m.tail;if(xn(i,a,m.children,d),m=mt.current,m&2)m=m&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Mw(i,d,a);else if(i.tag===19)Mw(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(st(mt,m),!(a.mode&1))a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)i=d.alternate,i!==null&&Hd(i)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),Am(a,!1,y,d,_);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Hd(i)===null){a.child=y;break}i=y.sibling,y.sibling=d,d=y,y=i}Am(a,!0,d,null,_);break;case"together":Am(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Zd(i,a){!(a.mode&1)&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function As(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),vo|=a.lanes,!(d&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,d=mi(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=mi(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function qI(i,a,d){switch(a.tag){case 3:Dw(a),Oa();break;case 5:Xx(a);break;case 1:kn(a.type)&&Od(a);break;case 4:am(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;st(Ud,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(st(mt,mt.current&1),a.flags|=128,null):d&a.child.childLanes?Lw(i,a,d):(st(mt,mt.current&1),i=As(i,a,d),i!==null?i.sibling:null);st(mt,mt.current&1);break;case 19:if(m=(d&a.childLanes)!==0,i.flags&128){if(m)return Vw(i,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),st(mt,mt.current),m)break;return null;case 22:case 23:return a.lanes=0,Rw(i,a,d)}return As(i,a,d)}var $w,Pm,Fw,Uw;$w=function(i,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Pm=function(){},Fw=function(i,a,d,m){var y=i.memoizedProps;if(y!==m){i=a.stateNode,go(Jr.current);var _=null;switch(d){case"input":y=St(i,y),m=St(i,m),_=[];break;case"select":y=te({},y,{value:void 0}),m=te({},m,{value:void 0}),_=[];break;case"textarea":y=Gi(i,y),m=Gi(i,m),_=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=Nd)}eu(d,m);var C;d=null;for(X in y)if(!m.hasOwnProperty(X)&&y.hasOwnProperty(X)&&y[X]!=null)if(X==="style"){var M=y[X];for(C in M)M.hasOwnProperty(C)&&(d||(d={}),d[C]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in m){var U=m[X];if(M=y!=null?y[X]:void 0,m.hasOwnProperty(X)&&U!==M&&(U!=null||M!=null))if(X==="style")if(M){for(C in M)!M.hasOwnProperty(C)||U&&U.hasOwnProperty(C)||(d||(d={}),d[C]="");for(C in U)U.hasOwnProperty(C)&&M[C]!==U[C]&&(d||(d={}),d[C]=U[C])}else d||(_||(_=[]),_.push(X,d)),d=U;else X==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,M=M?M.__html:void 0,U!=null&&M!==U&&(_=_||[]).push(X,U)):X==="children"?typeof U!="string"&&typeof U!="number"||(_=_||[]).push(X,""+U):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(U!=null&&X==="onScroll"&&lt("scroll",i),_||M===U||(_=[])):(_=_||[]).push(X,U))}d&&(_=_||[]).push("style",d);var X=_;(a.updateQueue=X)&&(a.flags|=4)}},Uw=function(i,a,d,m){d!==m&&(a.flags|=4)};function Du(i,a){if(!dt)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function un(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(a)for(var y=i.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=m,i.childLanes=d,a}function KI(i,a,d){var m=a.pendingProps;switch(Yp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(a),null;case 1:return kn(a.type)&&Dd(),un(a),null;case 3:return m=a.stateNode,$a(),ut(Sn),ut(an),cm(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&($d(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Pr!==null&&(Fm(Pr),Pr=null))),Pm(i,a),un(a),null;case 5:lm(a);var y=go(Pu.current);if(d=a.type,i!==null&&a.stateNode!=null)Fw(i,a,d,m,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(n(166));return un(a),null}if(i=go(Jr.current),$d(a)){m=a.stateNode,d=a.type;var _=a.memoizedProps;switch(m[Qr]=a,m[Tu]=_,i=(a.mode&1)!==0,d){case"dialog":lt("cancel",m),lt("close",m);break;case"iframe":case"object":case"embed":lt("load",m);break;case"video":case"audio":for(y=0;y<_u.length;y++)lt(_u[y],m);break;case"source":lt("error",m);break;case"img":case"image":case"link":lt("error",m),lt("load",m);break;case"details":lt("toggle",m);break;case"input":vr(m,_),lt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!_.multiple},lt("invalid",m);break;case"textarea":ps(m,_),lt("invalid",m)}eu(d,_),y=null;for(var C in _)if(_.hasOwnProperty(C)){var M=_[C];C==="children"?typeof M=="string"?m.textContent!==M&&(_.suppressHydrationWarning!==!0&&Rd(m.textContent,M,i),y=["children",M]):typeof M=="number"&&m.textContent!==""+M&&(_.suppressHydrationWarning!==!0&&Rd(m.textContent,M,i),y=["children",""+M]):s.hasOwnProperty(C)&&M!=null&&C==="onScroll"&&lt("scroll",m)}switch(d){case"input":re(m),qs(m,_,!0);break;case"textarea":re(m),Ql(m);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(m.onclick=Nd)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Dt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=C.createElement(d,{is:m.is}):(i=C.createElement(d),d==="select"&&(C=i,m.multiple?C.multiple=!0:m.size&&(C.size=m.size))):i=C.createElementNS(i,d),i[Qr]=a,i[Tu]=m,$w(i,a,!1,!1),a.stateNode=i;e:{switch(C=tu(d,m),d){case"dialog":lt("cancel",i),lt("close",i),y=m;break;case"iframe":case"object":case"embed":lt("load",i),y=m;break;case"video":case"audio":for(y=0;y<_u.length;y++)lt(_u[y],i);y=m;break;case"source":lt("error",i),y=m;break;case"img":case"image":case"link":lt("error",i),lt("load",i),y=m;break;case"details":lt("toggle",i),y=m;break;case"input":vr(i,m),y=St(i,m),lt("invalid",i);break;case"option":y=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},y=te({},m,{value:void 0}),lt("invalid",i);break;case"textarea":ps(i,m),y=Gi(i,m),lt("invalid",i);break;default:y=m}eu(d,y),M=y;for(_ in M)if(M.hasOwnProperty(_)){var U=M[_];_==="style"?Xl(i,U):_==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Jl(i,U)):_==="children"?typeof U=="string"?(d!=="textarea"||U!=="")&&Ks(i,U):typeof U=="number"&&Ks(i,""+U):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?U!=null&&_==="onScroll"&&lt("scroll",i):U!=null&&$(i,_,U,C))}switch(d){case"input":re(i),qs(i,m,!1);break;case"textarea":re(i),Ql(i);break;case"option":m.value!=null&&i.setAttribute("value",""+he(m.value));break;case"select":i.multiple=!!m.multiple,_=m.value,_!=null?on(i,!!m.multiple,_,!1):m.defaultValue!=null&&on(i,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Nd)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return un(a),null;case 6:if(i&&a.stateNode!=null)Uw(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(n(166));if(d=go(Pu.current),go(Jr.current),$d(a)){if(m=a.stateNode,d=a.memoizedProps,m[Qr]=a,(_=m.nodeValue!==d)&&(i=zn,i!==null))switch(i.tag){case 3:Rd(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Rd(m.nodeValue,d,(i.mode&1)!==0)}_&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Qr]=a,a.stateNode=m}return un(a),null;case 13:if(ut(mt),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(dt&&Wn!==null&&a.mode&1&&!(a.flags&128))Wx(),Oa(),a.flags|=98560,_=!1;else if(_=$d(a),m!==null&&m.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Qr]=a}else Oa(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;un(a),_=!1}else Pr!==null&&(Fm(Pr),Pr=null),_=!0;if(!_)return a.flags&65536?a:null}return a.flags&128?(a.lanes=d,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,a.mode&1&&(i===null||mt.current&1?Vt===0&&(Vt=3):zm())),a.updateQueue!==null&&(a.flags|=4),un(a),null);case 4:return $a(),Pm(i,a),i===null&&bu(a.stateNode.containerInfo),un(a),null;case 10:return rm(a.type._context),un(a),null;case 17:return kn(a.type)&&Dd(),un(a),null;case 19:if(ut(mt),_=a.memoizedState,_===null)return un(a),null;if(m=(a.flags&128)!==0,C=_.rendering,C===null)if(m)Du(_,!1);else{if(Vt!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(C=Hd(i),C!==null){for(a.flags|=128,Du(_,!1),m=C.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)_=d,i=m,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,i=C.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return st(mt,mt.current&1|2),a.child}i=i.sibling}_.tail!==null&&rt()>za&&(a.flags|=128,m=!0,Du(_,!1),a.lanes=4194304)}else{if(!m)if(i=Hd(C),i!==null){if(a.flags|=128,m=!0,d=i.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Du(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!dt)return un(a),null}else 2*rt()-_.renderingStartTime>za&&d!==1073741824&&(a.flags|=128,m=!0,Du(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(d=_.last,d!==null?d.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=rt(),a.sibling=null,d=mt.current,st(mt,m?d&1|2:d&1),a):(un(a),null);case 22:case 23:return Bm(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&a.mode&1?Hn&1073741824&&(un(a),a.subtreeFlags&6&&(a.flags|=8192)):un(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function GI(i,a){switch(Yp(a),a.tag){case 1:return kn(a.type)&&Dd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return $a(),ut(Sn),ut(an),cm(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return lm(a),null;case 13:if(ut(mt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Oa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ut(mt),null;case 4:return $a(),null;case 10:return rm(a.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var eh=!1,cn=!1,QI=typeof WeakSet=="function"?WeakSet:Set,we=null;function Ua(i,a){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){_t(i,a,m)}else d.current=null}function Im(i,a,d){try{d()}catch(m){_t(i,a,m)}}var Bw=!1;function JI(i,a){if(Bp=ti,i=wx(),Dp(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var y=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var C=0,M=-1,U=-1,X=0,le=0,de=i,ae=null;t:for(;;){for(var ve;de!==d||y!==0&&de.nodeType!==3||(M=C+y),de!==_||m!==0&&de.nodeType!==3||(U=C+m),de.nodeType===3&&(C+=de.nodeValue.length),(ve=de.firstChild)!==null;)ae=de,de=ve;for(;;){if(de===i)break t;if(ae===d&&++X===y&&(M=C),ae===_&&++le===m&&(U=C),(ve=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=ve}d=M===-1||U===-1?null:{start:M,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(zp={focusedElem:i,selectionRange:d},ti=!1,we=a;we!==null;)if(a=we,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,we=i;else for(;we!==null;){a=we;try{var _e=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var Ee=_e.memoizedProps,Ct=_e.memoizedState,Q=a.stateNode,H=Q.getSnapshotBeforeUpdate(a.elementType===a.type?Ee:Ir(a.type,Ee),Ct);Q.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(pe){_t(a,a.return,pe)}if(i=a.sibling,i!==null){i.return=a.return,we=i;break}we=a.return}return _e=Bw,Bw=!1,_e}function Ou(i,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&i)===i){var _=y.destroy;y.destroy=void 0,_!==void 0&&Im(a,d,_)}y=y.next}while(y!==m)}}function th(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function Rm(i){var a=i.ref;if(a!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof a=="function"?a(i):a.current=i}}function zw(i){var a=i.alternate;a!==null&&(i.alternate=null,zw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Qr],delete a[Tu],delete a[Kp],delete a[NI],delete a[jI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Ww(i){return i.tag===5||i.tag===3||i.tag===4}function Hw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ww(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Nm(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(i,a):d.insertBefore(i,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(i,d)):(a=d,a.appendChild(i)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Nd));else if(m!==4&&(i=i.child,i!==null))for(Nm(i,a,d),i=i.sibling;i!==null;)Nm(i,a,d),i=i.sibling}function jm(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(jm(i,a,d),i=i.sibling;i!==null;)jm(i,a,d),i=i.sibling}var Xt=null,Rr=!1;function ci(i,a,d){for(d=d.child;d!==null;)qw(i,a,d),d=d.sibling}function qw(i,a,d){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(ro,d)}catch{}switch(d.tag){case 5:cn||Ua(d,a);case 6:var m=Xt,y=Rr;Xt=null,ci(i,a,d),Xt=m,Rr=y,Xt!==null&&(Rr?(i=Xt,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Xt.removeChild(d.stateNode));break;case 18:Xt!==null&&(Rr?(i=Xt,d=d.stateNode,i.nodeType===8?qp(i.parentNode,d):i.nodeType===1&&qp(i,d),kr(i)):qp(Xt,d.stateNode));break;case 4:m=Xt,y=Rr,Xt=d.stateNode.containerInfo,Rr=!0,ci(i,a,d),Xt=m,Rr=y;break;case 0:case 11:case 14:case 15:if(!cn&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var _=y,C=_.destroy;_=_.tag,C!==void 0&&(_&2||_&4)&&Im(d,a,C),y=y.next}while(y!==m)}ci(i,a,d);break;case 1:if(!cn&&(Ua(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(M){_t(d,a,M)}ci(i,a,d);break;case 21:ci(i,a,d);break;case 22:d.mode&1?(cn=(m=cn)||d.memoizedState!==null,ci(i,a,d),cn=m):ci(i,a,d);break;default:ci(i,a,d)}}function Kw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new QI),a.forEach(function(m){var y=iR.bind(null,i,m);d.has(m)||(d.add(m),m.then(y,y))})}}function Nr(i,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];try{var _=i,C=a,M=C;e:for(;M!==null;){switch(M.tag){case 5:Xt=M.stateNode,Rr=!1;break e;case 3:Xt=M.stateNode.containerInfo,Rr=!0;break e;case 4:Xt=M.stateNode.containerInfo,Rr=!0;break e}M=M.return}if(Xt===null)throw Error(n(160));qw(_,C,y),Xt=null,Rr=!1;var U=y.alternate;U!==null&&(U.return=null),y.return=null}catch(X){_t(y,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Gw(a,i),a=a.sibling}function Gw(i,a){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Nr(a,i),Xr(i),m&4){try{Ou(3,i,i.return),th(3,i)}catch(Ee){_t(i,i.return,Ee)}try{Ou(5,i,i.return)}catch(Ee){_t(i,i.return,Ee)}}break;case 1:Nr(a,i),Xr(i),m&512&&d!==null&&Ua(d,d.return);break;case 5:if(Nr(a,i),Xr(i),m&512&&d!==null&&Ua(d,d.return),i.flags&32){var y=i.stateNode;try{Ks(y,"")}catch(Ee){_t(i,i.return,Ee)}}if(m&4&&(y=i.stateNode,y!=null)){var _=i.memoizedProps,C=d!==null?d.memoizedProps:_,M=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{M==="input"&&_.type==="radio"&&_.name!=null&&Ws(y,_),tu(M,C);var X=tu(M,_);for(C=0;C<U.length;C+=2){var le=U[C],de=U[C+1];le==="style"?Xl(y,de):le==="dangerouslySetInnerHTML"?Jl(y,de):le==="children"?Ks(y,de):$(y,le,de,X)}switch(M){case"input":Hs(y,_);break;case"textarea":ra(y,_);break;case"select":var ae=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var ve=_.value;ve!=null?on(y,!!_.multiple,ve,!1):ae!==!!_.multiple&&(_.defaultValue!=null?on(y,!!_.multiple,_.defaultValue,!0):on(y,!!_.multiple,_.multiple?[]:"",!1))}y[Tu]=_}catch(Ee){_t(i,i.return,Ee)}}break;case 6:if(Nr(a,i),Xr(i),m&4){if(i.stateNode===null)throw Error(n(162));y=i.stateNode,_=i.memoizedProps;try{y.nodeValue=_}catch(Ee){_t(i,i.return,Ee)}}break;case 3:if(Nr(a,i),Xr(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{kr(a.containerInfo)}catch(Ee){_t(i,i.return,Ee)}break;case 4:Nr(a,i),Xr(i);break;case 13:Nr(a,i),Xr(i),y=i.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(Lm=rt())),m&4&&Kw(i);break;case 22:if(le=d!==null&&d.memoizedState!==null,i.mode&1?(cn=(X=cn)||le,Nr(a,i),cn=X):Nr(a,i),Xr(i),m&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!le&&i.mode&1)for(we=i,le=i.child;le!==null;){for(de=we=le;we!==null;){switch(ae=we,ve=ae.child,ae.tag){case 0:case 11:case 14:case 15:Ou(4,ae,ae.return);break;case 1:Ua(ae,ae.return);var _e=ae.stateNode;if(typeof _e.componentWillUnmount=="function"){m=ae,d=ae.return;try{a=m,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(Ee){_t(m,d,Ee)}}break;case 5:Ua(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Yw(de);continue}}ve!==null?(ve.return=ae,we=ve):Yw(de)}le=le.sibling}e:for(le=null,de=i;;){if(de.tag===5){if(le===null){le=de;try{y=de.stateNode,X?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(M=de.stateNode,U=de.memoizedProps.style,C=U!=null&&U.hasOwnProperty("display")?U.display:null,M.style.display=Yl("display",C))}catch(Ee){_t(i,i.return,Ee)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=X?"":de.memoizedProps}catch(Ee){_t(i,i.return,Ee)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===i)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===i)break e;for(;de.sibling===null;){if(de.return===null||de.return===i)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Nr(a,i),Xr(i),m&4&&Kw(i);break;case 21:break;default:Nr(a,i),Xr(i)}}function Xr(i){var a=i.flags;if(a&2){try{e:{for(var d=i.return;d!==null;){if(Ww(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(Ks(y,""),m.flags&=-33);var _=Hw(i);jm(i,_,y);break;case 3:case 4:var C=m.stateNode.containerInfo,M=Hw(i);Nm(i,M,C);break;default:throw Error(n(161))}}catch(U){_t(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function YI(i,a,d){we=i,Qw(i)}function Qw(i,a,d){for(var m=(i.mode&1)!==0;we!==null;){var y=we,_=y.child;if(y.tag===22&&m){var C=y.memoizedState!==null||eh;if(!C){var M=y.alternate,U=M!==null&&M.memoizedState!==null||cn;M=eh;var X=cn;if(eh=C,(cn=U)&&!X)for(we=y;we!==null;)C=we,U=C.child,C.tag===22&&C.memoizedState!==null?Xw(y):U!==null?(U.return=C,we=U):Xw(y);for(;_!==null;)we=_,Qw(_),_=_.sibling;we=y,eh=M,cn=X}Jw(i)}else y.subtreeFlags&8772&&_!==null?(_.return=y,we=_):Jw(i)}}function Jw(i){for(;we!==null;){var a=we;if(a.flags&8772){var d=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:cn||th(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!cn)if(d===null)m.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:Ir(a.type,d.memoizedProps);m.componentDidUpdate(y,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Yx(a,_,m);break;case 3:var C=a.updateQueue;if(C!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Yx(a,C,d)}break;case 5:var M=a.stateNode;if(d===null&&a.flags&4){d=M;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&d.focus();break;case"img":U.src&&(d.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&kr(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}cn||a.flags&512&&Rm(a)}catch(ae){_t(a,a.return,ae)}}if(a===i){we=null;break}if(d=a.sibling,d!==null){d.return=a.return,we=d;break}we=a.return}}function Yw(i){for(;we!==null;){var a=we;if(a===i){we=null;break}var d=a.sibling;if(d!==null){d.return=a.return,we=d;break}we=a.return}}function Xw(i){for(;we!==null;){var a=we;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{th(4,a)}catch(U){_t(a,d,U)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(U){_t(a,y,U)}}var _=a.return;try{Rm(a)}catch(U){_t(a,_,U)}break;case 5:var C=a.return;try{Rm(a)}catch(U){_t(a,C,U)}}}catch(U){_t(a,a.return,U)}if(a===i){we=null;break}var M=a.sibling;if(M!==null){M.return=a.return,we=M;break}we=a.return}}var XI=Math.ceil,nh=W.ReactCurrentDispatcher,Dm=W.ReactCurrentOwner,ir=W.ReactCurrentBatchConfig,Qe=0,Wt=null,Rt=null,Zt=0,Hn=0,Ba=ii(0),Vt=0,Lu=null,vo=0,rh=0,Om=0,Mu=null,An=null,Lm=0,za=1/0,Ps=null,sh=!1,Mm=null,di=null,ih=!1,hi=null,oh=0,Vu=0,Vm=null,ah=-1,lh=0;function wn(){return Qe&6?rt():ah!==-1?ah:ah=rt()}function fi(i){return i.mode&1?Qe&2&&Zt!==0?Zt&-Zt:OI.transition!==null?(lh===0&&(lh=io()),lh):(i=He,i!==0||(i=window.event,i=i===void 0?16:hu(i.type)),i):1}function jr(i,a,d,m){if(50<Vu)throw Vu=0,Vm=null,Error(n(185));Ys(i,d,m),(!(Qe&2)||i!==Wt)&&(i===Wt&&(!(Qe&2)&&(rh|=d),Vt===4&&pi(i,Zt)),Pn(i,m),d===1&&Qe===0&&!(a.mode&1)&&(za=rt()+500,Ld&&ai()))}function Pn(i,a){var d=i.callbackNode;ys(i,a);var m=so(i,i===Wt?Zt:0);if(m===0)d!==null&&au(d),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(d!=null&&au(d),a===1)i.tag===0?DI(e_.bind(null,i)):$x(e_.bind(null,i)),II(function(){!(Qe&6)&&ai()}),d=null;else{switch(Zs(m)){case 1:d=no;break;case 4:d=Gs;break;case 16:d=Xn;break;case 536870912:d=ld;break;default:d=Xn}d=l_(d,Zw.bind(null,i))}i.callbackPriority=a,i.callbackNode=d}}function Zw(i,a){if(ah=-1,lh=0,Qe&6)throw Error(n(327));var d=i.callbackNode;if(Wa()&&i.callbackNode!==d)return null;var m=so(i,i===Wt?Zt:0);if(m===0)return null;if(m&30||m&i.expiredLanes||a)a=uh(i,m);else{a=m;var y=Qe;Qe|=2;var _=n_();(Wt!==i||Zt!==a)&&(Ps=null,za=rt()+500,wo(i,a));do try{tR();break}catch(M){t_(i,M)}while(!0);nm(),nh.current=_,Qe=y,Rt!==null?a=0:(Wt=null,Zt=0,a=Vt)}if(a!==0){if(a===2&&(y=Fn(i),y!==0&&(m=y,a=$m(i,y))),a===1)throw d=Lu,wo(i,0),pi(i,m),Pn(i,rt()),d;if(a===6)pi(i,m);else{if(y=i.current.alternate,!(m&30)&&!ZI(y)&&(a=uh(i,m),a===2&&(_=Fn(i),_!==0&&(m=_,a=$m(i,_))),a===1))throw d=Lu,wo(i,0),pi(i,m),Pn(i,rt()),d;switch(i.finishedWork=y,i.finishedLanes=m,a){case 0:case 1:throw Error(n(345));case 2:_o(i,An,Ps);break;case 3:if(pi(i,m),(m&130023424)===m&&(a=Lm+500-rt(),10<a)){if(so(i,0)!==0)break;if(y=i.suspendedLanes,(y&m)!==m){wn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Hp(_o.bind(null,i,An,Ps),a);break}_o(i,An,Ps);break;case 4:if(pi(i,m),(m&4194240)===m)break;for(a=i.eventTimes,y=-1;0<m;){var C=31-yn(m);_=1<<C,C=a[C],C>y&&(y=C),m&=~_}if(m=y,m=rt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*XI(m/1960))-m,10<m){i.timeoutHandle=Hp(_o.bind(null,i,An,Ps),m);break}_o(i,An,Ps);break;case 5:_o(i,An,Ps);break;default:throw Error(n(329))}}}return Pn(i,rt()),i.callbackNode===d?Zw.bind(null,i):null}function $m(i,a){var d=Mu;return i.current.memoizedState.isDehydrated&&(wo(i,a).flags|=256),i=uh(i,a),i!==2&&(a=An,An=d,a!==null&&Fm(a)),i}function Fm(i){An===null?An=i:An.push.apply(An,i)}function ZI(i){for(var a=i;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var y=d[m],_=y.getSnapshot;y=y.value;try{if(!Ar(_(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function pi(i,a){for(a&=~Om,a&=~rh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var d=31-yn(a),m=1<<d;i[d]=-1,a&=~m}}function e_(i){if(Qe&6)throw Error(n(327));Wa();var a=so(i,0);if(!(a&1))return Pn(i,rt()),null;var d=uh(i,a);if(i.tag!==0&&d===2){var m=Fn(i);m!==0&&(a=m,d=$m(i,m))}if(d===1)throw d=Lu,wo(i,0),pi(i,a),Pn(i,rt()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,_o(i,An,Ps),Pn(i,rt()),null}function Um(i,a){var d=Qe;Qe|=1;try{return i(a)}finally{Qe=d,Qe===0&&(za=rt()+500,Ld&&ai())}}function xo(i){hi!==null&&hi.tag===0&&!(Qe&6)&&Wa();var a=Qe;Qe|=1;var d=ir.transition,m=He;try{if(ir.transition=null,He=1,i)return i()}finally{He=m,ir.transition=d,Qe=a,!(Qe&6)&&ai()}}function Bm(){Hn=Ba.current,ut(Ba)}function wo(i,a){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,PI(d)),Rt!==null)for(d=Rt.return;d!==null;){var m=d;switch(Yp(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Dd();break;case 3:$a(),ut(Sn),ut(an),cm();break;case 5:lm(m);break;case 4:$a();break;case 13:ut(mt);break;case 19:ut(mt);break;case 10:rm(m.type._context);break;case 22:case 23:Bm()}d=d.return}if(Wt=i,Rt=i=mi(i.current,null),Zt=Hn=a,Vt=0,Lu=null,Om=rh=vo=0,An=Mu=null,mo!==null){for(a=0;a<mo.length;a++)if(d=mo[a],m=d.interleaved,m!==null){d.interleaved=null;var y=m.next,_=d.pending;if(_!==null){var C=_.next;_.next=y,m.next=C}d.pending=m}mo=null}return i}function t_(i,a){do{var d=Rt;try{if(nm(),qd.current=Jd,Kd){for(var m=gt.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}Kd=!1}if(yo=0,zt=Mt=gt=null,Iu=!1,Ru=0,Dm.current=null,d===null||d.return===null){Vt=1,Lu=a,Rt=null;break}e:{var _=i,C=d.return,M=d,U=a;if(a=Zt,M.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=U,le=M,de=le.tag;if(!(le.mode&1)&&(de===0||de===11||de===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var ve=kw(C);if(ve!==null){ve.flags&=-257,Cw(ve,C,M,_,a),ve.mode&1&&Sw(_,X,a),a=ve,U=X;var _e=a.updateQueue;if(_e===null){var Ee=new Set;Ee.add(U),a.updateQueue=Ee}else _e.add(U);break e}else{if(!(a&1)){Sw(_,X,a),zm();break e}U=Error(n(426))}}else if(dt&&M.mode&1){var Ct=kw(C);if(Ct!==null){!(Ct.flags&65536)&&(Ct.flags|=256),Cw(Ct,C,M,_,a),em(Fa(U,M));break e}}_=U=Fa(U,M),Vt!==4&&(Vt=2),Mu===null?Mu=[_]:Mu.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var Q=Ew(_,U,a);Jx(_,Q);break e;case 1:M=U;var H=_.type,Y=_.stateNode;if(!(_.flags&128)&&(typeof H.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(di===null||!di.has(Y)))){_.flags|=65536,a&=-a,_.lanes|=a;var pe=Tw(_,M,a);Jx(_,pe);break e}}_=_.return}while(_!==null)}s_(d)}catch(Se){a=Se,Rt===d&&d!==null&&(Rt=d=d.return);continue}break}while(!0)}function n_(){var i=nh.current;return nh.current=Jd,i===null?Jd:i}function zm(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Wt===null||!(vo&268435455)&&!(rh&268435455)||pi(Wt,Zt)}function uh(i,a){var d=Qe;Qe|=2;var m=n_();(Wt!==i||Zt!==a)&&(Ps=null,wo(i,a));do try{eR();break}catch(y){t_(i,y)}while(!0);if(nm(),Qe=d,nh.current=m,Rt!==null)throw Error(n(261));return Wt=null,Zt=0,Vt}function eR(){for(;Rt!==null;)r_(Rt)}function tR(){for(;Rt!==null&&!od();)r_(Rt)}function r_(i){var a=a_(i.alternate,i,Hn);i.memoizedProps=i.pendingProps,a===null?s_(i):Rt=a,Dm.current=null}function s_(i){var a=i;do{var d=a.alternate;if(i=a.return,a.flags&32768){if(d=GI(d,a),d!==null){d.flags&=32767,Rt=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Vt=6,Rt=null;return}}else if(d=KI(d,a,Hn),d!==null){Rt=d;return}if(a=a.sibling,a!==null){Rt=a;return}Rt=a=i}while(a!==null);Vt===0&&(Vt=5)}function _o(i,a,d){var m=He,y=ir.transition;try{ir.transition=null,He=1,nR(i,a,d,m)}finally{ir.transition=y,He=m}return null}function nR(i,a,d,m){do Wa();while(hi!==null);if(Qe&6)throw Error(n(327));d=i.finishedWork;var y=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=d.lanes|d.childLanes;if(tt(i,_),i===Wt&&(Rt=Wt=null,Zt=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||ih||(ih=!0,l_(Xn,function(){return Wa(),null})),_=(d.flags&15990)!==0,d.subtreeFlags&15990||_){_=ir.transition,ir.transition=null;var C=He;He=1;var M=Qe;Qe|=4,Dm.current=null,JI(i,d),Gw(d,i),bI(zp),ti=!!Bp,zp=Bp=null,i.current=d,YI(d),kp(),Qe=M,He=C,ir.transition=_}else i.current=d;if(ih&&(ih=!1,hi=i,oh=y),_=i.pendingLanes,_===0&&(di=null),ud(d.stateNode),Pn(i,rt()),a!==null)for(m=i.onRecoverableError,d=0;d<a.length;d++)y=a[d],m(y.value,{componentStack:y.stack,digest:y.digest});if(sh)throw sh=!1,i=Mm,Mm=null,i;return oh&1&&i.tag!==0&&Wa(),_=i.pendingLanes,_&1?i===Vm?Vu++:(Vu=0,Vm=i):Vu=0,ai(),null}function Wa(){if(hi!==null){var i=Zs(oh),a=ir.transition,d=He;try{if(ir.transition=null,He=16>i?16:i,hi===null)var m=!1;else{if(i=hi,hi=null,oh=0,Qe&6)throw Error(n(331));var y=Qe;for(Qe|=4,we=i.current;we!==null;){var _=we,C=_.child;if(we.flags&16){var M=_.deletions;if(M!==null){for(var U=0;U<M.length;U++){var X=M[U];for(we=X;we!==null;){var le=we;switch(le.tag){case 0:case 11:case 15:Ou(8,le,_)}var de=le.child;if(de!==null)de.return=le,we=de;else for(;we!==null;){le=we;var ae=le.sibling,ve=le.return;if(zw(le),le===X){we=null;break}if(ae!==null){ae.return=ve,we=ae;break}we=ve}}}var _e=_.alternate;if(_e!==null){var Ee=_e.child;if(Ee!==null){_e.child=null;do{var Ct=Ee.sibling;Ee.sibling=null,Ee=Ct}while(Ee!==null)}}we=_}}if(_.subtreeFlags&2064&&C!==null)C.return=_,we=C;else e:for(;we!==null;){if(_=we,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Ou(9,_,_.return)}var Q=_.sibling;if(Q!==null){Q.return=_.return,we=Q;break e}we=_.return}}var H=i.current;for(we=H;we!==null;){C=we;var Y=C.child;if(C.subtreeFlags&2064&&Y!==null)Y.return=C,we=Y;else e:for(C=H;we!==null;){if(M=we,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:th(9,M)}}catch(Se){_t(M,M.return,Se)}if(M===C){we=null;break e}var pe=M.sibling;if(pe!==null){pe.return=M.return,we=pe;break e}we=M.return}}if(Qe=y,ai(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(ro,i)}catch{}m=!0}return m}finally{He=d,ir.transition=a}}return!1}function i_(i,a,d){a=Fa(d,a),a=Ew(i,a,1),i=ui(i,a,1),a=wn(),i!==null&&(Ys(i,1,a),Pn(i,a))}function _t(i,a,d){if(i.tag===3)i_(i,i,d);else for(;a!==null;){if(a.tag===3){i_(a,i,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(di===null||!di.has(m))){i=Fa(d,i),i=Tw(a,i,1),a=ui(a,i,1),i=wn(),a!==null&&(Ys(a,1,i),Pn(a,i));break}}a=a.return}}function rR(i,a,d){var m=i.pingCache;m!==null&&m.delete(a),a=wn(),i.pingedLanes|=i.suspendedLanes&d,Wt===i&&(Zt&d)===d&&(Vt===4||Vt===3&&(Zt&130023424)===Zt&&500>rt()-Lm?wo(i,0):Om|=d),Pn(i,a)}function o_(i,a){a===0&&(i.mode&1?(a=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):a=1);var d=wn();i=ks(i,a),i!==null&&(Ys(i,a,d),Pn(i,d))}function sR(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),o_(i,d)}function iR(i,a){var d=0;switch(i.tag){case 13:var m=i.stateNode,y=i.memoizedState;y!==null&&(d=y.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(a),o_(i,d)}var a_;a_=function(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps||Sn.current)Cn=!0;else{if(!(i.lanes&d)&&!(a.flags&128))return Cn=!1,qI(i,a,d);Cn=!!(i.flags&131072)}else Cn=!1,dt&&a.flags&1048576&&Fx(a,Vd,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;Zd(i,a),i=a.pendingProps;var y=Na(a,an.current);Va(a,d),y=fm(null,a,m,i,y,d);var _=pm();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,kn(m)?(_=!0,Od(a)):_=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,om(a),y.updater=Yd,a.stateNode=y,y._reactInternals=a,wm(a,m,i,d),a=Tm(null,a,m,!0,_,d)):(a.tag=0,dt&&_&&Jp(a),xn(null,a,y,d),a=a.child),a;case 16:m=a.elementType;e:{switch(Zd(i,a),i=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=aR(m),i=Ir(m,i),y){case 0:a=Em(null,a,m,i,d);break e;case 1:a=jw(null,a,m,i,d);break e;case 11:a=Aw(null,a,m,i,d);break e;case 14:a=Pw(null,a,m,Ir(m.type,i),d);break e}throw Error(n(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Ir(m,y),Em(i,a,m,y,d);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Ir(m,y),jw(i,a,m,y,d);case 3:e:{if(Dw(a),i===null)throw Error(n(387));m=a.pendingProps,_=a.memoizedState,y=_.element,Qx(i,a),Wd(a,m,null,d);var C=a.memoizedState;if(m=C.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){y=Fa(Error(n(423)),a),a=Ow(i,a,m,d,y);break e}else if(m!==y){y=Fa(Error(n(424)),a),a=Ow(i,a,m,d,y);break e}else for(Wn=si(a.stateNode.containerInfo.firstChild),zn=a,dt=!0,Pr=null,d=Kx(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Oa(),m===y){a=As(i,a,d);break e}xn(i,a,m,d)}a=a.child}return a;case 5:return Xx(a),i===null&&Zp(a),m=a.type,y=a.pendingProps,_=i!==null?i.memoizedProps:null,C=y.children,Wp(m,y)?C=null:_!==null&&Wp(m,_)&&(a.flags|=32),Nw(i,a),xn(i,a,C,d),a.child;case 6:return i===null&&Zp(a),null;case 13:return Lw(i,a,d);case 4:return am(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=La(a,null,m,d):xn(i,a,m,d),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Ir(m,y),Aw(i,a,m,y,d);case 7:return xn(i,a,a.pendingProps,d),a.child;case 8:return xn(i,a,a.pendingProps.children,d),a.child;case 12:return xn(i,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,_=a.memoizedProps,C=y.value,st(Ud,m._currentValue),m._currentValue=C,_!==null)if(Ar(_.value,C)){if(_.children===y.children&&!Sn.current){a=As(i,a,d);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var M=_.dependencies;if(M!==null){C=_.child;for(var U=M.firstContext;U!==null;){if(U.context===m){if(_.tag===1){U=Cs(-1,d&-d),U.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?U.next=U:(U.next=le.next,le.next=U),X.pending=U}}_.lanes|=d,U=_.alternate,U!==null&&(U.lanes|=d),sm(_.return,d,a),M.lanes|=d;break}U=U.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(n(341));C.lanes|=d,M=C.alternate,M!==null&&(M.lanes|=d),sm(C,d,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}xn(i,a,y.children,d),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,Va(a,d),y=rr(y),m=m(y),a.flags|=1,xn(i,a,m,d),a.child;case 14:return m=a.type,y=Ir(m,a.pendingProps),y=Ir(m.type,y),Pw(i,a,m,y,d);case 15:return Iw(i,a,a.type,a.pendingProps,d);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Ir(m,y),Zd(i,a),a.tag=1,kn(m)?(i=!0,Od(a)):i=!1,Va(a,d),_w(a,m,y),wm(a,m,y,d),Tm(null,a,m,!0,i,d);case 19:return Vw(i,a,d);case 22:return Rw(i,a,d)}throw Error(n(156,a.tag))};function l_(i,a){return da(i,a)}function oR(i,a,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(i,a,d,m){return new oR(i,a,d,m)}function Wm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function aR(i){if(typeof i=="function")return Wm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===$e)return 14}return 2}function mi(i,a){var d=i.alternate;return d===null?(d=or(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function ch(i,a,d,m,y,_){var C=2;if(m=i,typeof i=="function")Wm(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case I:return bo(d.children,y,_,a);case S:C=8,y|=8;break;case T:return i=or(12,d,a,y|2),i.elementType=T,i.lanes=_,i;case L:return i=or(13,d,a,y),i.elementType=L,i.lanes=_,i;case ge:return i=or(19,d,a,y),i.elementType=ge,i.lanes=_,i;case be:return dh(d,y,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:C=10;break e;case j:C=9;break e;case F:C=11;break e;case $e:C=14;break e;case Ge:C=16,m=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=or(C,d,a,y),a.elementType=i,a.type=m,a.lanes=_,a}function bo(i,a,d,m){return i=or(7,i,m,a),i.lanes=d,i}function dh(i,a,d,m){return i=or(22,i,m,a),i.elementType=be,i.lanes=d,i.stateNode={isHidden:!1},i}function Hm(i,a,d){return i=or(6,i,null,a),i.lanes=d,i}function qm(i,a,d){return a=or(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function lR(i,a,d,m,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Js(0),this.expirationTimes=Js(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Js(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Km(i,a,d,m,y,_,C,M,U){return i=new lR(i,a,d,M,U),a===1?(a=1,_===!0&&(a|=8)):a=0,_=or(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},om(_),i}function uR(i,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:m==null?null:""+m,children:i,containerInfo:a,implementation:d}}function u_(i){if(!i)return oi;i=i._reactInternals;e:{if(_r(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(kn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(kn(d))return Mx(i,d,a)}return a}function c_(i,a,d,m,y,_,C,M,U){return i=Km(d,m,!0,i,y,_,C,M,U),i.context=u_(null),d=i.current,m=wn(),y=fi(d),_=Cs(m,y),_.callback=a??null,ui(d,_,y),i.current.lanes=y,Ys(i,y,m),Pn(i,m),i}function hh(i,a,d,m){var y=a.current,_=wn(),C=fi(y);return d=u_(d),a.context===null?a.context=d:a.pendingContext=d,a=Cs(_,C),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=ui(y,a,C),i!==null&&(jr(i,y,C,_),zd(i,y,C)),C}function fh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function d_(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function Gm(i,a){d_(i,a),(i=i.alternate)&&d_(i,a)}function cR(){return null}var h_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Qm(i){this._internalRoot=i}ph.prototype.render=Qm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));hh(i,a,null,null)},ph.prototype.unmount=Qm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;xo(function(){hh(null,i,null,null)}),a[bs]=null}};function ph(i){this._internalRoot=i}ph.prototype.unstable_scheduleHydration=function(i){if(i){var a=pd();i={blockedOn:null,target:i,priority:a};for(var d=0;d<Hr.length&&a!==0&&a<Hr[d].priority;d++);Hr.splice(d,0,i),d===0&&yd(i)}};function Jm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function mh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function f_(){}function dR(i,a,d,m,y){if(y){if(typeof m=="function"){var _=m;m=function(){var X=fh(C);_.call(X)}}var C=c_(a,m,i,0,null,!1,!1,"",f_);return i._reactRootContainer=C,i[bs]=C.current,bu(i.nodeType===8?i.parentNode:i),xo(),C}for(;y=i.lastChild;)i.removeChild(y);if(typeof m=="function"){var M=m;m=function(){var X=fh(U);M.call(X)}}var U=Km(i,0,!1,null,null,!1,!1,"",f_);return i._reactRootContainer=U,i[bs]=U.current,bu(i.nodeType===8?i.parentNode:i),xo(function(){hh(a,U,d,m)}),U}function gh(i,a,d,m,y){var _=d._reactRootContainer;if(_){var C=_;if(typeof y=="function"){var M=y;y=function(){var U=fh(C);M.call(U)}}hh(a,C,i,y)}else C=dR(d,a,i,y,m);return fh(C)}hd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var d=Qs(a.pendingLanes);d!==0&&(Xs(a,d|1),Pn(a,rt()),!(Qe&6)&&(za=rt()+500,ai()))}break;case 13:xo(function(){var m=ks(i,1);if(m!==null){var y=wn();jr(m,i,1,y)}}),Gm(i,1)}},pa=function(i){if(i.tag===13){var a=ks(i,134217728);if(a!==null){var d=wn();jr(a,i,134217728,d)}Gm(i,134217728)}},fd=function(i){if(i.tag===13){var a=fi(i),d=ks(i,a);if(d!==null){var m=wn();jr(d,i,a,m)}Gm(i,a)}},pd=function(){return He},md=function(i,a){var d=He;try{return He=i,a()}finally{He=d}},ia=function(i,a,d){switch(a){case"input":if(Hs(i,d),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==i&&m.form===i.form){var y=jd(m);if(!y)throw Error(n(90));ye(m),Hs(m,y)}}}break;case"textarea":ra(i,d);break;case"select":a=d.value,a!=null&&on(i,!!d.multiple,a,!1)}},Xi=Um,ru=xo;var hR={usingClientEntryPoint:!1,Events:[Su,Ia,jd,zr,nu,Um]},$u={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fR={bundleType:$u.bundleType,version:$u.version,rendererPackageName:$u.rendererPackageName,rendererConfig:$u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ou(i),i===null?null:i.stateNode},findFiberByHostInstance:$u.findFiberByHostInstance||cR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{ro=yh.inject(fR),$n=yh}catch{}}return In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR,In.createPortal=function(i,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jm(a))throw Error(n(200));return uR(i,a,null,d)},In.createRoot=function(i,a){if(!Jm(i))throw Error(n(299));var d=!1,m="",y=h_;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Km(i,1,!1,null,null,d,!1,m,y),i[bs]=a.current,bu(i.nodeType===8?i.parentNode:i),new Qm(a)},In.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=ou(a),i=i===null?null:i.stateNode,i},In.flushSync=function(i){return xo(i)},In.hydrate=function(i,a,d){if(!mh(a))throw Error(n(200));return gh(null,i,a,!0,d)},In.hydrateRoot=function(i,a,d){if(!Jm(i))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,y=!1,_="",C=h_;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(C=d.onRecoverableError)),a=c_(a,null,i,1,d??null,y,!1,_,C),i[bs]=a.current,bu(i),m)for(i=0;i<m.length;i++)d=m[i],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new ph(a)},In.render=function(i,a,d){if(!mh(a))throw Error(n(200));return gh(null,i,a,!1,d)},In.unmountComponentAtNode=function(i){if(!mh(i))throw Error(n(40));return i._reactRootContainer?(xo(function(){gh(null,null,i,!1,function(){i._reactRootContainer=null,i[bs]=null})}),!0):!1},In.unstable_batchedUpdates=Um,In.unstable_renderSubtreeIntoContainer=function(i,a,d,m){if(!mh(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return gh(i,a,d,!1,m)},In.version="18.3.1-next-f1338f8080-20240426",In}var __;function wS(){if(__)return Zm.exports;__=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zm.exports=ER(),Zm.exports}var b_;function TR(){if(b_)return vh;b_=1;var t=wS();return vh.createRoot=t.createRoot,vh.hydrateRoot=t.hydrateRoot,vh}var SR=TR();const kR=Ko(SR);var Uu={},E_;function CR(){if(E_)return Uu;E_=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.parse=l,Uu.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function l(x,b){const k=new o,O=x.length;if(O<2)return k;const P=(b==null?void 0:b.decode)||g;let D=0;do{const V=x.indexOf("=",D);if(V===-1)break;const $=x.indexOf(";",D),W=$===-1?O:$;if(V>W){D=x.lastIndexOf(";",V-1)+1;continue}const B=u(x,D,V),K=c(x,V,B),I=x.slice(B,K);if(k[I]===void 0){let S=u(x,V+1,W),T=c(x,W,S);const R=P(x.slice(S,T));k[I]=R}D=W+1}while(D<O);return k}function u(x,b,k){do{const O=x.charCodeAt(b);if(O!==32&&O!==9)return b}while(++b<k);return k}function c(x,b,k){for(;b>k;){const O=x.charCodeAt(--b);if(O!==32&&O!==9)return b+1}return k}function h(x,b,k){const O=(k==null?void 0:k.encode)||encodeURIComponent;if(!t.test(x))throw new TypeError(`argument name is invalid: ${x}`);const P=O(b);if(!e.test(P))throw new TypeError(`argument val is invalid: ${b}`);let D=x+"="+P;if(!k)return D;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);D+="; Max-Age="+k.maxAge}if(k.domain){if(!n.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);D+="; Domain="+k.domain}if(k.path){if(!r.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);D+="; Path="+k.path}if(k.expires){if(!v(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);D+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&(D+="; HttpOnly"),k.secure&&(D+="; Secure"),k.partitioned&&(D+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return D}function g(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function v(x){return s.call(x)==="[object Date]"}return Uu}CR();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var T_="popstate";function AR(t={}){function e(s,o){let{pathname:l="/",search:u="",hash:c=""}=Go(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Gg("",{pathname:l,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let c=s.location.href,h=c.indexOf("#");u=h===-1?c:c.slice(0,h)}return u+"#"+(typeof o=="string"?o:xc(o))}function r(s,o){pr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return IR(e,n,r,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PR(){return Math.random().toString(36).substring(2,10)}function S_(t,e){return{usr:t.state,key:t.key,idx:e}}function Gg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Go(e):e,state:n,key:e&&e.key||r||PR()}}function xc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function IR(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",c=null,h=g();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let P=g(),D=P==null?null:P-h;h=P,c&&c({action:u,location:O.location,delta:D})}function x(P,D){u="PUSH";let V=Gg(O.location,P,D);n&&n(V,P),h=g()+1;let $=S_(V,h),W=O.createHref(V);try{l.pushState($,"",W)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(W)}o&&c&&c({action:u,location:O.location,delta:1})}function b(P,D){u="REPLACE";let V=Gg(O.location,P,D);n&&n(V,P),h=g();let $=S_(V,h),W=O.createHref(V);l.replaceState($,"",W),o&&c&&c({action:u,location:O.location,delta:0})}function k(P){let D=s.location.origin!=="null"?s.location.origin:s.location.href,V=typeof P=="string"?P:xc(P);return V=V.replace(/ $/,"%20"),pt(D,`No window.location.(origin|href) available to create URL for href: ${V}`),new URL(V,D)}let O={get action(){return u},get location(){return t(s,l)},listen(P){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(T_,v),c=P,()=>{s.removeEventListener(T_,v),c=null}},createHref(P){return e(s,P)},createURL:k,encodeLocation(P){let D=k(P);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:x,replace:b,go(P){return l.go(P)}};return O}function _S(t,e,n="/"){return RR(t,e,n,!1)}function RR(t,e,n,r){let s=typeof e=="string"?Go(e):e,o=Di(s.pathname||"/",n);if(o==null)return null;let l=bS(t);NR(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let h=zR(o);u=UR(l[c],h,r)}return u}function bS(t,e=[],n=[],r=""){let s=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(pt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let h=Os([r,c.relativePath]),g=n.concat(c);o.children&&o.children.length>0&&(pt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),bS(o.children,e,g,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:$R(h,o.index),routesMeta:g})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let c of ES(o.path))s(o,l,c)}),e}function ES(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=ES(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&u.push(...l),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function NR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var jR=/^:[\w-]+$/,DR=3,OR=2,LR=1,MR=10,VR=-2,k_=t=>t==="*";function $R(t,e){let n=t.split("/"),r=n.length;return n.some(k_)&&(r+=VR),e&&(r+=OR),n.filter(s=>!k_(s)).reduce((s,o)=>s+(jR.test(o)?DR:o===""?LR:MR),r)}function FR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function UR(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=nf({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},g),x=c.route;if(!v&&h&&n&&!r[r.length-1].route.index&&(v=nf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Os([o,v.pathname]),pathnameBase:KR(Os([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=Os([o,v.pathnameBase]))}return l}function nf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:v},x)=>{if(g==="*"){let k=u[x]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=u[x];return v&&!b?h[g]=void 0:h[g]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function BR(t,e=!1,n=!0){pr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function zR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Di(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WR(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Go(t):t;return{pathname:n?n.startsWith("/")?n:HR(n,e):e,search:GR(r),hash:QR(s)}}function HR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ng(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iy(t){let e=qR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function oy(t,e,n,r=!1){let s;typeof t=="string"?s=Go(t):(s={...t},pt(!s.pathname||!s.pathname.includes("?"),ng("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),ng("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),ng("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=n;else{let v=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}u=v>=0?e[v]:"/"}let c=WR(s,u),h=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||g)&&(c.pathname+="/"),c}var Os=t=>t.join("/").replace(/\/\/+/g,"/"),KR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var TS=["POST","PUT","PATCH","DELETE"];new Set(TS);var YR=["GET",...TS];new Set(YR);var Ol=A.createContext(null);Ol.displayName="DataRouter";var Ff=A.createContext(null);Ff.displayName="DataRouterState";var SS=A.createContext({isTransitioning:!1});SS.displayName="ViewTransition";var XR=A.createContext(new Map);XR.displayName="Fetchers";var ZR=A.createContext(null);ZR.displayName="Await";var Fr=A.createContext(null);Fr.displayName="Navigation";var Fc=A.createContext(null);Fc.displayName="Location";var gr=A.createContext({outlet:null,matches:[],isDataRoute:!1});gr.displayName="Route";var ay=A.createContext(null);ay.displayName="RouteError";function eN(t,{relative:e}={}){pt(Ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Fr),{hash:s,pathname:o,search:l}=Bc(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Os([n,o])),r.createHref({pathname:u,search:l,hash:s})}function Ll(){return A.useContext(Fc)!=null}function Ur(){return pt(Ll(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Fc).location}var kS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CS(t){A.useContext(Fr).static||A.useLayoutEffect(t)}function Qt(){let{isDataRoute:t}=A.useContext(gr);return t?mN():tN()}function tN(){pt(Ll(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Ol),{basename:e,navigator:n}=A.useContext(Fr),{matches:r}=A.useContext(gr),{pathname:s}=Ur(),o=JSON.stringify(iy(r)),l=A.useRef(!1);return CS(()=>{l.current=!0}),A.useCallback((c,h={})=>{if(pr(l.current,kS),!l.current)return;if(typeof c=="number"){n.go(c);return}let g=oy(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Os([e,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[e,n,o,s,t])}var nN=A.createContext(null);function rN(t){let e=A.useContext(gr).outlet;return e&&A.createElement(nN.Provider,{value:t},e)}function Uc(){let{matches:t}=A.useContext(gr),e=t[t.length-1];return e?e.params:{}}function Bc(t,{relative:e}={}){let{matches:n}=A.useContext(gr),{pathname:r}=Ur(),s=JSON.stringify(iy(n));return A.useMemo(()=>oy(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function sN(t,e){return AS(t,e)}function AS(t,e,n,r){var V;pt(Ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=A.useContext(Fr),{matches:l}=A.useContext(gr),u=l[l.length-1],c=u?u.params:{},h=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let $=v&&v.path||"";PS(h,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let x=Ur(),b;if(e){let $=typeof e=="string"?Go(e):e;pt(g==="/"||((V=$.pathname)==null?void 0:V.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),b=$}else b=x;let k=b.pathname||"/",O=k;if(g!=="/"){let $=g.replace(/^\//,"").split("/");O="/"+k.replace(/^\//,"").split("/").slice($.length).join("/")}let P=!o&&n&&n.matches&&n.matches.length>0?n.matches:_S(t,{pathname:O});pr(v||P!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),pr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=uN(P&&P.map($=>Object.assign({},$,{params:Object.assign({},c,$.params),pathname:Os([g,s.encodeLocation?s.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Os([g,s.encodeLocation?s.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,n,r);return e&&D?A.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},D):D}function iN(){let t=pN(),e=JR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=A.createElement(A.Fragment,null,A.createElement("p",null,"💿 Hey developer 👋"),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,l)}var oN=A.createElement(iN,null),aN=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?A.createElement(gr.Provider,{value:this.props.routeContext},A.createElement(ay.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lN({routeContext:t,match:e,children:n}){let r=A.useContext(Ol);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(gr.Provider,{value:t},n)}function uN(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);pt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(n)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:g,errors:v}=n,x=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||x){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,h,g)=>{let v,x=!1,b=null,k=null;n&&(v=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||oN,l&&(u<0&&g===0?(PS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,k=null):u===g&&(x=!0,k=h.route.hydrateFallbackElement||null)));let O=e.concat(s.slice(0,g+1)),P=()=>{let D;return v?D=b:x?D=k:h.route.Component?D=A.createElement(h.route.Component,null):h.route.element?D=h.route.element:D=c,A.createElement(lN,{match:h,routeContext:{outlet:c,matches:O,isDataRoute:n!=null},children:D})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(aN,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:P(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):P()},null)}function ly(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cN(t){let e=A.useContext(Ol);return pt(e,ly(t)),e}function dN(t){let e=A.useContext(Ff);return pt(e,ly(t)),e}function hN(t){let e=A.useContext(gr);return pt(e,ly(t)),e}function uy(t){let e=hN(t),n=e.matches[e.matches.length-1];return pt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function fN(){return uy("useRouteId")}function pN(){var r;let t=A.useContext(ay),e=dN("useRouteError"),n=uy("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function mN(){let{router:t}=cN("useNavigate"),e=uy("useNavigate"),n=A.useRef(!1);return CS(()=>{n.current=!0}),A.useCallback(async(s,o={})=>{pr(n.current,kS),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var C_={};function PS(t,e,n){!e&&!C_[t]&&(C_[t]=!0,pr(!1,n))}A.memo(gN);function gN({routes:t,future:e,state:n}){return AS(t,void 0,n,e)}function yN({to:t,replace:e,state:n,relative:r}){pt(Ll(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(Fr);pr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext(gr),{pathname:l}=Ur(),u=Qt(),c=oy(t,iy(o),l,r==="path"),h=JSON.stringify(c);return A.useEffect(()=>{u(JSON.parse(h),{replace:e,state:n,relative:r})},[u,h,r,e,n]),null}function IS(t){return rN(t.context)}function Ye(t){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){pt(!Ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof n=="string"&&(n=Go(n));let{pathname:c="/",search:h="",hash:g="",state:v=null,key:x="default"}=n,b=A.useMemo(()=>{let k=Di(c,l);return k==null?null:{location:{pathname:k,search:h,hash:g,state:v,key:x},navigationType:r}},[l,c,h,g,v,x,r]);return pr(b!=null,`<Router basename="${l}"> is not able to match the URL "${c}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Fr.Provider,{value:u},A.createElement(Fc.Provider,{children:e,value:b}))}function xN({children:t,location:e}){return sN(Qg(t),e)}function Qg(t,e=[]){let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let o=[...e,s];if(r.type===A.Fragment){n.push.apply(n,Qg(r.props.children,o));return}pt(r.type===Ye,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Qg(r.props.children,o)),n.push(l)}),n}var $h="get",Fh="application/x-www-form-urlencoded";function Uf(t){return t!=null&&typeof t.tagName=="string"}function wN(t){return Uf(t)&&t.tagName.toLowerCase()==="button"}function _N(t){return Uf(t)&&t.tagName.toLowerCase()==="form"}function bN(t){return Uf(t)&&t.tagName.toLowerCase()==="input"}function EN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TN(t,e){return t.button===0&&(!e||e==="_self")&&!EN(t)}var xh=null;function SN(){if(xh===null)try{new FormData(document.createElement("form"),0),xh=!1}catch{xh=!0}return xh}var kN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(t){return t!=null&&!kN.has(t)?(pr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fh}"`),null):t}function CN(t,e){let n,r,s,o,l;if(_N(t)){let u=t.getAttribute("action");r=u?Di(u,e):null,n=t.getAttribute("method")||$h,s=rg(t.getAttribute("enctype"))||Fh,o=new FormData(t)}else if(wN(t)||bN(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||u.getAttribute("action");if(r=c?Di(c,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||$h,s=rg(t.getAttribute("formenctype"))||rg(u.getAttribute("enctype"))||Fh,o=new FormData(u,t),!SN()){let{name:h,type:g,value:v}=t;if(g==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,v)}}else{if(Uf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$h,r=null,s=Fh,l=t}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:l}}function cy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function AN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function IN(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await AN(o,n);return l.links?l.links():[]}return[]}));return DN(r.flat(1).filter(PN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function A_(t,e,n,r,s,o){let l=(c,h)=>n[h]?c.route.id!==n[h].route.id:!0,u=(c,h)=>{var g;return n[h].pathname!==c.pathname||((g=n[h].route.path)==null?void 0:g.endsWith("*"))&&n[h].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,h)=>l(c,h)||u(c,h)):o==="data"?e.filter((c,h)=>{var v;let g=r.routes[c.route.id];if(!g||!g.hasLoader)return!1;if(l(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let x=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function RN(t,e){return NN(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function NN(t){return[...new Set(t)]}function jN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function DN(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(jN(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function ON(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function LN(){let t=A.useContext(Ol);return cy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function MN(){let t=A.useContext(Ff);return cy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var dy=A.createContext(void 0);dy.displayName="FrameworkContext";function RS(){let t=A.useContext(dy);return cy(t,"You must render this element inside a <HydratedRouter> element"),t}function VN(t,e){let n=A.useContext(dy),[r,s]=A.useState(!1),[o,l]=A.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:g,onTouchStart:v}=e,x=A.useRef(null);A.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let O=D=>{D.forEach(V=>{l(V.isIntersecting)})},P=new IntersectionObserver(O,{threshold:.5});return x.current&&P.observe(x.current),()=>{P.disconnect()}}},[t]),A.useEffect(()=>{if(r){let O=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(O)}}},[r]);let b=()=>{s(!0)},k=()=>{s(!1),l(!1)};return n?t!=="intent"?[o,x,{}]:[o,x,{onFocus:Bu(u,b),onBlur:Bu(c,k),onMouseEnter:Bu(h,b),onMouseLeave:Bu(g,k),onTouchStart:Bu(v,b)}]:[!1,x,{}]}function Bu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $N({page:t,...e}){let{router:n}=LN(),r=A.useMemo(()=>_S(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(UN,{page:t,matches:r,...e}):null}function FN(t){let{manifest:e,routeModules:n}=RS(),[r,s]=A.useState([]);return A.useEffect(()=>{let o=!1;return IN(t,e,n).then(l=>{o||s(l)}),()=>{o=!0}},[t,e,n]),r}function UN({page:t,matches:e,...n}){let r=Ur(),{manifest:s,routeModules:o}=RS(),{loaderData:l,matches:u}=MN(),c=A.useMemo(()=>A_(t,e,u,s,r,"data"),[t,e,u,s,r]),h=A.useMemo(()=>A_(t,e,u,s,r,"assets"),[t,e,u,s,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,k=!1;if(e.forEach(P=>{var V;let D=s.routes[P.route.id];!D||!D.hasLoader||(!c.some($=>$.route.id===P.route.id)&&P.route.id in l&&((V=o[P.route.id])!=null&&V.shouldRevalidate)||D.hasClientLoader?k=!0:b.add(P.route.id))}),b.size===0)return[];let O=ON(t);return k&&b.size>0&&O.searchParams.set("_routes",e.filter(P=>b.has(P.route.id)).map(P=>P.route.id).join(",")),[O.pathname+O.search]},[l,r,s,c,e,t,o]),v=A.useMemo(()=>RN(h,s),[h,s]),x=FN(h);return A.createElement(A.Fragment,null,g.map(b=>A.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),v.map(b=>A.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:k})=>A.createElement("link",{key:b,...k})))}function BN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var NS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NS&&(window.__reactRouterVersion="7.1.5")}catch{}function zN({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=AR({window:n,v5Compat:!0}));let s=r.current,[o,l]=A.useState({action:s.action,location:s.location}),u=A.useCallback(c=>{A.startTransition(()=>l(c))},[l]);return A.useLayoutEffect(()=>s.listen(u),[s,u]),A.createElement(vN,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var jS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ot=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:c,to:h,preventScrollReset:g,viewTransition:v,...x},b){let{basename:k}=A.useContext(Fr),O=typeof h=="string"&&jS.test(h),P,D=!1;if(typeof h=="string"&&O&&(P=h,NS))try{let T=new URL(window.location.href),R=h.startsWith("//")?new URL(T.protocol+h):new URL(h),j=Di(R.pathname,k);R.origin===T.origin&&j!=null?h=j+R.search+R.hash:D=!0}catch{pr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=eN(h,{relative:s}),[$,W,B]=VN(r,x),K=KN(h,{replace:l,state:u,target:c,preventScrollReset:g,relative:s,viewTransition:v});function I(T){e&&e(T),T.defaultPrevented||K(T)}let S=A.createElement("a",{...x,...B,href:P||V,onClick:D||o?e:I,ref:BN(b,W),target:c,"data-discover":!O&&n==="render"?"true":void 0});return $&&!O?A.createElement(A.Fragment,null,S,A.createElement($N,{page:V})):S});ot.displayName="Link";var WN=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:c,...h},g){let v=Bc(l,{relative:h.relative}),x=Ur(),b=A.useContext(Ff),{navigator:k,basename:O}=A.useContext(Fr),P=b!=null&&XN(v)&&u===!0,D=k.encodeLocation?k.encodeLocation(v).pathname:v.pathname,V=x.pathname,$=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(V=V.toLowerCase(),$=$?$.toLowerCase():null,D=D.toLowerCase()),$&&O&&($=Di($,O)||$);const W=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let B=V===D||!s&&V.startsWith(D)&&V.charAt(W)==="/",K=$!=null&&($===D||!s&&$.startsWith(D)&&$.charAt(D.length)==="/"),I={isActive:B,isPending:K,isTransitioning:P},S=B?e:void 0,T;typeof r=="function"?T=r(I):T=[r,B?"active":null,K?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(I):o;return A.createElement(ot,{...h,"aria-current":S,className:T,ref:g,style:R,to:l,viewTransition:u},typeof c=="function"?c(I):c)});WN.displayName="NavLink";var HN=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:l=$h,action:u,onSubmit:c,relative:h,preventScrollReset:g,viewTransition:v,...x},b)=>{let k=JN(),O=YN(u,{relative:h}),P=l.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&jS.test(u),V=$=>{if(c&&c($),$.defaultPrevented)return;$.preventDefault();let W=$.nativeEvent.submitter,B=(W==null?void 0:W.getAttribute("formmethod"))||l;k(W||$.currentTarget,{fetcherKey:e,method:B,navigate:n,replace:s,state:o,relative:h,preventScrollReset:g,viewTransition:v})};return A.createElement("form",{ref:b,method:P,action:O,onSubmit:r?c:V,...x,"data-discover":!D&&t==="render"?"true":void 0})});HN.displayName="Form";function qN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DS(t){let e=A.useContext(Ol);return pt(e,qN(t)),e}function KN(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=Qt(),c=Ur(),h=Bc(t,{relative:o});return A.useCallback(g=>{if(TN(g,e)){g.preventDefault();let v=n!==void 0?n:xc(c)===xc(h);u(t,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,n,r,e,t,s,o,l])}var GN=0,QN=()=>`__${String(++GN)}__`;function JN(){let{router:t}=DS("useSubmit"),{basename:e}=A.useContext(Fr),n=fN();return A.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:c,body:h}=CN(r,e);if(s.navigate===!1){let g=s.fetcherKey||QN();await t.fetch(g,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function YN(t,{relative:e}={}){let{basename:n}=A.useContext(Fr),r=A.useContext(gr);pt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Bc(t||".",{relative:e})},l=Ur();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(g=>g==="")){u.delete("index"),c.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Os([n,o.pathname])),xc(o)}function XN(t,e={}){let n=A.useContext(SS);pt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=DS("useViewTransitionState"),s=Bc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Di(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Di(n.nextLocation.pathname,r)||n.nextLocation.pathname;return nf(s.pathname,l)!=null||nf(s.pathname,o)!=null}new TextEncoder;var ZN=wS();const wh=Ko(ZN);var sg,P_;function e2(){if(P_)return sg;P_=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var u,c,h;if(Array.isArray(o)){if(u=o.length,u!=l.length)return!1;for(c=u;c--!==0;)if(!s(o[c],l[c]))return!1;return!0}var g;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(g=o.entries();!(c=g.next()).done;)if(!l.has(c.value[0]))return!1;for(g=o.entries();!(c=g.next()).done;)if(!s(c.value[1],l.get(c.value[0])))return!1;return!0}if(n&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(g=o.entries();!(c=g.next()).done;)if(!l.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(u=o.length,u!=l.length)return!1;for(c=u;c--!==0;)if(o[c]!==l[c])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(h=Object.keys(o),u=h.length,u!==Object.keys(l).length)return!1;for(c=u;c--!==0;)if(!Object.prototype.hasOwnProperty.call(l,h[c]))return!1;if(t&&o instanceof Element)return!1;for(c=u;c--!==0;)if(!((h[c]==="_owner"||h[c]==="__v"||h[c]==="__o")&&o.$$typeof)&&!s(o[h[c]],l[h[c]]))return!1;return!0}return o!==o&&l!==l}return sg=function(l,u){try{return s(l,u)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},sg}var t2=e2();const n2=Ko(t2);var ig,I_;function r2(){if(I_)return ig;I_=1;var t=function(e,n,r,s,o,l,u,c){if(!e){var h;if(n===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[r,s,o,l,u,c],v=0;h=new Error(n.replace(/%s/g,function(){return g[v++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return ig=t,ig}var s2=r2();const R_=Ko(s2);var og,N_;function i2(){return N_||(N_=1,og=function(e,n,r,s){var o=r?r.call(s,e,n):void 0;if(o!==void 0)return!!o;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(n),h=0;h<l.length;h++){var g=l[h];if(!c(g))return!1;var v=e[g],x=n[g];if(o=r?r.call(s,v,x,g):void 0,o===!1||o===void 0&&v!==x)return!1}return!0}),og}var o2=i2();const a2=Ko(o2);var OS=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(OS||{}),ag={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},j_=Object.values(OS),hy={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},l2=Object.entries(hy).reduce((t,[e,n])=>(t[n]=e,t),{}),Lr="data-rh",fl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},pl=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},u2=t=>{let e=pl(t,"title");const n=pl(t,fl.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=pl(t,fl.DEFAULT_TITLE);return e||r||void 0},c2=t=>pl(t,fl.ON_CHANGE_CLIENT_STATE)||(()=>{}),lg=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),d2=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let o=0;o<s.length;o+=1){const u=s[o].toLowerCase();if(t.indexOf(u)!==-1&&r[u])return n.concat(r)}}return n},[]),h2=t=>console&&typeof console.warn=="function"&&console.warn(t),zu=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&h2(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,o)=>{const l={};o.filter(c=>{let h;const g=Object.keys(c);for(let x=0;x<g.length;x+=1){const b=g[x],k=b.toLowerCase();e.indexOf(k)!==-1&&!(h==="rel"&&c[h].toLowerCase()==="canonical")&&!(k==="rel"&&c[k].toLowerCase()==="stylesheet")&&(h=k),e.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(h=b)}if(!h||!c[h])return!1;const v=c[h].toLowerCase();return r[h]||(r[h]={}),l[h]||(l[h]={}),r[h][v]?!1:(l[h][v]=!0,!0)}).reverse().forEach(c=>s.push(c));const u=Object.keys(l);for(let c=0;c<u.length;c+=1){const h=u[c],g={...r[h],...l[h]};r[h]=g}return s},[]).reverse()},f2=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},p2=t=>({baseTag:d2(["href"],t),bodyAttributes:lg("bodyAttributes",t),defer:pl(t,fl.DEFER),encode:pl(t,fl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:lg("htmlAttributes",t),linkTags:zu("link",["rel","href"],t),metaTags:zu("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:zu("noscript",["innerHTML"],t),onChangeClientState:c2(t),scriptTags:zu("script",["src","innerHTML"],t),styleTags:zu("style",["cssText"],t),title:u2(t),titleAttributes:lg("titleAttributes",t),prioritizeSeoTags:f2(t,fl.PRIORITIZE_SEO_TAGS)}),LS=t=>Array.isArray(t)?t.join(""):t,m2=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},ug=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(m2(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},D_=(t,e)=>({...t,[e]:void 0}),g2=["noscript","script","style"],Jg=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),MS=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),y2=(t,e,n,r)=>{const s=MS(n),o=LS(e);return s?`<${t} ${Lr}="true" ${s}>${Jg(o,r)}</${t}>`:`<${t} ${Lr}="true">${Jg(o,r)}</${t}>`},v2=(t,e,n=!0)=>e.reduce((r,s)=>{const o=s,l=Object.keys(o).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,g)=>{const v=typeof o[g]>"u"?g:`${g}="${Jg(o[g],n)}"`;return h?`${h} ${v}`:v},""),u=o.innerHTML||o.cssText||"",c=g2.indexOf(t)===-1;return`${r}<${t} ${Lr}="true" ${l}${c?"/>":`>${u}</${t}>`}`},""),VS=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=hy[r];return n[s||r]=t[r],n},e),x2=(t,e,n)=>{const r={key:e,[Lr]:!0},s=VS(n,r);return[nt.createElement("title",s,e)]},Uh=(t,e)=>e.map((n,r)=>{const s={key:r,[Lr]:!0};return Object.keys(n).forEach(o=>{const u=hy[o]||o;if(u==="innerHTML"||u==="cssText"){const c=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[u]=n[o]}),nt.createElement(t,s)}),ur=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>x2(t,e.title,e.titleAttributes),toString:()=>y2(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>VS(e),toString:()=>MS(e)};default:return{toComponent:()=>Uh(t,e),toString:()=>v2(t,e,n)}}},w2=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=ug(t,ag.meta),o=ug(e,ag.link),l=ug(n,ag.script);return{priorityMethods:{toComponent:()=>[...Uh("meta",s.priority),...Uh("link",o.priority),...Uh("script",l.priority)],toString:()=>`${ur("meta",s.priority,r)} ${ur("link",o.priority,r)} ${ur("script",l.priority,r)}`},metaTags:s.default,linkTags:o.default,scriptTags:l.default}},_2=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:o,styleTags:l,title:u="",titleAttributes:c,prioritizeSeoTags:h}=t;let{linkTags:g,metaTags:v,scriptTags:x}=t,b={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:b,linkTags:g,metaTags:v,scriptTags:x}=w2(t)),{priority:b,base:ur("base",e,r),bodyAttributes:ur("bodyAttributes",n,r),htmlAttributes:ur("htmlAttributes",s,r),link:ur("link",g,r),meta:ur("meta",v,r),noscript:ur("noscript",o,r),script:ur("script",x,r),style:ur("style",l,r),title:ur("title",{title:u,titleAttributes:c},r)}},Yg=_2,_h=[],$S=!!(typeof window<"u"&&window.document&&window.document.createElement),Xg=class{constructor(t,e){Is(this,"instances",[]);Is(this,"canUseDOM",$S);Is(this,"context");Is(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?_h:this.instances,add:t=>{(this.canUseDOM?_h:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?_h:this.instances).indexOf(t);(this.canUseDOM?_h:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Yg({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},b2={},FS=nt.createContext(b2),Lo,US=(Lo=class extends A.Component{constructor(n){super(n);Is(this,"helmetData");this.helmetData=new Xg(this.props.context||{},Lo.canUseDOM)}render(){return nt.createElement(FS.Provider,{value:this.helmetData.value},this.props.children)}},Is(Lo,"canUseDOM",$S),Lo),Ha=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${Lr}]`),s=[].slice.call(r),o=[];let l;return e&&e.length&&e.forEach(u=>{const c=document.createElement(t);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h))if(h==="innerHTML")c.innerHTML=u.innerHTML;else if(h==="cssText")c.styleSheet?c.styleSheet.cssText=u.cssText:c.appendChild(document.createTextNode(u.cssText));else{const g=h,v=typeof u[g]>"u"?"":u[g];c.setAttribute(h,v)}c.setAttribute(Lr,"true"),s.some((h,g)=>(l=g,c.isEqualNode(h)))?s.splice(l,1):o.push(c)}),s.forEach(u=>{var c;return(c=u.parentNode)==null?void 0:c.removeChild(u)}),o.forEach(u=>n.appendChild(u)),{oldTags:s,newTags:o}},Zg=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(Lr),s=r?r.split(","):[],o=[...s],l=Object.keys(e);for(const u of l){const c=e[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),s.indexOf(u)===-1&&s.push(u);const h=o.indexOf(u);h!==-1&&o.splice(h,1)}for(let u=o.length-1;u>=0;u-=1)n.removeAttribute(o[u]);s.length===o.length?n.removeAttribute(Lr):n.getAttribute(Lr)!==l.join(",")&&n.setAttribute(Lr,l.join(","))},E2=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=LS(t)),Zg("title",e)},O_=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:o,metaTags:l,noscriptTags:u,onChangeClientState:c,scriptTags:h,styleTags:g,title:v,titleAttributes:x}=t;Zg("body",r),Zg("html",s),E2(v,x);const b={baseTag:Ha("base",n),linkTags:Ha("link",o),metaTags:Ha("meta",l),noscriptTags:Ha("noscript",u),scriptTags:Ha("script",h),styleTags:Ha("style",g)},k={},O={};Object.keys(b).forEach(P=>{const{newTags:D,oldTags:V}=b[P];D.length&&(k[P]=D),V.length&&(O[P]=b[P].oldTags)}),e&&e(),c(t,k,O)},Wu=null,T2=t=>{Wu&&cancelAnimationFrame(Wu),t.defer?Wu=requestAnimationFrame(()=>{O_(t,()=>{Wu=null})}):(O_(t),Wu=null)},S2=T2,L_=class extends A.Component{constructor(){super(...arguments);Is(this,"rendered",!1)}shouldComponentUpdate(e){return!a2(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=p2(e.get().map(o=>{const l={...o.props};return delete l.context,l}));US.canUseDOM?S2(s):Yg&&(r=Yg(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Kg,k2=(Kg=class extends A.Component{shouldComponentUpdate(t){return!n2(D_(this.props,"helmetData"),D_(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return R_(j_.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${j_.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),R_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return nt.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...o}=r.props,l=Object.keys(o).reduce((c,h)=>(c[l2[h]||h]=o[h],c),{});let{type:u}=r;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(r,s),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,l,s);break;default:e=this.mapObjectTypeChildren(r,e,l,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof Xg)){const s=r;r=new Xg(s.context,!0),delete n.helmetData}return r?nt.createElement(L_,{...n,context:r.value}):nt.createElement(FS.Consumer,null,s=>nt.createElement(L_,{...n,context:s}))}},Is(Kg,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Kg);function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rf.apply(null,arguments)}function fy(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function e0(t,e){return e0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},e0(t,e)}function py(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,e0(t,e)}function C2(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function A2(t,e){t.classList?t.classList.add(e):C2(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function M_(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function P2(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=M_(t.className,e):t.setAttribute("class",M_(t.className&&t.className.baseVal||"",e))}const V_={disabled:!1},sf=nt.createContext(null);var BS=function(e){return e.scrollTop},Qu="unmounted",So="exited",ko="entering",tl="entered",t0="exiting",Bs=function(t){py(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var l=s,u=l&&!l.isMounting?r.enter:r.appear,c;return o.appearStatus=null,r.in?u?(c=So,o.appearStatus=ko):c=tl:r.unmountOnExit||r.mountOnEnter?c=Qu:c=So,o.state={status:c},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Qu?{status:So}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==ko&&l!==tl&&(o=ko):(l===ko||l===tl)&&(o=t0)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===ko){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:wh.findDOMNode(this);l&&BS(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===So&&this.setState({status:Qu})},n.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,c=this.props.nodeRef?[u]:[wh.findDOMNode(this),u],h=c[0],g=c[1],v=this.getTimeouts(),x=u?v.appear:v.enter;if(!s&&!l||V_.disabled){this.safeSetState({status:tl},function(){o.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:ko},function(){o.props.onEntering(h,g),o.onTransitionEnd(x,function(){o.safeSetState({status:tl},function(){o.props.onEntered(h,g)})})})},n.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:wh.findDOMNode(this);if(!o||V_.disabled){this.safeSetState({status:So},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:t0},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:So},function(){s.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:wh.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=c[0],g=c[1];this.props.addEndListener(h,g)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Qu)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=fy(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return nt.createElement(sf.Provider,{value:null},typeof l=="function"?l(s,u):nt.cloneElement(nt.Children.only(l),u))},e}(nt.Component);Bs.contextType=sf;Bs.propTypes={};function qa(){}Bs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:qa,onEntering:qa,onEntered:qa,onExit:qa,onExiting:qa,onExited:qa};Bs.UNMOUNTED=Qu;Bs.EXITED=So;Bs.ENTERING=ko;Bs.ENTERED=tl;Bs.EXITING=t0;var I2=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return A2(e,r)})},cg=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return P2(e,r)})},Bf=function(t){py(e,t);function e(){for(var r,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r=t.call.apply(t,[this].concat(o))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1];r.removeClasses(g,"exit"),r.addClass(g,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(u,c)},r.onEntering=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1],x=v?"appear":"enter";r.addClass(g,x,"active"),r.props.onEntering&&r.props.onEntering(u,c)},r.onEntered=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1],x=v?"appear":"enter";r.removeClasses(g,x),r.addClass(g,x,"done"),r.props.onEntered&&r.props.onEntered(u,c)},r.onExit=function(u){var c=r.resolveArguments(u),h=c[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(u)},r.onExiting=function(u){var c=r.resolveArguments(u),h=c[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(u)},r.onExited=function(u){var c=r.resolveArguments(u),h=c[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(u)},r.resolveArguments=function(u,c){return r.props.nodeRef?[r.props.nodeRef.current,u]:[u,c]},r.getClassNames=function(u){var c=r.props.classNames,h=typeof c=="string",g=h&&c?c+"-":"",v=h?""+g+u:c[u],x=h?v+"-active":c[u+"Active"],b=h?v+"-done":c[u+"Done"];return{baseClassName:v,activeClassName:x,doneClassName:b}},r}var n=e.prototype;return n.addClass=function(s,o,l){var u=this.getClassNames(o)[l+"ClassName"],c=this.getClassNames("enter"),h=c.doneClassName;o==="appear"&&l==="done"&&h&&(u+=" "+h),l==="active"&&s&&BS(s),u&&(this.appliedClasses[o][l]=u,I2(s,u))},n.removeClasses=function(s,o){var l=this.appliedClasses[o],u=l.base,c=l.active,h=l.done;this.appliedClasses[o]={},u&&cg(s,u),c&&cg(s,c),h&&cg(s,h)},n.render=function(){var s=this.props;s.classNames;var o=fy(s,["classNames"]);return nt.createElement(Bs,rf({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(nt.Component);Bf.defaultProps={classNames:""};Bf.propTypes={};function R2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function my(t,e){var n=function(o){return e&&A.isValidElement(o)?e(o):o},r=Object.create(null);return t&&A.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function N2(t,e){t=t||{},e=e||{};function n(g){return g in e?e[g]:t[g]}var r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,u={};for(var c in e){if(r[c])for(l=0;l<r[c].length;l++){var h=r[c][l];u[r[c][l]]=n(h)}u[c]=n(c)}for(l=0;l<s.length;l++)u[s[l]]=n(s[l]);return u}function Ro(t,e,n){return n[e]!=null?n[e]:t.props[e]}function j2(t,e){return my(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Ro(n,"appear",t),enter:Ro(n,"enter",t),exit:Ro(n,"exit",t)})})}function D2(t,e,n){var r=my(t.children),s=N2(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(A.isValidElement(l)){var u=o in e,c=o in r,h=e[o],g=A.isValidElement(h)&&!h.props.in;c&&(!u||g)?s[o]=A.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:Ro(l,"exit",t),enter:Ro(l,"enter",t)}):!c&&u&&!g?s[o]=A.cloneElement(l,{in:!1}):c&&u&&A.isValidElement(h)&&(s[o]=A.cloneElement(l,{onExited:n.bind(null,l),in:h.props.in,exit:Ro(l,"exit",t),enter:Ro(l,"enter",t)}))}}),s}var O2=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},L2={component:"div",childFactory:function(e){return e}},zf=function(t){py(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var l=o.handleExited.bind(R2(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,c=o.firstRender;return{children:c?j2(s,u):D2(s,l,u),firstRender:!1}},n.handleExited=function(s,o){var l=my(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var c=rf({},u.children);return delete c[s.key],{children:c}}))},n.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=fy(s,["component","childFactory"]),c=this.state.contextValue,h=O2(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?nt.createElement(sf.Provider,{value:c},h):nt.createElement(sf.Provider,{value:c},nt.createElement(o,u,h))},e}(nt.Component);zf.propTypes={};zf.defaultProps=L2;const M2="modulepreload",V2=function(t){return"/AussieGutPack/"+t},$_={},bl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=V2(c),c in $_)return;$_[c]=!0;const h=c.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":M2,h||(v.as="script"),v.crossOrigin="",v.href=c,u&&v.setAttribute("nonce",u),document.head.appendChild(v),h)return new Promise((x,b)=>{v.addEventListener("load",x),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},$2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bl(async()=>{const{default:r}=await Promise.resolve().then(()=>Ml);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class gy extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class F2 extends gy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class U2 extends gy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class B2 extends gy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var n0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(n0||(n0={}));var z2=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class W2{constructor(e,{headers:n={},customFetch:r,region:s=n0.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=$2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return z2(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=n;let u={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(u["x-region"]=c);let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h}).catch(k=>{throw new F2(k)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new U2(g);if(!g.ok)throw new B2(g);let x=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield g.json():x==="application/octet-stream"?b=yield g.blob():x==="text/event-stream"?b=g:x==="multipart/form-data"?b=yield g.formData():b=yield g.text(),{data:b,error:null}}catch(s){return{data:null,error:s}}})}}var qt={},Ka={},Ga={},Qa={},Ja={},Ya={},H2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},El=H2();const q2=El.fetch,zS=El.fetch.bind(El),WS=El.Headers,K2=El.Request,G2=El.Response,Ml=Object.freeze(Object.defineProperty({__proto__:null,Headers:WS,Request:K2,Response:G2,default:zS,fetch:q2},Symbol.toStringTag,{value:"Module"})),Q2=yR(Ml);var bh={},F_;function HS(){if(F_)return bh;F_=1,Object.defineProperty(bh,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return bh.default=t,bh}var U_;function qS(){if(U_)return Ya;U_=1;var t=Ya&&Ya.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ya,"__esModule",{value:!0});const e=t(Q2),n=t(HS());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var g,v,x;let b=null,k=null,O=null,P=h.status,D=h.statusText;if(h.ok){if(this.method!=="HEAD"){const B=await h.text();B===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=B:k=JSON.parse(B))}const $=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),W=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");$&&W&&W.length>1&&(O=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,O=null,P=406,D="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const $=await h.text();try{b=JSON.parse($),Array.isArray(b)&&h.status===404&&(k=[],b=null,P=200,D="OK")}catch{h.status===404&&$===""?(P=204,D="No Content"):b={message:$}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,P=200,D="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:k,count:O,status:P,statusText:D}});return this.shouldThrowOnError||(c=c.catch(h=>{var g,v,x;return{error:{message:`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(v=h==null?void 0:h.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(x=h==null?void 0:h.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return Ya.default=r,Ya}var B_;function KS(){if(B_)return Ja;B_=1;var t=Ja&&Ja.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ja,"__esModule",{value:!0});const e=t(qS());class n extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const h=c?`${c}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(h,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:h="text"}={}){var g;const v=[s?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),x=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${x}"; options=${v};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ja.default=n,Ja}var z_;function yy(){if(z_)return Qa;z_=1;var t=Qa&&Qa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qa,"__esModule",{value:!0});const e=t(KS());class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${c}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return Qa.default=n,Qa}var W_;function GS(){if(W_)return Ga;W_=1;var t=Ga&&Ga.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ga,"__esModule",{value:!0});const e=t(yy());class n{constructor(s,{headers:o={},schema:l,fetch:u}){this.url=s,this.headers=o,this.schema=l,this.fetch=u}select(s,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let c=!1;const h=(s??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const u="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const h=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(h.length>0){const g=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){const h="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),c||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(s)){const v=s.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(v.length>0){const x=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ga.default=n,Ga}var Hu={},qu={},H_;function J2(){return H_||(H_=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.version=void 0,qu.version="0.0.0-automated"),qu}var q_;function Y2(){if(q_)return Hu;q_=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.DEFAULT_HEADERS=void 0;const t=J2();return Hu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Hu}var K_;function X2(){if(K_)return Ka;K_=1;var t=Ka&&Ka.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ka,"__esModule",{value:!0});const e=t(GS()),n=t(yy()),r=Y2();class s{constructor(l,{headers:u={},schema:c,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=c,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:c=!1,get:h=!1,count:g}={}){let v;const x=new URL(`${this.url}/rpc/${l}`);let b;c||h?(v=c?"HEAD":"GET",Object.entries(u).filter(([O,P])=>P!==void 0).map(([O,P])=>[O,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([O,P])=>{x.searchParams.append(O,P)})):(v="POST",b=u);const k=Object.assign({},this.headers);return g&&(k.Prefer=`count=${g}`),new n.default({method:v,url:x,headers:k,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Ka.default=s,Ka}var G_;function Z2(){if(G_)return qt;G_=1;var t=qt&&qt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.PostgrestError=qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const e=t(X2());qt.PostgrestClient=e.default;const n=t(GS());qt.PostgrestQueryBuilder=n.default;const r=t(yy());qt.PostgrestFilterBuilder=r.default;const s=t(KS());qt.PostgrestTransformBuilder=s.default;const o=t(qS());qt.PostgrestBuilder=o.default;const l=t(HS());return qt.PostgrestError=l.default,qt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},qt}var ej=Z2();const tj=Ko(ej),{PostgrestClient:nj,PostgrestQueryBuilder:Ez,PostgrestFilterBuilder:Tz,PostgrestTransformBuilder:Sz,PostgrestBuilder:kz,PostgrestError:Cz}=tj,rj="2.11.2",sj={"X-Client-Info":`realtime-js/${rj}`},ij="1.0.0",QS=1e4,oj=1e3;var ml;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ml||(ml={}));var qn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(qn||(qn={}));var Or;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Or||(Or={}));var r0;(function(t){t.websocket="websocket"})(r0||(r0={}));var Io;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Io||(Io={}));class aj{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+o));l=l+o;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:c,payload:h}}}class JS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const Q_=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=lj(l,t,e,s),o),{})},lj=(t,e,n,r)=>{const s=e.find(u=>u.name===t),o=s==null?void 0:s.type,l=n[t];return o&&!r.includes(o)?YS(o,l):s0(l)},YS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return hj(e,n)}switch(t){case it.bool:return uj(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return cj(e);case it.json:case it.jsonb:return dj(e);case it.timestamp:return fj(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return s0(e);default:return s0(e)}},s0=t=>t,uj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},cj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},hj=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>YS(e,u))}return t},fj=t=>typeof t=="string"?t.replace(" ","T"):t,XS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class dg{constructor(e,n,r={},s=QS){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var J_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(J_||(J_={}));class ic{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ic.syncState(this.state,s,o,l),this.pendingDiffs.forEach(c=>{this.state=ic.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ic.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),l=this.transformState(n),u={},c={};return this.map(o,(h,g)=>{l[h]||(c[h]=g)}),this.map(l,(h,g)=>{const v=o[h];if(v){const x=g.map(P=>P.presence_ref),b=v.map(P=>P.presence_ref),k=g.filter(P=>b.indexOf(P.presence_ref)<0),O=v.filter(P=>x.indexOf(P.presence_ref)<0);k.length>0&&(u[h]=k),O.length>0&&(c[h]=O)}else u[h]=g}),this.syncDiff(o,{joins:u,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(u,c)=>{var h;const g=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(c),g.length>0){const v=e[u].map(b=>b.presence_ref),x=g.filter(b=>v.indexOf(b.presence_ref)<0);e[u].unshift(...x)}r(u,g,c)}),this.map(l,(u,c)=>{let h=e[u];if(!h)return;const g=c.map(v=>v.presence_ref);h=h.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=h,s(u,h,c),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Y_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Y_||(Y_={}));var X_;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(X_||(X_={}));var Rs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Rs||(Rs={}));class vy{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=qn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dg(this,Or.join,this.params,this.timeout),this.rejoinTimer=new JS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Or.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new ic(this),this.broadcastEndpointURL=XS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:u}}=this.params;this._onError(g=>e==null?void 0:e(Rs.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Rs.CLOSED));const c={},h={broadcast:o,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(Rs.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,k=[];for(let O=0;O<b;O++){const P=x[O],{filter:{event:D,schema:V,table:$,filter:W}}=P,B=g&&g[O];if(B&&B.event===D&&B.schema===V&&B.table===$&&B.filter===W)k.push(Object.assign(Object.assign({},P),{id:B.id}));else{this.unsubscribe(),e==null||e(Rs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(Rs.SUBSCRIBED);return}}).receive("error",g=>{e==null||e(Rs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Rs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Or.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new dg(this,Or.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new dg(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const l=e.toLocaleLowerCase(),{close:u,error:c,leave:h,join:g}=Or;if(r&&[u,c,h,g].indexOf(l)>=0&&r!==this._joinRef())return;let x=this._onMessage(l,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var k,O,P;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(O=b.filter)===null||O===void 0?void 0:O.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===l}).map(b=>b.callback(x,r)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var k,O,P,D,V,$;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const W=b.id,B=(k=b.filter)===null||k===void 0?void 0:k.event;return W&&((O=n.ids)===null||O===void 0?void 0:O.includes(W))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const W=(V=(D=b==null?void 0:b.filter)===null||D===void 0?void 0:D.event)===null||V===void 0?void 0:V.toLocaleLowerCase();return W==="*"||W===(($=n==null?void 0:n.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:O,table:P,commit_timestamp:D,type:V,errors:$}=k;x=Object.assign(Object.assign({},{schema:O,table:P,commit_timestamp:D,eventType:V,new:{},old:{},errors:$}),this._getPayloadRecords(k))}b.callback(x,r)})}_isClosed(){return this.state===qn.closed}_isJoined(){return this.state===qn.joined}_isJoining(){return this.state===qn.joining}_isLeaving(){return this.state===qn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&vy.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Or.close,{},e)}_onError(e){this._on(Or.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Q_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Q_(e.columns,e.old_record)),n}}const pj=()=>{},mj=typeof WebSocket<"u",gj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yj{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=sj,this.params={},this.timeout=QS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=pj,this.conn=null,this.sendBuffer=[],this.serializer=new aj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>bl(async()=>{const{default:c}=await Promise.resolve().then(()=>Ml);return{default:c}},void 0).then(({default:c})=>c(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${r0.websocket}`,this.httpEndpoint=XS(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,l)=>l(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new JS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(mj){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new vj(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),bl(async()=>{const{default:e}=await import("./browser-b1t4HR4r.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ij}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ml.connecting:return Io.Connecting;case ml.open:return Io.Open;case ml.closing:return Io.Closing;default:return Io.Closed}}isConnected(){return this.connectionState()===Io.Open}channel(e,n={config:{}}){const r=new vy(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Or.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(oj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:o,ref:l}=n;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,l)),this.stateChangeCallbacks.message.forEach(u=>u(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Or.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([gj],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class vj{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ml.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let xy=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Kt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class xj extends xy{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class i0 extends xy{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var wj=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const ZS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bl(async()=>{const{default:r}=await Promise.resolve().then(()=>Ml);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},_j=()=>wj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield bl(()=>Promise.resolve().then(()=>Ml),void 0)).Response:Response}),o0=t=>{if(Array.isArray(t))return t.map(n=>o0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=o0(r)}),e};var Qo=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const hg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bj=(t,e,n)=>Qo(void 0,void 0,void 0,function*(){const r=yield _j();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new xj(hg(s),t.status||500))}).catch(s=>{e(new i0(hg(s),s))}):e(new i0(hg(t),t))}),Ej=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function zc(t,e,n,r,s,o){return Qo(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,Ej(e,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>bj(c,u,r))})})}function of(t,e,n,r){return Qo(this,void 0,void 0,function*(){return zc(t,"GET",e,n,r)})}function _i(t,e,n,r,s){return Qo(this,void 0,void 0,function*(){return zc(t,"POST",e,r,s,n)})}function Tj(t,e,n,r,s){return Qo(this,void 0,void 0,function*(){return zc(t,"PUT",e,r,s,n)})}function Sj(t,e,n,r){return Qo(this,void 0,void 0,function*(){return zc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function ek(t,e,n,r,s){return Qo(this,void 0,void 0,function*(){return zc(t,"DELETE",e,r,s,n)})}var Rn=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const kj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Z_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Cj{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=ZS(s)}uploadOrUpdate(e,n,r,s){return Rn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},Z_),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const h=this._removeEmptyFolders(n),g=this._getFinalPath(h),v=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:o,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),x=yield v.json();return v.ok?{data:{path:h,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(o){if(Kt(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Rn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:Z_.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const v=yield this.fetch(u.toString(),{method:"PUT",body:c,headers:g}),x=yield v.json();return v.ok?{data:{path:o,fullPath:x.Key},error:null}:{data:null,error:x}}catch(c){if(Kt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Rn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield _i(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new xy("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Rn(this,void 0,void 0,function*(){try{return{data:yield _i(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Rn(this,void 0,void 0,function*(){try{return{data:{path:(yield _i(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Rn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield _i(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Rn(this,void 0,void 0,function*(){try{const s=yield _i(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}download(e,n){return Rn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield of(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Kt(u))return{data:null,error:u};throw u}})}info(e){return Rn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield of(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:o0(r),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}exists(e){return Rn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Sj(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Kt(r)&&r instanceof i0){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return Rn(this,void 0,void 0,function*(){try{return{data:yield ek(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Rn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},kj),n),{prefix:e||""});return{data:yield _i(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Aj="2.7.1",Pj={"X-Client-Info":`storage-js/${Aj}`};var Xa=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class Ij{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Pj),n),this.fetch=ZS(r)}listBuckets(){return Xa(this,void 0,void 0,function*(){try{return{data:yield of(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Kt(e))return{data:null,error:e};throw e}})}getBucket(e){return Xa(this,void 0,void 0,function*(){try{return{data:yield of(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Xa(this,void 0,void 0,function*(){try{return{data:yield _i(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Xa(this,void 0,void 0,function*(){try{return{data:yield Tj(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Xa(this,void 0,void 0,function*(){try{return{data:yield _i(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Xa(this,void 0,void 0,function*(){try{return{data:yield ek(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}}class Rj extends Ij{constructor(e,n={},r){super(e,n,r)}from(e){return new Cj(this.url,this.headers,e,this.fetch)}}const Nj="2.49.8";let Ju="";typeof Deno<"u"?Ju="deno":typeof document<"u"?Ju="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ju="react-native":Ju="node";const jj={"X-Client-Info":`supabase-js-${Ju}/${Nj}`},Dj={headers:jj},Oj={schema:"public"},Lj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mj={};var Vj=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const $j=t=>{let e;return t?e=t:typeof fetch>"u"?e=zS:e=fetch,(...n)=>e(...n)},Fj=()=>typeof Headers>"u"?WS:Headers,Uj=(t,e,n)=>{const r=$j(n),s=Fj();return(o,l)=>Vj(void 0,void 0,void 0,function*(){var u;const c=(u=yield e())!==null&&u!==void 0?u:t;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:h}))})};var Bj=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};function zj(t){return t.endsWith("/")?t:t+"/"}function Wj(t,e){var n,r;const{db:s,auth:o,realtime:l,global:u}=t,{db:c,auth:h,realtime:g,global:v}=e,x={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},h),o),realtime:Object.assign(Object.assign({},g),l),global:Object.assign(Object.assign(Object.assign({},v),u),{headers:Object.assign(Object.assign({},(n=v==null?void 0:v.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Bj(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}const tk="2.69.1",nl=30*1e3,a0=3,fg=a0*nl,Hj="http://localhost:9999",qj="supabase.auth.token",Kj={"X-Client-Info":`gotrue-js/${tk}`},l0="X-Supabase-Api-Version",nk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qj=6e5;class wy extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Me(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Jj extends wy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Yj(t){return Me(t)&&t.name==="AuthApiError"}class rk extends wy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class zi extends wy{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class vi extends zi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xj(t){return Me(t)&&t.name==="AuthSessionMissingError"}class pg extends zi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Eh extends zi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Th extends zi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zj(t){return Me(t)&&t.name==="AuthImplicitGrantRedirectError"}class eb extends zi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class u0 extends zi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function mg(t){return Me(t)&&t.name==="AuthRetryableFetchError"}class tb extends zi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class oc extends zi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rb=` 	
\r=`.split(""),eD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<rb.length;e+=1)t[rb[e].charCodeAt(0)]=-2;for(let e=0;e<nb.length;e+=1)t[nb[e].charCodeAt(0)]=e;return t})();function sk(t,e,n){const r=eD[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function sb(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{rD(l,r,n)};for(let l=0;l<t.length;l+=1)sk(t.charCodeAt(l),s,o);return e.join("")}function tD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nD(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}tD(r,e)}}function rD(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function sD(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)sk(t.charCodeAt(s),n,r);return new Uint8Array(e)}function iD(t){const e=[];return nD(t,n=>e.push(n)),new Uint8Array(e)}function oD(t){return Math.round(Date.now()/1e3)+t}function aD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Zr=()=>typeof window<"u"&&typeof document<"u",Eo={tested:!1,writable:!1},ac=()=>{if(!Zr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Eo.tested)return Eo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Eo.tested=!0,Eo.writable=!0}catch{Eo.tested=!0,Eo.writable=!1}return Eo.writable};function lD(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const ik=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>bl(async()=>{const{default:r}=await Promise.resolve().then(()=>Ml);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ok=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Sh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},kh=async(t,e)=>{await t.removeItem(e)};let ak=class lk{constructor(){this.promise=new lk.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};ak.promiseConstructor=Promise;function gg(t){const e=t.split(".");if(e.length!==3)throw new oc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Gj.test(e[r]))throw new oc("JWT not in base64url format");return{header:JSON.parse(sb(e[0])),payload:JSON.parse(sb(e[1])),signature:sD(e[2]),raw:{header:e[0],payload:e[1]}}}async function cD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function dD(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function hD(t){return("0"+t.toString(16)).substr(-2)}function fD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,hD).join("")}async function pD(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function mD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await pD(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Za(t,e,n=!1){const r=fD();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ok(t,`${e}-code-verifier`,s);const o=await mD(r);return[o,r===o?"plain":"s256"]}const gD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yD(t){const e=t.headers.get(l0);if(!e||!e.match(gD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function xD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var wD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Co=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_D=[502,503,504];async function ib(t){var e;if(!uD(t))throw new u0(Co(t),0);if(_D.includes(t.status))throw new u0(Co(t),t.status);let n;try{n=await t.json()}catch(o){throw new rk(Co(o),o)}let r;const s=yD(t);if(s&&s.getTime()>=nk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new tb(Co(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new vi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new tb(Co(n),t.status,n.weak_password.reasons);throw new Jj(Co(n),t.status||500,r)}const bD=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[l0]||(o[l0]=nk["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await ED(t,e,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ED(t,e,n,r,s,o){const l=bD(e,r,s,o);let u;try{u=await t(n,Object.assign({},l))}catch(c){throw console.error(c),new u0(Co(c),0)}if(u.ok||await ib(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await ib(c)}}function xi(t){var e;let n=null;CD(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=oD(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ob(t){const e=xi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function bi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function TD(t){return{data:t,error:null}}function SD(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,l=wD(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function kD(t){return t}function CD(t){return t.access_token&&t.refresh_token&&t.expires_in}var AD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class PD{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=ik(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:bi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=AD(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:SD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Me(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bi})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,l,u,c;try{const h={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:kD});if(g.error)throw g.error;const v=await g.json(),x=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(c=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(k=>{const O=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);h[`${P}Page`]=O}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Me(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bi})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:bi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:bi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}const ID={getItem:t=>ac()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ac()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ac()&&globalThis.localStorage.removeItem(t)}};function ab(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function RD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const el={debug:!!(globalThis&&ac()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ND extends uk{}async function jD(t,e,n){el.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),el.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){el.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{el.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw el.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ND(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(el.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}RD();const DD={url:Hj,storageKey:qj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lb(t,e,n){return await n()}class wc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wc.nextInstanceID,wc.nextInstanceID+=1,this.instanceID>0&&Zr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},DD),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new PD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ik(s.fetch),this.lock=s.lock||lb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Zr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=jD:this.lock=lb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ac()?this.storage=ID:(this.memoryStorage={},this.storage=ab(this.memoryStorage)):(this.memoryStorage={},this.storage=ab(this.memoryStorage)),Zr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tk}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=lD(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Zr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Zj(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Me(n)?{error:n}:{error:new rk("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:xi}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:g,password:v,options:x}=e;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await Za(this.storage,this.storageKey)),o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:g,password:v,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:k},xform:xi})}else if("phone"in e){const{phone:g,password:v,options:x}=e;o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:xi})}else throw new Eh("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ob})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ob})}else throw new Eh("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new pg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Sh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:l}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:xi});if(await kh(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new pg}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(Me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:l}=e,u=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xi}),{data:c,error:h}=u;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new pg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,l;try{if("email"in e){const{email:u,options:c}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Za(this.storage,this.storageKey));const{error:v}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:c}=e,{data:h,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g}}throw new Eh("You must provide either an email or phone number.")}catch(u){if(Me(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:xi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,h=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(Me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Za(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:TD})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new vi;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:u}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Eh("You must provide either an email or phone number and a type")}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Sh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,g)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,g))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bi}):await this._useSession(async n=>{var r,s,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vi}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:bi})})}catch(n){if(Me(n))return Xj(n)&&(await this._removeSession(),await kh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new vi;const l=s.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await Za(this.storage,this.storageKey));const{data:h,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:bi});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vi;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:l}=gg(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{session:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Me(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new vi;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Zr())throw new Th("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Th(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new eb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Th("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new eb("No code detected.");const{data:V,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:V.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:h}=e;if(!o||!u||!l||!h)throw new Th("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let x=g+v;c&&(x=parseInt(c));const b=x-g;b*1e3<=nl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const k=x-v;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,g);const{data:O,error:P}=await this._getUser(o);if(P)throw P;const D={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:v,expires_at:x,refresh_token:l,token_type:h,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(r){if(Me(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Sh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(Yj(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await kh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=aD(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Za(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var l,u,c,h,g;const{data:v,error:x}=o;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Zr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Me(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)throw l;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await dD(async s=>(s>0&&await cD(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xi})),(s,o)=>{const l=200*Math.pow(2,s);return o&&mg(o)&&Date.now()+l-r<nl})}catch(r){if(this._debug(n,"error",r),Me(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Zr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Sh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<fg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${fg}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),mg(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new vi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ak;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new vi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),Me(o)){const l={session:null,error:o};return mg(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ok(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await kh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),nl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/nl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${nl}ms, refresh threshold is ${a0} ticks`),s<=a0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Za(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:u}=await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=gg(s.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Qj>Date.now()))return r;const{data:s,error:o}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new oc("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(l=>l.kid===e),!r)throw new oc("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:b,error:k}=await this.getSession();if(k||!b.session)return{data:null,error:k};r=b.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:c}}=gg(r);if(vD(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:s,signature:l},error:null}}const h=xD(s.alg),g=await this.fetchJwk(s.kid,n),v=await crypto.subtle.importKey("jwk",g,h,!0,["verify"]);if(!await crypto.subtle.verify(h,v,l,iD(`${u}.${c}`)))throw new oc("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}}wc.nextInstanceID=0;const OD=wc;class LD extends OD{constructor(e){super(e)}}var MD=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class VD{constructor(e,n,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=zj(e),c=new URL(u);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,g={db:Oj,realtime:Mj,auth:Object.assign(Object.assign({},Lj),{storageKey:h}),global:Dj},v=Wj(r??{},g);this.storageKey=(s=v.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=v.global.headers)!==null&&o!==void 0?o:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=v.auth)!==null&&l!==void 0?l:{},this.headers,v.global.fetch),this.fetch=Uj(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new nj(new URL("rest/v1",c).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new W2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Rj(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return MD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:u,debug:c},h,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LD({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:l,lock:u,debug:c,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new yj(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $D=(t,e,n)=>new VD(t,e,n),FD={BASE_URL:"/AussieGutPack/",DEV:!1,MODE:"github",PROD:!0,SSR:!1,VITE_BASE_PATH:"/AussieGutPack/",VITE_FIREBASE_API_KEY:"AIzaSyBOM041d620q5TBYfl7E6SexEqR8NGrWQE",VITE_FIREBASE_APP_ID:"1:834797498886:web:cb2f88ab4523480400c987",VITE_FIREBASE_AUTH_DOMAIN:"aussie-gut-pack.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"834797498886",VITE_FIREBASE_PROJECT_ID:"aussie-gut-pack",VITE_FIREBASE_STORAGE_BUCKET:"aussie-gut-pack.firebasestorage.app",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjbXNpemh3Y2FjdWZ5d2xyZnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxOTg3ODAsImV4cCI6MjA1OTc3NDc4MH0.aOJLWA1vCEBHPlMUDbcB_2EsxJgdpoiT51RMFeiO5gg",VITE_SUPABASE_URL:"https://lcmsizhwcacufywlrfpr.supabase.co"},ck="https://lcmsizhwcacufywlrfpr.supabase.co",dk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjbXNpemh3Y2FjdWZ5d2xyZnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxOTg3ODAsImV4cCI6MjA1OTc3NDc4MH0.aOJLWA1vCEBHPlMUDbcB_2EsxJgdpoiT51RMFeiO5gg";console.log("Supabase URL:",ck);console.log("Supabase Anon Key:",dk);console.log("All env:",FD);const Kn=$D(ck,dk),zs=A.createContext(),UD=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!0);A.useEffect(()=>{(async()=>{const{data:{session:x}}=await Kn.auth.getSession();n((x==null?void 0:x.user)??null),s(!1)})();const{data:{subscription:v}}=Kn.auth.onAuthStateChange((x,b)=>{n((b==null?void 0:b.user)??null),s(!1)});return()=>{v==null||v.unsubscribe()}},[]);const h={user:e,loading:r,signup:async(g,v)=>{console.log("Signup attempt with:",{email:g,password:v});const{data:x,error:b}=await Kn.auth.signUp({email:g,password:v,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(x,null,2)),b)throw console.error("Signup error:",b.message),b;if(x.user&&x.user.identities&&x.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const k=await Kn.auth.resend({type:"signup",email:g});throw console.log("Resend response:",JSON.stringify(k,null,2)),k.error?(console.error("Error resending confirmation email:",k.error.message),k.error):new Error("User already exists. A confirmation email has been resent.")}return x},login:async(g,v)=>{console.log("Login attempt with:",{email:g,password:v});const{data:x,error:b}=await Kn.auth.signInWithPassword({email:g,password:v});if(b)throw console.error("Login error:",b.message),b.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):b;return n(x.user),x},logout:async()=>{const{error:g}=await Kn.auth.signOut();if(g)throw console.error("Logout error:",g.message),g;n(null)},refreshUser:async()=>{const{data:{user:g}}=await Kn.auth.getUser();n(g)}};return f.jsx(zs.Provider,{value:h,children:t})},BD=({location:t})=>{var O;const[e,n]=A.useState(!1),{isDarkMode:r,toggleTheme:s}=A.useContext(Ze),{user:o,logout:l,loading:u}=A.useContext(zs),c=Qt(),h=A.useRef(null),g=A.useRef(null);console.log("Rendering Navigation component. isMenuOpen:",e);const v=async()=>{try{await l(),c("/login")}catch(P){console.error("Logout error:",P.message)}},x=()=>{var P;e?(n(!1),(P=h.current)==null||P.focus()):(n(!0),setTimeout(()=>{var D;return(D=g.current)==null?void 0:D.focus()},100))};A.useEffect(()=>{const P=D=>{var V;D.key==="Escape"&&e&&(n(!1),(V=h.current)==null||V.focus())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[e]);const b=P=>t.pathname===P,k=((O=o==null?void 0:o.user_metadata)==null?void 0:O.displayName)||"User";return f.jsxs(f.Fragment,{children:[f.jsx("a",{href:"#main-content",className:"fixed top-0 left-0 p-2 bg-red-600 text-white focus:top-4 focus:left-4 z-50 transition-all duration-200",children:"Skip to Content"}),f.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${r?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,"aria-label":"Main navigation",children:[f.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center relative z-50",children:[f.jsx(ot,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Aussie Gut Pack"}),f.jsxs("div",{className:"hidden lg:flex space-x-6 items-center",children:[f.jsx(ot,{to:"/",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/")?"text-red-600 font-semibold":""}`,children:"Home"}),f.jsx(ot,{to:"/products",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),f.jsx(ot,{to:"/blog",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),f.jsx(ot,{to:"/contact",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),u?f.jsx("span",{children:"Loading..."}):o?f.jsxs(f.Fragment,{children:[f.jsxs(ot,{to:"/profile",className:`nav-link text-sm hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",k]}),f.jsx("button",{onClick:v,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Logout"})]}):f.jsx(ot,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Login"}),f.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200","aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"☀️":"🌙"})]}),f.jsx("button",{ref:h,onClick:x,"aria-expanded":e,"aria-label":e?"Close menu":"Open menu",className:"lg:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 text-xl z-60",children:f.jsx("i",{className:e?"fas fa-times":"fas fa-bars"})})]}),e&&f.jsx("div",{className:"mobile-menu-backdrop active lg:hidden",onClick:x,tabIndex:0,onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&x()},"aria-label":"Close mobile menu"}),f.jsxs("div",{className:`lg:hidden px-4 py-4 ${e?"mobile-menu-open":"mobile-menu-closed"} ${r?"bg-stone-800 border-t border-stone-700":"bg-red-50 border-t border-red-200"} shadow-md`,children:[f.jsx(ot,{ref:g,to:"/",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Home"}),f.jsx(ot,{to:"/products",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/products")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Products"}),f.jsx(ot,{to:"/blog",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/blog")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Blog"}),f.jsx(ot,{to:"/faq",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/faq")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"FAQ"}),f.jsx(ot,{to:"/contact",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/contact")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Contact"}),f.jsx(ot,{to:"/nutrition",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/nutrition")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Nutrition"}),o&&f.jsx(ot,{to:"/profile",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/profile")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Profile"}),f.jsx("button",{onClick:()=>{s(),x()},className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${r?"text-red-400":"text-red-800"}`,"aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"☀️ Light Mode":"🌙 Dark Mode"}),u?f.jsx("span",{className:"block py-2 px-3",children:"Loading..."}):o?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:`block py-2 px-3 text-sm ${r?"text-red-400":"text-red-800"}`,children:["Welcome, ",k]}),f.jsx("button",{onClick:()=>{v(),x()},className:"block py-2 px-3 text-left w-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Logout"})]}):f.jsx(ot,{to:"/login",onClick:x,className:"block py-2 px-3 text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Login"})]})]})]})};var hk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ub=nt.createContext&&nt.createContext(hk),zD=["attr","size","title"];function WD(t,e){if(t==null)return{};var n=HD(t,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HD(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},af.apply(this,arguments)}function cb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cb(Object(n),!0).forEach(function(r){qD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qD(t,e,n){return e=KD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KD(t){var e=GD(t,"string");return typeof e=="symbol"?e:e+""}function GD(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fk(t){return t&&t.map((e,n)=>nt.createElement(e.tag,lf({key:n},e.attr),fk(e.child)))}function Vl(t){return e=>nt.createElement(QD,af({attr:lf({},t.attr)},e),fk(t.child))}function QD(t){var e=n=>{var{attr:r,size:s,title:o}=t,l=WD(t,zD),u=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),nt.createElement("svg",af({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:c,style:lf(lf({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&nt.createElement("title",null,o),t.children)};return ub!==void 0?nt.createElement(ub.Consumer,null,n=>e(n)):e(hk)}function JD(t){return Vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function YD(t){return Vl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function XD(t){return Vl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function ZD(t){return Vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function eO(t){return Vl({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function tO(t){return Vl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}const nO=()=>{const{isDarkMode:t}=A.useContext(Ze),{user:e,logout:n}=A.useContext(zs),r=Ur();return f.jsx("div",{className:`${t?"dark":""}`,children:f.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[f.jsx(BD,{location:r}),f.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:f.jsx(IS,{})}),f.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[f.jsx("div",{className:"mb-4",children:f.jsxs("div",{className:"flex justify-center space-x-4",children:[f.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:f.jsx(JD,{size:24})}),f.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:f.jsx(ZD,{size:24})}),f.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:f.jsx(YD,{size:24})}),f.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:f.jsx(XD,{size:24})}),f.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:f.jsx(eO,{size:24})})]})}),f.jsxs("p",{children:["© ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function Dn({to:t,children:e,variant:n,className:r,...s}){const o="px-4 py-2 rounded transition-colors duration-300 ease-in-out",l=n==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return t?f.jsx(ot,{to:t,className:`${o} ${l} ${r}`,...s,children:e}):f.jsx("button",{className:`${o} ${l} ${r}`,...s,children:e})}const rO="/AussieGutPack/assets/aussie-BleX4DhZ.png",sO="/AussieGutPack/assets/goggins-BJp9afAd.png",db=[{src:rO,alt:"Australian Shepherd dog"},{src:sO,alt:"David Goggins running"}],iO=({className:t})=>{const[e,n]=A.useState(0);return A.useEffect(()=>{const r=setInterval(()=>{n(s=>(s+1)%db.length)},5e3);return()=>clearInterval(r)},[]),f.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:db.map((r,s)=>f.jsx("img",{src:r.src,alt:r.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${s===e?"opacity-100":"opacity-0"} ${t||""}`},s))})},_y=A.createContext({});function by(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ey=typeof window<"u",pk=Ey?A.useLayoutEffect:A.useEffect,Wf=A.createContext(null),Ty=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class oO extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function aO({children:t,isPresent:e,anchorX:n}){const r=A.useId(),s=A.useRef(null),o=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=A.useContext(Ty);return A.useInsertionEffect(()=>{const{width:u,height:c,top:h,left:g,right:v}=o.current;if(e||!s.current||!u||!c)return;const x=n==="left"?`left: ${g}`:`right: ${v}`;s.current.dataset.motionPopId=r;const b=document.createElement("style");return l&&(b.nonce=l),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.removeChild(b)}},[e]),f.jsx(oO,{isPresent:e,childRef:s,sizeRef:o,children:A.cloneElement(t,{ref:s})})}const lO=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const c=by(uO),h=A.useId(),g=A.useCallback(x=>{c.set(x,!0);for(const b of c.values())if(!b)return;r&&r()},[c,r]),v=A.useMemo(()=>({id:h,initial:e,isPresent:n,custom:s,onExitComplete:g,register:x=>(c.set(x,!1),()=>c.delete(x))}),o?[Math.random(),g]:[n,g]);return A.useMemo(()=>{c.forEach((x,b)=>c.set(b,!1))},[n]),A.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),l==="popLayout"&&(t=f.jsx(aO,{isPresent:n,anchorX:u,children:t})),f.jsx(Wf.Provider,{value:v,children:t})};function uO(){return new Map}function mk(t=!0){const e=A.useContext(Wf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=A.useId();A.useEffect(()=>{if(t)return s(o)},[t]);const l=A.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const Ch=t=>t.key||"";function hb(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const c0=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[c,h]=mk(l),g=A.useMemo(()=>hb(t),[t]),v=l&&!c?[]:g.map(Ch),x=A.useRef(!0),b=A.useRef(g),k=by(()=>new Map),[O,P]=A.useState(g),[D,V]=A.useState(g);pk(()=>{x.current=!1,b.current=g;for(let B=0;B<D.length;B++){const K=Ch(D[B]);v.includes(K)?k.delete(K):k.get(K)!==!0&&k.set(K,!1)}},[D,v.length,v.join("-")]);const $=[];if(g!==O){let B=[...g];for(let K=0;K<D.length;K++){const I=D[K],S=Ch(I);v.includes(S)||(B.splice(K,0,I),$.push(I))}return o==="wait"&&$.length&&(B=$),V(hb(B)),P(g),null}const{forceRender:W}=A.useContext(_y);return f.jsx(f.Fragment,{children:D.map(B=>{const K=Ch(B),I=l&&!c?!1:g===D||v.includes(K),S=()=>{if(k.has(K))k.set(K,!0);else return;let T=!0;k.forEach(R=>{R||(T=!1)}),T&&(W==null||W(),V(b.current),l&&(h==null||h()),r&&r())};return f.jsx(lO,{isPresent:I,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,onExitComplete:I?void 0:S,anchorX:u,children:B},K)})})};function Sy(t,e){t.indexOf(e)===-1&&t.push(e)}function ky(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let gk=()=>{};const d0={useManualTiming:!1};function Cy(t){let e;return()=>(e===void 0&&(e=t()),e)}const dr=t=>t,_c=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Ay{constructor(){this.subscriptions=[]}add(e){return Sy(this.subscriptions,e),()=>ky(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ns=t=>t*1e3,rs=t=>t/1e3;function yk(t,e){return e?t*(1e3/e):0}const cO=Cy(()=>window.ScrollTimeline!==void 0);class dO{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(cO()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class hO extends dO{then(e,n){return this.finished.finally(e).then(()=>{})}}const fb={value:null},Py=t=>Array.isArray(t)&&typeof t[0]=="number",fO={};function pO(t,e){const n=Cy(t);return()=>fO[e]??n()}const bc=pO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vk=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(o/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Yu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,h0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yu([0,.65,.55,1]),circOut:Yu([.55,0,1,.45]),backIn:Yu([.31,.01,.66,-.59]),backOut:Yu([.33,1.53,.69,.99])};function xk(t,e){if(t)return typeof t=="function"&&bc()?vk(t,e):Py(t)?Yu(t):Array.isArray(t)?t.map(n=>xk(n,e)||h0.easeOut):h0[t]}function mO(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:c}={},h=void 0){const g={[e]:n};c&&(g.offset=c);const v=xk(u,s);return Array.isArray(v)&&(g.easing=v),t.animate(g,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal",pseudoElement:h})}function Iy(t){return typeof t=="function"&&"applyToOptions"in t}function Ry(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const uf=2e4;function Ny(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<uf;)e+=n,r=t.next(e);return e>=uf?1/0:e}function gO(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Ny(r),uf);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:rs(s)}}function wk(t){return!!(typeof t=="function"&&bc()||!t||typeof t=="string"&&(t in h0||bc())||Py(t)||Array.isArray(t)&&t.every(wk))}function pb(t,e){t.timeline=e,t.onfinish=null}const Ah=["read","resolveKeyframes","update","preRender","render","postRender"];function yO(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},c=0;function h(v){l.has(v)&&(g.schedule(v),t()),c++,v(u)}const g={schedule:(v,x=!1,b=!1)=>{const O=b&&s?n:r;return x&&l.add(v),O.has(v)||O.add(v),v},cancel:v=>{r.delete(v),l.delete(v)},process:v=>{if(u=v,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(h),e&&fb.value&&fb.value.frameloop[e].push(c),c=0,n.clear(),s=!1,o&&(o=!1,g.process(v))}};return g}const vO=40;function _k(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Ah.reduce((D,V)=>(D[V]=yO(o,e?V:void 0),D),{}),{read:u,resolveKeyframes:c,update:h,preRender:g,render:v,postRender:x}=l,b=()=>{const D=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(D-s.timestamp,vO),1),s.timestamp=D,s.isProcessing=!0,u.process(s),c.process(s),h.process(s),g.process(s),v.process(s),x.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(b))},k=()=>{n=!0,r=!0,s.isProcessing||t(b)};return{schedule:Ah.reduce((D,V)=>{const $=l[V];return D[V]=(W,B=!1,K=!1)=>(n||k(),$.schedule(W,B,K)),D},{}),cancel:D=>{for(let V=0;V<Ah.length;V++)l[Ah[V]].cancel(D)},state:s,steps:l}}const{schedule:jy}=_k(queueMicrotask,!1),{schedule:at,cancel:Oi,state:en,steps:yg}=_k(typeof requestAnimationFrame<"u"?requestAnimationFrame:dr,!0);let Bh;function xO(){Bh=void 0}const ss={now:()=>(Bh===void 0&&ss.set(en.isProcessing||d0.useManualTiming?en.timestamp:performance.now()),Bh),set:t=>{Bh=t,queueMicrotask(xO)}},Dr={x:!1,y:!1};function bk(){return Dr.x||Dr.y}function wO(t){return t==="x"||t==="y"?Dr[t]?null:(Dr[t]=!0,()=>{Dr[t]=!1}):Dr.x||Dr.y?null:(Dr.x=Dr.y=!0,()=>{Dr.x=Dr.y=!1})}function _O(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function Ek(t,e){const n=_O(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function mb(t){return!(t.pointerType==="touch"||bk())}function bO(t,e,n={}){const[r,s,o]=Ek(t,n),l=u=>{if(!mb(u))return;const{target:c}=u,h=e(c,u);if(typeof h!="function"||!c)return;const g=v=>{mb(v)&&(h(v),c.removeEventListener("pointerleave",g))};c.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}const Tk=(t,e)=>e?t===e?!0:Tk(t,e.parentElement):!1,Dy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,EO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function TO(t){return EO.has(t.tagName)||t.tabIndex!==-1}const Xu=new WeakSet;function gb(t){return e=>{e.key==="Enter"&&t(e)}}function vg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const SO=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=gb(()=>{if(Xu.has(n))return;vg(n,"down");const s=gb(()=>{vg(n,"up")}),o=()=>vg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function yb(t){return Dy(t)&&!bk()}function kO(t,e,n={}){const[r,s,o]=Ek(t,n),l=u=>{const c=u.currentTarget;if(!yb(u)||Xu.has(c))return;Xu.add(c);const h=e(c,u),g=(b,k)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",x),!(!yb(b)||!Xu.has(c))&&(Xu.delete(c),typeof h=="function"&&h(b,{success:k}))},v=b=>{g(b,c===window||c===document||n.useGlobalTarget||Tk(c,b.target))},x=b=>{g(b,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",x,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),u instanceof HTMLElement&&(u.addEventListener("focus",h=>SO(h,s)),!TO(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}const vb=30,CO=t=>!isNaN(parseFloat(t));class AO{constructor(e,n={}){this.version="12.7.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=ss.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ss.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=CO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ay);const r=this.events[e].add(n);return e==="change"?()=>{r(),at.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ss.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vb);return yk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ec(t,e){return new AO(t,e)}const Sk=A.createContext({strict:!1}),xb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tl={};for(const t in xb)Tl[t]={isEnabled:e=>xb[t].some(n=>!!e[n])};function PO(t){for(const e in t)Tl[e]={...Tl[e],...t[e]}}const IO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||IO.has(t)}let kk=t=>!cf(t);function RO(t){t&&(kk=e=>e.startsWith("on")?!cf(e):t(e))}try{RO(require("@emotion/is-prop-valid").default)}catch{}function NO(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(kk(s)||n===!0&&cf(s)||!e&&!cf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function jO(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Hf=A.createContext({});function qf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Tc(t){return typeof t=="string"||Array.isArray(t)}const Oy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ly=["initial",...Oy];function Kf(t){return qf(t.animate)||Ly.some(e=>Tc(t[e]))}function Ck(t){return!!(Kf(t)||t.variants)}function DO(t,e){if(Kf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Tc(n)?n:void 0,animate:Tc(r)?r:void 0}}return t.inherit!==!1?e:{}}function OO(t){const{initial:e,animate:n}=DO(t,A.useContext(Hf));return A.useMemo(()=>({initial:e,animate:n}),[wb(e),wb(n)])}function wb(t){return Array.isArray(t)?t.join(" "):t}const LO=Symbol.for("motionComponentSymbol");function al(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function MO(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):al(n)&&(n.current=r))},[e])}const My=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),VO="framerAppearId",Ak="data-"+My(VO),Pk=A.createContext({});function $O(t,e,n,r,s){var O,P;const{visualElement:o}=A.useContext(Hf),l=A.useContext(Sk),u=A.useContext(Wf),c=A.useContext(Ty).reducedMotion,h=A.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const g=h.current,v=A.useContext(Pk);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&FO(h.current,n,s,v);const x=A.useRef(!1);A.useInsertionEffect(()=>{g&&x.current&&g.update(n,u)});const b=n[Ak],k=A.useRef(!!b&&!((O=window.MotionHandoffIsComplete)!=null&&O.call(window,b))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,b)));return pk(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),jy.render(g.render),k.current&&g.animationState&&g.animationState.animateChanges())}),A.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)==null||D.call(window,b)}),k.current=!1))}),g}function FO(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:c,layoutRoot:h,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Ik(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&al(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:c,layoutRoot:h})}function Ik(t){if(t)return t.options.allowProjection!==!1?t.projection:Ik(t.parent)}function UO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&PO(t);function o(u,c){let h;const g={...A.useContext(Ty),...u,layoutId:BO(u)},{isStatic:v}=g,x=OO(u),b=r(u,v);if(!v&&Ey){zO();const k=WO(g);h=k.MeasureLayout,x.visualElement=$O(s,b,g,e,k.ProjectionNode)}return f.jsxs(Hf.Provider,{value:x,children:[h&&x.visualElement?f.jsx(h,{visualElement:x.visualElement,...g}):null,n(s,u,MO(b,x.visualElement,c),b,v,x.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const l=A.forwardRef(o);return l[LO]=s,l}function BO({layoutId:t}){const e=A.useContext(_y).id;return e&&t!==void 0?e+"-"+t:t}function zO(t,e){A.useContext(Sk).strict}function WO(t){const{drag:e,layout:n}=Tl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Rk=t=>e=>typeof e=="string"&&e.startsWith(t),Vy=Rk("--"),HO=Rk("var(--"),$y=t=>HO(t)?qO.test(t.split("/*")[0].trim()):!1,qO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sc={};function KO(t){for(const e in t)Sc[e]=t[e],Vy(e)&&(Sc[e].isCSSVariable=!0)}const $l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jo=new Set($l);function Nk(t,{layout:e,layoutId:n}){return Jo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Sc[t]||t==="opacity")}const mn=t=>!!(t&&t.getVelocity),jk=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ms=(t,e,n)=>n>e?e:n<t?t:n,Fl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},kc={...Fl,transform:t=>Ms(0,1,t)},Ph={...Fl,default:1},Wc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wi=Wc("deg"),is=Wc("%"),Ie=Wc("px"),GO=Wc("vh"),QO=Wc("vw"),_b={...is,parse:t=>is.parse(t)/100,transform:t=>is.transform(t*100)},JO={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie},YO={rotate:wi,rotateX:wi,rotateY:wi,rotateZ:wi,scale:Ph,scaleX:Ph,scaleY:Ph,scaleZ:Ph,skew:wi,skewX:wi,skewY:wi,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:kc,originX:_b,originY:_b,originZ:Ie},bb={...Fl,transform:Math.round},Fy={...JO,...YO,zIndex:bb,size:Ie,fillOpacity:kc,strokeOpacity:kc,numOctaves:bb},XO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ZO=$l.length;function e4(t,e,n){let r="",s=!0;for(let o=0;o<ZO;o++){const l=$l[o],u=t[l];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(l.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const h=jk(u,Fy[l]);if(!c){s=!1;const g=XO[l]||l;r+=`${g}(${h}) `}n&&(e[l]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Uy(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,u=!1;for(const c in e){const h=e[c];if(Jo.has(c)){l=!0;continue}else if(Vy(c)){s[c]=h;continue}else{const g=jk(h,Fy[c]);c.startsWith("origin")?(u=!0,o[c]=g):r[c]=g}}if(e.transform||(l||n?r.transform=e4(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:h="50%",originZ:g=0}=o;r.transformOrigin=`${c} ${h} ${g}`}}const By=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Dk(t,e,n){for(const r in e)!mn(e[r])&&!Nk(r,n)&&(t[r]=e[r])}function t4({transformTemplate:t},e){return A.useMemo(()=>{const n=By();return Uy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function n4(t,e){const n=t.style||{},r={};return Dk(r,n,t),Object.assign(r,t4(t,e)),r}function r4(t,e){const n={},r=n4(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const s4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zy(t){return typeof t!="string"||t.includes("-")?!1:!!(s4.indexOf(t)>-1||/[A-Z]/u.test(t))}const i4={offset:"stroke-dashoffset",array:"stroke-dasharray"},o4={offset:"strokeDashoffset",array:"strokeDasharray"};function a4(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?i4:o4;t[o.offset]=Ie.transform(-r);const l=Ie.transform(e),u=Ie.transform(n);t[o.array]=`${l} ${u}`}function Eb(t,e,n){return typeof t=="string"?t:Ie.transform(e+n*t)}function l4(t,e,n){const r=Eb(e,t.x,t.width),s=Eb(n,t.y,t.height);return`${r} ${s}`}function Wy(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:c=0,...h},g,v){if(Uy(t,h,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:b,dimensions:k}=t;x.transform&&(k&&(b.transform=x.transform),delete x.transform),k&&(s!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=l4(k,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),l!==void 0&&a4(x,l,u,c,!1)}const Ok=()=>({...By(),attrs:{}}),Hy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function u4(t,e,n,r){const s=A.useMemo(()=>{const o=Ok();return Wy(o,e,Hy(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Dk(o,t.style,t),s.style={...o,...s.style}}return s}function c4(t=!1){return(n,r,s,{latestValues:o},l)=>{const c=(zy(n)?u4:r4)(r,o,l,n),h=NO(r,typeof n=="string",t),g=n!==A.Fragment?{...h,...c,ref:s}:{},{children:v}=r,x=A.useMemo(()=>mn(v)?v.get():v,[v]);return A.createElement(n,{...g,children:x})}}function Tb(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function qy(t,e,n,r){if(typeof e=="function"){const[s,o]=Tb(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=Tb(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const f0=t=>Array.isArray(t),d4=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),h4=t=>f0(t)?t[t.length-1]||0:t;function zh(t){const e=mn(t)?t.get():t;return d4(e)?e.toValue():e}function f4({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const l={latestValues:p4(r,s,o,t),renderState:e()};return n&&(l.onMount=u=>n({props:r,current:u,...l}),l.onUpdate=u=>n(u)),l}const Lk=t=>(e,n)=>{const r=A.useContext(Hf),s=A.useContext(Wf),o=()=>f4(t,e,r,s);return n?o():by(o)};function p4(t,e,n,r){const s={},o=r(t,{});for(const x in o)s[x]=zh(o[x]);let{initial:l,animate:u}=t;const c=Kf(t),h=Ck(t);e&&h&&!c&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!qf(v)){const x=Array.isArray(v)?v:[v];for(let b=0;b<x.length;b++){const k=qy(t,x[b]);if(k){const{transitionEnd:O,transition:P,...D}=k;for(const V in D){let $=D[V];if(Array.isArray($)){const W=g?$.length-1:0;$=$[W]}$!==null&&(s[V]=$)}for(const V in O)s[V]=O[V]}}}return s}function Ky(t,e,n){var o;const{style:r}=t,s={};for(const l in r)(mn(r[l])||e.style&&mn(e.style[l])||Nk(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(s[l]=r[l]);return s}const m4={useVisualState:Lk({scrapeMotionValuesFromProps:Ky,createRenderState:By})};function Mk(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function Vk(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const $k=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Fk(t,e,n,r){Vk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute($k.has(s)?s:My(s),e.attrs[s])}function Uk(t,e,n){const r=Ky(t,e,n);for(const s in t)if(mn(t[s])||mn(e[s])){const o=$l.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const Sb=["x","y","width","height","cx","cy","r"],g4={useVisualState:Lk({scrapeMotionValuesFromProps:Uk,createRenderState:Ok,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in s)if(Jo.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<Sb.length;u++){const c=Sb[u];t[c]!==e[c]&&(l=!0)}l&&at.read(()=>{Mk(n,r),at.render(()=>{Wy(r,s,Hy(n.tagName),t.transformTemplate),Fk(n,r)})})}})};function y4(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...zy(r)?g4:m4,preloadedFeatures:t,useRender:c4(s),createVisualElement:e,Component:r};return UO(l)}}function Cc(t,e,n){const r=t.getProps();return qy(r,e,n!==void 0?n:r.custom,t)}const Bk=new Set(["width","height","top","left","right","bottom",...$l]);function v4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ec(n))}function x4(t,e){const n=Cc(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const u=h4(o[l]);v4(t,l,u)}}function w4(t){return!!(mn(t)&&t.add)}function p0(t,e){const n=t.getValue("willChange");if(w4(n))return n.add(e);if(!n&&d0.WillChange){const r=new d0.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function zk(t){return t.props[Ak]}const Wk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,_4=1e-7,b4=12;function E4(t,e,n,r,s){let o,l,u=0;do l=e+(n-e)/2,o=Wk(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>_4&&++u<b4);return l}function Hc(t,e,n,r){if(t===e&&n===r)return dr;const s=o=>E4(o,0,1,t,n);return o=>o===0||o===1?o:Wk(s(o),e,r)}const Hk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,qk=t=>e=>1-t(1-e),Kk=Hc(.33,1.53,.69,.99),Gy=qk(Kk),Gk=Hk(Gy),Qk=t=>(t*=2)<1?.5*Gy(t):.5*(2-Math.pow(2,-10*(t-1))),Qy=t=>1-Math.sin(Math.acos(t)),Jk=qk(Qy),Yk=Hk(Qy),Xk=t=>/^0[^.\s]+$/u.test(t);function T4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Xk(t):!0}const lc=t=>Math.round(t*1e5)/1e5,Jy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function S4(t){return t==null}const k4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yy=(t,e)=>n=>!!(typeof n=="string"&&k4.test(n)&&n.startsWith(t)||e&&!S4(n)&&Object.prototype.hasOwnProperty.call(n,e)),Zk=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,u]=r.match(Jy);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},C4=t=>Ms(0,255,t),xg={...Fl,transform:t=>Math.round(C4(t))},No={test:Yy("rgb","red"),parse:Zk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+xg.transform(t)+", "+xg.transform(e)+", "+xg.transform(n)+", "+lc(kc.transform(r))+")"};function A4(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const m0={test:Yy("#"),parse:A4,transform:No.transform},ll={test:Yy("hsl","hue"),parse:Zk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+is.transform(lc(e))+", "+is.transform(lc(n))+", "+lc(kc.transform(r))+")"},hn={test:t=>No.test(t)||m0.test(t)||ll.test(t),parse:t=>No.test(t)?No.parse(t):ll.test(t)?ll.parse(t):m0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?No.transform(t):ll.transform(t)},P4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function I4(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Jy))==null?void 0:e.length)||0)+(((n=t.match(P4))==null?void 0:n.length)||0)>0}const eC="number",tC="color",R4="var",N4="var(",kb="${}",j4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ac(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(j4,c=>(hn.test(c)?(r.color.push(o),s.push(tC),n.push(hn.parse(c))):c.startsWith(N4)?(r.var.push(o),s.push(R4),n.push(c)):(r.number.push(o),s.push(eC),n.push(parseFloat(c))),++o,kb)).split(kb);return{values:n,split:u,indexes:r,types:s}}function nC(t){return Ac(t).values}function rC(t){const{split:e,types:n}=Ac(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const u=n[l];u===eC?o+=lc(s[l]):u===tC?o+=hn.transform(s[l]):o+=s[l]}return o}}const D4=t=>typeof t=="number"?0:t;function O4(t){const e=nC(t);return rC(t)(e.map(D4))}const Li={test:I4,parse:nC,createTransformer:rC,getAnimatableNone:O4},L4=new Set(["brightness","contrast","saturate","opacity"]);function M4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Jy)||[];if(!r)return t;const s=n.replace(r,"");let o=L4.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const V4=/\b([a-z-]*)\(.*?\)/gu,g0={...Li,getAnimatableNone:t=>{const e=t.match(V4);return e?e.map(M4).join(" "):t}},$4={...Fy,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:g0,WebkitFilter:g0},sC=t=>$4[t];function iC(t,e){let n=sC(t);return n!==g0&&(n=Li),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const F4=new Set(["auto","none","0"]);function U4(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!F4.has(o)&&Ac(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=iC(n,s)}const jo=t=>t*180/Math.PI,y0=t=>{const e=jo(Math.atan2(t[1],t[0]));return v0(e)},B4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:y0,rotateZ:y0,skewX:t=>jo(Math.atan(t[1])),skewY:t=>jo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},v0=t=>(t=t%360,t<0&&(t+=360),t),Cb=y0,Ab=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Pb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),z4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ab,scaleY:Pb,scale:t=>(Ab(t)+Pb(t))/2,rotateX:t=>v0(jo(Math.atan2(t[6],t[5]))),rotateY:t=>v0(jo(Math.atan2(-t[2],t[0]))),rotateZ:Cb,rotate:Cb,skewX:t=>jo(Math.atan(t[4])),skewY:t=>jo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ib(t){return t.includes("scale")?1:0}function x0(t,e){if(!t||t==="none")return Ib(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=z4,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=B4,s=u}if(!s)return Ib(e);const o=r[e],l=s[1].split(",").map(H4);return typeof o=="function"?o(l):l[o]}const W4=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return x0(n,e)};function H4(t){return parseFloat(t.trim())}const Rb=t=>t===Fl||t===Ie,q4=new Set(["x","y","z"]),K4=$l.filter(t=>!q4.has(t));function G4(t){const e=[];return K4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Sl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>x0(e,"x"),y:(t,{transform:e})=>x0(e,"y")};Sl.translateX=Sl.x;Sl.translateY=Sl.y;const Mo=new Set;let w0=!1,_0=!1;function oC(){if(_0){const t=Array.from(Mo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=G4(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{var u;(u=r.getValue(o))==null||u.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_0=!1,w0=!1,Mo.forEach(t=>t.complete()),Mo.clear()}function aC(){Mo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_0=!0)})}function Q4(){aC(),oC()}class Xy{constructor(e,n,r,s,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mo.add(this),w0||(w0=!0,at.read(aC),at.resolveKeyframes(oC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=s==null?void 0:s.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&n){const c=r.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),s&&l===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const lC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),J4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Y4(t){const e=J4.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function uC(t,e,n=1){const[r,s]=Y4(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return lC(l)?parseFloat(l):l}return $y(s)?uC(s,e,n+1):s}const cC=t=>e=>e.test(t),X4={test:t=>t==="auto",parse:t=>t},dC=[Fl,Ie,is,wi,QO,GO,X4],Nb=t=>dC.find(cC(t));class hC extends Xy{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),$y(h))){const g=uC(h,n.current);g!==void 0&&(e[c]=g),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Bk.has(r)||e.length!==2)return;const[s,o]=e,l=Nb(s),u=Nb(o);if(l!==u)if(Rb(l)&&Rb(u))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)T4(e[s])&&r.push(s);r.length&&U4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Sl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([c,h])=>{e.getValue(c).set(h)}),this.resolveNoneKeyframes()}}const jb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Li.test(t)||t==="0")&&!t.startsWith("url("));function Z4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function eL(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=jb(s,e),u=jb(o,e);return!l||!u?!1:Z4(t)||(n==="spring"||Iy(n))&&r}const tL=t=>t!==null;function Gf(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(tL),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const nL=40;class fC{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ss.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>nL?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Q4(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ss.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:l,onComplete:u,onUpdate:c,isGenerator:h}=this.options;if(!h&&!eL(e,r,s,o))if(l)this.options.duration=0;else{c&&c(Gf(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const yt=(t,e,n)=>t+(e-t)*n;function wg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function rL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;s=wg(c,u,t+1/3),o=wg(c,u,t),l=wg(c,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function df(t,e){return n=>n>0?e:t}const _g=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},sL=[m0,No,ll],iL=t=>sL.find(e=>e.test(t));function Db(t){const e=iL(t);if(!e)return!1;let n=e.parse(t);return e===ll&&(n=rL(n)),n}const Ob=(t,e)=>{const n=Db(t),r=Db(e);if(!n||!r)return df(t,e);const s={...n};return o=>(s.red=_g(n.red,r.red,o),s.green=_g(n.green,r.green,o),s.blue=_g(n.blue,r.blue,o),s.alpha=yt(n.alpha,r.alpha,o),No.transform(s))},oL=(t,e)=>n=>e(t(n)),qc=(...t)=>t.reduce(oL),b0=new Set(["none","hidden"]);function aL(t,e){return b0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function lL(t,e){return n=>yt(t,e,n)}function Zy(t){return typeof t=="number"?lL:typeof t=="string"?$y(t)?df:hn.test(t)?Ob:dL:Array.isArray(t)?pC:typeof t=="object"?hn.test(t)?Ob:uL:df}function pC(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>Zy(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function uL(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Zy(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function cL(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],u=t.values[l]??0;n[s]=u,r[o]++}return n}const dL=(t,e)=>{const n=Li.createTransformer(e),r=Ac(t),s=Ac(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?b0.has(t)&&!s.values.length||b0.has(e)&&!r.values.length?aL(t,e):qc(pC(cL(r,s),s.values),n):df(t,e)};function mC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yt(t,e,n):Zy(t)(t,e)}const hL=5;function gC(t,e,n){const r=Math.max(e-hL,0);return yk(n-t(r),e-r)}const bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lb=.001;function fL({duration:t=bt.duration,bounce:e=bt.bounce,velocity:n=bt.velocity,mass:r=bt.mass}){let s,o,l=1-e;l=Ms(bt.minDamping,bt.maxDamping,l),t=Ms(bt.minDuration,bt.maxDuration,rs(t)),l<1?(s=h=>{const g=h*l,v=g*t,x=g-n,b=E0(h,l),k=Math.exp(-v);return Lb-x/b*k},o=h=>{const v=h*l*t,x=v*n+n,b=Math.pow(l,2)*Math.pow(h,2)*t,k=Math.exp(-v),O=E0(Math.pow(h,2),l);return(-s(h)+Lb>0?-1:1)*((x-b)*k)/O}):(s=h=>{const g=Math.exp(-h*t),v=(h-n)*t+1;return-.001+g*v},o=h=>{const g=Math.exp(-h*t),v=(n-h)*(t*t);return g*v});const u=5/t,c=mL(s,o,u);if(t=ns(t),isNaN(c))return{stiffness:bt.stiffness,damping:bt.damping,duration:t};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const pL=12;function mL(t,e,n){let r=n;for(let s=1;s<pL;s++)r=r-t(r)/e(r);return r}function E0(t,e){return t*Math.sqrt(1-e*e)}const gL=["duration","bounce"],yL=["stiffness","damping","mass"];function Mb(t,e){return e.some(n=>t[n]!==void 0)}function vL(t){let e={velocity:bt.velocity,stiffness:bt.stiffness,damping:bt.damping,mass:bt.mass,isResolvedFromDuration:!1,...t};if(!Mb(t,yL)&&Mb(t,gL))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Ms(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:bt.mass,stiffness:s,damping:o}}else{const n=fL(t);e={...e,...n,mass:bt.mass},e.isResolvedFromDuration=!0}return e}function hf(t=bt.visualDuration,e=bt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:h,mass:g,duration:v,velocity:x,isResolvedFromDuration:b}=vL({...n,velocity:-rs(n.velocity||0)}),k=x||0,O=h/(2*Math.sqrt(c*g)),P=l-o,D=rs(Math.sqrt(c/g)),V=Math.abs(P)<5;r||(r=V?bt.restSpeed.granular:bt.restSpeed.default),s||(s=V?bt.restDelta.granular:bt.restDelta.default);let $;if(O<1){const B=E0(D,O);$=K=>{const I=Math.exp(-O*D*K);return l-I*((k+O*D*P)/B*Math.sin(B*K)+P*Math.cos(B*K))}}else if(O===1)$=B=>l-Math.exp(-D*B)*(P+(k+D*P)*B);else{const B=D*Math.sqrt(O*O-1);$=K=>{const I=Math.exp(-O*D*K),S=Math.min(B*K,300);return l-I*((k+O*D*P)*Math.sinh(S)+B*P*Math.cosh(S))/B}}const W={calculatedDuration:b&&v||null,next:B=>{const K=$(B);if(b)u.done=B>=v;else{let I=0;O<1&&(I=B===0?ns(k):gC($,B,K));const S=Math.abs(I)<=r,T=Math.abs(l-K)<=s;u.done=S&&T}return u.value=u.done?l:K,u},toString:()=>{const B=Math.min(Ny(W),uf),K=vk(I=>W.next(B*I).value,B,30);return B+"ms "+K},toTransition:()=>{}};return W}hf.applyToOptions=t=>{const e=gO(t,100,hf);return t.ease=bc()?e.ease:"easeOut",t.duration=ns(e.duration),t.type="keyframes",t};function Vb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:c,restDelta:h=.5,restSpeed:g}){const v=t[0],x={done:!1,value:v},b=S=>u!==void 0&&S<u||c!==void 0&&S>c,k=S=>u===void 0?c:c===void 0||Math.abs(u-S)<Math.abs(c-S)?u:c;let O=n*e;const P=v+O,D=l===void 0?P:l(P);D!==P&&(O=D-v);const V=S=>-O*Math.exp(-S/r),$=S=>D+V(S),W=S=>{const T=V(S),R=$(S);x.done=Math.abs(T)<=h,x.value=x.done?D:R};let B,K;const I=S=>{b(x.value)&&(B=S,K=hf({keyframes:[x.value,k(x.value)],velocity:gC($,S,x.value),damping:s,stiffness:o,restDelta:h,restSpeed:g}))};return I(0),{calculatedDuration:null,next:S=>{let T=!1;return!K&&B===void 0&&(T=!0,W(S),I(S)),B!==void 0&&S>=B?K.next(S-B):(!T&&W(S),x)}}}const xL=Hc(.42,0,1,1),wL=Hc(0,0,.58,1),yC=Hc(.42,0,.58,1),_L=t=>Array.isArray(t)&&typeof t[0]!="number",bL={linear:dr,easeIn:xL,easeInOut:yC,easeOut:wL,circIn:Qy,circInOut:Yk,circOut:Jk,backIn:Gy,backInOut:Gk,backOut:Kk,anticipate:Qk},$b=t=>{if(Py(t)){gk(t.length===4);const[e,n,r,s]=t;return Hc(e,n,r,s)}else if(typeof t=="string")return bL[t];return t};function EL(t,e,n){const r=[],s=n||mC,o=t.length-1;for(let l=0;l<o;l++){let u=s(t[l],t[l+1]);if(e){const c=Array.isArray(e)?e[l]||dr:e;u=qc(c,u)}r.push(u)}return r}function TL(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(gk(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=EL(e,r,s),c=u.length,h=g=>{if(l&&g<t[0])return e[0];let v=0;if(c>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const x=_c(t[v],t[v+1],g);return u[v](x)};return n?g=>h(Ms(t[0],t[o-1],g)):h}function SL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=_c(0,e,r);t.push(yt(n,1,s))}}function kL(t){const e=[0];return SL(e,t.length-1),e}function CL(t,e){return t.map(n=>n*e)}function AL(t,e){return t.map(()=>e||yC).splice(0,t.length-1)}function ff({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=_L(r)?r.map($b):$b(r),o={done:!1,value:e[0]},l=CL(n&&n.length===e.length?n:kL(e),t),u=TL(l,e,{ease:Array.isArray(s)?s:AL(e,s)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}const PL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>at.update(e,!0),stop:()=>Oi(e),now:()=>en.isProcessing?en.timestamp:ss.now()}},IL={decay:Vb,inertia:Vb,tween:ff,keyframes:ff,spring:hf},RL=t=>t/100;class ev extends fC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,l=(s==null?void 0:s.KeyframeResolver)||Xy,u=(c,h)=>this.onKeyframesResolved(c,h);this.resolver=new l(o,u,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=this.options,u=Iy(n)?n:IL[n]||ff;let c,h;u!==ff&&typeof e[0]!="number"&&(c=qc(RL,mC(e[0],e[1])),e=[0,100]);const g=u({...this.options,keyframes:e});o==="mirror"&&(h=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=Ny(g));const{calculatedDuration:v}=g,x=v+s,b=x*(r+1)-s;return{generator:g,mirroredGenerator:h,mapPercentToKeyframes:c,calculatedDuration:v,resolvedDuration:x,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:h,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:x,repeat:b,repeatType:k,repeatDelay:O,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const D=this.currentTime-x*(this.speed>=0?1:-1),V=this.speed>=0?D<0:D>g;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let $=this.currentTime,W=o;if(b){const S=Math.min(this.currentTime,g)/v;let T=Math.floor(S),R=S%1;!R&&S>=1&&(R=1),R===1&&T--,T=Math.min(T,b+1),!!(T%2)&&(k==="reverse"?(R=1-R,O&&(R-=O/v)):k==="mirror"&&(W=l)),$=Ms(0,1,R)*v}const B=V?{done:!1,value:c[0]}:W.next($);u&&(B.value=u(B.value));let{done:K}=B;!V&&h!==null&&(K=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return I&&s!==void 0&&(B.value=Gf(c,this.options,s)),P&&P(B.value),I&&this.finish(),B}get duration(){const{resolved:e}=this;return e?rs(e.calculatedDuration):0}get time(){return rs(this.currentTime)}set time(e){e=ns(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=rs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=PL,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const NL=new Set(["opacity","clipPath","filter","transform"]),jL=Cy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),pf=10,DL=2e4;function OL(t){return Iy(t.type)||t.type==="spring"||!wk(t.ease)}function LL(t,e){const n=new ev({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<DL;)r=n.sample(o),s.push(r.value),o+=pf;return{times:void 0,keyframes:s,duration:o-pf,ease:"linear"}}const vC={anticipate:Qk,backInOut:Gk,circInOut:Yk};function ML(t){return t in vC}class Fb extends fC{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new hC(o,(l,u)=>this.onKeyframesResolved(l,u),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:l,motionValue:u,name:c,startTime:h}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&bc()&&ML(o)&&(o=vC[o]),OL(this.options)){const{onComplete:v,onUpdate:x,motionValue:b,element:k,...O}=this.options,P=LL(e,O);e=P.keyframes,e.length===1&&(e[1]=e[0]),r=P.duration,s=P.times,o=P.ease,l="keyframes"}const g=mO(u.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return g.startTime=h??this.calcStartTime(),this.pendingTimeline?(pb(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;u.set(Gf(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return rs(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return rs(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ns(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return dr;const{animation:r}=n;pb(r,e)}return dr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:l,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:g,onComplete:v,element:x,...b}=this.options,k=new ev({...b,keyframes:r,duration:s,type:o,ease:l,times:u,isGenerator:!0}),O=ns(this.time);h.setWithVelocity(k.sample(O-pf).value,k.sample(O).value,pf)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:l,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=n.owner.getProps();return jL()&&r&&NL.has(r)&&(r!=="transform"||!h)&&!c&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}}const VL={type:"spring",stiffness:500,damping:25,restSpeed:10},$L=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),FL={type:"keyframes",duration:.8},UL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BL=(t,{keyframes:e})=>e.length>2?FL:Jo.has(t)?t.startsWith("scale")?$L(e[1]):VL:UL;function zL({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:c,elapsed:h,...g}){return!!Object.keys(g).length}const tv=(t,e,n,r={},s,o)=>l=>{const u=Ry(r,t)||{},c=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ns(c);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:s};zL(u)||(g={...g,...BL(t,g)}),g.duration&&(g.duration=ns(g.duration)),g.repeatDelay&&(g.repeatDelay=ns(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const x=Gf(g.keyframes,u);if(x!==void 0)return at.update(()=>{g.onUpdate(x),g.onComplete()}),new hO([])}return!o&&Fb.supports(g)?new Fb(g):new ev(g)};function WL({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function xC(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(o=r);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const g in u){const v=t.getValue(g,t.latestValues[g]??null),x=u[g];if(x===void 0||h&&WL(h,g))continue;const b={delay:n,...Ry(o||{},g)};let k=!1;if(window.MotionHandoffAnimation){const P=zk(t);if(P){const D=window.MotionHandoffAnimation(P,g,at);D!==null&&(b.startTime=D,k=!0)}}p0(t,g),v.start(tv(g,v,x,t.shouldReduceMotion&&Bk.has(g)?{type:!1}:b,t,k));const O=v.animation;O&&c.push(O)}return l&&Promise.all(c).then(()=>{at.update(()=>{l&&x4(t,l)})}),c}function T0(t,e,n={}){var c;const r=Cc(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(xC(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:x}=s;return HL(t,e,g+h,v,x,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[h,g]=u==="beforeChildren"?[o,l]:[l,o];return h().then(()=>g())}else return Promise.all([o(),l(n.delay)])}function HL(t,e,n=0,r=0,s=1,o){const l=[],u=(t.variantChildren.size-1)*r,c=s===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(t.variantChildren).sort(qL).forEach((h,g)=>{h.notify("AnimationStart",e),l.push(T0(h,e,{...o,delay:n+c(g)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function qL(t,e){return t.sortNodePosition(e)}function KL(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>T0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=T0(t,e,n);else{const s=typeof e=="function"?Cc(t,e,n.custom):e;r=Promise.all(xC(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function wC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const GL=Ly.length;function _C(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?_C(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<GL;n++){const r=Ly[n],s=t.props[r];(Tc(s)||s===!1)&&(e[r]=s)}return e}const QL=[...Oy].reverse(),JL=Oy.length;function YL(t){return e=>Promise.all(e.map(({animation:n,options:r})=>KL(t,n,r)))}function XL(t){let e=YL(t),n=Ub(),r=!0;const s=c=>(h,g)=>{var x;const v=Cc(t,g,c==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(v){const{transition:b,transitionEnd:k,...O}=v;h={...h,...O,...k}}return h};function o(c){e=c(t)}function l(c){const{props:h}=t,g=_C(t.parent)||{},v=[],x=new Set;let b={},k=1/0;for(let P=0;P<JL;P++){const D=QL[P],V=n[D],$=h[D]!==void 0?h[D]:g[D],W=Tc($),B=D===c?V.isActive:null;B===!1&&(k=P);let K=$===g[D]&&$!==h[D]&&W;if(K&&r&&t.manuallyAnimateOnMount&&(K=!1),V.protectedKeys={...b},!V.isActive&&B===null||!$&&!V.prevProp||qf($)||typeof $=="boolean")continue;const I=ZL(V.prevProp,$);let S=I||D===c&&V.isActive&&!K&&W||P>k&&W,T=!1;const R=Array.isArray($)?$:[$];let j=R.reduce(s(D),{});B===!1&&(j={});const{prevResolvedValues:F={}}=V,L={...F,...j},ge=be=>{S=!0,x.has(be)&&(T=!0,x.delete(be)),V.needsAnimating[be]=!0;const ce=t.getValue(be);ce&&(ce.liveStyle=!1)};for(const be in L){const ce=j[be],J=F[be];if(b.hasOwnProperty(be))continue;let te=!1;f0(ce)&&f0(J)?te=!wC(ce,J):te=ce!==J,te?ce!=null?ge(be):x.add(be):ce!==void 0&&x.has(be)?ge(be):V.protectedKeys[be]=!0}V.prevProp=$,V.prevResolvedValues=j,V.isActive&&(b={...b,...j}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(K&&I)||T)&&v.push(...R.map(be=>({animation:be,options:{type:D}})))}if(x.size){const P={};if(typeof h.initial!="boolean"){const D=Cc(t,Array.isArray(h.initial)?h.initial[0]:h.initial);D&&D.transition&&(P.transition=D.transition)}x.forEach(D=>{const V=t.getBaseTarget(D),$=t.getValue(D);$&&($.liveStyle=!0),P[D]=V??null}),v.push({animation:P})}let O=!!v.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(O=!1),r=!1,O?e(v):Promise.resolve()}function u(c,h){var v;if(n[c].isActive===h)return Promise.resolve();(v=t.variantChildren)==null||v.forEach(x=>{var b;return(b=x.animationState)==null?void 0:b.setActive(c,h)}),n[c].isActive=h;const g=l(c);for(const x in n)n[x].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Ub(),r=!0}}}function ZL(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wC(e,t):!1}function To(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ub(){return{animate:To(!0),whileInView:To(),whileHover:To(),whileTap:To(),whileDrag:To(),whileFocus:To(),exit:To()}}class Wi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class eM extends Wi{constructor(e){super(e),e.animationState||(e.animationState=XL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let tM=0;class nM extends Wi{constructor(){super(...arguments),this.id=tM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const rM={animation:{Feature:eM},exit:{Feature:nM}};function Pc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Kc(t){return{point:{x:t.pageX,y:t.pageY}}}const sM=t=>e=>Dy(e)&&t(e,Kc(e));function uc(t,e,n,r){return Pc(t,e,sM(n),r)}function bC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function iM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function oM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const EC=1e-4,aM=1-EC,lM=1+EC,TC=.01,uM=0-TC,cM=0+TC;function bn(t){return t.max-t.min}function dM(t,e,n){return Math.abs(t-e)<=n}function Bb(t,e,n,r=.5){t.origin=r,t.originPoint=yt(e.min,e.max,t.origin),t.scale=bn(n)/bn(e),t.translate=yt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=aM&&t.scale<=lM||isNaN(t.scale))&&(t.scale=1),(t.translate>=uM&&t.translate<=cM||isNaN(t.translate))&&(t.translate=0)}function cc(t,e,n,r){Bb(t.x,e.x,n.x,r?r.originX:void 0),Bb(t.y,e.y,n.y,r?r.originY:void 0)}function zb(t,e,n){t.min=n.min+e.min,t.max=t.min+bn(e)}function hM(t,e,n){zb(t.x,e.x,n.x),zb(t.y,e.y,n.y)}function Wb(t,e,n){t.min=e.min-n.min,t.max=t.min+bn(e)}function dc(t,e,n){Wb(t.x,e.x,n.x),Wb(t.y,e.y,n.y)}const Hb=()=>({translate:0,scale:1,origin:0,originPoint:0}),ul=()=>({x:Hb(),y:Hb()}),qb=()=>({min:0,max:0}),At=()=>({x:qb(),y:qb()});function lr(t){return[t("x"),t("y")]}function bg(t){return t===void 0||t===1}function S0({scale:t,scaleX:e,scaleY:n}){return!bg(t)||!bg(e)||!bg(n)}function Ao(t){return S0(t)||SC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function SC(t){return Kb(t.x)||Kb(t.y)}function Kb(t){return t&&t!=="0%"}function mf(t,e,n){const r=t-n,s=e*r;return n+s}function Gb(t,e,n,r,s){return s!==void 0&&(t=mf(t,s,r)),mf(t,n,r)+e}function k0(t,e=0,n=1,r,s){t.min=Gb(t.min,e,n,r,s),t.max=Gb(t.max,e,n,r,s)}function kC(t,{x:e,y:n}){k0(t.x,e.translate,e.scale,e.originPoint),k0(t.y,n.translate,n.scale,n.originPoint)}const Qb=.999999999999,Jb=1.0000000000001;function fM(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=n[u],l=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&dl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,kC(t,l)),r&&Ao(o.latestValues)&&dl(t,o.latestValues))}e.x<Jb&&e.x>Qb&&(e.x=1),e.y<Jb&&e.y>Qb&&(e.y=1)}function cl(t,e){t.min=t.min+e,t.max=t.max+e}function Yb(t,e,n,r,s=.5){const o=yt(t.min,t.max,s);k0(t,e,n,o,r)}function dl(t,e){Yb(t.x,e.x,e.scaleX,e.scale,e.originX),Yb(t.y,e.y,e.scaleY,e.scale,e.originY)}function CC(t,e){return bC(oM(t.getBoundingClientRect(),e))}function pM(t,e,n){const r=CC(t,n),{scroll:s}=e;return s&&(cl(r.x,s.offset.x),cl(r.y,s.offset.y)),r}const AC=({current:t})=>t?t.ownerDocument.defaultView:null,Xb=(t,e)=>Math.abs(t-e);function mM(t,e){const n=Xb(t.x,e.x),r=Xb(t.y,e.y);return Math.sqrt(n**2+r**2)}class PC{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Tg(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=mM(v.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:k}=v,{timestamp:O}=en;this.history.push({...k,timestamp:O});const{onStart:P,onMove:D}=this.handlers;x||(P&&P(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Eg(x,this.transformPagePoint),at.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{this.end();const{onEnd:b,onSessionEnd:k,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Tg(v.type==="pointercancel"?this.lastMoveEventInfo:Eg(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,P),k&&k(v,P)},!Dy(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const l=Kc(e),u=Eg(l,this.transformPagePoint),{point:c}=u,{timestamp:h}=en;this.history=[{...c,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,Tg(u,this.history)),this.removeListeners=qc(uc(this.contextWindow,"pointermove",this.handlePointerMove),uc(this.contextWindow,"pointerup",this.handlePointerUp),uc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Oi(this.updatePoint)}}function Eg(t,e){return e?{point:e(t.point)}:t}function Zb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Tg({point:t},e){return{point:t,delta:Zb(t,IC(e)),offset:Zb(t,gM(e)),velocity:yM(e,.1)}}function gM(t){return t[0]}function IC(t){return t[t.length-1]}function yM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=IC(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ns(e)));)n--;if(!r)return{x:0,y:0};const o=rs(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function vM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yt(n,t,r.max):Math.min(t,n)),t}function eE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function xM(t,{top:e,left:n,bottom:r,right:s}){return{x:eE(t.x,n,s),y:eE(t.y,e,r)}}function tE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function wM(t,e){return{x:tE(t.x,e.x),y:tE(t.y,e.y)}}function _M(t,e){let n=.5;const r=bn(t),s=bn(e);return s>r?n=_c(e.min,e.max-r,t.min):r>s&&(n=_c(t.min,t.max-s,e.min)),Ms(0,1,n)}function bM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const C0=.35;function EM(t=C0){return t===!1?t=0:t===!0&&(t=C0),{x:nE(t,"left","right"),y:nE(t,"top","bottom")}}function nE(t,e,n){return{min:rE(t,e),max:rE(t,n)}}function rE(t,e){return typeof t=="number"?t:t[e]||0}const TM=new WeakMap;class SM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=At(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kc(g).point)},o=(g,v)=>{const{drag:x,dragPropagation:b,onDragStart:k}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wO(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lr(P=>{let D=this.getAxisMotionValue(P).get()||0;if(is.test(D)){const{projection:V}=this.visualElement;if(V&&V.layout){const $=V.layout.layoutBox[P];$&&(D=bn($)*(parseFloat(D)/100))}}this.originPoint[P]=D}),k&&at.postRender(()=>k(g,v)),p0(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:k,onDrag:O}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:P}=v;if(b&&this.currentDirection===null){this.currentDirection=kM(P),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",v.point,P),this.updateAxis("y",v.point,P),this.visualElement.render(),O&&O(g,v)},u=(g,v)=>this.stop(g,v),c=()=>lr(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)==null?void 0:v.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new PC(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:AC(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&at.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Ih(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=vM(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&al(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=xM(r.layoutBox,e):this.constraints=!1,this.elastic=EM(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&lr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=bM(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!al(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=pM(r,s.root,this.visualElement.getTransformPagePoint());let l=wM(s.layout.layoutBox,o);if(n){const u=n(iM(l));this.hasMutatedConstraints=!!u,u&&(l=bC(u))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},h=lr(g=>{if(!Ih(g,n,this.currentDirection))return;let v=c&&c[g]||{};l&&(v={min:0,max:0});const x=s?200:1e6,b=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,k)});return Promise.all(h).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return p0(this.visualElement,e),r.start(tv(e,r,0,n,this.visualElement,!1))}stopAnimation(){lr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){lr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){lr(n=>{const{drag:r}=this.getProps();if(!Ih(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n];o.set(e[n]-yt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!al(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};lr(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const c=u.get();s[l]=_M({min:c,max:c},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),lr(l=>{if(!Ih(l,e,null))return;const u=this.getAxisMotionValue(l),{min:c,max:h}=this.constraints[l];u.set(yt(c,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;TM.set(this.visualElement,this);const e=this.visualElement.current,n=uc(e,"pointerdown",c=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();al(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),at.read(r);const l=Pc(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(lr(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=c[g].translate,v.set(v.get()+c[g].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=C0,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function Ih(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function kM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class CM extends Wi{constructor(e){super(e),this.removeGroupControls=dr,this.removeListeners=dr,this.controls=new SM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const sE=t=>(e,n)=>{t&&at.postRender(()=>t(e,n))};class AM extends Wi{constructor(){super(...arguments),this.removePointerDownListener=dr}onPointerDown(e){this.session=new PC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:sE(e),onStart:sE(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&at.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=uc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ku={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ie.test(t))t=parseFloat(t);else return t;const n=iE(t,e.target.x),r=iE(t,e.target.y);return`${n}% ${r}%`}},PM={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Li.parse(t);if(s.length>5)return r;const o=Li.createTransformer(t),l=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;s[0+l]/=u,s[1+l]/=c;const h=yt(u,c,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};class IM extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;KO(RM),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Wh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||at.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function RC(t){const[e,n]=mk(),r=A.useContext(_y);return f.jsx(IM,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(Pk),isPresent:e,safeToRemove:n})}const RM={borderRadius:{...Ku,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ku,borderTopRightRadius:Ku,borderBottomLeftRadius:Ku,borderBottomRightRadius:Ku,boxShadow:PM};function NM(t,e,n){const r=mn(t)?t:Ec(t);return r.start(tv("",r,e,n)),r.animation}function jM(t){return t instanceof SVGElement&&t.tagName!=="svg"}const DM=(t,e)=>t.depth-e.depth;class OM{constructor(){this.children=[],this.isDirty=!1}add(e){Sy(this.children,e),this.isDirty=!0}remove(e){ky(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DM),this.isDirty=!1,this.children.forEach(e)}}function LM(t,e){const n=ss.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Oi(r),t(o-e))};return at.read(r,!0),()=>Oi(r)}const NC=["TopLeft","TopRight","BottomLeft","BottomRight"],MM=NC.length,oE=t=>typeof t=="string"?parseFloat(t):t,aE=t=>typeof t=="number"||Ie.test(t);function VM(t,e,n,r,s,o){s?(t.opacity=yt(0,n.opacity??1,$M(r)),t.opacityExit=yt(e.opacity??1,0,FM(r))):o&&(t.opacity=yt(e.opacity??1,n.opacity??1,r));for(let l=0;l<MM;l++){const u=`border${NC[l]}Radius`;let c=lE(e,u),h=lE(n,u);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||aE(c)===aE(h)?(t[u]=Math.max(yt(oE(c),oE(h),r),0),(is.test(h)||is.test(c))&&(t[u]+="%")):t[u]=h}(e.rotate||n.rotate)&&(t.rotate=yt(e.rotate||0,n.rotate||0,r))}function lE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $M=jC(0,.5,Jk),FM=jC(.5,.95,dr);function jC(t,e,n){return r=>r<t?0:r>e?1:n(_c(t,e,r))}function uE(t,e){t.min=e.min,t.max=e.max}function ar(t,e){uE(t.x,e.x),uE(t.y,e.y)}function cE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function dE(t,e,n,r,s){return t-=e,t=mf(t,1/n,r),s!==void 0&&(t=mf(t,1/s,r)),t}function UM(t,e=0,n=1,r=.5,s,o=t,l=t){if(is.test(e)&&(e=parseFloat(e),e=yt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=yt(o.min,o.max,r);t===o&&(u-=e),t.min=dE(t.min,e,n,u,s),t.max=dE(t.max,e,n,u,s)}function hE(t,e,[n,r,s],o,l){UM(t,e[n],e[r],e[s],e.scale,o,l)}const BM=["x","scaleX","originX"],zM=["y","scaleY","originY"];function fE(t,e,n,r){hE(t.x,e,BM,n?n.x:void 0,r?r.x:void 0),hE(t.y,e,zM,n?n.y:void 0,r?r.y:void 0)}function pE(t){return t.translate===0&&t.scale===1}function DC(t){return pE(t.x)&&pE(t.y)}function mE(t,e){return t.min===e.min&&t.max===e.max}function WM(t,e){return mE(t.x,e.x)&&mE(t.y,e.y)}function gE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function OC(t,e){return gE(t.x,e.x)&&gE(t.y,e.y)}function yE(t){return bn(t.x)/bn(t.y)}function vE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class HM{constructor(){this.members=[]}add(e){Sy(this.members,e),e.scheduleRender()}remove(e){if(ky(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qM(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:g,rotateX:v,rotateY:x,skewX:b,skewY:k}=n;h&&(r=`perspective(${h}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),x&&(r+=`rotateY(${x}deg) `),b&&(r+=`skewX(${b}deg) `),k&&(r+=`skewY(${k}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const Sg=["","X","Y","Z"],KM={visibility:"hidden"},xE=1e3;let GM=0;function kg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function LC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=zk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",at,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&LC(r)}function MC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e==null?void 0:e()){this.id=GM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YM),this.nodes.forEach(nV),this.nodes.forEach(rV),this.nodes.forEach(XM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new OM)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Ay),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const c=this.eventHandlers.get(l);c&&c.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jM(l),this.instance=l;const{layoutId:c,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||c)&&(this.isLayoutDirty=!0),t){let v;const x=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=LM(x,250),Wh.hasAnimatedSinceResize&&(Wh.hasAnimatedSinceResize=!1,this.nodes.forEach(_E))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&g&&(c||h)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:x,hasRelativeLayoutChanged:b,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||g.getDefaultTransition()||lV,{onLayoutAnimationStart:P,onLayoutAnimationComplete:D}=g.getProps(),V=!this.targetLayout||!OC(this.targetLayout,k),$=!x&&b;if(this.options.layoutRoot||this.resumeFrom||$||x&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,$);const W={...Ry(O,"layout"),onPlay:P,onComplete:D};(g.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else x||_E(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Oi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sV),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&LC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wE);return}this.isUpdating||this.nodes.forEach(eV),this.isUpdating=!1,this.nodes.forEach(tV),this.nodes.forEach(QM),this.nodes.forEach(JM),this.clearAllSnapshots();const u=ss.now();en.delta=Ms(0,1e3/60,u-en.timestamp),en.timestamp=u,en.isProcessing=!0,yg.update.process(en),yg.preRender.process(en),yg.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZM),this.sharedNodes.forEach(iV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,at.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){at.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=At(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!DC(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;l&&(u||Ao(this.latestValues)||g)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return l&&(c=this.removeTransform(c)),uV(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:l}=this.options;if(!l)return At();const u=l.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(cV))){const{scroll:g}=this.root;g&&(cl(u.x,g.offset.x),cl(u.y,g.offset.y))}return u}removeElementScroll(l){var c;const u=At();if(ar(u,l),(c=this.scroll)!=null&&c.wasRoot)return u;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:v,options:x}=g;g!==this.root&&v&&x.layoutScroll&&(v.wasRoot&&ar(u,l),cl(u.x,v.offset.x),cl(u.y,v.offset.y))}return u}applyTransform(l,u=!1){const c=At();ar(c,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&dl(c,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Ao(g.latestValues)&&dl(c,g.latestValues)}return Ao(this.latestValues)&&dl(c,this.latestValues),c}removeTransform(l){const u=At();ar(u,l);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!Ao(h.latestValues))continue;S0(h.latestValues)&&h.updateSnapshot();const g=At(),v=h.measurePageBox();ar(g,v),fE(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return Ao(this.latestValues)&&fE(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(l||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),dc(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),ar(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=At(),this.targetWithTransforms=At()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ar(this.target,this.layout.layoutBox),kC(this.target,this.targetDelta)):ar(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),dc(this.relativeTargetOrigin,this.target,b.target),ar(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||S0(this.parent.latestValues)||SC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===en.timestamp&&(c=!1),c)return;const{layout:h,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||g))return;ar(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,x=this.treeScale.y;fM(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=At());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cE(this.prevProjectionDelta.x,this.projectionDelta.x),cE(this.prevProjectionDelta.y,this.projectionDelta.y)),cc(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==x||!vE(this.projectionDelta.x,this.prevProjectionDelta.x)||!vE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ul(),this.projectionDelta=ul(),this.projectionDeltaWithTransform=ul()}setAnimationOrigin(l,u=!1){const c=this.snapshot,h=c?c.latestValues:{},g={...this.latestValues},v=ul();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=At(),b=c?c.source:void 0,k=this.layout?this.layout.source:void 0,O=b!==k,P=this.getStack(),D=!P||P.members.length<=1,V=!!(O&&!D&&this.options.crossfade===!0&&!this.path.some(aV));this.animationProgress=0;let $;this.mixTargetDelta=W=>{const B=W/1e3;bE(v.x,l.x,B),bE(v.y,l.y,B),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dc(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oV(this.relativeTarget,this.relativeTargetOrigin,x,B),$&&WM(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=At()),ar($,this.relativeTarget)),O&&(this.animationValues=g,VM(g,h,this.latestValues,B,V,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Oi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=at.update(()=>{Wh.hasAnimatedSinceResize=!0,this.currentAnimation=NM(0,xE,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:c,layout:h,latestValues:g}=l;if(!(!u||!c||!h)){if(this!==l&&this.layout&&h&&VC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||At();const v=bn(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+v;const x=bn(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+x}ar(u,c),dl(u,g),cc(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new HM),this.sharedNodes.get(l).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const h={};c.z&&kg("z",l,h,this.animationValues);for(let g=0;g<Sg.length;g++)kg(`rotate${Sg[g]}`,l,h,this.animationValues),kg(`skew${Sg[g]}`,l,h,this.animationValues);l.render();for(const g in h)l.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return KM;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=zh(l==null?void 0:l.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=zh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ao(this.latestValues)&&(b.transform=c?c({},""):"none",this.hasProjected=!1),b}const g=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=qM(this.projectionDeltaWithTransform,this.treeScale,g),c&&(u.transform=c(g,u.transform));const{x:v,y:x}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,h.animationValues?u.opacity=h===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const b in Sc){if(g[b]===void 0)continue;const{correct:k,applyTo:O,isCSSVariable:P}=Sc[b],D=u.transform==="none"?g[b]:k(g[b],h);if(O){const V=O.length;for(let $=0;$<V;$++)u[O[$]]=D}else P?this.options.visualElement.renderState.vars[b]=D:u[b]=D}return this.options.layoutId&&(u.pointerEvents=h===this?zh(l==null?void 0:l.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(wE),this.root.sharedNodes.clear()}}}function QM(t){t.updateLayout()}function JM(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?lr(v=>{const x=l?e.measuredBox[v]:e.layoutBox[v],b=bn(x);x.min=r[v].min,x.max=x.min+b}):VC(o,e.layoutBox,r)&&lr(v=>{const x=l?e.measuredBox[v]:e.layoutBox[v],b=bn(r[v]);x.max=x.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+b)});const u=ul();cc(u,r,e.layoutBox);const c=ul();l?cc(c,t.applyTransform(s,!0),e.measuredBox):cc(c,r,e.layoutBox);const h=!DC(u);let g=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:x,layout:b}=v;if(x&&b){const k=At();dc(k,e.layoutBox,x.layoutBox);const O=At();dc(O,r,b.layoutBox),OC(k,O)||(g=!0),v.options.layoutRoot&&(t.relativeTarget=O,t.relativeTargetOrigin=k,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function YM(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function XM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ZM(t){t.clearSnapshot()}function wE(t){t.clearMeasurements()}function eV(t){t.isLayoutDirty=!1}function tV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _E(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function nV(t){t.resolveTargetDelta()}function rV(t){t.calcProjection()}function sV(t){t.resetSkewAndRotation()}function iV(t){t.removeLeadSnapshot()}function bE(t,e,n){t.translate=yt(e.translate,0,n),t.scale=yt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function EE(t,e,n,r){t.min=yt(e.min,n.min,r),t.max=yt(e.max,n.max,r)}function oV(t,e,n,r){EE(t.x,e.x,n.x,r),EE(t.y,e.y,n.y,r)}function aV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const lV={duration:.45,ease:[.4,0,.1,1]},TE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),SE=TE("applewebkit/")&&!TE("chrome/")?Math.round:dr;function kE(t){t.min=SE(t.min),t.max=SE(t.max)}function uV(t){kE(t.x),kE(t.y)}function VC(t,e,n){return t==="position"||t==="preserve-aspect"&&!dM(yE(e),yE(n),.2)}function cV(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const dV=MC({attachResizeListener:(t,e)=>Pc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cg={current:void 0},$C=MC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Cg.current){const t=new dV({});t.mount(window),t.setOptions({layoutScroll:!0}),Cg.current=t}return Cg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),hV={pan:{Feature:AM},drag:{Feature:CM,ProjectionNode:$C,MeasureLayout:RC}};function CE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&at.postRender(()=>o(e,Kc(e)))}class fV extends Wi{mount(){const{current:e}=this.node;e&&(this.unmount=bO(e,(n,r)=>(CE(this.node,r,"Start"),s=>CE(this.node,s,"End"))))}unmount(){}}class pV extends Wi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qc(Pc(this.node.current,"focus",()=>this.onFocus()),Pc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function AE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&at.postRender(()=>o(e,Kc(e)))}class mV extends Wi{mount(){const{current:e}=this.node;e&&(this.unmount=kO(e,(n,r)=>(AE(this.node,r,"Start"),(s,{success:o})=>AE(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const A0=new WeakMap,Ag=new WeakMap,gV=t=>{const e=A0.get(t.target);e&&e(t)},yV=t=>{t.forEach(gV)};function vV({root:t,...e}){const n=t||document;Ag.has(n)||Ag.set(n,{});const r=Ag.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(yV,{root:t,...e})),r[s]}function xV(t,e,n){const r=vV(e);return A0.set(t,n),r.observe(t),()=>{A0.delete(t),r.unobserve(t)}}const wV={some:0,all:1};class _V extends Wi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:wV[s]},u=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),x=h?g:v;x&&x(c)};return xV(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(bV(e,n))&&this.startObserver()}unmount(){}}function bV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const EV={inView:{Feature:_V},tap:{Feature:mV},focus:{Feature:pV},hover:{Feature:fV}},TV={layout:{ProjectionNode:$C,MeasureLayout:RC}},P0={current:null},FC={current:!1};function SV(){if(FC.current=!0,!!Ey)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>P0.current=t.matches;t.addListener(e),e()}else P0.current=!1}const kV=[...dC,hn,Li],CV=t=>kV.find(cC(t)),AV=new WeakMap;function PV(t,e,n){for(const r in e){const s=e[r],o=n[r];if(mn(s))t.addValue(r,s);else if(mn(o))t.addValue(r,Ec(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,Ec(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const PE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class IV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=ss.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,at.render(this.render,!1,!0))};const{latestValues:c,renderState:h,onUpdate:g}=l;this.onUpdate=g,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Kf(n),this.isVariantNode=Ck(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in x){const k=x[b];c[b]!==void 0&&mn(k)&&k.set(c[b],!1)}}mount(e){this.current=e,AV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),FC.current||SV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:P0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Oi(this.notifyUpdate),Oi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Jo.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&at.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Tl){const n=Tl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):At()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<PE.length;r++){const s=PE[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=PV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ec(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(lC(r)||Xk(r))?r=parseFloat(r):!CV(r)&&Li.test(n)&&(r=iC(e,n)),this.setBaseTarget(e,mn(r)?r.get():r)),mn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=qy(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!mn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ay),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class UC extends IV{constructor(){super(...arguments),this.KeyframeResolver=hC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function RV(t){return window.getComputedStyle(t)}class NV extends UC{constructor(){super(...arguments),this.type="html",this.renderInstance=Vk}readValueFromInstance(e,n){if(Jo.has(n))return W4(e,n);{const r=RV(e),s=(Vy(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return CC(e,n)}build(e,n,r){Uy(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Ky(e,n,r)}}class jV extends UC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=At,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Mk(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Jo.has(n)){const r=sC(n);return r&&r.default||0}return n=$k.has(n)?n:My(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Uk(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&at.postRender(this.updateDimensions)}build(e,n,r){Wy(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){Fk(e,n,r,s)}mount(e){this.isSVGTag=Hy(e.tagName),super.mount(e)}}const DV=(t,e)=>zy(t)?new jV(e):new NV(e,{allowProjection:t!==A.Fragment}),OV=y4({...rM,...EV,...hV,...TV},DV),gf=jO(OV),LV=()=>{};var IE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},MV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],u=t[n++],c=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},zC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,u=l?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let x=(u&15)<<2|h>>6,b=h&63;c||(b=64,l||(x=64)),r.push(n[g],n[v],n[x],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||h==null||v==null)throw new VV;const x=o<<2|u>>4;if(r.push(x),h!==64){const b=u<<4&240|h>>2;if(r.push(b),v!==64){const k=h<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $V=function(t){const e=BC(t);return zC.encodeByteArray(e,!0)},yf=function(t){return $V(t).replace(/\./g,"")},WC=function(t){try{return zC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=()=>FV().__FIREBASE_DEFAULTS__,BV=()=>{if(typeof process>"u"||typeof IE>"u")return;const t=IE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WC(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return LV()||UV()||BV()||zV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},HC=t=>{var e,n;return(n=(e=Qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qC=t=>{const e=HC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},KC=()=>{var t;return(t=Qf())===null||t===void 0?void 0:t.config},GC=t=>{var e;return(e=Qf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yf(JSON.stringify(n)),yf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function qV(){var t;const e=(t=Qf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QV(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JV(){return!qV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YC(){try{return typeof indexedDB=="object"}catch{return!1}}function XC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function YV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=XV,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yo.prototype.create)}}class Yo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?ZV(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new yr(s,u,r)}}function ZV(t,e){return t.replace(e$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const e$=/\{\$([^}]+)}/g;function t$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $o(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(RE(o)&&RE(l)){if(!$o(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function RE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ec(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function n$(t,e){const n=new r$(t,e);return n.subscribe.bind(n)}class r${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Pg),s.error===void 0&&(s.error=Pg),s.complete===void 0&&(s.complete=Pg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=1e3,o$=2,a$=4*60*60*1e3,l$=.5;function NE(t,e=i$,n=o$){const r=e*Math.pow(n,t),s=Math.round(l$*r*(Math.random()-.5)*2);return Math.min(a$,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class mr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d$(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c$(t){return t===Po?void 0:t}function d$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new u$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const f$={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},p$=Be.INFO,m$={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},g$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=m$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jf{constructor(e){this.name=e,this._logLevel=p$,this._logHandler=g$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const y$=(t,e)=>e.some(n=>t instanceof n);let jE,DE;function v$(){return jE||(jE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x$(){return DE||(DE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZC=new WeakMap,I0=new WeakMap,e1=new WeakMap,Ig=new WeakMap,nv=new WeakMap;function w$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Pi(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&ZC.set(n,t)}).catch(()=>{}),nv.set(e,t),e}function _$(t){if(I0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});I0.set(t,e)}let R0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return I0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||e1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function b$(t){R0=t(R0)}function E$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rg(this),e,...n);return e1.set(r,e.sort?e.sort():[e]),Pi(r)}:x$().includes(t)?function(...e){return t.apply(Rg(this),e),Pi(ZC.get(this))}:function(...e){return Pi(t.apply(Rg(this),e))}}function T$(t){return typeof t=="function"?E$(t):(t instanceof IDBTransaction&&_$(t),y$(t,v$())?new Proxy(t,R0):t)}function Pi(t){if(t instanceof IDBRequest)return w$(t);if(Ig.has(t))return Ig.get(t);const e=T$(t);return e!==t&&(Ig.set(t,e),nv.set(e,t)),e}const Rg=t=>nv.get(t);function t1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),u=Pi(l);return r&&l.addEventListener("upgradeneeded",c=>{r(Pi(l.result),c.oldVersion,c.newVersion,Pi(l.transaction),c)}),n&&l.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const S$=["get","getKey","getAll","getAllKeys","count"],k$=["put","add","delete","clear"],Ng=new Map;function OE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=k$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||S$.includes(n)))return;const o=async function(l,...u){const c=this.transaction(l,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return Ng.set(e,o),o}b$(t=>({...t,get:(e,n,r)=>OE(e,n)||t.get(e,n,r),has:(e,n)=>!!OE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const N0="@firebase/app",LE="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Jf("@firebase/app"),P$="@firebase/app-compat",I$="@firebase/analytics-compat",R$="@firebase/analytics",N$="@firebase/app-check-compat",j$="@firebase/app-check",D$="@firebase/auth",O$="@firebase/auth-compat",L$="@firebase/database",M$="@firebase/data-connect",V$="@firebase/database-compat",$$="@firebase/functions",F$="@firebase/functions-compat",U$="@firebase/installations",B$="@firebase/installations-compat",z$="@firebase/messaging",W$="@firebase/messaging-compat",H$="@firebase/performance",q$="@firebase/performance-compat",K$="@firebase/remote-config",G$="@firebase/remote-config-compat",Q$="@firebase/storage",J$="@firebase/storage-compat",Y$="@firebase/firestore",X$="@firebase/vertexai",Z$="@firebase/firestore-compat",e3="firebase",t3="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="[DEFAULT]",n3={[N0]:"fire-core",[P$]:"fire-core-compat",[R$]:"fire-analytics",[I$]:"fire-analytics-compat",[j$]:"fire-app-check",[N$]:"fire-app-check-compat",[D$]:"fire-auth",[O$]:"fire-auth-compat",[L$]:"fire-rtdb",[M$]:"fire-data-connect",[V$]:"fire-rtdb-compat",[$$]:"fire-fn",[F$]:"fire-fn-compat",[U$]:"fire-iid",[B$]:"fire-iid-compat",[z$]:"fire-fcm",[W$]:"fire-fcm-compat",[H$]:"fire-perf",[q$]:"fire-perf-compat",[K$]:"fire-rc",[G$]:"fire-rc-compat",[Q$]:"fire-gcs",[J$]:"fire-gcs-compat",[Y$]:"fire-fst",[Z$]:"fire-fst-compat",[X$]:"fire-vertex","fire-js":"fire-js",[e3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=new Map,r3=new Map,D0=new Map;function ME(t,e){try{t.container.addComponent(e)}catch(n){Vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mr(t){const e=t.name;if(D0.has(e))return Vs.debug(`There were multiple attempts to register component ${e}.`),!1;D0.set(e,t);for(const n of vf.values())ME(n,t);for(const n of r3.values())ME(n,t);return!0}function Ul(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Yo("app","Firebase",s3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=t3;function n1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:j0,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ii.create("bad-app-name",{appName:String(s)});if(n||(n=KC()),!n)throw Ii.create("no-options");const o=vf.get(s);if(o){if($o(n,o.options)&&$o(r,o.config))return o;throw Ii.create("duplicate-app",{appName:s})}const l=new h$(s);for(const c of D0.values())l.addComponent(c);const u=new i3(n,r,l);return vf.set(s,u),u}function rv(t=j0){const e=vf.get(t);if(!e&&t===j0&&KC())return n1();if(!e)throw Ii.create("no-app",{appName:t});return e}function On(t,e,n){var r;let s=(r=n3[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vs.warn(u.join(" "));return}Mr(new mr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="firebase-heartbeat-database",a3=1,Ic="firebase-heartbeat-store";let jg=null;function r1(){return jg||(jg=t1(o3,a3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ii.create("idb-open",{originalErrorMessage:t.message})})),jg}async function l3(t){try{const n=(await r1()).transaction(Ic),r=await n.objectStore(Ic).get(s1(t));return await n.done,r}catch(e){if(e instanceof yr)Vs.warn(e.message);else{const n=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vs.warn(n.message)}}}async function VE(t,e){try{const r=(await r1()).transaction(Ic,"readwrite");await r.objectStore(Ic).put(e,s1(t)),await r.done}catch(n){if(n instanceof yr)Vs.warn(n.message);else{const r=Ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vs.warn(r.message)}}}function s1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=1024,c3=30;class d3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$E();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>c3){const l=p3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$E(),{heartbeatsToSend:r,unsentEntries:s}=h3(this._heartbeatsCache.heartbeats),o=yf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vs.warn(n),""}}}function $E(){return new Date().toISOString().substring(0,10)}function h3(t,e=u3){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),FE(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),FE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YC()?XC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await l3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function FE(t){return yf(JSON.stringify({version:2,heartbeats:t})).length}function p3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){Mr(new mr("platform-logger",e=>new C$(e),"PRIVATE")),Mr(new mr("heartbeat",e=>new d3(e),"PRIVATE")),On(N0,LE,t),On(N0,LE,"esm2017"),On("fire-js","")}m3("");var g3="firebase",y3="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(g3,y3,"app");var UE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,i1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function T(){}T.prototype=S.prototype,I.D=S.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(R,j,F){for(var L=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)L[ge-2]=arguments[ge];return S.prototype[j].apply(R,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,S,T){T||(T=0);var R=Array(16);if(typeof S=="string")for(var j=0;16>j;++j)R[j]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(j=0;16>j;++j)R[j]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=I.g[0],T=I.g[1],j=I.g[2];var F=I.g[3],L=S+(F^T&(j^F))+R[0]+3614090360&4294967295;S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[1]+3905402710&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[2]+606105819&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[3]+3250441966&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[4]+4118548399&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[5]+1200080426&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[6]+2821735955&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[7]+4249261313&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[8]+1770035416&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[9]+2336552879&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[10]+4294925233&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[11]+2304563134&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(F^T&(j^F))+R[12]+1804603682&4294967295,S=T+(L<<7&4294967295|L>>>25),L=F+(j^S&(T^j))+R[13]+4254626195&4294967295,F=S+(L<<12&4294967295|L>>>20),L=j+(T^F&(S^T))+R[14]+2792965006&4294967295,j=F+(L<<17&4294967295|L>>>15),L=T+(S^j&(F^S))+R[15]+1236535329&4294967295,T=j+(L<<22&4294967295|L>>>10),L=S+(j^F&(T^j))+R[1]+4129170786&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[6]+3225465664&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[11]+643717713&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[0]+3921069994&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[5]+3593408605&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[10]+38016083&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[15]+3634488961&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[4]+3889429448&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[9]+568446438&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[14]+3275163606&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[3]+4107603335&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[8]+1163531501&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(j^F&(T^j))+R[13]+2850285829&4294967295,S=T+(L<<5&4294967295|L>>>27),L=F+(T^j&(S^T))+R[2]+4243563512&4294967295,F=S+(L<<9&4294967295|L>>>23),L=j+(S^T&(F^S))+R[7]+1735328473&4294967295,j=F+(L<<14&4294967295|L>>>18),L=T+(F^S&(j^F))+R[12]+2368359562&4294967295,T=j+(L<<20&4294967295|L>>>12),L=S+(T^j^F)+R[5]+4294588738&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[8]+2272392833&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[11]+1839030562&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[14]+4259657740&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[1]+2763975236&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[4]+1272893353&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[7]+4139469664&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[10]+3200236656&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[13]+681279174&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[0]+3936430074&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[3]+3572445317&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[6]+76029189&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(T^j^F)+R[9]+3654602809&4294967295,S=T+(L<<4&4294967295|L>>>28),L=F+(S^T^j)+R[12]+3873151461&4294967295,F=S+(L<<11&4294967295|L>>>21),L=j+(F^S^T)+R[15]+530742520&4294967295,j=F+(L<<16&4294967295|L>>>16),L=T+(j^F^S)+R[2]+3299628645&4294967295,T=j+(L<<23&4294967295|L>>>9),L=S+(j^(T|~F))+R[0]+4096336452&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[7]+1126891415&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[14]+2878612391&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[5]+4237533241&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[12]+1700485571&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[3]+2399980690&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[10]+4293915773&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[1]+2240044497&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[8]+1873313359&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[15]+4264355552&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[6]+2734768916&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[13]+1309151649&4294967295,T=j+(L<<21&4294967295|L>>>11),L=S+(j^(T|~F))+R[4]+4149444226&4294967295,S=T+(L<<6&4294967295|L>>>26),L=F+(T^(S|~j))+R[11]+3174756917&4294967295,F=S+(L<<10&4294967295|L>>>22),L=j+(S^(F|~T))+R[2]+718787259&4294967295,j=F+(L<<15&4294967295|L>>>17),L=T+(F^(j|~S))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(j+(L<<21&4294967295|L>>>11))&4294967295,I.g[2]=I.g[2]+j&4294967295,I.g[3]=I.g[3]+F&4294967295}r.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var T=S-this.blockSize,R=this.B,j=this.h,F=0;F<S;){if(j==0)for(;F<=T;)s(this,I,F),F+=this.blockSize;if(typeof I=="string"){for(;F<S;)if(R[j++]=I.charCodeAt(F++),j==this.blockSize){s(this,R),j=0;break}}else for(;F<S;)if(R[j++]=I[F++],j==this.blockSize){s(this,R),j=0;break}}this.h=j,this.o+=S},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var T=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=T&255,T/=256;for(this.u(I),I=Array(16),S=T=0;4>S;++S)for(var R=0;32>R;R+=8)I[T++]=this.g[S]>>>R&255;return I};function o(I,S){var T=u;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=S(I)}function l(I,S){this.h=S;for(var T=[],R=!0,j=I.length-1;0<=j;j--){var F=I[j]|0;R&&F==S||(T[j]=F,R=!1)}this.g=T}var u={};function c(I){return-128<=I&&128>I?o(I,function(S){return new l([S|0],0>S?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return P(h(-I));for(var S=[],T=1,R=0;I>=T;R++)S[R]=I/T|0,T*=4294967296;return new l(S,0)}function g(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return P(g(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(S,8)),R=v,j=0;j<I.length;j+=8){var F=Math.min(8,I.length-j),L=parseInt(I.substring(j,j+F),S);8>F?(F=h(Math.pow(S,F)),R=R.j(F).add(h(L))):(R=R.j(T),R=R.add(h(L)))}return R}var v=c(0),x=c(1),b=c(16777216);t=l.prototype,t.m=function(){if(O(this))return-P(this).m();for(var I=0,S=1,T=0;T<this.g.length;T++){var R=this.i(T);I+=(0<=R?R:4294967296+R)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(O(this))return"-"+P(this).toString(I);for(var S=h(Math.pow(I,6)),T=this,R="";;){var j=W(T,S).g;T=D(T,j.j(S));var F=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=j,k(T))return F+R;for(;6>F.length;)F="0"+F;R=F+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function O(I){return I.h==-1}t.l=function(I){return I=D(this,I),O(I)?-1:k(I)?0:1};function P(I){for(var S=I.g.length,T=[],R=0;R<S;R++)T[R]=~I.g[R];return new l(T,~I.h).add(x)}t.abs=function(){return O(this)?P(this):this},t.add=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0,j=0;j<=S;j++){var F=R+(this.i(j)&65535)+(I.i(j)&65535),L=(F>>>16)+(this.i(j)>>>16)+(I.i(j)>>>16);R=L>>>16,F&=65535,L&=65535,T[j]=L<<16|F}return new l(T,T[T.length-1]&-2147483648?-1:0)};function D(I,S){return I.add(P(S))}t.j=function(I){if(k(this)||k(I))return v;if(O(this))return O(I)?P(this).j(P(I)):P(P(this).j(I));if(O(I))return P(this.j(P(I)));if(0>this.l(b)&&0>I.l(b))return h(this.m()*I.m());for(var S=this.g.length+I.g.length,T=[],R=0;R<2*S;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var j=0;j<I.g.length;j++){var F=this.i(R)>>>16,L=this.i(R)&65535,ge=I.i(j)>>>16,$e=I.i(j)&65535;T[2*R+2*j]+=L*$e,V(T,2*R+2*j),T[2*R+2*j+1]+=F*$e,V(T,2*R+2*j+1),T[2*R+2*j+1]+=L*ge,V(T,2*R+2*j+1),T[2*R+2*j+2]+=F*ge,V(T,2*R+2*j+2)}for(R=0;R<S;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=S;R<2*S;R++)T[R]=0;return new l(T,0)};function V(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function $(I,S){this.g=I,this.h=S}function W(I,S){if(k(S))throw Error("division by zero");if(k(I))return new $(v,v);if(O(I))return S=W(P(I),S),new $(P(S.g),P(S.h));if(O(S))return S=W(I,P(S)),new $(P(S.g),S.h);if(30<I.g.length){if(O(I)||O(S))throw Error("slowDivide_ only works with positive integers.");for(var T=x,R=S;0>=R.l(I);)T=B(T),R=B(R);var j=K(T,1),F=K(R,1);for(R=K(R,2),T=K(T,2);!k(R);){var L=F.add(R);0>=L.l(I)&&(j=j.add(T),F=L),R=K(R,1),T=K(T,1)}return S=D(I,j.j(S)),new $(j,S)}for(j=v;0<=I.l(S);){for(T=Math.max(1,Math.floor(I.m()/S.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),F=h(T),L=F.j(S);O(L)||0<L.l(I);)T-=R,F=h(T),L=F.j(S);k(F)&&(F=x),j=j.add(F),I=D(I,L)}return new $(j,I)}t.A=function(I){return W(this,I).h},t.and=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)&I.i(R);return new l(T,this.h&I.h)},t.or=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)|I.i(R);return new l(T,this.h|I.h)},t.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),T=[],R=0;R<S;R++)T[R]=this.i(R)^I.i(R);return new l(T,this.h^I.h)};function B(I){for(var S=I.g.length+1,T=[],R=0;R<S;R++)T[R]=I.i(R)<<1|I.i(R-1)>>>31;return new l(T,I.h)}function K(I,S){var T=S>>5;S%=32;for(var R=I.g.length-T,j=[],F=0;F<R;F++)j[F]=0<S?I.i(F+T)>>>S|I.i(F+T+1)<<32-S:I.i(F+T);return new l(j,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,i1=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=g,Ri=l}).apply(typeof UE<"u"?UE:typeof self<"u"?self:typeof window<"u"?window:{});var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o1,tc,a1,Hh,O0,l1,u1,c1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,w,E){return p==Array.prototype||p==Object.prototype||(p[w]=E.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rh=="object"&&Rh];for(var w=0;w<p.length;++w){var E=p[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(p,w){if(w)e:{var E=r;p=p.split(".");for(var N=0;N<p.length-1;N++){var G=p[N];if(!(G in E))break e;E=E[G]}p=p[p.length-1],N=E[p],w=w(N),w!=N&&w!=null&&e(E,p,{configurable:!0,writable:!0,value:w})}}function o(p,w){p instanceof String&&(p+="");var E=0,N=!1,G={next:function(){if(!N&&E<p.length){var ee=E++;return{value:w(ee,p[ee]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(p){return p||function(){return o(this,function(w,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function c(p){var w=typeof p;return w=w!="object"?w:p?Array.isArray(p)?"array":w:"null",w=="array"||w=="object"&&typeof p.length=="number"}function h(p){var w=typeof p;return w=="object"&&p!=null||w=="function"}function g(p,w,E){return p.call.apply(p.bind,arguments)}function v(p,w,E){if(!p)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),p.apply(w,G)}}return function(){return p.apply(w,arguments)}}function x(p,w,E){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,x.apply(null,arguments)}function b(p,w){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),p.apply(this,N)}}function k(p,w){function E(){}E.prototype=w.prototype,p.aa=w.prototype,p.prototype=new E,p.prototype.constructor=p,p.Qb=function(N,G,ee){for(var me=Array(arguments.length-2),et=2;et<arguments.length;et++)me[et-2]=arguments[et];return w.prototype[G].apply(N,me)}}function O(p){const w=p.length;if(0<w){const E=Array(w);for(let N=0;N<w;N++)E[N]=p[N];return E}return[]}function P(p,w){for(let E=1;E<arguments.length;E++){const N=arguments[E];if(c(N)){const G=p.length||0,ee=N.length||0;p.length=G+ee;for(let me=0;me<ee;me++)p[G+me]=N[me]}else p.push(N)}}class D{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function V(p){return/^[\s\xa0]*$/.test(p)}function $(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function W(p){return W[" "](p),p}W[" "]=function(){};var B=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function K(p,w,E){for(const N in p)w.call(E,p[N],N,p)}function I(p,w){for(const E in p)w.call(void 0,p[E],E,p)}function S(p){const w={};for(const E in p)w[E]=p[E];return w}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(p,w){let E,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(E in N)p[E]=N[E];for(let ee=0;ee<T.length;ee++)E=T[ee],Object.prototype.hasOwnProperty.call(N,E)&&(p[E]=N[E])}}function j(p){var w=1;p=p.split(":");const E=[];for(;0<w&&p.length;)E.push(p.shift()),w--;return p.length&&E.push(p.join(":")),E}function F(p){u.setTimeout(()=>{throw p},0)}function L(){var p=J;let w=null;return p.g&&(w=p.g,p.g=p.g.next,p.g||(p.h=null),w.next=null),w}class ge{constructor(){this.h=this.g=null}add(w,E){const N=$e.get();N.set(w,E),this.h?this.h.next=N:this.g=N,this.h=N}}var $e=new D(()=>new Ge,p=>p.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ce=!1,J=new ge,te=()=>{const p=u.Promise.resolve(void 0);be=()=>{p.then(z)}};var z=()=>{for(var p;p=L();){try{p.h.call(p.g)}catch(E){F(E)}var w=$e;w.j(p),100>w.h&&(w.h++,p.next=w.g,w.g=p)}ce=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(p,w){this.type=p,this.g=this.target=w,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,w=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const E=()=>{};u.addEventListener("test",E,w),u.removeEventListener("test",E,w)}catch{}return p}();function je(p,w){if(fe.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var E=this.type=p.type,N=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=w,w=p.relatedTarget){if(B){e:{try{W(w.nodeName);var G=!0;break e}catch{}G=!1}G||(w=null)}}else E=="mouseover"?w=p.fromElement:E=="mouseout"&&(w=p.toElement);this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ie[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&je.aa.h.call(this)}}k(je,fe);var ie={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),he=0;function Z(p,w,E,N,G){this.listener=p,this.proxy=null,this.src=w,this.type=E,this.capture=!!N,this.ha=G,this.key=++he,this.da=this.fa=!1}function q(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function re(p){this.src=p,this.g={},this.h=0}re.prototype.add=function(p,w,E,N,G){var ee=p.toString();p=this.g[ee],p||(p=this.g[ee]=[],this.h++);var me=We(p,w,N,G);return-1<me?(w=p[me],E||(w.fa=!1)):(w=new Z(w,this.src,ee,!!N,G),w.fa=E,p.push(w)),w};function ye(p,w){var E=w.type;if(E in p.g){var N=p.g[E],G=Array.prototype.indexOf.call(N,w,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(N,G,1),ee&&(q(w),p.g[E].length==0&&(delete p.g[E],p.h--))}}function We(p,w,E,N){for(var G=0;G<p.length;++G){var ee=p[G];if(!ee.da&&ee.listener==w&&ee.capture==!!E&&ee.ha==N)return G}return-1}var St="closure_lm_"+(1e6*Math.random()|0),vr={};function Ws(p,w,E,N,G){if(Array.isArray(w)){for(var ee=0;ee<w.length;ee++)Ws(p,w[ee],E,N,G);return null}return E=Ql(E),p&&p[oe]?p.K(w,E,h(N)?!!N.capture:!1,G):Hs(p,w,E,!1,N,G)}function Hs(p,w,E,N,G,ee){if(!w)throw Error("Invalid event type");var me=h(G)?!!G.capture:!!G,et=ps(p);if(et||(p[St]=et=new re(p)),E=et.add(w,E,N,me,ee),E.proxy)return E;if(N=qs(),E.proxy=N,N.src=p,N.listener=E,p.addEventListener)Te||(G=me),G===void 0&&(G=!1),p.addEventListener(w.toString(),N,G);else if(p.attachEvent)p.attachEvent(on(w.toString()),N);else if(p.addListener&&p.removeListener)p.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function qs(){function p(E){return w.call(p.src,p.listener,E)}const w=Gi;return p}function fs(p,w,E,N,G){if(Array.isArray(w))for(var ee=0;ee<w.length;ee++)fs(p,w[ee],E,N,G);else N=h(N)?!!N.capture:!!N,E=Ql(E),p&&p[oe]?(p=p.i,w=String(w).toString(),w in p.g&&(ee=p.g[w],E=We(ee,E,N,G),-1<E&&(q(ee[E]),Array.prototype.splice.call(ee,E,1),ee.length==0&&(delete p.g[w],p.h--)))):p&&(p=ps(p))&&(w=p.g[w.toString()],p=-1,w&&(p=We(w,E,N,G)),(E=-1<p?w[p]:null)&&wt(E))}function wt(p){if(typeof p!="number"&&p&&!p.da){var w=p.src;if(w&&w[oe])ye(w.i,p);else{var E=p.type,N=p.proxy;w.removeEventListener?w.removeEventListener(E,N,p.capture):w.detachEvent?w.detachEvent(on(E),N):w.addListener&&w.removeListener&&w.removeListener(N),(E=ps(w))?(ye(E,p),E.h==0&&(E.src=null,w[St]=null)):q(p)}}}function on(p){return p in vr?vr[p]:vr[p]="on"+p}function Gi(p,w){if(p.da)p=!0;else{w=new je(w,this);var E=p.listener,N=p.ha||p.src;p.fa&&wt(p),p=E.call(N,w)}return p}function ps(p){return p=p[St],p instanceof re?p:null}var ra="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ql(p){return typeof p=="function"?p:(p[ra]||(p[ra]=function(w){return p.handleEvent(w)}),p[ra])}function Dt(){ne.call(this),this.i=new re(this),this.M=this,this.F=null}k(Dt,ne),Dt.prototype[oe]=!0,Dt.prototype.removeEventListener=function(p,w,E,N){fs(this,p,w,E,N)};function Ot(p,w){var E,N=p.F;if(N)for(E=[];N;N=N.F)E.push(N);if(p=p.M,N=w.type||w,typeof w=="string")w=new fe(w,p);else if(w instanceof fe)w.target=w.target||p;else{var G=w;w=new fe(N,p),R(w,G)}if(G=!0,E)for(var ee=E.length-1;0<=ee;ee--){var me=w.g=E[ee];G=ms(me,N,!0,w)&&G}if(me=w.g=p,G=ms(me,N,!0,w)&&G,G=ms(me,N,!1,w)&&G,E)for(ee=0;ee<E.length;ee++)me=w.g=E[ee],G=ms(me,N,!1,w)&&G}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var p=this.i,w;for(w in p.g){for(var E=p.g[w],N=0;N<E.length;N++)q(E[N]);delete p.g[w],p.h--}}this.F=null},Dt.prototype.K=function(p,w,E,N){return this.i.add(String(p),w,!1,E,N)},Dt.prototype.L=function(p,w,E,N){return this.i.add(String(p),w,!0,E,N)};function ms(p,w,E,N){if(w=p.i.g[String(w)],!w)return!0;w=w.concat();for(var G=!0,ee=0;ee<w.length;++ee){var me=w[ee];if(me&&!me.da&&me.capture==E){var et=me.listener,Lt=me.ha||me.src;me.fa&&ye(p.i,me),G=et.call(Lt,N)!==!1&&G}}return G&&!N.defaultPrevented}function Jl(p,w,E){if(typeof p=="function")E&&(p=x(p,E));else if(p&&typeof p.handleEvent=="function")p=x(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:u.setTimeout(p,w||0)}function Ks(p){p.g=Jl(()=>{p.g=null,p.i&&(p.i=!1,Ks(p))},p.l);const w=p.h;p.h=null,p.m.apply(null,w)}class Qi extends ne{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Ks(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ji(p){ne.call(this),this.h=p,this.g={}}k(Ji,ne);var Yl=[];function Xl(p){K(p.g,function(w,E){this.g.hasOwnProperty(E)&&wt(w)},p),p.g={}}Ji.prototype.N=function(){Ji.aa.N.call(this),Xl(this)},Ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zl=u.JSON.stringify,eu=u.JSON.parse,tu=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Yi(){}Yi.prototype.h=null;function sa(p){return p.h||(p.h=p.i())}function ia(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Br(){fe.call(this,"d")}k(Br,fe);function oa(){fe.call(this,"c")}k(oa,fe);var zr={},nu=null;function Xi(){return nu=nu||new Dt}zr.La="serverreachability";function ru(p){fe.call(this,zr.La,p)}k(ru,fe);function gs(p){const w=Xi();Ot(w,new ru(w))}zr.STAT_EVENT="statevent";function su(p,w){fe.call(this,zr.STAT_EVENT,p),this.stat=w}k(su,fe);function kt(p){const w=Xi();Ot(w,new su(w,p))}zr.Ma="timingevent";function aa(p,w){fe.call(this,zr.Ma,p),this.size=w}k(aa,fe);function xr(p,w){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},w)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function eo(p,w,E,N,G,ee){p.info(function(){if(p.g)if(ee)for(var me="",et=ee.split("&"),Lt=0;Lt<et.length;Lt++){var qe=et[Lt].split("=");if(1<qe.length){var Bt=qe[0];qe=qe[1];var It=Bt.split("_");me=2<=It.length&&It[1]=="type"?me+(Bt+"="+qe+"&"):me+(Bt+"=redacted&")}}else me=null;else me=ee;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+w+`
`+E+`
`+me})}function la(p,w,E,N,G,ee,me){p.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+w+`
`+E+`
`+ee+" "+me})}function wr(p,w,E,N){p.info(function(){return"XMLHTTP TEXT ("+w+"): "+Sp(p,E)+(N?" "+N:"")})}function iu(p,w){p.info(function(){return"TIMEOUT: "+w})}Zi.prototype.info=function(){};function Sp(p,w){if(!p.g)return w;if(!w)return null;try{var E=JSON.parse(w);if(E){for(p=0;p<E.length;p++)if(Array.isArray(E[p])){var N=E[p];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var me=1;me<G.length;me++)G[me]=""}}}}return Zl(E)}catch{return w}}var ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_r;function to(){}k(to,Yi),to.prototype.g=function(){return new XMLHttpRequest},to.prototype.i=function(){return{}},_r=new to;function br(p,w,E,N){this.j=p,this.i=w,this.l=E,this.R=N||1,this.U=new Ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new id}function id(){this.i=null,this.g="",this.h=!1}var ou={},ca={};function da(p,w,E){p.L=1,p.v=Xs(Fn(w)),p.m=E,p.P=!0,au(p,null)}function au(p,w){p.F=Date.now(),rt(p),p.A=Fn(p.v);var E=p.A,N=p.R;Array.isArray(N)||(N=[String(N)]),ei(E.i,"t",N),p.C=0,E=p.j.J,p.h=new id,p.g=Ed(p.j,E?w:null,!p.m),0<p.O&&(p.M=new Qi(x(p.Y,p,p.g),p.O)),w=p.U,E=p.g,N=p.ca;var G="readystatechange";Array.isArray(G)||(G&&(Yl[0]=G.toString()),G=Yl);for(var ee=0;ee<G.length;ee++){var me=Ws(E,G[ee],N||w.handleEvent,!1,w.h||w);if(!me)break;w.g[me.key]=me}w=p.H?S(p.H):{},p.m?(p.u||(p.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,w)):(p.u="GET",p.g.ea(p.A,p.u,null,w)),gs(),eo(p.i,p.u,p.A,p.l,p.R,p.m)}br.prototype.ca=function(p){p=p.target;const w=this.M;w&&Tn(p)==3?w.j():this.Y(p)},br.prototype.Y=function(p){try{if(p==this.g)e:{const It=Tn(this.g);var w=this.g.Ba();const er=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||fu(this.g)))){this.J||It!=4||w==7||(w==8||0>=er?gs(3):gs(2)),no(this);var E=this.g.Z();this.X=E;t:if(od(this)){var N=fu(this.g);p="";var G=N.length,ee=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),Gs(this);var me="";break t}this.h.i=new u.TextDecoder}for(w=0;w<G;w++)this.h.h=!0,p+=this.h.i.decode(N[w],{stream:!(ee&&w==G-1)});N.length=0,this.h.g+=p,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=E==200,la(this.i,this.u,this.A,this.l,this.R,It,E),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Lt=this.g;if((et=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(et)){var qe=et;break t}}qe=null}if(E=qe)wr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lu(this,E);else{this.o=!1,this.s=3,kt(12),Xn(this),Gs(this);break e}}if(this.P){E=!0;let Bn;for(;!this.J&&this.C<me.length;)if(Bn=kp(this,me),Bn==ca){It==4&&(this.s=4,kt(14),E=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==ou){this.s=4,kt(15),wr(this.i,this.l,me,"[Invalid Chunk]"),E=!1;break}else wr(this.i,this.l,Bn,null),lu(this,Bn);if(od(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||me.length!=0||this.h.h||(this.s=1,kt(16),E=!1),this.o=this.o&&E,!E)wr(this.i,this.l,me,"[Invalid Chunked Response]"),Xn(this),Gs(this);else if(0<me.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),mu(Bt),Bt.M=!0,kt(11))}}else wr(this.i,this.l,me,null),lu(this,me);It==4&&Xn(this),this.o&&!this.J&&(It==4?ba(this.j,this):(this.o=!1,rt(this)))}else ya(this.g),E==400&&0<me.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Xn(this),Gs(this)}}}catch{}finally{}};function od(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function kp(p,w){var E=p.C,N=w.indexOf(`
`,E);return N==-1?ca:(E=Number(w.substring(E,N)),isNaN(E)?ou:(N+=1,N+E>w.length?ca:(w=w.slice(N,N+E),p.C=N+E,w)))}br.prototype.cancel=function(){this.J=!0,Xn(this)};function rt(p){p.S=Date.now()+p.I,ad(p,p.I)}function ad(p,w){if(p.B!=null)throw Error("WatchDog timer not null");p.B=xr(x(p.ba,p),w)}function no(p){p.B&&(u.clearTimeout(p.B),p.B=null)}br.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(iu(this.i,this.A),this.L!=2&&(gs(),kt(17)),Xn(this),this.s=2,Gs(this)):ad(this,this.S-p)};function Gs(p){p.j.G==0||p.J||ba(p.j,p)}function Xn(p){no(p);var w=p.M;w&&typeof w.ma=="function"&&w.ma(),p.M=null,Xl(p.U),p.g&&(w=p.g,p.g=null,w.abort(),w.ma())}function lu(p,w){try{var E=p.j;if(E.G!=0&&(E.g==p||yn(E.h,p))){if(!p.K&&yn(E.h,p)&&E.G==3){try{var N=E.Da.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<p.F)_a(E),Cr(E);else break e;wa(E),kt(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&E.v==0&&!E.C&&(E.C=xr(x(E.Za,E),6e3));if(1>=ud(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else _s(E,11)}else if((p.K||E.g==p)&&_a(E),!V(w))for(G=E.Da.g.parse(w),w=0;w<G.length;w++){let qe=G[w];if(E.T=qe[0],qe=qe[1],E.G==2)if(qe[0]=="c"){E.K=qe[1],E.ia=qe[2];const Bt=qe[3];Bt!=null&&(E.la=Bt,E.j.info("VER="+E.la));const It=qe[4];It!=null&&(E.Aa=It,E.j.info("SVER="+E.Aa));const er=qe[5];er!=null&&typeof er=="number"&&0<er&&(N=1.5*er,E.L=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const Bn=p.g;if(Bn){const uo=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uo){var ee=N.h;ee.g||uo.indexOf("spdy")==-1&&uo.indexOf("quic")==-1&&uo.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(uu(ee,ee.h),ee.h=null))}if(N.D){const Ta=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ta&&(N.ya=Ta,tt(N.I,N.D,Ta))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-p.F,E.j.info("Handshake RTT: "+E.R+"ms")),N=E;var me=p;if(N.qa=bd(N,N.J?N.ia:null,N.W),me.K){cd(N.h,me);var et=me,Lt=N.L;Lt&&(et.I=Lt),et.B&&(no(et),rt(et)),N.g=me}else lo(N);0<E.i.length&&Kr(E)}else qe[0]!="stop"&&qe[0]!="close"||_s(E,7);else E.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?_s(E,7):Yt(E):qe[0]!="noop"&&E.l&&E.l.ta(qe),E.v=0)}}gs(4)}catch{}}var ld=class{constructor(p,w){this.g=p,this.map=w}};function ro(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $n(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function ud(p){return p.h?1:p.g?p.g.size:0}function yn(p,w){return p.h?p.h==w:p.g?p.g.has(w):!1}function uu(p,w){p.g?p.g.add(w):p.h=w}function cd(p,w){p.h&&p.h==w?p.h=null:p.g&&p.g.has(w)&&p.g.delete(w)}ro.prototype.cancel=function(){if(this.i=dd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function dd(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let w=p.i;for(const E of p.g.values())w=w.concat(E.D);return w}return O(p.i)}function ha(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var w=[],E=p.length,N=0;N<E;N++)w.push(p[N]);return w}w=[],E=0;for(N in p)w[E++]=p[N];return w}function fa(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var w=[];p=p.length;for(var E=0;E<p;E++)w.push(E);return w}w=[],E=0;for(const N in p)w[E++]=N;return w}}}function Qs(p,w){if(p.forEach&&typeof p.forEach=="function")p.forEach(w,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,w,void 0);else for(var E=fa(p),N=ha(p),G=N.length,ee=0;ee<G;ee++)w.call(void 0,N[ee],E&&E[ee],p)}var so=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cp(p,w){if(p){p=p.split("&");for(var E=0;E<p.length;E++){var N=p[E].indexOf("="),G=null;if(0<=N){var ee=p[E].substring(0,N);G=p[E].substring(N+1)}else ee=p[E];w(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ys(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ys){this.h=p.h,io(this,p.j),this.o=p.o,this.g=p.g,Js(this,p.s),this.l=p.l;var w=p.i,E=new Wr;E.i=w.i,w.g&&(E.g=new Map(w.g),E.h=w.h),Ys(this,E),this.m=p.m}else p&&(w=String(p).match(so))?(this.h=!1,io(this,w[1]||"",!0),this.o=He(w[2]||""),this.g=He(w[3]||"",!0),Js(this,w[4]),this.l=He(w[5]||"",!0),Ys(this,w[6]||"",!0),this.m=He(w[7]||"")):(this.h=!1,this.i=new Wr(null,this.h))}ys.prototype.toString=function(){var p=[],w=this.j;w&&p.push(Zs(w,pa,!0),":");var E=this.g;return(E||w=="file")&&(p.push("//"),(w=this.o)&&p.push(Zs(w,pa,!0),"@"),p.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&p.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&p.push("/"),p.push(Zs(E,E.charAt(0)=="/"?pd:fd,!0))),(E=this.i.toString())&&p.push("?",E),(E=this.m)&&p.push("#",Zs(E,cu)),p.join("")};function Fn(p){return new ys(p)}function io(p,w,E){p.j=E?He(w,!0):w,p.j&&(p.j=p.j.replace(/:$/,""))}function Js(p,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);p.s=w}else p.s=null}function Ys(p,w,E){w instanceof Wr?(p.i=w,Hr(p.i,p.h)):(E||(w=Zs(w,md)),p.i=new Wr(w,p.h))}function tt(p,w,E){p.i.set(w,E)}function Xs(p){return tt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function He(p,w){return p?w?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Zs(p,w,E){return typeof p=="string"?(p=encodeURI(p).replace(w,hd),E&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function hd(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var pa=/[#\/\?@]/g,fd=/[#\?:]/g,pd=/[#\?]/g,md=/[#\?@]/g,cu=/#/g;function Wr(p,w){this.h=this.g=null,this.i=p||null,this.j=!!w}function Jt(p){p.g||(p.g=new Map,p.h=0,p.i&&Cp(p.i,function(w,E){p.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}t=Wr.prototype,t.add=function(p,w){Jt(this),this.i=null,p=Zn(this,p);var E=this.g.get(p);return E||this.g.set(p,E=[]),E.push(w),this.h+=1,this};function Er(p,w){Jt(p),w=Zn(p,w),p.g.has(w)&&(p.i=null,p.h-=p.g.get(w).length,p.g.delete(w))}function Tr(p,w){return Jt(p),w=Zn(p,w),p.g.has(w)}t.forEach=function(p,w){Jt(this),this.g.forEach(function(E,N){E.forEach(function(G){p.call(w,G,N,this)},this)},this)},t.na=function(){Jt(this);const p=Array.from(this.g.values()),w=Array.from(this.g.keys()),E=[];for(let N=0;N<w.length;N++){const G=p[N];for(let ee=0;ee<G.length;ee++)E.push(w[N])}return E},t.V=function(p){Jt(this);let w=[];if(typeof p=="string")Tr(this,p)&&(w=w.concat(this.g.get(Zn(this,p))));else{p=Array.from(this.g.values());for(let E=0;E<p.length;E++)w=w.concat(p[E])}return w},t.set=function(p,w){return Jt(this),this.i=null,p=Zn(this,p),Tr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[w]),this.h+=1,this},t.get=function(p,w){return p?(p=this.V(p),0<p.length?String(p[0]):w):w};function ei(p,w,E){Er(p,w),0<E.length&&(p.i=null,p.g.set(Zn(p,w),O(E)),p.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],w=Array.from(this.g.keys());for(var E=0;E<w.length;E++){var N=w[E];const ee=encodeURIComponent(String(N)),me=this.V(N);for(N=0;N<me.length;N++){var G=ee;me[N]!==""&&(G+="="+encodeURIComponent(String(me[N]))),p.push(G)}}return this.i=p.join("&")};function Zn(p,w){return w=String(w),p.j&&(w=w.toLowerCase()),w}function Hr(p,w){w&&!p.j&&(Jt(p),p.i=null,p.g.forEach(function(E,N){var G=N.toLowerCase();N!=G&&(Er(this,N),ei(this,G,E))},p)),p.j=w}function Ap(p,w){const E=new Zi;if(u.Image){const N=new Image;N.onload=b(En,E,"TestLoadImage: loaded",!0,w,N),N.onerror=b(En,E,"TestLoadImage: error",!1,w,N),N.onabort=b(En,E,"TestLoadImage: abort",!1,w,N),N.ontimeout=b(En,E,"TestLoadImage: timeout",!1,w,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=p}else w(!1)}function gd(p,w){const E=new Zi,N=new AbortController,G=setTimeout(()=>{N.abort(),En(E,"TestPingServer: timeout",!1,w)},1e4);fetch(p,{signal:N.signal}).then(ee=>{clearTimeout(G),ee.ok?En(E,"TestPingServer: ok",!0,w):En(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(G),En(E,"TestPingServer: error",!1,w)})}function En(p,w,E,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(E)}catch{}}function Pp(){this.g=new tu}function yd(p,w,E){const N=E||"";try{Qs(p,function(G,ee){let me=G;h(G)&&(me=Zl(G)),w.push(N+ee+"="+encodeURIComponent(me))})}catch(G){throw w.push(N+"type="+encodeURIComponent("_badmap")),G}}function vs(p){this.l=p.Ub||null,this.j=p.eb||!1}k(vs,Yi),vs.prototype.g=function(){return new oo(this.l,this.j)},vs.prototype.i=function(p){return function(){return p}}({});function oo(p,w){Dt.call(this),this.D=p,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(oo,Dt),t=oo.prototype,t.open=function(p,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=w,this.readyState=1,kr(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(w.body=p),(this.D||u).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vd(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function vd(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var w=p.value?p.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!p.done}))&&(this.response=this.responseText+=w)}p.done?Sr(this):kr(this),this.readyState==3&&vd(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Sr(this))},t.Qa=function(p){this.g&&(this.response=p,Sr(this))},t.ga=function(){this.g&&Sr(this)};function Sr(p){p.readyState=4,p.l=null,p.j=null,p.v=null,kr(p)}t.setRequestHeader=function(p,w){this.u.append(p,w)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,p.push(E[0]+": "+E[1]),E=w.next();return p.join(`\r
`)};function kr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function xs(p){let w="";return K(p,function(E,N){w+=N,w+=":",w+=E,w+=`\r
`}),w}function ti(p,w,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=xs(E),typeof p=="string"?E!=null&&encodeURIComponent(String(E)):tt(p,w,E))}function ct(p){Dt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ct,Dt);var Ip=/^https?$/i,du=["POST","PUT"];t=ct.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,w,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);w=w?w.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_r.g(),this.v=this.o?sa(this.o):sa(_r),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(w,String(p),!0),this.B=!1}catch(ee){ao(this,ee);return}if(p=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)E.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ee of N.keys())E.set(ee,N.get(ee));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(du,w,void 0))||N||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,me]of E)this.g.setRequestHeader(ee,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ga(this),this.u=!0,this.g.send(p),this.u=!1}catch(ee){ao(this,ee)}};function ao(p,w){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=w,p.m=5,ma(p),Un(p)}function ma(p){p.A||(p.A=!0,Ot(p,"complete"),Ot(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ot(this,"complete"),Ot(this,"abort"),Un(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hu(this):this.bb())},t.bb=function(){hu(this)};function hu(p){if(p.h&&typeof l<"u"&&(!p.v[1]||Tn(p)!=4||p.Z()!=2)){if(p.u&&Tn(p)==4)Jl(p.Ea,0,p);else if(Ot(p,"readystatechange"),Tn(p)==4){p.h=!1;try{const me=p.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var N;if(N=me===0){var G=String(p.D).match(so)[1]||null;!G&&u.self&&u.self.location&&(G=u.self.location.protocol.slice(0,-1)),N=!Ip.test(G?G.toLowerCase():"")}E=N}if(E)Ot(p,"complete"),Ot(p,"success");else{p.m=6;try{var ee=2<Tn(p)?p.g.statusText:""}catch{ee=""}p.l=ee+" ["+p.Z()+"]",ma(p)}}finally{Un(p)}}}}function Un(p,w){if(p.g){ga(p);const E=p.g,N=p.v[0]?()=>{}:null;p.g=null,p.v=null,w||Ot(p,"ready");try{E.onreadystatechange=N}catch{}}}function ga(p){p.I&&(u.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Tn(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var w=this.g.responseText;return p&&w.indexOf(p)==0&&(w=w.substring(p.length)),eu(w)}};function fu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(p){const w={};p=(p.g&&2<=Tn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<p.length;N++){if(V(p[N]))continue;var E=j(p[N]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ee=w[G]||[];w[G]=ee,ee.push(E)}I(w,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qr(p,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[p]||w}function pu(p){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qr("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qr("baseRetryDelayMs",5e3,p),this.cb=qr("retryDelaySeedMs",1e4,p),this.Wa=qr("forwardChannelMaxRetries",2,p),this.wa=qr("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new ro(p&&p.concurrentRequestLimit),this.Da=new Pp,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pu.prototype,t.la=8,t.G=1,t.connect=function(p,w,E,N){kt(0),this.W=p,this.H=w||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.I=bd(this,null,this.W),Kr(this)};function Yt(p){if(va(p),p.G==3){var w=p.U++,E=Fn(p.I);if(tt(E,"SID",p.K),tt(E,"RID",w),tt(E,"TYPE","terminate"),ws(p,E),w=new br(p,p.j,w),w.L=2,w.v=Xs(Fn(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(w.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=w.v,E=!0),E||(w.g=Ed(w.j,null),w.g.ea(w.v)),w.F=Date.now(),rt(w)}_d(p)}function Cr(p){p.g&&(mu(p),p.g.cancel(),p.g=null)}function va(p){Cr(p),p.u&&(u.clearTimeout(p.u),p.u=null),_a(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Kr(p){if(!$n(p.h)&&!p.s){p.s=!0;var w=p.Ga;be||te(),ce||(be(),ce=!0),J.add(w,p),p.B=0}}function Rp(p,w){return ud(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=w.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=xr(x(p.Ga,p,w),wd(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const G=new br(this,this.j,p);let ee=this.o;if(this.S&&(ee?(ee=S(ee),R(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,4096<w){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=ni(this,G,w),E=Fn(this.I),tt(E,"RID",p),tt(E,"CVER",22),this.D&&tt(E,"X-HTTP-Session-Id",this.D),ws(this,E),ee&&(this.O?w="headers="+encodeURIComponent(String(xs(ee)))+"&"+w:this.m&&ti(E,this.m,ee)),uu(this.h,G),this.Ua&&tt(E,"TYPE","init"),this.P?(tt(E,"$req",w),tt(E,"SID","null"),G.T=!0,da(G,E,null)):da(G,E,w),this.G=2}}else this.G==3&&(p?xa(this,p):this.i.length==0||$n(this.h)||xa(this))};function xa(p,w){var E;w?E=w.l:E=p.U++;const N=Fn(p.I);tt(N,"SID",p.K),tt(N,"RID",E),tt(N,"AID",p.T),ws(p,N),p.m&&p.o&&ti(N,p.m,p.o),E=new br(p,p.j,E,p.B+1),p.m===null&&(E.H=p.o),w&&(p.i=w.D.concat(p.i)),w=ni(p,E,1e3),E.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),uu(p.h,E),da(E,N,w)}function ws(p,w){p.H&&K(p.H,function(E,N){tt(w,N,E)}),p.l&&Qs({},function(E,N){tt(w,N,E)})}function ni(p,w,E){E=Math.min(p.i.length,E);var N=p.l?x(p.l.Na,p.l,p):null;e:{var G=p.i;let ee=-1;for(;;){const me=["count="+E];ee==-1?0<E?(ee=G[0].g,me.push("ofs="+ee)):ee=0:me.push("ofs="+ee);let et=!0;for(let Lt=0;Lt<E;Lt++){let qe=G[Lt].g;const Bt=G[Lt].map;if(qe-=ee,0>qe)ee=Math.max(0,G[Lt].g-100),et=!1;else try{yd(Bt,me,"req"+qe+"_")}catch{N&&N(Bt)}}if(et){N=me.join("&");break e}}}return p=p.i.splice(0,E),w.D=p,N}function lo(p){if(!p.g&&!p.u){p.Y=1;var w=p.Fa;be||te(),ce||(be(),ce=!0),J.add(w,p),p.v=0}}function wa(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=xr(x(p.Fa,p),wd(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,xd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=xr(x(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Cr(this),xd(this))};function mu(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function xd(p){p.g=new br(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var w=Fn(p.qa);tt(w,"RID","rpc"),tt(w,"SID",p.K),tt(w,"AID",p.T),tt(w,"CI",p.F?"0":"1"),!p.F&&p.ja&&tt(w,"TO",p.ja),tt(w,"TYPE","xmlhttp"),ws(p,w),p.m&&p.o&&ti(w,p.m,p.o),p.L&&(p.g.I=p.L);var E=p.g;p=p.ia,E.L=1,E.v=Xs(Fn(w)),E.m=null,E.P=!0,au(E,p)}t.Za=function(){this.C!=null&&(this.C=null,Cr(this),wa(this),kt(19))};function _a(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function ba(p,w){var E=null;if(p.g==w){_a(p),mu(p),p.g=null;var N=2}else if(yn(p.h,w))E=w.D,cd(p.h,w),N=1;else return;if(p.G!=0){if(w.o)if(N==1){E=w.m?w.m.length:0,w=Date.now()-w.F;var G=p.B;N=Xi(),Ot(N,new aa(N,E)),Kr(p)}else lo(p);else if(G=w.s,G==3||G==0&&0<w.X||!(N==1&&Rp(p,w)||N==2&&wa(p)))switch(E&&0<E.length&&(w=p.h,w.i=w.i.concat(E)),G){case 1:_s(p,5);break;case 4:_s(p,10);break;case 3:_s(p,6);break;default:_s(p,2)}}}function wd(p,w){let E=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(E*=2),E*w}function _s(p,w){if(p.j.info("Error code "+w),w==2){var E=x(p.fb,p),N=p.Xa;const G=!N;N=new ys(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||io(N,"https"),Xs(N),G?Ap(N.toString(),E):gd(N.toString(),E)}else kt(2);p.G=0,p.l&&p.l.sa(w),_d(p),va(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function _d(p){if(p.G=0,p.ka=[],p.l){const w=dd(p.h);(w.length!=0||p.i.length!=0)&&(P(p.ka,w),P(p.ka,p.i),p.h.i.length=0,O(p.i),p.i.length=0),p.l.ra()}}function bd(p,w,E){var N=E instanceof ys?Fn(E):new ys(E);if(N.g!="")w&&(N.g=w+"."+N.g),Js(N,N.s);else{var G=u.location;N=G.protocol,w=w?w+"."+G.hostname:G.hostname,G=+G.port;var ee=new ys(null);N&&io(ee,N),w&&(ee.g=w),G&&Js(ee,G),E&&(ee.l=E),N=ee}return E=p.D,w=p.ya,E&&w&&tt(N,E,w),tt(N,"VER",p.la),ws(p,N),N}function Ed(p,w,E){if(w&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=p.Ca&&!p.pa?new ct(new vs({eb:E})):new ct(p.pa),w.Ha(p.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gu(){}t=gu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ea(){}Ea.prototype.g=function(p,w){return new vn(p,w)};function vn(p,w){Dt.call(this),this.g=new pu(w),this.l=p,this.h=w&&w.messageUrlParams||null,p=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(p?p["X-WebChannel-Content-Type"]=w.messageContentType:p={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(p?p["X-WebChannel-Client-Profile"]=w.va:p={"X-WebChannel-Client-Profile":w.va}),this.g.S=p,(p=w&&w.Sb)&&!V(p)&&(this.g.m=p),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.D=w,p=this.h,p!==null&&w in p&&(p=this.h,w in p&&delete p[w])),this.j=new Gr(this)}k(vn,Dt),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Yt(this.g)},vn.prototype.o=function(p){var w=this.g;if(typeof p=="string"){var E={};E.__data__=p,p=E}else this.u&&(E={},E.__data__=Zl(p),p=E);w.i.push(new ld(w.Ya++,p)),w.G==3&&Kr(w)},vn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,vn.aa.N.call(this)};function Td(p){Br.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var w=p.__sm__;if(w){e:{for(const E in w){p=E;break e}p=void 0}(this.i=p)&&(p=this.i,w=w!==null&&p in w?w[p]:void 0),this.data=w}else this.data=p}k(Td,Br);function Sd(){oa.call(this),this.status=1}k(Sd,oa);function Gr(p){this.g=p}k(Gr,gu),Gr.prototype.ua=function(){Ot(this.g,"a")},Gr.prototype.ta=function(p){Ot(this.g,new Td(p))},Gr.prototype.sa=function(p){Ot(this.g,new Sd)},Gr.prototype.ra=function(){Ot(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,c1=function(){return new Ea},u1=function(){return Xi()},l1=zr,O0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ua.NO_ERROR=0,ua.TIMEOUT=8,ua.HTTP_ERROR=6,Hh=ua,sd.COMPLETE="complete",a1=sd,ia.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,tc=ia,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,o1=ct}).apply(typeof Rh<"u"?Rh:typeof self<"u"?self:typeof window<"u"?window:{});const BE="@firebase/firestore",zE="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Jf("@firebase/firestore");function rl(){return Fo.logLevel}function xe(t,...e){if(Fo.logLevel<=Be.DEBUG){const n=e.map(sv);Fo.debug(`Firestore (${Bl}): ${t}`,...n)}}function $s(t,...e){if(Fo.logLevel<=Be.ERROR){const n=e.map(sv);Fo.error(`Firestore (${Bl}): ${t}`,...n)}}function kl(t,...e){if(Fo.logLevel<=Be.WARN){const n=e.map(sv);Fo.warn(`Firestore (${Bl}): ${t}`,...n)}}function sv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t="Unexpected state"){const e=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: `+t;throw $s(e),new Error(e)}function Xe(t,e){t||Ne()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class v3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}}class x3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class w3{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ls,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ls)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string"),new d1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new fn(e)}}class _3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class b3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E3{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,cr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0);const r=o=>{o.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new WE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string"),this.R=n.token,new WE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=T3(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function L0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ve(r,s);{const o=h1(),l=S3(o.encode(HE(t,n)),o.encode(HE(e,n)));return l!==0?l:Ve(r,s)}}n+=r>65535?2:1}return Ve(t.length,e.length)}function HE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function S3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ve(t[n],e[n]);return Ve(t.length,e.length)}function Cl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=-62135596800,KE=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*KE);return new Ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qE)throw new ke(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Ft(0,0))}static max(){return new Oe(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="__name__";class es{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(),r===void 0?r=e.length-n:r>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=es.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ve(e.length,n.length)}static compareSegments(e,n){const r=es.isNumericId(e),s=es.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?es.extractNumericId(e).compare(es.extractNumericId(n)):L0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class ft extends es{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const k3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends es{construct(e,n,r){return new rn(e,n,r)}static isValidIdentifier(e){return k3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GE}static keyField(){return new rn([GE])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ke(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ke(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ke(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new ke(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(ft.fromString(e))}static fromName(e){return new Pe(ft.fromString(e).popFirst(5))}static empty(){return new Pe(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=-1;function C3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new Mi(s,Pe.empty(),e)}function A3(t){return new Mi(t.readTime,t.key,Rc)}class Mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mi(Oe.min(),Pe.empty(),Rc)}static max(){return new Mi(Oe.max(),Pe.empty(),Rc)}}function P3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==I3)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let s=0,o=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++o,l&&o===s&&n()},c=>r(c))}),l=!0,o===s&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(s=>s?se.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new se((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let c=0;c<o;c++){const h=c;n(e[h]).next(g=>{l[h]=g,++u,u===o&&r(l)},g=>s(g))}})}static doWhile(e,n){return new se((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function N3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Yf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=-1;function Xf(t){return t==null}function xf(t){return t===0&&1/t==-1/0}function j3(t){return typeof t=="number"&&Number.isInteger(t)&&!xf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="";function D3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=QE(e)),e=O3(t.get(n),e);return QE(e)}function O3(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case p1:n+="";break;default:n+=o}}return n}function QE(t){return t+p1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function m1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??tn.RED,this.left=s??tn.EMPTY,this.right=o??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new tn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,r,s,o){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YE(this.data.getIterator())}getIteratorFrom(e){return new YE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class YE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Qn([])}unionWith(e){let n=new Ut(rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new g1("Invalid base64 string: "+o):o}}(e);return new sn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const L3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(t){if(Xe(!!t),typeof t=="string"){let e=0;const n=L3.exec(t);if(Xe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $i(t){return typeof t=="string"?sn.fromBase64String(t):sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="server_timestamp",v1="__type__",x1="__previous_value__",w1="__local_write_time__";function ov(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[v1])===null||n===void 0?void 0:n.stringValue)===y1}function Zf(t){const e=t.mapValue.fields[x1];return ov(e)?Zf(e):e}function Nc(t){const e=Vi(t.mapValue.fields[w1].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,n,r,s,o,l,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}const wf="(default)";class jc{constructor(e,n){this.projectId=e,this.database=n||wf}static empty(){return new jc("","")}get isDefaultDatabase(){return this.database===wf}isEqual(e){return e instanceof jc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="__type__",V3="__max__",jh={mapValue:{}},b1="__vector__",_f="value";function Fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ov(t)?4:F3(t)?9007199254740991:$3(t)?10:11:Ne()}function ds(t,e){if(t===e)return!0;const n=Fi(t);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nc(t).isEqual(Nc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Vi(s.timestampValue),u=Vi(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return $i(s.bytesValue).isEqual($i(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Pt(s.geoPointValue.latitude)===Pt(o.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Pt(s.integerValue)===Pt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Pt(s.doubleValue),u=Pt(o.doubleValue);return l===u?xf(l)===xf(u):isNaN(l)&&isNaN(u)}return!1}(t,e);case 9:return Cl(t.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(JE(l)!==JE(u))return!1;for(const c in l)if(l.hasOwnProperty(c)&&(u[c]===void 0||!ds(l[c],u[c])))return!1;return!0}(t,e);default:return Ne()}}function Dc(t,e){return(t.values||[]).find(n=>ds(n,e))!==void 0}function Al(t,e){if(t===e)return 0;const n=Fi(t),r=Fi(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(o,l){const u=Pt(o.integerValue||o.doubleValue),c=Pt(l.integerValue||l.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return XE(t.timestampValue,e.timestampValue);case 4:return XE(Nc(t),Nc(e));case 5:return L0(t.stringValue,e.stringValue);case 6:return function(o,l){const u=$i(o),c=$i(l);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),c=l.split("/");for(let h=0;h<u.length&&h<c.length;h++){const g=Ve(u[h],c[h]);if(g!==0)return g}return Ve(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const u=Ve(Pt(o.latitude),Pt(l.latitude));return u!==0?u:Ve(Pt(o.longitude),Pt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ZE(t.arrayValue,e.arrayValue);case 10:return function(o,l){var u,c,h,g;const v=o.fields||{},x=l.fields||{},b=(u=v[_f])===null||u===void 0?void 0:u.arrayValue,k=(c=x[_f])===null||c===void 0?void 0:c.arrayValue,O=Ve(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0);return O!==0?O:ZE(b,k)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===jh.mapValue&&l===jh.mapValue)return 0;if(o===jh.mapValue)return 1;if(l===jh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),h=l.fields||{},g=Object.keys(h);c.sort(),g.sort();for(let v=0;v<c.length&&v<g.length;++v){const x=L0(c[v],g[v]);if(x!==0)return x;const b=Al(u[c[v]],h[g[v]]);if(b!==0)return b}return Ve(c.length,g.length)}(t.mapValue,e.mapValue);default:throw Ne()}}function XE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=Vi(t),r=Vi(e),s=Ve(n.seconds,r.seconds);return s!==0?s:Ve(n.nanos,r.nanos)}function ZE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Al(n[s],r[s]);if(o)return o}return Ve(n.length,r.length)}function Pl(t){return M0(t)}function M0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=M0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${M0(n.fields[l])}`;return s+"}"}(t.mapValue):Ne()}function qh(t){switch(Fi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zf(t);return e?16+qh(e):16;case 5:return 2*t.stringValue.length;case 6:return $i(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+qh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Hi(r.fields,(o,l)=>{s+=o.length+qh(l)}),s}(t.mapValue);default:throw Ne()}}function V0(t){return!!t&&"integerValue"in t}function av(t){return!!t&&"arrayValue"in t}function eT(t){return!!t&&"nullValue"in t}function tT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kh(t){return!!t&&"mapValue"in t}function $3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[_1])===null||n===void 0?void 0:n.stringValue)===b1}function hc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function F3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===V3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hc(n)}setAll(e){let n=rn.emptyPath(),r={},s=[];e.forEach((l,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=hc(l):s.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Kh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Kh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hi(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new jn(hc(this.value))}}function E1(t){const e=[];return Hi(t.fields,(n,r)=>{const s=new rn([n]);if(Kh(r)){const o=E1(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,r,s,o,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new pn(e,0,Oe.min(),Oe.min(),Oe.min(),jn.empty(),0)}static newFoundDocument(e,n,r,s){return new pn(e,1,n,Oe.min(),r,s,0)}static newNoDocument(e,n){return new pn(e,2,n,Oe.min(),Oe.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Oe.min(),Oe.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.position=e,this.inclusive=n}}function nT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Pe.comparator(Pe.fromName(l.referenceValue),n.key):r=Al(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function rT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ds(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n="asc"){this.field=e,this.dir=n}}function U3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{}class $t extends T1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new z3(e,n,r):n==="array-contains"?new q3(e,r):n==="in"?new K3(e,r):n==="not-in"?new G3(e,r):n==="array-contains-any"?new Q3(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new W3(e,r):new H3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Al(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(Al(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends T1{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new hs(e,n)}matches(e){return S1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function S1(t){return t.op==="and"}function k1(t){return B3(t)&&S1(t)}function B3(t){for(const e of t.filters)if(e instanceof hs)return!1;return!0}function $0(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+Pl(t.value);if(k1(t))return t.filters.map(e=>$0(e)).join(",");{const e=t.filters.map(n=>$0(n)).join(",");return`${t.op}(${e})`}}function C1(t,e){return t instanceof $t?function(r,s){return s instanceof $t&&r.op===s.op&&r.field.isEqual(s.field)&&ds(r.value,s.value)}(t,e):t instanceof hs?function(r,s){return s instanceof hs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,u)=>o&&C1(l,s.filters[u]),!0):!1}(t,e):void Ne()}function A1(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${Pl(n.value)}`}(t):t instanceof hs?function(n){return n.op.toString()+" {"+n.getFilters().map(A1).join(" ,")+"}"}(t):"Filter"}class z3 extends $t{constructor(e,n,r){super(e,n,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const n=Pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class W3 extends $t{constructor(e,n){super(e,"in",n),this.keys=P1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class H3 extends $t{constructor(e,n){super(e,"not-in",n),this.keys=P1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class q3 extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return av(n)&&Dc(n.arrayValue,this.value)}}class K3 extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}}class G3 extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Dc(this.value.arrayValue,n)}}class Q3 extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!av(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function sT(t,e=null,n=[],r=[],s=null,o=null,l=null){return new J3(t,e,n,r,s,o,l)}function lv(t){const e=Le(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pl(r)).join(",")),e.le=n}return e.le}function uv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rT(t.startAt,e.startAt)&&rT(t.endAt,e.endAt)}function F0(t){return Pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n=null,r=[],s=[],o=null,l="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Y3(t,e,n,r,s,o,l,u){return new ep(t,e,n,r,s,o,l,u)}function cv(t){return new ep(t)}function iT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function X3(t){return t.collectionGroup!==null}function fc(t){const e=Le(t);if(e.he===null){e.he=[];const n=new Set;for(const o of e.explicitOrderBy)e.he.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Ut(rn.comparator);return l.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.he.push(new Ef(o,r))}),n.has(rn.keyField().canonicalString())||e.he.push(new Ef(rn.keyField(),r))}return e.he}function os(t){const e=Le(t);return e.Pe||(e.Pe=Z3(e,fc(t))),e.Pe}function Z3(t,e){if(t.limitType==="F")return sT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Ef(s.field,o)});const n=t.endAt?new bf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bf(t.startAt.position,t.startAt.inclusive):null;return sT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function U0(t,e,n){return new ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tp(t,e){return uv(os(t),os(e))&&t.limitType===e.limitType}function I1(t){return`${lv(os(t))}|lt:${t.limitType}`}function sl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>A1(s)).join(", ")}]`),Xf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Pl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Pl(s)).join(",")),`Target(${r})`}(os(t))}; limitType=${t.limitType})`}function np(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of fc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,u,c){const h=nT(l,u,c);return l.inclusive?h<=0:h<0}(r.startAt,fc(r),s)||r.endAt&&!function(l,u,c){const h=nT(l,u,c);return l.inclusive?h>=0:h>0}(r.endAt,fc(r),s))}(t,e)}function e6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R1(t){return(e,n)=>{let r=!1;for(const s of fc(t)){const o=t6(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function t6(t,e,n){const r=t.field.isKeyField()?Pe.comparator(e.key,n.key):function(o,l,u){const c=l.data.field(o),h=u.data.field(o);return c!==null&&h!==null?Al(c,h):Ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return m1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=new xt(Pe.comparator);function Fs(){return n6}const N1=new xt(Pe.comparator);function nc(...t){let e=N1;for(const n of t)e=e.insert(n.key,n);return e}function j1(t){let e=N1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Do(){return pc()}function D1(){return pc()}function pc(){return new Zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const r6=new xt(Pe.comparator),s6=new Ut(Pe.comparator);function ze(...t){let e=s6;for(const n of t)e=e.add(n);return e}const i6=new Ut(Ve);function o6(){return i6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xf(e)?"-0":e}}function O1(t){return{integerValue:""+t}}function a6(t,e){return j3(e)?O1(e):dv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this._=void 0}}function l6(t,e,n){return t instanceof Tf?function(s,o){const l={fields:{[v1]:{stringValue:y1},[w1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&ov(o)&&(o=Zf(o)),o&&(l.fields[x1]=o),{mapValue:l}}(n,e):t instanceof Oc?M1(t,e):t instanceof Lc?V1(t,e):function(s,o){const l=L1(s,o),u=oT(l)+oT(s.Ie);return V0(l)&&V0(s.Ie)?O1(u):dv(s.serializer,u)}(t,e)}function u6(t,e,n){return t instanceof Oc?M1(t,e):t instanceof Lc?V1(t,e):n}function L1(t,e){return t instanceof Sf?function(r){return V0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Tf extends rp{}class Oc extends rp{constructor(e){super(),this.elements=e}}function M1(t,e){const n=$1(e);for(const r of t.elements)n.some(s=>ds(s,r))||n.push(r);return{arrayValue:{values:n}}}class Lc extends rp{constructor(e){super(),this.elements=e}}function V1(t,e){let n=$1(e);for(const r of t.elements)n=n.filter(s=>!ds(s,r));return{arrayValue:{values:n}}}class Sf extends rp{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function oT(t){return Pt(t.integerValue||t.doubleValue)}function $1(t){return av(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function c6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Oc&&s instanceof Oc||r instanceof Lc&&s instanceof Lc?Cl(r.elements,s.elements,ds):r instanceof Sf&&s instanceof Sf?ds(r.Ie,s.Ie):r instanceof Tf&&s instanceof Tf}(t.transform,e.transform)}class d6{constructor(e,n){this.version=e,this.transformResults=n}}class hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sp{}function F1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hv(t.key,hr.none()):new Qc(t.key,t.data,hr.none());{const n=t.data,r=jn.empty();let s=new Ut(rn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new qi(t.key,r,new Qn(s.toArray()),hr.none())}}function h6(t,e,n){t instanceof Qc?function(s,o,l){const u=s.value.clone(),c=lT(s.fieldTransforms,o,l.transformResults);u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(s,o,l){if(!Gh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=lT(s.fieldTransforms,o,l.transformResults),c=o.data;c.setAll(U1(s)),c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function mc(t,e,n,r){return t instanceof Qc?function(o,l,u,c){if(!Gh(o.precondition,l))return u;const h=o.value.clone(),g=uT(o.fieldTransforms,c,l);return h.setAll(g),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(o,l,u,c){if(!Gh(o.precondition,l))return u;const h=uT(o.fieldTransforms,c,l),g=l.data;return g.setAll(U1(o)),g.setAll(h),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(o,l,u){return Gh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(t,e,n)}function f6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=L1(r.transform,s||null);o!=null&&(n===null&&(n=jn.empty()),n.set(r.field,o))}return n||null}function aT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cl(r,s,(o,l)=>c6(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qc extends sp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qi extends sp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function U1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lT(t,e,n){const r=new Map;Xe(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,u6(l,u,n[s]))}return r}function uT(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,l6(o,l,e))}return r}class hv extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p6 extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&h6(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D1();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(s.key)?null:u;const c=F1(l,u);c!==null&&r.set(s.key,c),l.isValidDocument()||l.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,(n,r)=>aT(n,r))&&Cl(this.baseMutations,e.baseMutations,(n,r)=>aT(n,r))}}class fv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Xe(e.mutations.length===r.length);let s=function(){return r6}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new fv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ke;function v6(t){switch(t){case ue.OK:return Ne();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ne()}}function B1(t){if(t===void 0)return $s("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Nt.OK:return ue.OK;case Nt.CANCELLED:return ue.CANCELLED;case Nt.UNKNOWN:return ue.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ue.INTERNAL;case Nt.UNAVAILABLE:return ue.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ue.NOT_FOUND;case Nt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Nt.ABORTED:return ue.ABORTED;case Nt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Nt.DATA_LOSS:return ue.DATA_LOSS;default:return Ne()}}(Ke=Nt||(Nt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=new Ri([4294967295,4294967295],0);function cT(t){const e=h1().encode(t),n=new i1;return n.update(e),new Uint8Array(n.digest())}function dT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ri([n,r],0),new Ri([s,o],0)]}class pv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rc(`Invalid padding: ${n}`);if(r<0)throw new rc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rc(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Ri.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(Ri.fromNumber(r)));return s.compare(x6)===1&&(s=new Ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=cT(e),[r,s]=dT(n);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new pv(o,s,n);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const n=cT(e),[r,s]=dT(n);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ip(Oe.min(),s,new xt(Ve),Fs(),ze())}}class Jc{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jc(r,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class z1{constructor(e,n){this.targetId=e,this.ge=n}}class W1{constructor(e,n,r=sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hT{constructor(){this.pe=0,this.ye=fT(),this.we=sn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ze(),n=ze(),r=ze();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ne()}}),new Jc(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=fT()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Xe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class w6{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Fs(),this.$e=Dh(),this.Ue=Dh(),this.Ke=new xt(Ve)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const o=s.target;if(F0(o))if(r===0){const l=new Pe(o.path);this.ze(n,l,pn.newNoDocument(l,Oe.min()))}else Xe(r===1);else{const l=this.et(n);if(l!==r){const u=this.tt(e),c=u?this.nt(u,e,l):1;if(c!==0){this.Ye(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,u;try{l=$i(r).toUint8Array()}catch(c){if(c instanceof g1)return kl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new pv(l,s,o)}catch(c){return kl(c instanceof rc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ee===0?null:u}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(n,o,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&F0(u.target)){const c=new Pe(u.target.path);this._t(c).has(l)||this.ut(l,c)||this.ze(l,c,pn.newNoDocument(c,e))}o.ve&&(n.set(l,o.Fe()),o.Me())}});let r=ze();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new ip(e,n,this.Ke,this.Qe,r);return this.Qe=Fs(),this.$e=Dh(),this.Ue=Dh(),this.Ke=new xt(Ve),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new hT,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ut(Ve),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ut(Ve),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new hT),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Dh(){return new xt(Pe.comparator)}function fT(){return new xt(Pe.comparator)}const _6={asc:"ASCENDING",desc:"DESCENDING"},b6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E6={and:"AND",or:"OR"};class T6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function B0(t,e){return t.useProto3Json||Xf(e)?e:{value:e}}function kf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function S6(t,e){return kf(t,e.toTimestamp())}function as(t){return Xe(!!t),Oe.fromTimestamp(function(n){const r=Vi(n);return new Ft(r.seconds,r.nanos)}(t))}function mv(t,e){return z0(t,e).canonicalString()}function z0(t,e){const n=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function q1(t){const e=ft.fromString(t);return Xe(Y1(e)),e}function W0(t,e){return mv(t.databaseId,e.path)}function Dg(t,e){const n=q1(e);if(n.get(1)!==t.databaseId.projectId)throw new ke(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ke(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Pe(G1(n))}function K1(t,e){return mv(t.databaseId,e)}function k6(t){const e=q1(t);return e.length===4?ft.emptyPath():G1(e)}function H0(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G1(t){return Xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pT(t,e,n){return{name:W0(t,e),fields:n.value.mapValue.fields}}function C6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(Xe(g===void 0||typeof g=="string"),sn.fromBase64String(g||"")):(Xe(g===void 0||g instanceof Buffer||g instanceof Uint8Array),sn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(h){const g=h.code===void 0?ue.UNKNOWN:B1(h.code);return new ke(g,h.message||"")}(l);n=new W1(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Dg(t,r.document.name),o=as(r.document.updateTime),l=r.document.createTime?as(r.document.createTime):Oe.min(),u=new jn({mapValue:{fields:r.document.fields}}),c=pn.newFoundDocument(s,o,l,u),h=r.targetIds||[],g=r.removedTargetIds||[];n=new Qh(h,g,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Dg(t,r.document),o=r.readTime?as(r.readTime):Oe.min(),l=pn.newNoDocument(s,o),u=r.removedTargetIds||[];n=new Qh([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Dg(t,r.document),o=r.removedTargetIds||[];n=new Qh([],o,s,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new y6(s,o),u=r.targetId;n=new z1(u,l)}}return n}function A6(t,e){let n;if(e instanceof Qc)n={update:pT(t,e.key,e.value)};else if(e instanceof hv)n={delete:W0(t,e.key)};else if(e instanceof qi)n={update:pT(t,e.key,e.data),updateMask:M6(e.fieldMask)};else{if(!(e instanceof p6))return Ne();n={verify:W0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const u=l.transform;if(u instanceof Tf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Oc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Lc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Sf)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:S6(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ne()}(t,e.precondition)),n}function P6(t,e){return t&&t.length>0?(Xe(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?as(s.updateTime):as(o);return l.isEqual(Oe.min())&&(l=as(o)),new d6(l,s.transformResults||[])}(n,e))):[]}function I6(t,e){return{documents:[K1(t,e.path)]}}function R6(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=K1(t,s);const o=function(h){if(h.length!==0)return J1(hs.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(g=>function(x){return{field:il(x.field),direction:D6(x.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=B0(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:n,parent:s}}function N6(t){let e=k6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Xe(r===1);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(v){const x=Q1(v);return x instanceof hs&&k1(x)?x.getFilters():[x]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(x=>function(k){return new Ef(ol(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(x))}(n.orderBy));let u=null;n.limit&&(u=function(v){let x;return x=typeof v=="object"?v.value:v,Xf(x)?null:x}(n.limit));let c=null;n.startAt&&(c=function(v){const x=!!v.before,b=v.values||[];return new bf(b,x)}(n.startAt));let h=null;return n.endAt&&(h=function(v){const x=!v.before,b=v.values||[];return new bf(b,x)}(n.endAt)),Y3(e,s,l,o,u,"F",c,h)}function j6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ol(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ol(n.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ol(n.unaryFilter.field);return $t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ol(n.unaryFilter.field);return $t.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(t):t.fieldFilter!==void 0?function(n){return $t.create(ol(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hs.create(n.compositeFilter.filters.map(r=>Q1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(t):Ne()}function D6(t){return _6[t]}function O6(t){return b6[t]}function L6(t){return E6[t]}function il(t){return{fieldPath:t.canonicalString()}}function ol(t){return rn.fromServerFormat(t.fieldPath)}function J1(t){return t instanceof $t?function(n){if(n.op==="=="){if(tT(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NAN"}};if(eT(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tT(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NOT_NAN"}};if(eT(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(n.field),op:O6(n.op),value:n.value}}}(t):t instanceof hs?function(n){const r=n.getFilters().map(s=>J1(s));return r.length===1?r[0]:{compositeFilter:{op:L6(n.op),filters:r}}}(t):Ne()}function M6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r,s,o=Oe.min(),l=Oe.min(),u=sn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.Tt=e}}function $6(t){const e=N6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?U0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.Tn=new U6}addToCollectionParentIndex(e,n){return this.Tn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Mi.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class U6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ut(ft.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ut(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X1=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(X1,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Il(0)}static Kn(){return new Il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="LruGarbageCollector",B6=1048576;function yT([t,e],[n,r]){const s=Ve(t,n);return s===0?Ve(e,r):s}class z6{constructor(e){this.Hn=e,this.buffer=new Ut(yT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class W6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){xe(gT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wl(n)?xe(gT,"Ignoring IndexedDB error during garbage collection: ",n):await zl(n)}await this.er(3e5)})}}class H6{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Yf.ae);const r=new z6(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(mT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mT):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,o,l,u,c,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,n))).next(v=>(o=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),rl()<=Be.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${v} documents in `+(h-c)+`ms
Total Duration: ${h-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function q6(t,e){return new H6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.changes=new Zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&mc(r.mutation,s,Qn.empty(),Ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ze()){const s=Do();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=nc();return o.forEach((u,c)=>{l=l.insert(u,c.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Do();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ze()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,u)=>{n.set(l,u)})})}computeViews(e,n,r,s){let o=Fs();const l=pc(),u=function(){return pc()}();return n.forEach((c,h)=>{const g=r.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof qi)?o=o.insert(h.key,h):g!==void 0?(l.set(h.key,g.mutation.getFieldMask()),mc(g.mutation,h,g.mutation.getFieldMask(),Ft.now())):l.set(h.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,g)=>l.set(h,g)),n.forEach((h,g)=>{var v;return u.set(h,new G6(g,(v=l.get(h))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,n){const r=pc();let s=new xt((l,u)=>l-u),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const u of l)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let g=r.get(c)||Qn.empty();g=u.applyToLocalView(h,g),r.set(c,g);const v=(s.get(u.batchId)||ze()).add(c);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,g=c.value,v=D1();g.forEach(x=>{if(!o.has(x)){const b=F1(n.get(x),r.get(x));b!==null&&v.set(x,b),o=o.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,v))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return Pe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):se.resolve(Do());let u=Rc,c=o;return l.next(h=>se.forEach(h,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{c=c.insert(g,x)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,ze())).next(g=>({batchId:u,changes:j1(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pe(n)).next(r=>{let s=nc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=nc();return this.indexManager.getCollectionParents(e,o).next(u=>se.forEach(u,c=>{const h=function(v,x){return new ep(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(g=>{g.forEach((v,x)=>{l=l.insert(v,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((c,h)=>{const g=h.getKey();l.get(g)===null&&(l=l.insert(g,pn.newInvalidDocument(g)))});let u=nc();return l.forEach((c,h)=>{const g=o.get(c);g!==void 0&&mc(g.mutation,h,Qn.empty(),Ft.now()),np(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return se.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:as(s.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:$6(s.bundledQuery),readTime:as(s.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this.overlays=new xt(Pe.comparator),this.Rr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Do();return se.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.Et(e,n,o)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const s=Do(),o=n.length+1,l=new Pe(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>r&&s.set(c.getKey(),c)}return se.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new xt((h,g)=>h-g);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let g=o.get(h.largestBatchId);g===null&&(g=Do(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const u=Do(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,g)=>u.set(h,g)),!(u.size()>=s)););return se.resolve(u)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new g6(n,r));let o=this.Rr.get(n);o===void 0&&(o=ze(),this.Rr.set(n,o)),this.Rr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.Vr=new Ut(Gt.mr),this.gr=new Ut(Gt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new Gt(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new Gt(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new Pe(new ft([])),r=new Gt(n,e),s=new Gt(n,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Pe(new ft([])),r=new Gt(n,e),s=new Gt(n,e+1);let o=ze();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Gt(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Pe.comparator(e.key,n.key)||Ve(e.Cr,n.Cr)}static pr(e,n){return Ve(e.Cr,n.Cr)||Pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ut(Gt.mr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new m6(o,n,r,s);this.mutationQueue.push(l);for(const u of s)this.Mr=this.Mr.add(new Gt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,n){return se.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?iv:this.Fr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gt(n,0),s=new Gt(n,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const u=this.Or(l.Cr);o.push(u)}),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(Ve);return n.forEach(s=>{const o=new Gt(s,0),l=new Gt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{r=r.add(u.Cr)})}),se.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Pe.isDocumentKey(o)||(o=o.child(""));const l=new Gt(new Pe(o),0);let u=new Ut(Ve);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Cr)),!0)},l),se.resolve(this.Br(u))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Xe(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return se.forEach(n.mutations,s=>{const o=new Gt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new Gt(n,0),s=this.Mr.firstAfterOrEqual(r);return se.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.kr=e,this.docs=function(){return new xt(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=Fs();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():pn.newInvalidDocument(s))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Fs();const l=n.path,u=new Pe(l.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||P3(A3(g),r)<=0||(s.has(g.key)||np(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ne()}qr(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tF(this)}getSize(e){return se.resolve(this.size)}}class tF extends K6{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.persistence=e,this.Qr=new Zo(n=>lv(n),uv),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new gv,this.targetCount=0,this.Kr=Il.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),se.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Il(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.zn(n),se.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),se.waitFor(o).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),se.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Yf(0),this.zr=!1,this.zr=!0,this.jr=new X6,this.referenceDelegate=e(this),this.Hr=new nF(this),this.indexManager=new F6,this.remoteDocumentCache=function(s){return new eF(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new V6(n),this.Yr=new J6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new Z6(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){xe("MemoryPersistence","Starting transaction:",e);const s=new rF(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,n){return se.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class rF extends R3{constructor(e){super(),this.currentSequenceNumber=e}}class yv{constructor(e){this.persistence=e,this.ti=new gv,this.ni=null}static ri(e){return new yv(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),se.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.ii,r=>{const s=Pe.fromPath(r);return this.si(e,s).next(o=>{o||n.removeEntry(s,Oe.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return se.or([()=>se.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Cf{constructor(e,n){this.persistence=e,this.oi=new Zo(r=>D3(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=q6(this,n)}static ri(e,n){return new Cf(e,n)}Zr(){}Xr(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return se.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?se.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,n).next(u=>{u||(r++,o.removeEntry(l,Oe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qh(e.data.value)),n}ar(e,n,r){return se.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return se.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=ze(),s=ze();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new vv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return JV()?8:N3(gn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.rs(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new sF;return this._s(e,n,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,n,l,u.size)})}).next(()=>o.result)}us(e,n,r,s){return r.documentReadCount<this.es?(rl()<=Be.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",sl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),se.resolve()):(rl()<=Be.DEBUG&&xe("QueryEngine","Query:",sl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(rl()<=Be.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",sl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,os(n))):se.resolve())}rs(e,n){if(iT(n))return se.resolve(null);let r=os(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=U0(n,null,"F"),r=os(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=ze(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.cs(n,u);return this.ls(n,h,l,c.readTime)?this.rs(e,U0(n,null,"F")):this.hs(e,h,n,c)}))})))}ss(e,n,r,s){return iT(n)||s.isEqual(Oe.min())?se.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(n,o);return this.ls(n,l,r,s)?se.resolve(null):(rl()<=Be.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sl(n)),this.hs(e,l,n,C3(s,Rc)).next(u=>u))})}cs(e,n){let r=new Ut(R1(e));return n.forEach((s,o)=>{np(e,o)&&(r=r.add(o))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,n,r){return rl()<=Be.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",sl(n)),this.ns.getDocumentsMatchingQuery(e,n,Mi.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LocalStore",oF=3e8;class aF{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new xt(Ve),this.Is=new Zo(o=>lv(o),uv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q6(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function lF(t,e,n,r){return new aF(t,e,n,r)}async function eA(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let c=ze();for(const h of s){l.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}for(const h of o){u.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Rs:h,removedBatchIds:l,addedBatchIds:u}))})})}function uF(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.ds.newChangeBuffer({trackRemovals:!0});return function(u,c,h,g){const v=h.batch,x=v.keys();let b=se.resolve();return x.forEach(k=>{b=b.next(()=>g.getEntry(c,k)).next(O=>{const P=h.docVersions.get(k);Xe(P!==null),O.version.compareTo(P)<0&&(v.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),g.addEntry(O)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(c,v))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function tA(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function cF(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const u=[];e.targetChanges.forEach((g,v)=>{const x=s.get(v);if(!x)return;u.push(n.Hr.removeMatchingKeys(o,g.removedDocuments,v).next(()=>n.Hr.addMatchingKeys(o,g.addedDocuments,v)));let b=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(sn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(v,b),function(O,P,D){return O.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=oF?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(x,b,g)&&u.push(n.Hr.updateTargetData(o,b))});let c=Fs(),h=ze();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(dF(o,l,e.documentUpdates).next(g=>{c=g.Vs,h=g.fs})),!r.isEqual(Oe.min())){const g=n.Hr.getLastRemoteSnapshotVersion(o).next(v=>n.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return se.waitFor(u).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(n.Ts=s,o))}function dF(t,e,n){let r=ze(),s=ze();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Fs();return n.forEach((u,c)=>{const h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(Oe.min())?(e.removeEntry(u,c.readTime),l=l.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),l=l.insert(u,c)):xe(xv,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Vs:l,fs:s}})}function hF(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fF(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(o=>o?(s=o,se.resolve(s)):n.Hr.allocateTargetId(r).next(l=>(s=new Ai(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function q0(t,e,n){const r=Le(t),s=r.Ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Wl(l))throw l;xe(xv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function vT(t,e,n){const r=Le(t);let s=Oe.min(),o=ze();return r.persistence.runTransaction("Execute query","readwrite",l=>function(c,h,g){const v=Le(c),x=v.Is.get(g);return x!==void 0?se.resolve(v.Ts.get(x)):v.Hr.getTargetData(h,g)}(r,l,os(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,n?s:Oe.min(),n?o:ze())).next(u=>(pF(r,e6(e),u),{documents:u,gs:o})))}function pF(t,e,n){let r=t.Es.get(e)||Oe.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Es.set(e,r)}class xT{constructor(){this.activeTargetIds=o6()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mF{constructor(){this.ho=new xT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new xT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="ConnectivityMonitor";class _T{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){xe(wT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){xe(wT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh=null;function K0(){return Oh===null?Oh=function(){return 268435456+Math.round(2147483648*Math.random())}():Oh++,"0x"+Oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="RestConnection",yF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===wf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,o){const l=K0(),u=this.bo(e,n.toUriEncodedString());xe(Og,`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,o),this.vo(e,u,c,r).then(h=>(xe(Og,`Received RPC '${e}' ${l}: `,h),h),h=>{throw kl(Og,`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}Co(e,n,r,s,o,l){return this.So(e,n,r,s,o)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}bo(e,n){const r=yF[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class wF extends vF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const o=K0();return new Promise((l,u)=>{const c=new o1;c.setWithCredentials(!0),c.listenOnce(a1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Hh.NO_ERROR:const g=c.getResponseJson();xe(dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Hh.TIMEOUT:xe(dn,`RPC '${e}' ${o} timed out`),u(new ke(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const v=c.getStatus();if(xe(dn,`RPC '${e}' ${o} failed with status:`,v,"response text:",c.getResponseText()),v>0){let x=c.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const k=function(P){const D=P.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(D)>=0?D:ue.UNKNOWN}(b.status);u(new ke(k,b.message))}else u(new ke(ue.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new ke(ue.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{xe(dn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);xe(dn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}Wo(e,n,r){const s=K0(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=c1(),u=u1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const g=o.join("");xe(dn,`Creating RPC '${e}' stream ${s}: ${g}`,c);const v=l.createWebChannel(g,c);let x=!1,b=!1;const k=new xF({Fo:P=>{b?xe(dn,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(x||(xe(dn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),xe(dn,`RPC '${e}' stream ${s} sending:`,P),v.send(P))},Mo:()=>v.close()}),O=(P,D,V)=>{P.listen(D,$=>{try{V($)}catch(W){setTimeout(()=>{throw W},0)}})};return O(v,tc.EventType.OPEN,()=>{b||(xe(dn,`RPC '${e}' stream ${s} transport opened.`),k.Qo())}),O(v,tc.EventType.CLOSE,()=>{b||(b=!0,xe(dn,`RPC '${e}' stream ${s} transport closed`),k.Uo())}),O(v,tc.EventType.ERROR,P=>{b||(b=!0,kl(dn,`RPC '${e}' stream ${s} transport errored:`,P),k.Uo(new ke(ue.UNAVAILABLE,"The operation could not be completed")))}),O(v,tc.EventType.MESSAGE,P=>{var D;if(!b){const V=P.data[0];Xe(!!V);const $=V,W=($==null?void 0:$.error)||((D=$[0])===null||D===void 0?void 0:D.error);if(W){xe(dn,`RPC '${e}' stream ${s} received error:`,W);const B=W.status;let K=function(T){const R=Nt[T];if(R!==void 0)return B1(R)}(B),I=W.message;K===void 0&&(K=ue.INTERNAL,I="Unknown error status: "+B+" with message "+W.message),b=!0,k.Uo(new ke(K,I)),v.close()}else xe(dn,`RPC '${e}' stream ${s} received:`,V),k.Ko(V)}}),O(u,l1.STAT_EVENT,P=>{P.stat===O0.PROXY?xe(dn,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===O0.NOPROXY&&xe(dn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.$o()},0),k}}function Lg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t){return new T6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="PersistentStream";class rA{constructor(e,n,r,s,o,l,u,c){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new nA(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?($s(n.toString()),$s("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new ke(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return xe(bT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(xe(bT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _F extends rA{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=C6(this.serializer,e),r=function(o){if(!("targetChange"in o))return Oe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?as(l.readTime):Oe.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=H0(this.serializer),n.addTarget=function(o,l){let u;const c=l.target;if(u=F0(c)?{documents:I6(o,c)}:{query:R6(o,c).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=H1(o,l.resumeToken);const h=B0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(Oe.min())>0){u.readTime=kf(o,l.snapshotVersion.toTimestamp());const h=B0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=j6(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=H0(this.serializer),n.removeTarget=e,this.I_(n)}}class bF extends rA{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=P6(e.writeResults,e.commitTime),r=as(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=H0(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>A6(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{}class TF extends EF{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ke(ue.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,z0(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(ue.UNKNOWN,o.toString())})}Co(e,n,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,z0(n,r),s,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ue.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class SF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?($s(n),this.N_=!1):xe("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="RemoteStore";class kF{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{ea(this)&&(xe(Uo,"Restarting streams for network reachability change."),await async function(c){const h=Le(c);h.W_.add(4),await Yc(h),h.j_.set("Unknown"),h.W_.delete(4),await ap(h)}(this))})}),this.j_=new SF(r,s)}}async function ap(t){if(ea(t))for(const e of t.G_)await e(!0)}async function Yc(t){for(const e of t.G_)await e(!1)}function sA(t,e){const n=Le(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Ev(n)?bv(n):Hl(n).c_()&&_v(n,e))}function wv(t,e){const n=Le(t),r=Hl(n);n.K_.delete(e),r.c_()&&iA(n,e),n.K_.size===0&&(r.c_()?r.P_():ea(n)&&n.j_.set("Unknown"))}function _v(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hl(t).y_(e)}function iA(t,e){t.H_.Ne(e),Hl(t).w_(e)}function bv(t){t.H_=new w6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Hl(t).start(),t.j_.B_()}function Ev(t){return ea(t)&&!Hl(t).u_()&&t.K_.size>0}function ea(t){return Le(t).W_.size===0}function oA(t){t.H_=void 0}async function CF(t){t.j_.set("Online")}async function AF(t){t.K_.forEach((e,n)=>{_v(t,e)})}async function PF(t,e){oA(t),Ev(t)?(t.j_.q_(e),bv(t)):t.j_.set("Unknown")}async function IF(t,e,n){if(t.j_.set("Online"),e instanceof W1&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const u of o.targetIds)s.K_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.K_.delete(u),s.H_.removeTarget(u))}(t,e)}catch(r){xe(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Af(t,r)}else if(e instanceof Qh?t.H_.We(e):e instanceof z1?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Oe.min()))try{const r=await tA(t.localStore);n.compareTo(r)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const g=o.K_.get(h);g&&o.K_.set(h,g.withResumeToken(c.resumeToken,l))}}),u.targetMismatches.forEach((c,h)=>{const g=o.K_.get(c);if(!g)return;o.K_.set(c,g.withResumeToken(sn.EMPTY_BYTE_STRING,g.snapshotVersion)),iA(o,c);const v=new Ai(g.target,c,h,g.sequenceNumber);_v(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){xe(Uo,"Failed to raise snapshot:",r),await Af(t,r)}}async function Af(t,e,n){if(!Wl(e))throw e;t.W_.add(1),await Yc(t),t.j_.set("Offline"),n||(n=()=>tA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{xe(Uo,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await ap(t)})}function aA(t,e){return e().catch(n=>Af(t,n,e))}async function lp(t){const e=Le(t),n=Ui(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:iv;for(;RF(e);)try{const s=await hF(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,NF(e,s)}catch(s){await Af(e,s)}lA(e)&&uA(e)}function RF(t){return ea(t)&&t.U_.length<10}function NF(t,e){t.U_.push(e);const n=Ui(t);n.c_()&&n.S_&&n.b_(e.mutations)}function lA(t){return ea(t)&&!Ui(t).u_()&&t.U_.length>0}function uA(t){Ui(t).start()}async function jF(t){Ui(t).C_()}async function DF(t){const e=Ui(t);for(const n of t.U_)e.b_(n.mutations)}async function OF(t,e,n){const r=t.U_.shift(),s=fv.from(r,e,n);await aA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await lp(t)}async function LF(t,e){e&&Ui(t).S_&&await async function(r,s){if(function(l){return v6(l)&&l!==ue.ABORTED}(s.code)){const o=r.U_.shift();Ui(r).h_(),await aA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await lp(r)}}(t,e),lA(t)&&uA(t)}async function ET(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),xe(Uo,"RemoteStore received new credentials");const r=ea(n);n.W_.add(3),await Yc(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await ap(n)}async function MF(t,e){const n=Le(t);e?(n.W_.delete(2),await ap(n)):e||(n.W_.add(2),await Yc(n),n.j_.set("Unknown"))}function Hl(t){return t.J_||(t.J_=function(n,r,s){const o=Le(n);return o.M_(),new _F(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:CF.bind(null,t),No:AF.bind(null,t),Lo:PF.bind(null,t),p_:IF.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Ev(t)?bv(t):t.j_.set("Unknown")):(await t.J_.stop(),oA(t))})),t.J_}function Ui(t){return t.Y_||(t.Y_=function(n,r,s){const o=Le(n);return o.M_(),new bF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:jF.bind(null,t),Lo:LF.bind(null,t),D_:DF.bind(null,t),v_:OF.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await lp(t)):(await t.Y_.stop(),t.U_.length>0&&(xe(Uo,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,u=new Tv(e,n,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sv(t,e){if($s("AsyncQueue",`${e}: ${t}`),Wl(t))return new ke(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{static emptySet(e){return new gl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Pe.comparator(n.key,r.key):(n,r)=>Pe.comparator(n.key,r.key),this.keyedMap=nc(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.Z_=new xt(Pe.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Rl{constructor(e,n,r,s,o,l,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(u=>{l.push({type:0,doc:u})}),new Rl(e,n,gl.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class $F{constructor(){this.queries=ST(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=Le(n),o=s.queries;s.queries=ST(),o.forEach((l,u)=>{for(const c of u.ta)c.onError(r)})})(this,new ke(ue.ABORTED,"Firestore shutting down"))}}function ST(){return new Zo(t=>I1(t),tp)}async function cA(t,e){const n=Le(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new VF,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(s,!0);break;case 1:o.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=Sv(l,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,o),o.ta.push(e),e.sa(n.onlineState),o.ea&&e.oa(o.ea)&&kv(n)}async function dA(t,e){const n=Le(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function FF(t,e){const n=Le(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const u of l.ta)u.oa(s)&&(r=!0);l.ea=s}}r&&kv(n)}function UF(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(n);r.queries.delete(e)}function kv(t){t.ia.forEach(e=>{e.next()})}var G0,kT;(kT=G0||(G0={}))._a="default",kT.Cache="cache";class hA{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==G0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.key=e}}class pA{constructor(e){this.key=e}}class BF{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ze(),this.mutatedKeys=ze(),this.ya=R1(e),this.wa=new gl(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new TT,s=n?n.wa:this.wa;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const x=s.get(g),b=np(this.query,v)?v:null,k=!!x&&this.mutatedKeys.has(x.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let P=!1;x&&b?x.data.isEqual(b.data)?k!==O&&(r.track({type:3,doc:b}),P=!0):this.va(x,b)||(r.track({type:2,doc:b}),P=!0,(c&&this.ya(b,c)>0||h&&this.ya(b,h)<0)&&(u=!0)):!x&&b?(r.track({type:0,doc:b}),P=!0):x&&!b&&(r.track({type:1,doc:x}),P=!0,(c||h)&&(u=!0)),P&&(b?(l=l.add(b),o=O?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:u,mutatedKeys:o}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,v)=>function(b,k){const O=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return O(b)-O(k)}(g.type,v.type)||this.ya(g.doc,v.doc)),this.Ca(r),s=s!=null&&s;const u=n&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,h=c!==this.ga;return this.ga=c,l.length!==0||h?{snapshot:new Rl(this.query,e.wa,o,l,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new TT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ze(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new pA(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new fA(r))}),n}Oa(e){this.fa=e.gs,this.pa=ze();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Rl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Cv="SyncEngine";class zF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WF{constructor(e){this.key=e,this.Ba=!1}}class HF{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Zo(u=>I1(u),tp),this.qa=new Map,this.Qa=new Set,this.$a=new xt(Pe.comparator),this.Ua=new Map,this.Ka=new gv,this.Wa={},this.Ga=new Map,this.za=Il.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function qF(t,e,n=!0){const r=wA(t);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await mA(r,e,n,!0),s}async function KF(t,e){const n=wA(t);await mA(n,e,!0,!1)}async function mA(t,e,n,r){const s=await fF(t.localStore,os(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await GF(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&sA(t.remoteStore,s),u}async function GF(t,e,n,r,s){t.Ha=(v,x,b)=>async function(O,P,D,V){let $=P.view.ba(D);$.ls&&($=await vT(O.localStore,P.query,!1).then(({documents:I})=>P.view.ba(I,$)));const W=V&&V.targetChanges.get(P.targetId),B=V&&V.targetMismatches.get(P.targetId)!=null,K=P.view.applyChanges($,O.isPrimaryClient,W,B);return AT(O,P.targetId,K.Ma),K.snapshot}(t,v,x,b);const o=await vT(t.localStore,e,!0),l=new BF(e,o.gs),u=l.ba(o.documents),c=Jc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=l.applyChanges(u,t.isPrimaryClient,c);AT(t,n,h.Ma);const g=new zF(e,n,l);return t.ka.set(e,g),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),h.snapshot}async function QF(t,e,n){const r=Le(t),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!tp(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await q0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&wv(r.remoteStore,s.targetId),Q0(r,s.targetId)}).catch(zl)):(Q0(r,s.targetId),await q0(r.localStore,s.targetId,!0))}async function JF(t,e){const n=Le(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wv(n.remoteStore,r.targetId))}async function YF(t,e,n){const r=sU(t);try{const s=await function(l,u){const c=Le(l),h=Ft.now(),g=u.reduce((b,k)=>b.add(k.key),ze());let v,x;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=Fs(),O=ze();return c.ds.getEntries(b,g).next(P=>{k=P,k.forEach((D,V)=>{V.isValidDocument()||(O=O.add(D))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,k)).next(P=>{v=P;const D=[];for(const V of u){const $=f6(V,v.get(V.key).overlayedDocument);$!=null&&D.push(new qi(V.key,$,E1($.value.mapValue),hr.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,D,u)}).next(P=>{x=P;const D=P.applyToLocalDocumentSet(v,O);return c.documentOverlayCache.saveOverlays(b,P.batchId,D)})}).then(()=>({batchId:x.batchId,changes:j1(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,u,c){let h=l.Wa[l.currentUser.toKey()];h||(h=new xt(Ve)),h=h.insert(u,c),l.Wa[l.currentUser.toKey()]=h}(r,s.batchId,n),await Xc(r,s.changes),await lp(r.remoteStore)}catch(s){const o=Sv(s,"Failed to persist write");n.reject(o)}}async function gA(t,e){const n=Le(t);try{const r=await cF(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Ua.get(o);l&&(Xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Xe(l.Ba):s.removedDocuments.size>0&&(Xe(l.Ba),l.Ba=!1))}),await Xc(n,r,e)}catch(r){await zl(r)}}function CT(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const c=Le(l);c.onlineState=u;let h=!1;c.queries.forEach((g,v)=>{for(const x of v.ta)x.sa(u)&&(h=!0)}),h&&kv(c)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XF(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),o=s&&s.key;if(o){let l=new xt(Pe.comparator);l=l.insert(o,pn.newNoDocument(o,Oe.min()));const u=ze().add(o),c=new ip(Oe.min(),new Map,new xt(Ve),l,u);await gA(r,c),r.$a=r.$a.remove(o),r.Ua.delete(e),Av(r)}else await q0(r.localStore,e,!1).then(()=>Q0(r,e,n)).catch(zl)}async function ZF(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await uF(n.localStore,e);vA(n,r,null),yA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xc(n,s)}catch(s){await zl(s)}}async function eU(t,e,n){const r=Le(t);try{const s=await function(l,u){const c=Le(l);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return c.mutationQueue.lookupMutationBatch(h,u).next(v=>(Xe(v!==null),g=v.keys(),c.mutationQueue.removeMutationBatch(h,v))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,g,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>c.localDocuments.getDocuments(h,g))})}(r.localStore,e);vA(r,e,n),yA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xc(r,s)}catch(s){await zl(s)}}function yA(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function vA(t,e,n){const r=Le(t);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function Q0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||xA(t,r)})}function xA(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(wv(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),Av(t))}function AT(t,e,n){for(const r of n)r instanceof fA?(t.Ka.addReference(r.key,e),tU(t,r)):r instanceof pA?(xe(Cv,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||xA(t,r.key)):Ne()}function tU(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(xe(Cv,"New document in limbo: "+n),t.Qa.add(r),Av(t))}function Av(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new Pe(ft.fromString(e)),r=t.za.next();t.Ua.set(r,new WF(n)),t.$a=t.$a.insert(n,r),sA(t.remoteStore,new Ai(os(cv(n.path)),r,"TargetPurposeLimboResolution",Yf.ae))}}async function Xc(t,e,n){const r=Le(t),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,c)=>{l.push(r.Ha(c,e,n).then(h=>{var g;if((h||n)&&r.isPrimaryClient){const v=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(c.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(h){s.push(h);const v=vv.Yi(c.targetId,h);o.push(v)}}))}),await Promise.all(l),r.La.p_(s),await async function(c,h){const g=Le(c);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>se.forEach(h,x=>se.forEach(x.Hi,b=>g.persistence.referenceDelegate.addReference(v,x.targetId,b)).next(()=>se.forEach(x.Ji,b=>g.persistence.referenceDelegate.removeReference(v,x.targetId,b)))))}catch(v){if(!Wl(v))throw v;xe(xv,"Failed to update sequence numbers: "+v)}for(const v of h){const x=v.targetId;if(!v.fromCache){const b=g.Ts.get(x),k=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(k);g.Ts=g.Ts.insert(x,O)}}}(r.localStore,o))}async function nU(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){xe(Cv,"User change. New user:",e.toKey());const r=await eA(n.localStore,e);n.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(c=>{c.reject(new ke(ue.CANCELLED,l))})}),o.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xc(n,r.Rs)}}function rU(t,e){const n=Le(t),r=n.Ua.get(e);if(r&&r.Ba)return ze().add(r.key);{let s=ze();const o=n.qa.get(e);if(!o)return s;for(const l of o){const u=n.ka.get(l);s=s.unionWith(u.view.Sa)}return s}}function wA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XF.bind(null,e),e.La.p_=FF.bind(null,e.eventManager),e.La.Ja=UF.bind(null,e.eventManager),e}function sU(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eU.bind(null,e),e}class Pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=op(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return lF(this.persistence,new iF,e.initialUser,this.serializer)}Xa(e){return new Z1(yv.ri,this.serializer)}Za(e){return new mF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pf.provider={build:()=>new Pf};class iU extends Pf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Xe(this.persistence.referenceDelegate instanceof Cf);const r=this.persistence.referenceDelegate.garbageCollector;return new W6(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Z1(r=>Cf.ri(r,n),this.serializer)}}class J0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nU.bind(null,this.syncEngine),await MF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $F}()}createDatastore(e){const n=op(e.databaseInfo.databaseId),r=function(o){return new wF(o)}(e.databaseInfo);return function(o,l,u,c){return new TF(o,l,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,u){return new kF(r,s,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,n=>CT(this.syncEngine,n,0),function(){return _T.D()?new _T:new gF}())}createSyncEngine(e,n){return function(s,o,l,u,c,h,g){const v=new HF(s,o,l,u,c,h);return g&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Le(s);xe(Uo,"RemoteStore shutting down."),o.W_.add(5),await Yc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}J0.provider={build:()=>new J0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):$s("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="FirestoreClient";class oU{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=f1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{xe(Bi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(xe(Bi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mg(t,e){t.asyncQueue.verifyOperationInProgress(),xe(Bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await eA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aU(t);xe(Bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ET(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ET(e.remoteStore,s)),t._onlineComponents=e}async function aU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe(Bi,"Using user provided OfflineComponentProvider");try{await Mg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;kl("Error using user provided cache. Falling back to memory cache: "+n),await Mg(t,new Pf)}}else xe(Bi,"Using default OfflineComponentProvider"),await Mg(t,new iU(void 0));return t._offlineComponents}async function bA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe(Bi,"Using user provided OnlineComponentProvider"),await PT(t,t._uninitializedComponentsProvider._online)):(xe(Bi,"Using default OnlineComponentProvider"),await PT(t,new J0))),t._onlineComponents}function lU(t){return bA(t).then(e=>e.syncEngine)}async function EA(t){const e=await bA(t),n=e.eventManager;return n.onListen=qF.bind(null,e.syncEngine),n.onUnlisten=QF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JF.bind(null,e.syncEngine),n}function uU(t,e,n={}){const r=new Ls;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,h){const g=new _A({next:x=>{g.su(),l.enqueueAndForget(()=>dA(o,v));const b=x.docs.has(u);!b&&x.fromCache?h.reject(new ke(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&x.fromCache&&c&&c.source==="server"?h.reject(new ke(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),v=new hA(cv(u.path),g,{includeMetadataChanges:!0,Ta:!0});return cA(o,v)}(await EA(t),t.asyncQueue,e,n,r)),r.promise}function cU(t,e,n={}){const r=new Ls;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,h){const g=new _A({next:x=>{g.su(),l.enqueueAndForget(()=>dA(o,v)),x.fromCache&&c.source==="server"?h.reject(new ke(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),v=new hA(u,g,{includeMetadataChanges:!0,Ta:!0});return cA(o,v)}(await EA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e,n){if(!n)throw new ke(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dU(t,e,n,r){if(e===!0&&r===!0)throw new ke(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RT(t){if(!Pe.isDocumentKey(t))throw new ke(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NT(t){if(Pe.isDocumentKey(t))throw new ke(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne()}function Vr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ke(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pv(t);throw new ke(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="firestore.googleapis.com",jT=!0;class DT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kA,this.ssl=jT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:jT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=X1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B6)throw new ke(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class up{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new v3;switch(r.type){case"firstParty":return new b3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IT.get(n);r&&(xe("ComponentProvider","Removing Datastore"),IT.delete(n),r.terminate())}(this),Promise.resolve()}}function hU(t,e,n,r={}){var s;const o=(t=Vr(t,up))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o.host!==kA&&o.host!==u&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:r});if(!$o(c,l)&&(t._setSettings(c),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=fn.MOCK_USER;else{h=QC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ke(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new fn(v)}t._authCredentials=new x3(new d1(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cp(this.firestore,e,this._query)}}class Ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class Ni extends cp{constructor(e,n,r){super(e,n,cv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Pe(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function jt(t,e,...n){if(t=vt(t),SA("collection","path",e),t instanceof up){const r=ft.fromString(e,...n);return NT(r),new Ni(t,null,r)}{if(!(t instanceof Ln||t instanceof Ni))throw new ke(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return NT(r),new Ni(t.firestore,null,r)}}function Gn(t,e,...n){if(t=vt(t),arguments.length===1&&(e=f1.newId()),SA("doc","path",e),t instanceof up){const r=ft.fromString(e,...n);return RT(r),new Ln(t,null,new Pe(r))}{if(!(t instanceof Ln||t instanceof Ni))throw new ke(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return RT(r),new Ln(t.firestore,t instanceof Ni?t.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="AsyncQueue";class LT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new nA(this,"async_queue_retry"),this.Su=()=>{const r=Lg();r&&xe(OT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=Lg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Lg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Ls;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Wl(e))throw e;xe(OT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw $s("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=Tv.createAndSchedule(this,e,n,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class ta extends up{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new LT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LT(e),this._firestoreClient=void 0,await e}}}function Bo(t,e){const n=typeof t=="object"?t:rv(),r=typeof t=="string"?t:wf,s=Ul(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=qC("firestore");o&&hU(s,...o)}return s}function Iv(t){if(t._terminated)throw new ke(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fU(t),t._firestoreClient}function fU(t){var e,n,r;const s=t._freezeSettings(),o=function(u,c,h,g){return new M3(u,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,TA(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new oU(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nl(sn.fromBase64String(e))}catch(n){throw new ke(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nl(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=/^__.*__$/;class mU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qc(e,this.data,n,this.fieldTransforms)}}class CA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class Dv{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Dv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return If(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(AA(this.Lu)&&pU.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class gU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||op(e)}ju(e,n,r,s=!1){return new Dv({Lu:e,methodName:n,zu:r,path:rn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ov(t){const e=t._freezeSettings(),n=op(t._databaseId);return new gU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PA(t,e,n,r,s,o={}){const l=t.ju(o.merge||o.mergeFields?2:0,e,n,s);Lv("Data must be an object, but it was:",l,r);const u=IA(r,l);let c,h;if(o.merge)c=new Qn(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const x=Y0(e,v,n);if(!l.contains(x))throw new ke(ue.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);NA(g,x)||g.push(x)}c=new Qn(g),h=l.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,h=l.fieldTransforms;return new mU(new jn(u),c,h)}class hp extends Rv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hp}}function yU(t,e,n,r){const s=t.ju(1,e,n);Lv("Data must be an object, but it was:",s,r);const o=[],l=jn.empty();Hi(r,(c,h)=>{const g=Mv(e,c,n);h=vt(h);const v=s.Uu(g);if(h instanceof hp)o.push(g);else{const x=fp(h,v);x!=null&&(o.push(g),l.set(g,x))}});const u=new Qn(o);return new CA(l,u,s.fieldTransforms)}function vU(t,e,n,r,s,o){const l=t.ju(1,e,n),u=[Y0(e,r,n)],c=[s];if(o.length%2!=0)throw new ke(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push(Y0(e,o[x])),c.push(o[x+1]);const h=[],g=jn.empty();for(let x=u.length-1;x>=0;--x)if(!NA(h,u[x])){const b=u[x];let k=c[x];k=vt(k);const O=l.Uu(b);if(k instanceof hp)h.push(b);else{const P=fp(k,O);P!=null&&(h.push(b),g.set(b,P))}}const v=new Qn(h);return new CA(g,v,l.fieldTransforms)}function fp(t,e){if(RA(t=vt(t)))return Lv("Unsupported field value:",e,t),IA(t,e);if(t instanceof Rv)return function(r,s){if(!AA(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const u of r){let c=fp(u,s.Ku(l));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return a6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ft.fromDate(r);return{timestampValue:kf(s.serializer,o)}}if(r instanceof Ft){const o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kf(s.serializer,o)}}if(r instanceof Nv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nl)return{bytesValue:H1(s.serializer,r._byteString)};if(r instanceof Ln){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jv)return function(l,u){return{mapValue:{fields:{[_1]:{stringValue:b1},[_f]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw u.Wu("VectorValues must only contain numeric values.");return dv(u.serializer,h)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Pv(r)}`)}(t,e)}function IA(t,e){const n={};return m1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,(r,s)=>{const o=fp(s,e.qu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function RA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof Nv||t instanceof Nl||t instanceof Ln||t instanceof Rv||t instanceof jv)}function Lv(t,e,n){if(!RA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Pv(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function Y0(t,e,n){if((e=vt(e))instanceof dp)return e._internalPath;if(typeof e=="string")return Mv(t,e);throw If("Field path arguments must be of type string or ",t,!1,void 0,n)}const xU=new RegExp("[~\\*/\\[\\]]");function Mv(t,e,n){if(e.search(xU)>=0)throw If(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new dp(...e.split("."))._internalPath}catch{throw If(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function If(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||l)&&(c+=" (found",o&&(c+=` in field ${r}`),l&&(c+=` in document ${s}`),c+=")"),new ke(ue.INVALID_ARGUMENT,u+t+c)}function NA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(DA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wU extends jA{data(){return super.data()}}function DA(t,e){return typeof e=="string"?Mv(t,e):e instanceof dp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ke(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bU{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hi(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[_f].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Pt(l.doubleValue));return new jv(o)}convertGeoPoint(e){return new Nv(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){const n=Vi(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);Xe(Y1(r));const s=new jc(r.get(1),r.get(3)),o=new Pe(r.popFirst(5));return s.isEqual(n)||$s(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LA extends jA{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(DA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jh extends LA{data(e={}){return super.data(e)}}class EU{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jh(this._firestore,this._userDataWriter,r.key,r,new sc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const c=new Jh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new sc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Jh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new sc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:TU(u.type),doc:c,oldIndex:h,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function TU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){t=Vr(t,Ln);const e=Vr(t.firestore,ta);return uU(Iv(e),t._key).then(n=>SU(e,t,n))}class MA extends bU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,n)}}function Vn(t){t=Vr(t,cp);const e=Vr(t.firestore,ta),n=Iv(e),r=new MA(e);return _U(t._query),cU(n,t._query).then(s=>new EU(e,r,t,s))}function Rf(t,e,n){t=Vr(t,Ln);const r=Vr(t.firestore,ta),s=OA(t.converter,e,n);return pp(r,[PA(Ov(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hr.none())])}function MT(t,e,n,...r){t=Vr(t,Ln);const s=Vr(t.firestore,ta),o=Ov(s);let l;return l=typeof(e=vt(e))=="string"||e instanceof dp?vU(o,"updateDoc",t._key,e,n,r):yU(o,"updateDoc",t._key,e),pp(s,[l.toMutation(t._key,hr.exists(!0))])}function Yh(t){return pp(Vr(t.firestore,ta),[new hv(t._key,hr.none())])}function jl(t,e){const n=Vr(t.firestore,ta),r=Gn(t),s=OA(t.converter,e);return pp(n,[PA(Ov(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}function pp(t,e){return function(r,s){const o=new Ls;return r.asyncQueue.enqueueAndForget(async()=>YF(await lU(r),s,o)),o.promise}(Iv(t),e)}function SU(t,e,n){const r=n.docs.get(e._key),s=new MA(t);return new LA(t,s,e._key,r,new sc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Bl=s})(Xo),Mr(new mr("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new ta(new w3(r.getProvider("auth-internal")),new E3(l,r.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(h.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),On(BE,zE,e),On(BE,zE,"esm2017")})();function Vv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function VA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kU=VA,$A=new Yo("auth","Firebase",VA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new Jf("@firebase/auth");function CU(t,...e){Nf.logLevel<=Be.WARN&&Nf.warn(`Auth (${Xo}): ${t}`,...e)}function Xh(t,...e){Nf.logLevel<=Be.ERROR&&Nf.error(`Auth (${Xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,...e){throw $v(t,...e)}function ls(t,...e){return $v(t,...e)}function FA(t,e,n){const r=Object.assign(Object.assign({},kU()),{[e]:n});return new Yo("auth","Firebase",r).create(e,{appName:t.name})}function ji(t){return FA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $v(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $A.create(t,...e)}function Re(t,e,...n){if(!t)throw $v(e,...n)}function Ns(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xh(e),new Error(e)}function Us(t,e){t||Ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AU(){return VT()==="http:"||VT()==="https:"}function VT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AU()||JC()||"connection"in navigator)?navigator.onLine:!0}function IU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.shortDelay=e,this.longDelay=n,Us(n>e,"Short delay should be less than long delay!"),this.isMobile=HV()||GV()}get(){return PU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t,e){Us(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new ed(3e4,6e4);function na(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ki(t,e,n,r,s={}){return BA(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Gc(Object.assign({key:t.config.apiKey},l)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},o);return KV()||(h.referrerPolicy="no-referrer"),UA.fetch()(zA(t,t.config.apiHost,n,u),h)})}async function BA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},RU),e);try{const s=new DU(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Lh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lh(t,"credential-already-in-use",l);if(c==="EMAIL_EXISTS")throw Lh(t,"email-already-in-use",l);if(c==="USER_DISABLED")throw Lh(t,"user-disabled",l);const g=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw FA(t,g,h);$r(t,g)}}catch(s){if(s instanceof yr)throw s;$r(t,"network-request-failed",{message:String(s)})}}async function mp(t,e,n,r,s={}){const o=await Ki(t,e,n,r,s);return"mfaPendingCredential"in o&&$r(t,"multi-factor-auth-required",{_serverResponse:o}),o}function zA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Fv(t.config,s):`${t.config.apiScheme}://${s}`}function jU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ls(this.auth,"network-request-failed")),NU.get())})}}function Lh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ls(t,e,r);return s.customData._tokenResponse=n,s}function $T(t){return t!==void 0&&t.enterprise!==void 0}class OU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function LU(t,e){return Ki(t,"GET","/v2/recaptchaConfig",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(t,e){return Ki(t,"POST","/v1/accounts:delete",e)}async function WA(t,e){return Ki(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VU(t,e=!1){const n=vt(t),r=await n.getIdToken(e),s=Uv(r);Re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:gc(Vg(s.auth_time)),issuedAtTime:gc(Vg(s.iat)),expirationTime:gc(Vg(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vg(t){return Number(t)*1e3}function Uv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const s=WC(n);return s?JSON.parse(s):(Xh("Failed to decode base64 JWT payload"),null)}catch(s){return Xh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function FT(t){const e=Uv(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&$U(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $U({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jf(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Mc(t,WA(n,{idToken:r}));Re(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?HA(o.providerUserInfo):[],u=BU(t.providerData,l),c=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),g=c?h:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Z0(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function UU(t){const e=vt(t);await jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function HA(t){return t.map(e=>{var{providerId:n}=e,r=Vv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zU(t,e){const n=await BA(t,{},async()=>{const r=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=zA(t,s,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",UA.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WU(t,e){return Ki(t,"POST","/v2/accounts:revokeToken",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=FT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await zU(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new yl;return r&&(Re(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Re(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Re(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yl,this.toJSON())}_performRefresh(){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class js{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Vv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Z0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VU(this,e)}reload(){return UU(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new js(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(ji(this.auth));const e=await this.getIdToken();return await Mc(this,MU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,u,c,h,g;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,k=(l=n.photoURL)!==null&&l!==void 0?l:void 0,O=(u=n.tenantId)!==null&&u!==void 0?u:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,D=(h=n.createdAt)!==null&&h!==void 0?h:void 0,V=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:$,emailVerified:W,isAnonymous:B,providerData:K,stsTokenManager:I}=n;Re($&&I,e,"internal-error");const S=yl.fromJSON(this.name,I);Re(typeof $=="string",e,"internal-error"),yi(v,e.name),yi(x,e.name),Re(typeof W=="boolean",e,"internal-error"),Re(typeof B=="boolean",e,"internal-error"),yi(b,e.name),yi(k,e.name),yi(O,e.name),yi(P,e.name),yi(D,e.name),yi(V,e.name);const T=new js({uid:$,auth:e,email:x,emailVerified:W,displayName:v,isAnonymous:B,photoURL:k,phoneNumber:b,tenantId:O,stsTokenManager:S,createdAt:D,lastLoginAt:V});return K&&Array.isArray(K)&&(T.providerData=K.map(R=>Object.assign({},R))),P&&(T._redirectEventId=P),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new yl;s.updateFromServerResponse(n);const o=new js({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await jf(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Re(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?HA(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new yl;u.updateFromIdToken(r);const c=new js({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Z0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;function Ds(t){Us(t instanceof Function,"Expected a class definition");let e=UT.get(t);return e?(Us(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qA.type="NONE";const BT=qA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e,n){return`firebase:${t}:${e}:${n}`}class vl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Zh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Zh("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?js._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vl(Ds(BT),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Ds(BT);const l=Zh(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const g=await h._get(l);if(g){const v=js._fromJSON(e,g);h!==o&&(u=v),o=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new vl(o,e,r):(o=c[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new vl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XA(e))return"Blackberry";if(ZA(e))return"Webos";if(GA(e))return"Safari";if((e.includes("chrome/")||QA(e))&&!e.includes("edge/"))return"Chrome";if(YA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KA(t=gn()){return/firefox\//i.test(t)}function GA(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QA(t=gn()){return/crios\//i.test(t)}function JA(t=gn()){return/iemobile/i.test(t)}function YA(t=gn()){return/android/i.test(t)}function XA(t=gn()){return/blackberry/i.test(t)}function ZA(t=gn()){return/webos/i.test(t)}function Bv(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HU(t=gn()){var e;return Bv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qU(){return QV()&&document.documentMode===10}function eP(t=gn()){return Bv(t)||YA(t)||ZA(t)||XA(t)||/windows phone/i.test(t)||JA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t,e=[]){let n;switch(t){case"Browser":n=zT(gn());break;case"Worker":n=`${zT(gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,u)=>{try{const c=e(o);l(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(t,e={}){return Ki(t,"GET","/v2/passwordPolicy",na(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=6;class JU{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:QU,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNumericCharacter)!==null&&l!==void 0?l:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WT(this),this.idTokenSubscription=new WT(this),this.beforeStateQueue=new KU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$A,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ds(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await vl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await WA(this,{idToken:e}),r=await js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(cr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!l||l===u)&&(c!=null&&c.user)&&(s=c.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(ji(this));const n=e?vt(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GU(this),n=new JU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ds(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await vl.create(this,[Ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{l=!0,c()}}else{const c=e.addObserver(n);return()=>{l=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&CU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ql(t){return vt(t)}class WT{constructor(e){this.auth=e,this.observer=null,this.addObserver=n$(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XU(t){gp=t}function nP(t){return gp.loadJS(t)}function ZU(){return gp.recaptchaEnterpriseScript}function e8(){return gp.gapiScript}function t8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class n8{constructor(){this.enterprise=new r8}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class r8{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const s8="recaptcha-enterprise",rP="NO_RECAPTCHA";class i8{constructor(e){this.type=s8,this.auth=ql(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{LU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new OU(c);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(c=>{u(c)})})}function s(o,l,u){const c=window.grecaptcha;$T(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(rP)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new n8().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!n&&$T(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let c=ZU();c.length!==0&&(c+=u),nP(c).then(()=>{s(u,o,l)}).catch(h=>{l(h)})}}).catch(u=>{l(u)})})}}async function HT(t,e,n,r=!1,s=!1){const o=new i8(t);let l;if(s)l=rP;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function qT(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await HT(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await HT(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t,e){const n=Ul(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if($o(o,e??{}))return s;$r(s,"already-initialized")}return n.initialize({options:e})}function a8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function l8(t,e,n){const r=ql(t);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=sP(e),{host:l,port:u}=u8(e),c=u===null?"":`:${u}`,h={url:`${o}//${l}${c}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re($o(h,r.config.emulator)&&$o(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,c8()}function sP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function u8(t){const e=sP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:KT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:KT(l)}}}function KT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function c8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,n){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}}async function d8(t,e){return Ki(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8(t,e){return mp(t,"POST","/v1/accounts:signInWithPassword",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(t,e){return mp(t,"POST","/v1/accounts:signInWithEmailLink",na(t,e))}async function p8(t,e){return mp(t,"POST","/v1/accounts:signInWithEmailLink",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends zv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Vc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qT(e,n,"signInWithPassword",h8);case"emailLink":return f8(e,{email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qT(e,r,"signUpPassword",d8);case"emailLink":return p8(e,{idToken:n,email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t,e){return mp(t,"POST","/v1/accounts:signInWithIdp",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8="http://localhost";class zo extends zv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Vv(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new zo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return xl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xl(e,n)}buildRequest(){const e={requestUri:m8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y8(t){const e=Zu(ec(t)).link,n=e?Zu(ec(e)).deep_link_id:null,r=Zu(ec(t)).deep_link_id;return(r?Zu(ec(r)).link:null)||r||n||e||t}class Wv{constructor(e){var n,r,s,o,l,u;const c=Zu(ec(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,g=(r=c.oobCode)!==null&&r!==void 0?r:null,v=g8((s=c.mode)!==null&&s!==void 0?s:null);Re(h&&g&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=g,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=c.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=y8(e);try{return new Wv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.providerId=Kl.PROVIDER_ID}static credential(e,n){return Vc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Wv.parseLink(n);return Re(r,"argument-error"),Vc._fromEmailAndCode(e,r.code,r.tenantId)}}Kl.PROVIDER_ID="password";Kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends iP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends td{constructor(){super("facebook.com")}static credential(e){return zo._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends td{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zo._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ti.credential(n,r)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends td{constructor(){super("github.com")}static credential(e){return zo._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends td{constructor(){super("twitter.com")}static credential(e,n){return zo._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ki.credential(n,r)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await js._fromIdTokenResponse(e,r,s),l=GT(r);return new Dl({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=GT(r);return new Dl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function GT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends yr{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Df(e,n,r,s)}}function oP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(t,o,e,r):o})}async function v8(t,e,n=!1){const r=await Mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Dl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x8(t,e,n=!1){const{auth:r}=t;if(cr(r.app))return Promise.reject(ji(r));const s="reauthenticate";try{const o=await Mc(t,oP(r,s,e,t),n);Re(o.idToken,r,"internal-error");const l=Uv(o.idToken);Re(l,r,"internal-error");const{sub:u}=l;return Re(t.uid===u,r,"user-mismatch"),Dl._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&$r(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e,n=!1){if(cr(t.app))return Promise.reject(ji(t));const r="signIn",s=await oP(t,r,e),o=await Dl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function w8(t,e){return aP(ql(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _8(t){const e=ql(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function b8(t,e,n){return cr(t.app)?Promise.reject(ji(t)):w8(vt(t),Kl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_8(t),r})}function E8(t,e,n,r){return vt(t).onIdTokenChanged(e,n,r)}function T8(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function yp(t,e,n,r){return vt(t).onAuthStateChanged(e,n,r)}function vp(t){return vt(t).signOut()}const Of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=1e3,k8=10;class uP extends lP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,c)=>{this.notifyListeners(l,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);qU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,k8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},S8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uP.type="LOCAL";const C8=uP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP extends lP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cP.type="SESSION";const dP=cP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async h=>h(n.origin,o)),c=await A8(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,c)=>{const h=Hv("",20);s.port1.start();const g=setTimeout(()=>{c(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(g),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function I8(t){us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function R8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function j8(){return hP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="firebaseLocalStorageDb",D8=1,Lf="firebaseLocalStorage",pP="fbase_key";class nd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wp(t,e){return t.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function O8(){const t=indexedDB.deleteDatabase(fP);return new nd(t).toPromise()}function ey(){const t=indexedDB.open(fP,D8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lf,{keyPath:pP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lf)?e(r):(r.close(),await O8(),e(await ey()))})})}async function QT(t,e,n){const r=wp(t,!0).put({[pP]:e,value:n});return new nd(r).toPromise()}async function L8(t,e){const n=wp(t,!1).get(e),r=await new nd(n).toPromise();return r===void 0?null:r.value}function JT(t,e){const n=wp(t,!0).delete(e);return new nd(n).toPromise()}const M8=800,V8=3;class mP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ey(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>V8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xp._getInstance(j8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await R8(),!this.activeServiceWorker)return;this.sender=new P8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ey();return await QT(e,Of,"1"),await JT(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>QT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>L8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>JT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=wp(s,!1).getAll();return new nd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),M8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mP.type="LOCAL";const $8=mP;new ed(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(t,e){return e?Ds(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends zv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U8(t){return aP(t.auth,new qv(t),t.bypassAuthState)}function B8(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),x8(n,new qv(t),t.bypassAuthState)}async function z8(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),v8(n,new qv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U8;case"linkViaPopup":case"linkViaRedirect":return z8;case"reauthViaPopup":case"reauthViaRedirect":return B8;default:$r(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8=new ed(2e3,1e4);class hl extends gP{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,hl.currentPopupAction&&hl.currentPopupAction.cancel(),hl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Us(this.filter.length===1,"Popup operations only handle one event");const e=Hv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W8.get())};e()}}hl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8="pendingRedirect",ef=new Map;class q8 extends gP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const r=await K8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K8(t,e){const n=J8(e),r=Q8(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function G8(t,e){ef.set(t._key(),e)}function Q8(t){return Ds(t._redirectPersistence)}function J8(t){return Zh(H8,t.config.apiKey,t.name)}async function Y8(t,e,n=!1){if(cr(t.app))return Promise.reject(ji(t));const r=ql(t),s=F8(r,e),l=await new q8(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=10*60*1e3;class Z8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yP(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ls(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X8&&this.cachedEventUids.clear(),this.cachedEventUids.has(YT(e))}saveEventToCache(e){this.cachedEventUids.add(YT(e)),this.lastProcessedEventTime=Date.now()}}function YT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t9(t,e={}){return Ki(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r9=/^https?/;async function s9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t9(t);for(const n of e)try{if(i9(n))return}catch{}$r(t,"unauthorized-domain")}function i9(t){const e=X0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!r9.test(n))return!1;if(n9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=new ed(3e4,6e4);function XT(){const t=us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a9(t){return new Promise((e,n)=>{var r,s,o;function l(){XT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XT(),n(ls(t,"network-request-failed"))},timeout:o9.get()})}if(!((s=(r=us().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=us().gapi)===null||o===void 0)&&o.load)l();else{const u=t8("iframefcb");return us()[u]=()=>{gapi.load?l():n(ls(t,"network-request-failed"))},nP(`${e8()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw tf=null,e})}let tf=null;function l9(t){return tf=tf||a9(t),tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=new ed(5e3,15e3),c9="__/auth/iframe",d9="emulator/auth/iframe",h9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p9(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fv(e,d9):`https://${t.config.authDomain}/${c9}`,r={apiKey:e.apiKey,appName:t.name,v:Xo},s=f9.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Gc(r).slice(1)}`}async function m9(t){const e=await l9(t),n=us().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:p9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h9,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=ls(t,"network-request-failed"),u=us().setTimeout(()=>{o(l)},u9.get());function c(){us().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y9=500,v9=600,x9="_blank",w9="http://localhost";class ZT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _9(t,e,n,r=y9,s=v9){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},g9),{width:r.toString(),height:s.toString(),top:o,left:l}),h=gn().toLowerCase();n&&(u=QA(h)?x9:n),KA(h)&&(e=e||w9,c.scrollbars="yes");const g=Object.entries(c).reduce((x,[b,k])=>`${x}${b}=${k},`,"");if(HU(h)&&u!=="_self")return b9(e||"",u),new ZT(null);const v=window.open(e||"",u,g);Re(v,t,"popup-blocked");try{v.focus()}catch{}return new ZT(v)}function b9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9="__/auth/handler",T9="emulator/auth/handler",S9=encodeURIComponent("fac");async function eS(t,e,n,r,s,o){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xo,eventId:s};if(e instanceof iP){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",t$(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof td){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const c=await t._getAppCheckToken(),h=c?`#${S9}=${encodeURIComponent(c)}`:"";return`${k9(t)}?${Gc(u).slice(1)}${h}`}function k9({config:t}){return t.emulator?Fv(t,T9):`https://${t.authDomain}/${E9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class C9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dP,this._completeRedirectFn=Y8,this._overrideRedirectResult=G8}async _openPopup(e,n,r,s){var o;Us((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await eS(e,n,r,X0(),s);return _9(e,l,Hv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await eS(e,n,r,X0(),s);return I8(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Us(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await m9(e),r=new Z8(e);return n.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($g,{type:$g},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[$g];l!==void 0&&n(!!l),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=s9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eP()||GA()||Bv()}}const A9=C9;var tS="@firebase/auth",nS="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R9(t){Mr(new mr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tP(t)},h=new YU(r,s,o,c);return a8(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mr(new mr("auth-internal",e=>{const n=ql(e.getProvider("auth").getImmediate());return(r=>new P9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(tS,nS,I9(t)),On(tS,nS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=5*60,j9=GC("authIdTokenMaxAge")||N9;let rS=null;const D9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>j9)return;const s=n==null?void 0:n.token;rS!==s&&(rS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function O9(t=rv()){const e=Ul(t,"auth");if(e.isInitialized())return e.getImmediate();const n=o8(t,{popupRedirectResolver:A9,persistence:[$8,C8,dP]}),r=GC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=D9(o.toString());T8(n,l,()=>l(n.currentUser)),E8(n,u=>l(u))}}const s=HC("auth");return s&&l8(n,`http://${s}`),n}function L9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=ls("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",L9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R9("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="firebasestorage.googleapis.com",xP="storageBucket",M9=2*60*1e3,V9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends yr{constructor(e,n,r=0){super(Fg(e),`Firebase Storage: ${n} (${Fg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function Fg(t){return"storage/"+t}function Kv(){const t="An unknown error occurred, please check the error payload for server response.";return new Tt(Et.UNKNOWN,t)}function $9(t){return new Tt(Et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function F9(t){return new Tt(Et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(Et.UNAUTHENTICATED,t)}function B9(){return new Tt(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function z9(t){return new Tt(Et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function W9(){return new Tt(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function H9(){return new Tt(Et.CANCELED,"User canceled the upload/download.")}function q9(t){return new Tt(Et.INVALID_URL,"Invalid URL '"+t+"'.")}function K9(t){return new Tt(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function G9(){return new Tt(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xP+"' property when initializing the app?")}function Q9(){return new Tt(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function J9(){return new Tt(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y9(t){return new Tt(Et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ty(t){return new Tt(Et.INVALID_ARGUMENT,t)}function wP(){return new Tt(Et.APP_DELETED,"The Firebase app was deleted.")}function X9(t){return new Tt(Et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yc(t,e){return new Tt(Et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gu(t){throw new Tt(Et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jn.makeFromUrl(e,n)}catch{return new Jn(e,"")}if(r.path==="")return r;throw K9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),c={bucket:1,path:3};function h(W){W.path_=decodeURIComponent(W.path)}const g="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${g}/b/${s}/o${x}`,"i"),k={bucket:1,path:3},O=n===vP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",D=new RegExp(`^https?://${O}/${s}/${P}`,"i"),$=[{regex:u,indices:c,postModify:o},{regex:b,indices:k,postModify:h},{regex:D,indices:{bucket:1,path:2},postModify:h}];for(let W=0;W<$.length;W++){const B=$[W],K=B.regex.exec(e);if(K){const I=K[B.indices.bucket];let S=K[B.indices.path];S||(S=""),r=new Jn(I,S),B.postModify(r);break}}if(r==null)throw q9(e);return r}}class Z9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t,e,n){let r=1,s=null,o=null,l=!1,u=0;function c(){return u===2}let h=!1;function g(...P){h||(h=!0,e.apply(null,P))}function v(P){s=setTimeout(()=>{s=null,t(b,c())},P)}function x(){o&&clearTimeout(o)}function b(P,...D){if(h){x();return}if(P){x(),g.call(null,P,...D);return}if(c()||l){x(),g.call(null,P,...D);return}r<64&&(r*=2);let $;u===1?(u=2,$=0):$=(r+Math.random())*1e3,v($)}let k=!1;function O(P){k||(k=!0,x(),!h&&(s!==null?(P||(u=2),clearTimeout(s),v(0)):P||(u=1)))}return v(0),o=setTimeout(()=>{l=!0,O(!0)},n),O}function t5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t){return t!==void 0}function r5(t){return typeof t=="object"&&!Array.isArray(t)}function Gv(t){return typeof t=="string"||t instanceof String}function sS(t){return Qv()&&t instanceof Blob}function Qv(){return typeof Blob<"u"}function iS(t,e,n,r){if(r<e)throw ty(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ty(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function _P(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Vo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vo||(Vo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n,r,s,o,l,u,c,h,g,v,x=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=v,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Mh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const c=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===Vo.NO_ERROR,c=o.getStatus();if(!u||s5(c,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Vo.ABORT;r(!1,new Mh(!1,null,g));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new Mh(h,o))})},n=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());n5(c)?o(c):o()}catch(c){l(c)}else if(u!==null){const c=Kv();c.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,c)):l(c)}else if(s.canceled){const c=this.appDelete_?wP():H9();l(c)}else{const c=W9();l(c)}};this.canceled_?n(!1,new Mh(!1,null,!0)):this.backoffId_=e5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function o5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function a5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function u5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function c5(t,e,n,r,s,o,l=!0){const u=_P(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return l5(h,e),o5(h,n),a5(h,o),u5(h,r),new i5(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function h5(...t){const e=d5();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qv())return new Blob(t);throw new Tt(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function f5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(t){if(typeof atob>"u")throw Y9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ug{constructor(e,n){this.data=e,this.contentType=n||null}}function m5(t,e){switch(t){case ts.RAW:return new Ug(bP(e));case ts.BASE64:case ts.BASE64URL:return new Ug(EP(t,e));case ts.DATA_URL:return new Ug(y5(e),v5(e))}throw Kv()}function bP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=t.charCodeAt(++n);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function g5(t){let e;try{e=decodeURIComponent(t)}catch{throw yc(ts.DATA_URL,"Malformed data URL.")}return bP(e)}function EP(t,e){switch(t){case ts.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw yc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw yc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=p5(e)}catch(s){throw s.message.includes("polyfill")?s:yc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class TP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw yc(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=x5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function y5(t){const e=new TP(t);return e.base64?EP(ts.BASE64,e.rest):g5(e.rest)}function v5(t){return new TP(t).contentType}function x5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){let r=0,s="";sS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(sS(this.data_)){const r=this.data_,s=f5(r,e,n);return s===null?null:new Ci(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ci(r,!0)}}static getBlob(...e){if(Qv()){const n=e.map(r=>r instanceof Ci?r.data_:r);return new Ci(h5.apply(null,n))}else{const n=e.map(l=>Gv(l)?m5(ts.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new Ci(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){let e;try{e=JSON.parse(t)}catch{return null}return r5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _5(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function kP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t,e){return e}class _n{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||b5}}let Vh=null;function E5(t){return!Gv(t)||t.length<2?t:kP(t)}function CP(){if(Vh)return Vh;const t=[];t.push(new _n("bucket")),t.push(new _n("generation")),t.push(new _n("metageneration")),t.push(new _n("name","fullPath",!0));function e(o,l){return E5(l)}const n=new _n("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const s=new _n("size");return s.xform=r,t.push(s),t.push(new _n("timeCreated")),t.push(new _n("updated")),t.push(new _n("md5Hash",null,!0)),t.push(new _n("cacheControl",null,!0)),t.push(new _n("contentDisposition",null,!0)),t.push(new _n("contentEncoding",null,!0)),t.push(new _n("contentLanguage",null,!0)),t.push(new _n("contentType",null,!0)),t.push(new _n("metadata","customMetadata",!0)),Vh=t,Vh}function T5(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new Jn(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function S5(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return T5(r,t),r}function AP(t,e,n){const r=SP(e);return r===null?null:S5(t,r,n)}function k5(t,e,n,r){const s=SP(e);if(s===null||!Gv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(h=>{const g=t.bucket,v=t.fullPath,x="/b/"+l(g)+"/o/"+l(v),b=_p(x,n,r),k=_P({alt:"media",token:h});return b+k})[0]}function C5(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Jv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){if(!t)throw Kv()}function A5(t,e){function n(r,s){const o=AP(t,s,e);return PP(o!==null),o}return n}function P5(t,e){function n(r,s){const o=AP(t,s,e);return PP(o!==null),k5(o,s,t.host,t._protocol)}return n}function IP(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=B9():s=U9():n.getStatus()===402?s=F9(t.bucket):n.getStatus()===403?s=z9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function RP(t){const e=IP(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=$9(t.path)),o.serverResponse=s.serverResponse,o}return n}function I5(t,e,n){const r=e.fullServerUrl(),s=_p(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,u=new Jv(s,o,P5(t,n),l);return u.errorHandler=RP(e),u}function R5(t,e){const n=e.fullServerUrl(),r=_p(n,t.host,t._protocol),s="DELETE",o=t.maxOperationRetryTime;function l(c,h){}const u=new Jv(r,s,l,o);return u.successCodes=[200,204],u.errorHandler=RP(e),u}function N5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function j5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=N5(null,e)),r}function D5(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let $="";for(let W=0;W<2;W++)$=$+Math.random().toString().slice(2);return $}const c=u();l["Content-Type"]="multipart/related; boundary="+c;const h=j5(e,r,s),g=C5(h,n),v="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+c+"--",b=Ci.getBlob(v,r,x);if(b===null)throw Q9();const k={name:h.fullPath},O=_p(o,t.host,t._protocol),P="POST",D=t.maxUploadRetryTime,V=new Jv(O,P,A5(t,n),D);return V.urlParams=k,V.headers=l,V.body=b.uploadData(),V.errorHandler=IP(e),V}class O5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Gu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class L5 extends O5{initXhr(){this.xhr_.responseType="text"}}function Yv(){return new L5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this._service=e,n instanceof Jn?this._location=n:this._location=Jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Wo(e,n)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kP(this._location.path)}get storage(){return this._service}get parent(){const e=w5(this._location.path);if(e===null)return null;const n=new Jn(this._location.bucket,e);return new Wo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw X9(e)}}function M5(t,e,n){t._throwIfRoot("uploadBytes");const r=D5(t.storage,t._location,CP(),new Ci(e,!0),n);return t.storage.makeRequestWithTokens(r,Yv).then(s=>({metadata:s,ref:t}))}function V5(t){t._throwIfRoot("getDownloadURL");const e=I5(t.storage,t._location,CP());return t.storage.makeRequestWithTokens(e,Yv).then(n=>{if(n===null)throw J9();return n})}function $5(t){t._throwIfRoot("deleteObject");const e=R5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Yv)}function F5(t,e){const n=_5(t._location.path,e),r=new Jn(t._location.bucket,n);return new Wo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t){return/^[A-Za-z]+:\/\//.test(t)}function B5(t,e){return new Wo(t,e)}function NP(t,e){if(t instanceof Xv){const n=t;if(n._bucket==null)throw G9();const r=new Wo(n,n._bucket);return e!=null?NP(r,e):r}else return e!==void 0?F5(t,e):t}function z5(t,e){if(e&&U5(e)){if(t instanceof Xv)return B5(t,e);throw ty("To use ref(service, url), the first argument must be a Storage instance.")}else return NP(t,e)}function oS(t,e){const n=e==null?void 0:e[xP];return n==null?null:Jn.makeFromBucketSpec(n,t)}function W5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:QC(s,t.app.options.projectId))}class Xv{constructor(e,n,r,s,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=vP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M9,this._maxUploadRetryTime=V9,this._requests=new Set,s!=null?this._bucket=Jn.makeFromBucketSpec(s,this._host):this._bucket=oS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=oS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wo(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new Z9(wP());{const l=c5(e,this._appId,r,s,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const aS="@firebase/storage",lS="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="storage";function H5(t,e,n){return t=vt(t),M5(t,e,n)}function q5(t){return t=vt(t),V5(t)}function uS(t){return t=vt(t),$5(t)}function Bg(t,e){return t=vt(t),z5(t,e)}function K5(t=rv(),e){t=vt(t);const r=Ul(t,jP).getImmediate({identifier:e}),s=qC("storage");return s&&G5(r,...s),r}function G5(t,e,n,r={}){W5(t,e,n,r)}function Q5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Xv(n,r,s,e,Xo)}function J5(){Mr(new mr(jP,Q5,"PUBLIC").setMultipleInstances(!0)),On(aS,lS,""),On(aS,lS,"esm2017")}J5();const DP="@firebase/installations",Zv="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=1e4,LP=`w:${Zv}`,MP="FIS_v2",Y5="https://firebaseinstallations.googleapis.com/v1",X5=60*60*1e3,Z5="installations",eB="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ho=new Yo(Z5,eB,tB);function VP(t){return t instanceof yr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P({projectId:t}){return`${Y5}/projects/${t}/installations`}function FP(t){return{token:t.token,requestStatus:2,expiresIn:rB(t.expiresIn),creationTime:Date.now()}}async function UP(t,e){const r=(await e.json()).error;return Ho.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function BP({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nB(t,{refreshToken:e}){const n=BP(t);return n.append("Authorization",sB(e)),n}async function zP(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rB(t){return Number(t.replace("s","000"))}function sB(t){return`${MP} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iB({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=$P(t),s=BP(t),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const l={fid:n,authVersion:MP,appId:t.appId,sdkVersion:LP},u={method:"POST",headers:s,body:JSON.stringify(l)},c=await zP(()=>fetch(r,u));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:FP(h.authToken)}}else throw await UP("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=/^[cdef][\w-]{21}$/,ny="";function lB(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=uB(t);return aB.test(n)?n:ny}catch{return ny}}function uB(t){return oB(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new Map;function qP(t,e){const n=bp(t);KP(n,e),cB(n,e)}function KP(t,e){const n=HP.get(t);if(n)for(const r of n)r(e)}function cB(t,e){const n=dB();n&&n.postMessage({key:t,fid:e}),hB()}let Oo=null;function dB(){return!Oo&&"BroadcastChannel"in self&&(Oo=new BroadcastChannel("[Firebase] FID Change"),Oo.onmessage=t=>{KP(t.data.key,t.data.fid)}),Oo}function hB(){HP.size===0&&Oo&&(Oo.close(),Oo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB="firebase-installations-database",pB=1,qo="firebase-installations-store";let zg=null;function ex(){return zg||(zg=t1(fB,pB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(qo)}}})),zg}async function Mf(t,e){const n=bp(t),s=(await ex()).transaction(qo,"readwrite"),o=s.objectStore(qo),l=await o.get(n);return await o.put(e,n),await s.done,(!l||l.fid!==e.fid)&&qP(t,e.fid),e}async function GP(t){const e=bp(t),r=(await ex()).transaction(qo,"readwrite");await r.objectStore(qo).delete(e),await r.done}async function Ep(t,e){const n=bp(t),s=(await ex()).transaction(qo,"readwrite"),o=s.objectStore(qo),l=await o.get(n),u=e(l);return u===void 0?await o.delete(n):await o.put(u,n),await s.done,u&&(!l||l.fid!==u.fid)&&qP(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(t){let e;const n=await Ep(t.appConfig,r=>{const s=mB(r),o=gB(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===ny?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mB(t){const e=t||{fid:lB(),registrationStatus:0};return QP(e)}function gB(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ho.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yB(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vB(t)}:{installationEntry:e}}async function yB(t,e){try{const n=await iB(t,e);return Mf(t.appConfig,n)}catch(n){throw VP(n)&&n.customData.serverCode===409?await GP(t.appConfig):await Mf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vB(t){let e=await cS(t.appConfig);for(;e.registrationStatus===1;)await WP(100),e=await cS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await tx(t);return r||n}return e}function cS(t){return Ep(t,e=>{if(!e)throw Ho.create("installation-not-found");return QP(e)})}function QP(t){return xB(t)?{fid:t.fid,registrationStatus:0}:t}function xB(t){return t.registrationStatus===1&&t.registrationTime+OP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB({appConfig:t,heartbeatServiceProvider:e},n){const r=_B(t,n),s=nB(t,n),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const l={installation:{sdkVersion:LP,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},c=await zP(()=>fetch(r,u));if(c.ok){const h=await c.json();return FP(h)}else throw await UP("Generate Auth Token",c)}function _B(t,{fid:e}){return`${$P(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(t,e=!1){let n;const r=await Ep(t.appConfig,o=>{if(!JP(o))throw Ho.create("not-registered");const l=o.authToken;if(!e&&TB(l))return o;if(l.requestStatus===1)return n=bB(t,e),o;{if(!navigator.onLine)throw Ho.create("app-offline");const u=kB(o);return n=EB(t,u),u}});return n?await n:r.authToken}async function bB(t,e){let n=await dS(t.appConfig);for(;n.authToken.requestStatus===1;)await WP(100),n=await dS(t.appConfig);const r=n.authToken;return r.requestStatus===0?nx(t,e):r}function dS(t){return Ep(t,e=>{if(!JP(e))throw Ho.create("not-registered");const n=e.authToken;return CB(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function EB(t,e){try{const n=await wB(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Mf(t.appConfig,r),n}catch(n){if(VP(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await GP(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mf(t.appConfig,r)}throw n}}function JP(t){return t!==void 0&&t.registrationStatus===2}function TB(t){return t.requestStatus===2&&!SB(t)}function SB(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+X5}function kB(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function CB(t){return t.requestStatus===1&&t.requestTime+OP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AB(t){const e=t,{installationEntry:n,registrationPromise:r}=await tx(e);return r?r.catch(console.error):nx(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PB(t,e=!1){const n=t;return await IB(n),(await nx(n,e)).token}async function IB(t){const{registrationPromise:e}=await tx(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t){if(!t||!t.options)throw Wg("App Configuration");if(!t.name)throw Wg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Wg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Wg(t){return Ho.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="installations",NB="installations-internal",jB=t=>{const e=t.getProvider("app").getImmediate(),n=RB(e),r=Ul(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},DB=t=>{const e=t.getProvider("app").getImmediate(),n=Ul(e,YP).getImmediate();return{getId:()=>AB(n),getToken:s=>PB(n,s)}};function OB(){Mr(new mr(YP,jB,"PUBLIC")),Mr(new mr(NB,DB,"PRIVATE"))}OB();On(DP,Zv);On(DP,Zv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="analytics",LB="firebase_id",MB="origin",VB=60*1e3,$B="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new Jf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},fr=new Yo("analytics","Analytics",FB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t){if(!t.startsWith(rx)){const e=fr.create("invalid-gtag-resource",{gtagURL:t});return Mn.warn(e.message),""}return t}function XP(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function BB(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zB(t,e){const n=BB("firebase-js-sdk-policy",{createScriptURL:UB}),r=document.createElement("script"),s=`${rx}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function WB(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function HB(t,e,n,r,s,o){const l=r[s];try{if(l)await e[l];else{const c=(await XP(n)).find(h=>h.measurementId===s);c&&await e[c.appId]}}catch(u){Mn.error(u)}t("config",s,o)}async function qB(t,e,n,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await XP(n);for(const c of l){const h=u.find(v=>v.measurementId===c),g=h&&e[h.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,s||{})}catch(o){Mn.error(o)}}function KB(t,e,n,r){async function s(o,...l){try{if(o==="event"){const[u,c]=l;await qB(t,e,n,u,c)}else if(o==="config"){const[u,c]=l;await HB(t,e,n,r,u,c)}else if(o==="consent"){const[u,c]=l;t("consent",u,c)}else if(o==="get"){const[u,c,h]=l;t("get",u,c,h)}else if(o==="set"){const[u]=l;t("set",u)}else t(o,...l)}catch(u){Mn.error(u)}}return s}function GB(t,e,n,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=KB(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function QB(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(rx)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=30,YB=1e3;class XB{constructor(e={},n=YB){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ZP=new XB;function ZB(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function e7(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:ZB(r)},o=$B.replace("{app-id}",n),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let u="";try{const c=await l.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw fr.create("config-fetch-failed",{httpStatus:l.status,responseMessage:u})}return l.json()}async function t7(t,e=ZP,n){const{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw fr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw fr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new s7;return setTimeout(async()=>{u.abort()},VB),eI({appId:r,apiKey:s,measurementId:o},l,u,e)}async function eI(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=ZP){var o;const{appId:l,measurementId:u}=t;try{await n7(r,e)}catch(c){if(u)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:l,measurementId:u};throw c}try{const c=await e7(t);return s.deleteThrottleMetadata(l),c}catch(c){const h=c;if(!r7(h)){if(s.deleteThrottleMetadata(l),u)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:l,measurementId:u};throw c}const g=Number((o=h==null?void 0:h.customData)===null||o===void 0?void 0:o.httpStatus)===503?NE(n,s.intervalMillis,JB):NE(n,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+g,backoffCount:n+1};return s.setThrottleMetadata(l,v),Mn.debug(`Calling attemptFetch again in ${g} millis`),eI(t,v,r,s)}}function n7(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),r(fr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function r7(t){if(!(t instanceof yr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class s7{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function i7(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const o=await e,l=Object.assign(Object.assign({},r),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(){if(YC())try{await XC()}catch(t){return Mn.warn(fr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Mn.warn(fr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function a7(t,e,n,r,s,o,l){var u;const c=t7(t);c.then(b=>{n[b.measurementId]=b.appId,t.options.measurementId&&b.measurementId!==t.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>Mn.error(b)),e.push(c);const h=o7().then(b=>{if(b)return r.getId()}),[g,v]=await Promise.all([c,h]);QB(o)||zB(o,g.measurementId),s("js",new Date);const x=(u=l==null?void 0:l.config)!==null&&u!==void 0?u:{};return x[MB]="firebase",x.update=!0,v!=null&&(x[LB]=v),s("config",g.measurementId,x),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e){this.app=e}_delete(){return delete vc[this.app.options.appId],Promise.resolve()}}let vc={},fS=[];const pS={};let Hg="dataLayer",u7="gtag",mS,tI,gS=!1;function c7(){const t=[];if(JC()&&t.push("This is a browser extension environment."),YV()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=fr.create("invalid-analytics-context",{errorInfo:e});Mn.warn(n.message)}}function d7(t,e,n){c7();const r=t.options.appId;if(!r)throw fr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw fr.create("no-api-key");if(vc[r]!=null)throw fr.create("already-exists",{id:r});if(!gS){WB(Hg);const{wrappedGtag:o,gtagCore:l}=GB(vc,fS,pS,Hg,u7);tI=o,mS=l,gS=!0}return vc[r]=a7(t,fS,pS,e,mS,Hg,n),new l7(t)}function h7(t,e,n,r){t=vt(t),i7(tI,vc[t.app.options.appId],e,n,r).catch(s=>Mn.error(s))}const yS="@firebase/analytics",vS="0.10.12";function f7(){Mr(new mr(hS,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return d7(r,s,n)},"PUBLIC")),Mr(new mr("analytics-internal",t,"PRIVATE")),On(yS,vS),On(yS,vS,"esm2017");function t(e){try{const n=e.getProvider(hS).getImmediate();return{logEvent:(r,s,o)=>h7(n,r,s,o)}}catch(n){throw fr.create("interop-component-reg-failed",{reason:n})}}}f7();const p7={apiKey:"AIzaSyAjVDbvzmbogD_lbGqB4MmVf3aTnTQzEh8",authDomain:"aussie-gut-pack-a896e.firebaseapp.com",projectId:"aussie-gut-pack-a896e",storageBucket:"aussie-gut-pack-a896e.firebasestorage.app",messagingSenderId:"817190270687",appId:"1:817190270687:web:357c740b79d6e243e3db6a",measurementId:"G-NEV6BN8ZKT"},sx=n1(p7),ht=Bo(sx),cs=O9(sx),qg=K5(sx);function m7(){const{isDarkMode:t}=A.useContext(Ze),e=A.useRef(null),n=A.useRef(null),r=Ur(),[s,o]=A.useState(!0),[l,u]=A.useState(null),[c,h]=A.useState(!1),[g,v]=A.useState(!1),[x,b]=A.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[k,O]=A.useState(0),[P,D]=A.useState(null),[V,$]=A.useState(null),[W,B]=A.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);A.useEffect(()=>{(async()=>{var ge,$e,Ge;o(!0),u(null);try{const be=Gn(ht,"content","home");console.log("Fetching content/home...");const ce=await Zc(be);console.log("Document exists:",ce.exists());let J={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"Here at Aussie Gut Pack, we believe life should be…eel less like a chore and more like an adventure.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin.","Eat a fiber-rich meal.","Practice 5 minutes of deep breathing."],lastUpdated:null};if(ce.exists()){const fe=ce.data();console.log("Firestore data:",fe),J={...J,...fe,quotes:Array.isArray(fe.quotes)?fe.quotes:J.quotes,currentWorkout:{description:((ge=fe.currentWorkout)==null?void 0:ge.description)||J.currentWorkout.description,warmup:Array.isArray(($e=fe.currentWorkout)==null?void 0:$e.warmup)?fe.currentWorkout.warmup:J.currentWorkout.warmup,main:Array.isArray((Ge=fe.currentWorkout)==null?void 0:Ge.main)?fe.currentWorkout.main:J.currentWorkout.main},scheduledWorkouts:Array.isArray(fe.scheduledWorkouts)?fe.scheduledWorkouts:[],aboutUs:fe.aboutUs||J.aboutUs,dailyChallenges:Array.isArray(fe.dailyChallenges)?fe.dailyChallenges:J.dailyChallenges,lastUpdated:fe.lastUpdated||J.lastUpdated}}else console.warn("No document found at content/home, initializing..."),await Rf(be,J);const te=new Date,z=[...J.scheduledWorkouts];let ne=!1;if(z.sort((fe,Te)=>new Date(fe.updateDateTime)-new Date(Te.updateDateTime)),z.length>0){const fe=z[0],Te=new Date(fe.updateDateTime);te>=Te&&(!J.lastUpdated||new Date(J.lastUpdated)<Te)&&(J.currentWorkout={description:fe.description||"",warmup:fe.warmup||[],main:fe.main||[]},z.shift(),J.scheduledWorkouts=z,J.lastUpdated=te.toISOString(),ne=!0)}ne&&(await Rf(be,J,{merge:!0}),console.log("Updated Firestore document with new workout")),console.log("Setting content:",J),b(J);try{const fe=jt(ht,"content","blog","posts"),Te=await Vn(fe);if(Te.empty){console.log("No blog posts found"),D({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."});return}const je=Te.docs.map(ie=>({id:ie.id,title:ie.data().title||"Untitled Post",date:ie.data().date||new Date().toISOString(),blocks:ie.data().blocks||[]}));if(je.length>0){je.sort((q,re)=>new Date(re.date)-new Date(q.date));const ie=je[0],oe=K(ie);D({...ie,excerpt:oe});const he=new Date("2025-04-16T00:00:00Z"),Z=je.filter(q=>new Date(q.date)>he).sort((q,re)=>new Date(q.date)-new Date(re.date));if(Z.length>0){const q=Z[0],re=K(q);$({...q,excerpt:re})}}}catch(fe){console.error("Error fetching blog posts:",fe),D({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}}catch(be){console.error("Error in fetchAndUpdateContent:",be),u("Failed to load content. Please try again later.")}finally{o(!1),console.log("isLoading set to false")}})()},[]);const K=L=>{if(!L||!L.blocks||L.blocks.length===0)return"Read more...";const ge=L.blocks.find($e=>$e.type==="paragraph"||$e.type==="list"||$e.type==="bullet");return ge?ge.type==="paragraph"&&ge.content?ge.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(ge.content)&&ge.content.length>0?ge.content[0]+(ge.content.length>1?"...":""):"Read more...":"Read more..."};A.useEffect(()=>{const L=new IntersectionObserver($e=>{$e.forEach(Ge=>{const be=Ge.isIntersecting;console.log(`IntersectionObserver: ${Ge.target===e.current?"headerRef":"roofRef"} isIntersecting: ${be}`),Ge.target===e.current&&h(be),Ge.target===n.current&&v(be)})},{threshold:.1});e.current&&L.observe(e.current),n.current&&L.observe(n.current);const ge=setTimeout(()=>{g||(console.log("IntersectionObserver timeout: Forcing isRoofVisible to true"),v(!0)),c||(console.log("IntersectionObserver timeout: Forcing isHeaderVisible to true"),h(!0))},2e3);return()=>{e.current&&L.unobserve(e.current),n.current&&L.unobserve(n.current),clearTimeout(ge)}},[c,g]),A.useEffect(()=>{const L=setInterval(()=>{O(ge=>(ge+1)%(x.quotes.length||1))},4e3);return()=>clearInterval(L)},[x.quotes.length]),A.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(W))},[W]);const I={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},S={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},T=L=>{B(ge=>ge.includes(L)?ge.filter($e=>$e!==L):[...ge,L])},R=x.dailyChallenges.length>0&&W.length===x.dailyChallenges.length&&x.dailyChallenges.every((L,ge)=>W.includes(ge)),j="https://aussiegutpack.com",F=`${j}${r.pathname==="/"?"":r.pathname}`;return f.jsxs(f.Fragment,{children:[f.jsxs(k2,{children:[f.jsx("title",{children:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{name:"description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{name:"keywords",content:"gut health, digestive health, Australian Shepherd, wellness, fitness, daily challenges, Aussie Gut Pack"}),f.jsx("meta",{name:"robots",content:"index, follow"}),f.jsx("meta",{property:"og:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{property:"og:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{property:"og:type",content:"website"}),f.jsx("meta",{property:"og:url",content:F}),f.jsx("meta",{property:"og:image",content:`${j}/images/og-image.jpg`}),f.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),f.jsx("meta",{name:"twitter:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),f.jsx("meta",{name:"twitter:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),f.jsx("meta",{name:"twitter:image",content:`${j}/images/og-image.jpg`}),P&&f.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:P.title,datePublished:P.date,description:P.excerpt,author:{"@type":"Organization",name:"Aussie Gut Pack"},publisher:{"@type":"Organization",name:"Aussie Gut Pack",logo:{"@type":"ImageObject",url:`${j}/images/creatine.png`}},mainEntityOfPage:{"@type":"WebPage","@id":`${j}/blog/${P.id}`}})})]}),f.jsx("main",{id:"main-content",className:`min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"100vh"},children:s?f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsx("p",{className:`text-xl ${t?"text-white":"text-red-600"}`,children:"Loading content..."})}):l?f.jsx("div",{className:"text-center text-red-600 p-4",children:l}):f.jsxs(f.Fragment,{children:[console.log("Rendering sections, content:",x),f.jsx("section",{ref:e,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:"container mx-auto text-center",children:[f.jsxs("header",{children:[f.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),f.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."})]}),f.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${c?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[f.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[f.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"About Us"}),f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.aboutUs||"No about us content available."}),f.jsx("div",{className:"flex justify-center gap-4 mt-6",children:f.jsx(Dn,{to:"/login",variant:"primary",className:"join-the-pack-button","aria-label":"Join the Aussie Gut Pack community",children:"Join the Pack"})})]}),f.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:f.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:f.jsx(iO,{className:"w-full h-full object-cover"})})})]})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsx("section",{ref:n,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${g?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[f.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),f.jsx("div",{className:"max-w-2xl mx-auto mb-8",style:{minHeight:"80px"},children:f.jsx(c0,{mode:"wait",children:x.quotes.length>0?f.jsxs(gf.p,{variants:I,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:['"',x.quotes[k],'"']},k):f.jsx("p",{className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No quotes available."})})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[f.jsxs("section",{className:"workout-section","aria-labelledby":"workout-heading",children:[f.jsx("h3",{id:"workout-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),x.currentWorkout.description?f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.currentWorkout.description}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No workout description available."}),f.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Warm Up"}),x.currentWorkout.warmup.length>0?f.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.currentWorkout.warmup.map((L,ge)=>f.jsx("li",{className:"mb-2 text-lg",children:L},`warmup-${ge}`))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No warmup exercises available."}),f.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Main Workout"}),x.currentWorkout.main.length>0?f.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.currentWorkout.main.map((L,ge)=>f.jsx("li",{className:"mb-2 text-lg",children:L},`main-${ge}`))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No main workout exercises available."}),f.jsx(Dn,{to:"/fitness-tips",variant:"primary",className:"mx-auto btn-primary bg-red-800 text-white hover:bg-red-900","aria-label":"View more fitness tips",children:"More Fitness Tips"})]}),f.jsxs("section",{className:"challenges-section","aria-labelledby":"challenges-heading",children:[f.jsx("h3",{id:"challenges-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),x.dailyChallenges.length>0?f.jsx("ul",{className:`text-left list-none pl-6 mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,role:"list",children:x.dailyChallenges.map((L,ge)=>f.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[f.jsx("input",{type:"checkbox",id:`challenge-${ge}`,checked:W.includes(ge),onChange:()=>T(ge),className:"mr-2","aria-label":`Mark challenge as completed: ${L}`,"aria-checked":W.includes(ge)}),f.jsx("label",{htmlFor:`challenge-${ge}`,children:L})]},`challenge-${ge}`))}):f.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No challenges available."}),f.jsx(c0,{children:R&&f.jsx(gf.p,{variants:S,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-green-400":"text-green-600"}`,"aria-live":"polite",children:"Great job, Pack Leader!"})})]})]})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsx("section",{className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:f.jsxs("div",{className:"container mx-auto text-center",children:[f.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),P?f.jsxs("article",{className:"mb-8",children:[f.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:P.title}),f.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:new Date(P.date).toLocaleDateString()}),f.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:P.excerpt}),f.jsx(Dn,{to:`/blog/${P.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900","aria-label":`Read more about ${P.title}`,children:"Read More"})]}):f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No blog posts available."}),V?f.jsxs("article",{children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Upcoming: ",V.title]}),f.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:["Coming on"," ",new Date(V.date).toLocaleDateString()]}),f.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:V.excerpt}),f.jsx("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-500"}`,children:"Stay tuned for this upcoming post!"})]}):f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No upcoming blog posts at this time."})]})}),f.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),f.jsxs("section",{className:`py-8 ${t?"bg-stone-800":"bg-stone-100"} text-center`,children:[f.jsx("p",{className:`text-lg mb-4 ${t?"text-white":"text-red-600"}`,children:"Want more? Sign up with us today!"}),f.jsx(Dn,{to:"/login",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900","aria-label":"Sign up for Aussie Gut Pack",children:"Sign Up"})]})]})})]})}const nI=A.createContext(),g7=({children:t})=>{const[e,n]=A.useState([]),r=c=>{n(h=>h.find(v=>v.id===c.id)?h.map(v=>v.id===c.id?{...v,quantity:v.quantity+1}:v):[...h,{...c,quantity:1}])},s=(c,h)=>{h<=0?o(c):n(g=>g.map(v=>v.id===c?{...v,quantity:h}:v))},o=c=>{n(h=>h.filter(g=>g.id!==c))},l=()=>{n([])},u=()=>e.reduce((c,h)=>c+h.price*h.quantity,0);return f.jsx(nI.Provider,{value:{cart:e,addToCart:r,updateQuantity:s,removeFromCart:o,clearCart:l,getTotalPrice:u},children:t})},Tp=()=>A.useContext(nI);function y7(){var ce;const{isDarkMode:t}=A.useContext(Ze),{cart:e,addToCart:n,updateQuantity:r,removeFromCart:s,getTotalPrice:o}=Tp(),[l,u]=A.useState([]),[c,h]=A.useState([]),[g,v]=A.useState(!1),[x,b]=A.useState(""),[k,O]=A.useState(""),[P,D]=A.useState(""),[V,$]=A.useState(!1),[W,B]=A.useState(!0),[K,I]=A.useState(!1),[S,T]=A.useState(!1),R=A.useRef(null),j=A.useRef(null),F=Qt();A.useEffect(()=>{console.log("isMiniCartOpen updated to:",V)},[V]),A.useEffect(()=>{console.log("showAll updated to:",g)},[g]),A.useEffect(()=>{const J=te=>{const z=document.querySelector(".cart-button"),ne=te.target.closest(".add-to-cart-button"),fe=Date.now(),Te=j.current?fe-j.current:1/0;console.log("Outside click handler triggered, target:",te.target),console.log("Is target an Add to Cart button?",!!ne),console.log("Time since last Add to Cart click:",Te),console.log("IsMiniCartOpen?",V),console.log("OpenedByAdd?",K),V&&!te.target.closest(".mini-cart-sidebar")&&!(z!=null&&z.contains(te.target))&&!ne&&Te>100&&!K&&(console.log("Outside click detected, closing sidebar"),$(!1))};return document.addEventListener("click",J),()=>document.removeEventListener("click",J)},[V,K]),A.useEffect(()=>{(async()=>{try{B(!0);const z=(await Vn(jt(ht,"categories"))).docs.map(Te=>({id:Te.id,...Te.data()}));u(z);const fe=(await Vn(jt(ht,"products"))).docs.map(Te=>({id:Te.id,...Te.data()}));h(fe)}catch(te){console.error("Error fetching data from Firestore:",te)}finally{B(!1)}})()},[]),A.useEffect(()=>(e.length>0&&(R.current&&clearTimeout(R.current),console.log("Cart updated, opening sidebar, cart length:",e.length),I(!0),$(!0),e.length!==1&&(R.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),$(!1),I(!1)},3e3))),()=>{R.current&&clearTimeout(R.current)}),[e]),A.useEffect(()=>{e.length===0&&V&&(console.log("Cart is empty, closing sidebar"),$(!1),I(!1))},[e,V]);const L=J=>{j.current=Date.now(),n(J)},ge=J=>{const te=[...J];switch(x){case"price-asc":return te.sort((z,ne)=>z.price-ne.price);case"price-desc":return te.sort((z,ne)=>ne.price-z.price);case"name-asc":return te.sort((z,ne)=>z.name.localeCompare(ne.name));case"name-desc":return te.sort((z,ne)=>ne.name.localeCompare(z.name));default:return te}},$e=c.filter(J=>P?J.name.toLowerCase().includes(P.toLowerCase())||J.description.toLowerCase().includes(P.toLowerCase()):!0),Ge=k?$e.filter(J=>J.categoryId===k):$e,be=ge(Ge);return f.jsxs("div",{className:`min-h-screen container mx-auto px-4 py-8 md:px-6 md:py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:`text-3xl md:text-4xl font-bold transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Pack"}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-3 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950 md:px-4",onClick:J=>{J.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",V),$(!V)},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),f.jsx("span",{className:"hidden md:inline",children:"Cart"}),Array.isArray(e)&&e.length>0&&f.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-5 w-5 md:h-6 md:w-6 flex items-center justify-center text-xs md:text-sm transition-all duration-300 ease-in-out ${e.length>0?"animate-bounce":""}`,children:e.reduce((J,te)=>J+te.quantity,0)})]}),f.jsx("button",{onClick:()=>T(!S),className:"md:hidden text-white focus:outline-none",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})})]})]}),f.jsxs("div",{className:`${S?"block":"hidden"} md:block mb-6 transition-all duration-300 ease-in-out`,children:[f.jsx("h2",{className:`text-2xl md:text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Products"}),f.jsx("div",{className:"mb-6",children:f.jsx("input",{type:"text",placeholder:"Search products by name or description...",value:P,onChange:J=>D(J.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`})}),f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full",children:[f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Filter by Section:"}),f.jsxs("select",{value:k,onChange:J=>O(J.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[f.jsx("option",{value:"",children:"All Sections"}),l.map(J=>f.jsx("option",{value:J.id,children:J.name},J.id))]})]}),f.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Sort By:"}),f.jsxs("select",{value:x,onChange:J=>b(J.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[f.jsx("option",{value:"",children:"None"}),f.jsx("option",{value:"price-asc",children:"Price: Low to High"}),f.jsx("option",{value:"price-desc",children:"Price: High to Low"}),f.jsx("option",{value:"name-asc",children:"Name: A-Z"}),f.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),f.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",g),v(J=>{const te=!J;return console.log("Setting showAll to:",te),te&&(console.log("Resetting filterCategory to show all products"),O("")),te})},className:`w-full sm:w-auto px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${t?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:g?"Group by Category":"Show All Products"})]})]}),W?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):k?f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:((ce=l.find(J=>J.id===k))==null?void 0:ce.name)||"Section"}),be.length===0?f.jsx("p",{className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:be.map(J=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:te=>{te.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${J.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:J.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",J.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:te=>{te.stopPropagation(),j.current=Date.now(),L(J)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${J.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},J.id))})]}):g?f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:be.map(J=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:te=>{te.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${J.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:J.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",J.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:te=>{te.stopPropagation(),j.current=Date.now(),L(J)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${J.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},J.id))}):l.map(J=>f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:ge(c.filter(te=>te.categoryId===J.id)).map(te=>f.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:te.image,alt:te.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:z=>{z.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${te.name}`)}}),f.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:te.name}),f.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:te.description}),f.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",te.price.toFixed(2)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:z=>{z.stopPropagation(),j.current=Date.now(),L(te)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),f.jsx("button",{onClick:()=>F(`/shop/product/${te.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},te.id))})]},J.id)),V&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:J=>{J.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),$(!1)}}),f.jsx("div",{className:`mini-cart-sidebar w-64 md:w-80 p-4 md:p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${V?"translate-x-0":"translate-x-full"} ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:f.jsxs("div",{className:`mini-cart-content ${V?"active":""}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:`text-lg md:text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Your Cart"}),f.jsx("button",{onClick:J=>{J.stopPropagation(),console.log("Close button clicked, closing sidebar"),$(!1)},className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:"✕"})]}),!Array.isArray(e)||e.length===0?f.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):f.jsxs("div",{className:"space-y-4",children:[f.jsx(zf,{component:null,children:e.map(J=>f.jsx(Bf,{timeout:300,classNames:"cart-item",children:f.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("img",{src:J.image,alt:J.name,className:"w-12 h-12 md:w-16 md:h-16 object-cover rounded-md",onError:te=>{te.target.src="/UW_placeholder.jpg"}}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:`text-xs md:text-sm font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.name}),f.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["$",J.price.toFixed(2)," x ",J.quantity]}),f.jsx("div",{className:"flex items-center gap-2 mt-2",children:f.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[J.quantity===1?f.jsx("button",{onClick:te=>{te.stopPropagation(),s(J.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):f.jsx("button",{onClick:te=>{te.stopPropagation(),r(J.id,J.quantity-1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),f.jsx("span",{className:`text-xs md:text-sm mx-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:J.quantity}),f.jsx("button",{onClick:te=>{te.stopPropagation(),r(J.id,J.quantity+1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),f.jsx("button",{onClick:te=>{te.stopPropagation(),s(J.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:"✕"})]})},J.id))}),f.jsxs("div",{className:"border-t pt-4 mt-4",children:[f.jsxs("p",{className:`text-base md:text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Subtotal: $",o().toFixed(2)]}),f.jsx("button",{onClick:J=>{J.stopPropagation(),$(!1),F("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4 text-sm md:text-base",children:"Go to Cart"}),f.jsx("button",{onClick:J=>{J.stopPropagation(),$(!1),F("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2 text-sm md:text-base",children:"Proceed to Checkout"})]})]})]})})]})]})}function v7(){const{id:t}=Uc(),{isDarkMode:e}=A.useContext(Ze),{addToCart:n}=Tp(),[r,s]=A.useState(null),[o,l]=A.useState(!0),[u,c]=A.useState([]),[h,g]=A.useState(0),[v,x]=A.useState(0),[b,k]=A.useState(""),[O,P]=A.useState(null),D=Qt();A.useEffect(()=>{const B=cs.onAuthStateChanged(K=>{P(K)});return()=>B()},[]),A.useEffect(()=>{(async()=>{try{l(!0);const K=Gn(ht,"products",t),I=await Zc(K);I.exists()?s({id:I.id,...I.data()}):(console.error("Product not found"),D("/products"));const S=jt(ht,"products",t,"reviews"),R=(await Vn(S)).docs.map(j=>({id:j.id,...j.data()}));if(c(R),R.length>0){const j=R.reduce((F,L)=>F+L.rating,0);g(j/R.length)}else g(0)}catch(K){console.error("Error fetching product or reviews:",K),D("/products")}finally{l(!1)}})()},[t,D]);const V=B=>{x(B)},$=B=>{x(B)},W=async B=>{if(B.preventDefault(),!O){alert("Please sign in to submit a review.");return}if(v<1||v>5){alert("Please select a rating between 1 and 5 stars.");return}if(!b.trim()){alert("Please enter a review comment.");return}try{const K={rating:v,comment:b,userId:O.uid,userEmail:O.email,timestamp:new Date().toISOString()},I=jt(ht,"products",t,"reviews");await jl(I,K),c([...u,K]);const S=[...u,K].reduce((T,R)=>T+R.rating,0);g(S/(u.length+1)),x(0),k("")}catch(K){console.error("Error submitting review:",K),alert("Failed to submit review. Please try again.")}};return o?f.jsx("div",{className:"flex justify-center items-center h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):r?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("button",{onClick:()=>D("/products"),className:`mb-6 text-sm font-semibold transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-500":"text-red-600 hover:text-red-800"}`,children:"← Back to Products"}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[f.jsx("div",{className:"md:w-1/2",children:f.jsx("img",{src:r.image,alt:r.name,className:"w-full h-96 object-cover rounded-md",onError:B=>{B.target.src="https://via.placeholder.com/300x200.png?text=No+Image",console.error(`Failed to load image for ${r.name}`)}})}),f.jsxs("div",{className:"md:w-1/2",children:[f.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:r.name}),f.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:r.description}),f.jsxs("p",{className:`text-xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["Price: $",r.price.toFixed(2)]}),f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(B=>f.jsx("svg",{className:`w-6 h-6 ${B<=Math.round(h)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},B))}),f.jsxs("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["(",h.toFixed(1)," from ",u.length," reviews)"]})]}),f.jsx("button",{onClick:()=>n(r),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Add to Cart"})]})]}),f.jsxs("div",{className:"mt-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:"Customer Reviews"}),f.jsxs("div",{className:`p-6 border rounded-md mb-8 ${e?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("h3",{className:`text-lg font-medium mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:"Write a Review"}),O?f.jsxs("form",{onSubmit:W,children:[f.jsx("div",{className:"flex mb-4",children:[1,2,3,4,5].map(B=>f.jsx("svg",{onMouseEnter:()=>V(B),onMouseLeave:()=>V(v),onClick:()=>$(B),className:`w-8 h-8 cursor-pointer ${B<=v?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},B))}),f.jsx("textarea",{value:b,onChange:B=>k(B.target.value),placeholder:"Write your review here...",className:`w-full p-3 border rounded-md focus:outline-none transition-all duration-300 ease-in-out mb-4 ${e?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`,rows:"4"}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Submit Review"})]}):f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["Please"," ",f.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"sign in"})," ","to write a review."]})]}),u.length===0?f.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:"No reviews yet. Be the first to review this product!"}):f.jsx("div",{className:"space-y-6",children:u.map(B=>f.jsxs("div",{className:`p-4 border rounded-md ${e?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(K=>f.jsx("svg",{className:`w-5 h-5 ${K<=B.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},K))}),f.jsx("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:new Date(B.timestamp).toLocaleDateString()})]}),f.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:B.comment}),f.jsxs("p",{className:`text-xs mt-2 transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"}`,children:["By: ",B.userEmail]})]},B.id))})]})]}):null}function x7(){const{isDarkMode:t}=A.useContext(Ze),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:s,getTotalPrice:o}=Tp(),[l,u]=A.useState(!1),[c,h]=A.useState({name:"",email:"",address:""}),g=Qt(),v=async x=>{if(x.preventDefault(),!c.name||!c.email||!c.address){alert("Please fill in all fields to proceed with checkout.");return}u(!0);try{const b={items:e,total:o(),customer:c,createdAt:new Date().toISOString(),status:"pending"};await jl(jt(ht,"orders"),b),s(),alert("Order placed successfully! Thank you for your purchase."),g("/")}catch(b){console.error("Error placing order:",b),alert("Failed to place order. Please try again.")}finally{u(!1),h({name:"",email:"",address:""})}};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Your Cart"}),e.length===0?f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),f.jsx("button",{onClick:()=>g("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):f.jsxs("div",{className:"space-y-8",children:[f.jsx("div",{className:"space-y-4",children:e.map(x=>f.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("img",{src:x.image,alt:x.name,className:"w-20 h-20 object-cover rounded-md",onError:b=>{b.target.src="https://via.placeholder.com/80"}}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:x.name}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",x.price.toFixed(2)]}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(x.price*x.quantity).toFixed(2)]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>n(x.id,x.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"-"}),f.jsx("span",{className:`text-lg ${t?"text-white":"text-red-600"}`,children:x.quantity}),f.jsx("button",{onClick:()=>n(x.id,x.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"+"})]}),f.jsx("button",{onClick:()=>r(x.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:l,children:"Remove"})]},x.id))}),f.jsxs("div",{className:`p-6 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-white":"text-red-600"}`,children:"Order Summary"}),f.jsxs("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:["Total: $",o().toFixed(2)]}),f.jsxs("form",{onSubmit:v,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Full Name"}),f.jsx("input",{type:"text",value:c.name,onChange:x=>h({...c,name:x.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:l})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Email"}),f.jsx("input",{type:"email",value:c.email,onChange:x=>h({...c,email:x.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:l})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Shipping Address"}),f.jsx("textarea",{value:c.address,onChange:x=>h({...c,address:x.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:l})]}),f.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${l?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:l,children:l?"Processing...":"Place Order"})]})]})]})]})}function w7(){const{isDarkMode:t}=A.useContext(Ze),{cart:e,updateQuantity:n,removeFromCart:r}=Tp(),s=Object.values(e).reduce((l,u)=>l+u.price*u.quantity,0),o=()=>{alert("Order placed successfully!"),Object.keys(e).forEach(l=>r(l))};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsxs("header",{className:"text-center mb-12",children:[f.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Checkout"}),f.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(e).length===0?f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),f.jsx(Dn,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([l,u])=>f.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[f.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:f.jsx("img",{src:u.image||"https://via.placeholder.com/80",alt:u.name,className:"w-full h-full object-cover rounded"})}),f.jsxs("div",{className:"flex-1 ml-4",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:u.name}),f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Color: ",u.color]}),f.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Size: ",u.size]})]}),f.jsx("button",{onClick:()=>r(l),className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:"✕"})]}),f.jsxs("div",{className:"flex items-center mt-2",children:[f.jsx("button",{onClick:()=>n(l,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),f.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${t?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:u.quantity}),f.jsx("button",{onClick:()=>n(l,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),f.jsx("div",{className:"text-right ml-4",children:u.originalPrice?f.jsxs("div",{children:[f.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["$",(u.originalPrice*u.quantity).toFixed(2)]}),f.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})]}):f.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})})]},l))}),f.jsxs("div",{className:"mt-12 text-right",children:[f.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Total: $",s.toFixed(2)]}),f.jsx(Dn,{onClick:o,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const ry=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):","• Stress: Elevates cortisol, disrupting gut flora and increasing permeability","• Glyphosate: Kills beneficial bacteria, feeds pathogenic ones","• Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections","• Seed Oils: Feed pathogenic bacteria, have a long half-life","• Refined Sugars: Feed harmful bacteria, promote dysbiosis","• Long-term Restrictive Diets: Reduce microbiome diversity","• Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
• Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
• Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
• Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesn’t survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
• Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
• A nutrient-dense, diverse, unprocessed diet with prebiotics
• Healthy exercise, sleep, and an uplifting social life worth enjoying
• Sun exposure and skin contact with nature
• Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connected—good gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function Vf({title:t,content:e,footer:n,className:r}){const{isDarkMode:s}=A.useContext(Ze);return f.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${s?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${r}`,children:[f.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:t}),e&&f.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:e}),n&&f.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:n})]})}function _7(){const{isDarkMode:t}=A.useContext(Ze);A.useEffect(()=>{});const e=ry.filter(r=>r.category==="Benefits"),n=ry.filter(r=>r.category!=="Benefits");return f.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("div",{className:"pt-16"}),f.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),f.jsxs("section",{className:"mb-8 flex-grow",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),f.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),f.jsxs("section",{className:"py-12 px-6 flex-grow",children:[f.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(r=>f.jsx(ot,{to:`/gut-health/${r.id}`,children:f.jsx(Vf,{title:r.title,content:r.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},r.id))})]}),f.jsxs("section",{className:"flex-grow",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:n.map(r=>f.jsx(ot,{to:`/gut-health/${r.id}`,children:f.jsx(Vf,{title:r.title,content:r.content,footer:`Category: ${r.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${t?"bg-stone-800":"bg-stone-50"}`})},r.id))})]})]})}function b7(){const{id:t}=Uc(),{isDarkMode:e}=A.useContext(Ze);Qt();const n=ry.find(r=>r.id.toString()===t);return n?f.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[f.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),f.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:["Category: ",n.category]}),Array.isArray(n.content)?f.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content.map((r,s)=>f.jsx("li",{className:"mb-2",children:r},s))}):f.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content}),f.jsx(Dn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):f.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[f.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),f.jsx(Dn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const E7=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function T7(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),r=l=>n([...e,l]),s=l=>n(e.filter(u=>u.id!==l)),o=e.reduce((l,u)=>l+u.price,0);return f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsx("h1",{className:`text-3xl font-bold mb-6 ${t?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Available Products"}),E7.map(l=>f.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${t?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[f.jsxs("div",{children:[f.jsx("h3",{className:`font-bold ${t?"text-gray-300":"text-gray-800"}`,children:l.name}),f.jsxs("p",{className:`${t?"text-green-400":"text-green-700"}`,children:["$",l.price]})]}),f.jsx(Dn,{onClick:()=>r(l),variant:"primary",children:"Add to Cart"})]},l.id))]}),f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Your Cart"}),e.length===0?f.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):f.jsxs(f.Fragment,{children:[e.map(l=>f.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${t?"border-gray-700":"border-gray-300"}`,children:[f.jsx("span",{className:`${t?"text-gray-300":"text-gray-800"}`,children:l.name}),f.jsxs("div",{children:[f.jsxs("span",{className:`mr-4 ${t?"text-green-400":"text-green-700"}`,children:["$",l.price]}),f.jsx("button",{onClick:()=>s(l.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},l.id)),f.jsxs("div",{className:`mt-4 font-bold ${t?"text-green-300":"text-green-800"}`,children:["Total: $",o.toFixed(2)]}),f.jsx(Dn,{className:"mt-4 w-full",variant:"primary",disabled:e.length===0,children:"Checkout"})]})]})]})]})}var S7={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function k7(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return S7[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function xS(t){var e=k7(t);return"".concat(e.value).concat(e.unit)}var C7=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var s=document.createElement("style");document.head.appendChild(s);var o=s.sheet,l=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return o&&o.insertRule(l,0),r},$f=function(){return $f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},$f.apply(this,arguments)},A7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n},P7=C7("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function $c(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,s=r===void 0?"#000000":r,o=t.speedMultiplier,l=o===void 0?1:o,u=t.cssOverride,c=u===void 0?{}:u,h=t.size,g=h===void 0?35:h,v=A7(t,["loading","color","speedMultiplier","cssOverride","size"]),x=$f({background:"transparent !important",width:xS(g),height:xS(g),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(P7," ").concat(.75/l,"s 0s infinite linear"),animationFillMode:"both"},c);return n?A.createElement("span",$f({style:x},v)):null}const I7=()=>{const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState(!0),[o,l]=A.useState(null);A.useEffect(()=>{(async()=>{try{const b=jt(ht,"content","blog","posts"),O=(await Vn(b)).docs.map(P=>{var D,V;return{id:P.id,title:P.data().title,blocks:P.data().blocks||[{type:"paragraph",content:""}],date:P.data().date||"",lastEdited:P.data().lastEdited||"",image:((V=(D=P.data().blocks)==null?void 0:D.find($=>$.type==="image"))==null?void 0:V.content)||""}});if(console.log("Fetched blog posts:",O),O.length>0){const P=O.sort((D,V)=>{const $=D.date?new Date(D.date):null,W=V.date?new Date(V.date):null;return console.log(`Sorting: ${D.title} (${D.date}) -> ${$}, ${V.title} (${V.date}) -> ${W}`),!$||isNaN($.getTime())?1:!W||isNaN(W.getTime())?-1:W-$});console.log("Sorted blog posts:",P),n(P)}else n([])}catch(b){console.error("Error fetching blog posts:",b),l("Failed to load blog posts. Please try again later."),n([])}finally{s(!1)}})()},[]);const u=x=>{if(!x)return"Date not set";const b=new Date(x);return isNaN(b.getTime())?"Invalid Date":b.toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"})},c=x=>{if(!x)return"Never edited";const b=new Date(x);return isNaN(b.getTime())?"Invalid Timestamp":b.toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},h=x=>{if(!x.blocks||x.blocks.length===0)return"Read more...";const b=x.blocks.find(k=>k.type==="paragraph"||k.type==="list"||k.type==="bullet");return b?b.type==="paragraph"?b.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(b.content)?b.content[0]+(b.content.length>1?"...":""):"Read more...":"Read more..."},g=x=>{if(!x.date)return!1;const b=new Date("2025-04-16T00:00:00Z"),k=new Date(x.date);return isNaN(k.getTime())?!1:k>b},v={hidden:{opacity:0,y:20},visible:x=>({opacity:1,y:0,transition:{delay:x*.1,duration:.5,ease:"easeOut"}})};return r?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),f.jsx("div",{className:"text-center",children:f.jsx($c,{color:t?"#f87171":"#b91c1c"})})]}):o?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:o})]}):f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.length===0?f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:f.jsx(c0,{children:e.map((x,b)=>{const k=g(x);return f.jsx(gf.div,{custom:b,initial:"hidden",animate:"visible",variants:v,className:"group",children:k?f.jsx(Vf,{title:f.jsxs("span",{className:"flex items-center",children:[f.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-700"} group-hover:underline`,children:x.title}),f.jsx("span",{className:`ml-2 text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:"(Coming Soon)"})]}),footer:f.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[f.jsxs("p",{children:["Publish Date: ",u(x.date)]}),f.jsxs("p",{children:["Last Edited: ",c(x.lastEdited)]})]}),content:f.jsxs(f.Fragment,{children:[x.image&&f.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:f.jsx("img",{src:x.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out"})}),f.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(x)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 opacity-50":"bg-white border-red-800/50 opacity-50"} cursor-not-allowed overflow-hidden`}):f.jsx(ot,{to:`/blog/${x.id}`,className:"block",children:f.jsx(Vf,{title:f.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-200":"text-stone-800"} group-hover:underline`,children:x.title}),footer:f.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[f.jsxs("p",{children:["Published: ",u(x.date)]}),f.jsxs("p",{children:["Last Edited: ",c(x.lastEdited)]})]}),content:f.jsxs(f.Fragment,{children:[x.image&&f.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:f.jsx("img",{src:x.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"})}),f.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(x)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 hover:bg-stone-700 hover:shadow-xl":"bg-white border-red-800/50 hover:bg-stone-100 hover:shadow-xl"} overflow-hidden`})})},x.id)})})})]})},R7=()=>{const{id:t}=Uc(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0),[l,u]=A.useState(null),[c,h]=A.useState(!1);A.useEffect(()=>{(async()=>{try{o(!0),u(null);const k=Gn(ht,"content","blog","posts",t),O=await Zc(k);if(O.exists()){const P={id:O.id,...O.data()},D=new Date("2025-04-16T00:00:00Z"),V=P.date?new Date(P.date):null;V&&V>D?h(!0):h(!1),r(P)}else r(null)}catch(k){console.error("Error fetching blog post:",k),u("Failed to load blog post. Please try again later.")}finally{o(!1)}})()},[t]);const g=b=>b?new Date(b).toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"}):"Date not set",v=b=>b?new Date(b).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",x={hidden:{opacity:0,y:20},visible:b=>({opacity:1,y:0,transition:{delay:b*.1,duration:.5,ease:"easeOut"}})};return s?f.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:f.jsx("div",{className:"text-center",children:f.jsx($c,{color:e?"#f87171":"b91c1c"})})}):l?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Error"}),f.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-600"}`,children:l}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):n?c?f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Coming Soon"}),f.jsxs("p",{className:`text-lg transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["This blog post will be available on ",g(n.date),"."]}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):f.jsx("div",{className:`min-h-screen container mx-auto px-4 sm:px-6 lg:px-8 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsxs("div",{className:`relative rounded-xl shadow-lg p-8 mb-12 overflow-hidden border-t-4 ${e?"bg-gradient-to-r from-stone-800 to-stone-700 border-red-400/50":"bg-gradient-to-r from-white to-stone-100 border-red-800/50"}`,children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),f.jsxs("div",{className:`text-lg transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"} flex flex-col sm:flex-row sm:items-center sm:space-x-4`,children:[f.jsxs("p",{children:["Published: ",g(n.date)]}),f.jsxs("p",{children:["Last Edited: ",v(n.lastEdited)]})]})]}),f.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${e?"text-stone-200 prose-invert":"text-stone-700"}`,children:n.blocks&&n.blocks.length>0?n.blocks.map((b,k)=>f.jsx(gf.div,{custom:k,initial:"hidden",animate:"visible",variants:x,className:"mb-8",children:b.type==="paragraph"?f.jsx("p",{className:"leading-relaxed",children:b.content}):b.type==="list"&&Array.isArray(b.content)?f.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:b.content.map((O,P)=>f.jsx("li",{className:"leading-relaxed",children:O},P))}):b.type==="bullet"&&Array.isArray(b.content)?f.jsx("ul",{className:"list-disc pl-6 space-y-2",children:b.content.map((O,P)=>f.jsx("li",{className:"leading-relaxed",children:O},P))}):b.type==="image"&&b.content?f.jsx("div",{className:"my-6",children:f.jsx("img",{src:b.content,alt:"Blog content",className:"w-full max-w-lg mx-auto rounded-lg shadow-md"})}):b.type==="link"&&b.content.url?f.jsx(ot,{to:b.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:b.content.text||b.content.url}):f.jsx("p",{className:"text-red-500",children:"Invalid block format"})},k)):f.jsx("p",{children:"No content available."})}),f.jsxs(Dn,{to:"/blog",variant:"primary",className:"mt-12 inline-flex items-center px-6 py-3 rounded-lg shadow-md transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 hover:shadow-lg",children:[f.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Blog"]})]})}):f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),f.jsx(Dn,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},N7=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function j7(){const{isDarkMode:t}=A.useContext(Ze);return f.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[f.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${t?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),f.jsx("div",{className:"space-y-4",children:N7.map((e,n)=>f.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${t?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[f.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${t?"group-open:text-green-400":"group-open:text-green-600"}`,children:[e.question,f.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:"▼"})]}),f.jsx("p",{className:"mt-2 text-gray-600",children:e.answer})]},n))})]})}class rd{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const D7=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},nn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:D7()},ix=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},O7=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=ix(t);nn.publicKey=n.publicKey,nn.blockHeadless=n.blockHeadless,nn.storageProvider=n.storageProvider,nn.blockList=n.blockList,nn.limitRate=n.limitRate,nn.origin=n.origin||e},rI=async(t,e,n={})=>{const r=await fetch(nn.origin+t,{method:"POST",headers:n,body:e}),s=await r.text(),o=new rd(r.status,s);if(r.ok)return o;throw o},sI=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},L7=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},iI=t=>t.webdriver||!t.languages||t.languages.length===0,oI=()=>new rd(451,"Unavailable For Headless Browser"),M7=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},V7=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},$7=(t,e)=>t instanceof FormData?t.get(e):t[e],aI=(t,e)=>{if(V7(t))return!1;M7(t.list,t.watchVariable);const n=$7(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},lI=()=>new rd(403,"Forbidden"),F7=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},U7=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},uI=async(t,e,n)=>{if(!e.throttle||!n)return!1;F7(e.throttle,e.id);const r=e.id||t;return await U7(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},cI=()=>new rd(429,"Too Many Requests"),B7=async(t,e,n,r)=>{const s=ix(r),o=s.publicKey||nn.publicKey,l=s.blockHeadless||nn.blockHeadless,u=s.storageProvider||nn.storageProvider,c={...nn.blockList,...s.blockList},h={...nn.limitRate,...s.limitRate};return l&&iI(navigator)?Promise.reject(oI()):(sI(o,t,e),L7(n),n&&aI(c,n)?Promise.reject(lI()):await uI(location.pathname,h,u)?Promise.reject(cI()):rI("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},z7=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},W7=t=>typeof t=="string"?document.querySelector(t):t,H7=async(t,e,n,r)=>{const s=ix(r),o=s.publicKey||nn.publicKey,l=s.blockHeadless||nn.blockHeadless,u=nn.storageProvider||s.storageProvider,c={...nn.blockList,...s.blockList},h={...nn.limitRate,...s.limitRate};if(l&&iI(navigator))return Promise.reject(oI());const g=W7(n);sI(o,t,e),z7(g);const v=new FormData(g);return aI(c,v)?Promise.reject(lI()):await uI(location.pathname,h,u)?Promise.reject(cI()):(v.append("lib_version","4.4.1"),v.append("service_id",t),v.append("template_id",e),v.append("user_id",o),rI("/api/v1.0/email/send-form",v))},q7={init:O7,send:B7,sendForm:H7,EmailJSResponseStatus:rd};function K7(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState({name:"",email:"",message:""}),[r,s]=A.useState(""),o=u=>{const{name:c,value:h}=u.target;n(g=>({...g,[c]:h}))},l=u=>{u.preventDefault(),s("Sending..."),q7.send("service_abc123","template_xyz789",{from_name:e.name,from_email:e.email,message:e.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(c=>{s("Thank you! Your inquiry has been sent."),n({name:"",email:"",message:""}),setTimeout(()=>s(""),3e3)},c=>{s("Failed to send message. Please try again."),console.error("EmailJS error:",c.text),setTimeout(()=>s(""),3e3)})};return f.jsx("div",{className:`min-h-screen py-12 px-4 ${t?"bg-stone-900":"bg-white"}`,children:f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Contact Us"}),f.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),f.jsxs("form",{onSubmit:l,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Message"}),f.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:o,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),r&&f.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:r})]})]})})}function G7(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState(""),[r,s]=A.useState(""),[o,l]=A.useState(!1),[u,c]=A.useState(null),h=Qt();A.useEffect(()=>{const x=yp(cs,b=>{l(!!b)});return()=>x()},[]);const g=async x=>{x.preventDefault(),c(null);try{await b8(cs,e,r),l(!0)}catch(b){c("Failed to log in: "+b.message)}},v=async()=>{try{await vp(cs),l(!1),h("/admin")}catch(x){c("Failed to log out: "+x.message)}};return o?f.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("button",{onClick:()=>h("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),f.jsx("button",{onClick:()=>h("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),f.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),f.jsx("button",{onClick:()=>h("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),f.jsx("button",{onClick:v,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):f.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:f.jsxs("div",{className:`p-6 ${t?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[f.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),u&&f.jsx("p",{className:`text-red-500 mb-4 ${t?"text-red-400":"text-red-600"}`,children:u}),f.jsxs("form",{onSubmit:g,children:[f.jsx("div",{className:"mb-4",children:f.jsx("input",{type:"email",value:e,onChange:x=>n(x.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),f.jsx("div",{className:"mb-4",children:f.jsx("input",{type:"password",value:r,onChange:x=>s(x.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function Q7(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([""]),[r,s]=A.useState(""),[o,l]=A.useState([""]),[u,c]=A.useState([{title:"Main Workout",exercises:[""]}]),[h,g]=A.useState([]),[v,x]=A.useState(""),[b,k]=A.useState([""]),[O,P]=A.useState(null),D=Qt();A.useEffect(()=>{const Z=yp(cs,q=>{q||D("/admin")});return()=>Z()},[D]),A.useEffect(()=>{(async()=>{var q,re,ye,We,St,vr,Ws,Hs;try{const qs=Gn(ht,"content","home"),fs=await Zc(qs);if(fs.exists()){const wt=fs.data();n((q=wt.quotes)!=null&&q.length?wt.quotes:[""]),s(((re=wt.currentWorkout)==null?void 0:re.description)||""),l((We=(ye=wt.currentWorkout)==null?void 0:ye.warmup)!=null&&We.length?wt.currentWorkout.warmup:[""]),c((vr=(St=wt.currentWorkout)==null?void 0:St.sections)!=null&&vr.length?wt.currentWorkout.sections:[{title:"Main Workout",exercises:[""]}]),g((Ws=wt.scheduledWorkouts)!=null&&Ws.length?wt.scheduledWorkouts.map(on=>{var ps;const Gi=(ps=on.sections)!=null&&ps.length?on.sections:[{title:"Warm Up",exercises:on.warmup||[""]},{title:"Main Workout",exercises:on.main||[""]}];return{description:on.description||"",sections:Gi,updateDateTime:on.updateDateTime||""}}):[{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),x(wt.aboutUs||""),k((Hs=wt.dailyChallenges)!=null&&Hs.length?wt.dailyChallenges:[""])}}catch(qs){P("Failed to load content: "+qs.message)}})()},[]);const V=async()=>{P(null);const Z={quotes:e.filter(q=>q.trim()!==""),currentWorkout:{description:r,warmup:o.filter(q=>q.trim()!==""),sections:u.filter(q=>q.title.trim()&&q.exercises.some(re=>re.trim())).map(q=>({title:q.title,exercises:q.exercises.filter(re=>re.trim()!=="")}))},scheduledWorkouts:h.filter(q=>q.description.trim()&&q.sections.some(re=>re.title.trim()&&re.exercises.some(ye=>ye.trim()))&&q.updateDateTime.trim()).map(q=>({description:q.description,sections:q.sections.filter(re=>re.title.trim()&&re.exercises.some(ye=>ye.trim())).map(re=>({title:re.title,exercises:re.exercises.filter(ye=>ye.trim()!=="")})),updateDateTime:q.updateDateTime})),aboutUs:v.trim(),dailyChallenges:b.filter(q=>q.trim()!==""),lastUpdated:new Date().toISOString()};try{await Rf(Gn(ht,"content","home"),Z),alert("Home page content saved successfully!"),D("/admin")}catch(q){P("Error saving changes: "+q.message)}},$=async()=>{try{await vp(cs),D("/admin")}catch(Z){P("Failed to log out: "+Z.message)}},W=()=>n([...e,""]),B=Z=>n(e.filter((q,re)=>re!==Z)),K=(Z,q)=>{const re=[...e];re[Z]=q,n(re)},I=()=>l([...o,""]),S=Z=>l(o.filter((q,re)=>re!==Z)),T=(Z,q)=>{const re=[...o];re[Z]=q,l(re)},R=()=>c([...u,{title:"",exercises:[""]}]),j=Z=>c(u.filter((q,re)=>re!==Z)),F=(Z,q)=>{const re=[...u];re[Z].title=q,c(re)},L=Z=>{const q=[...u];q[Z].exercises.push(""),c(q)},ge=(Z,q)=>{const re=[...u];re[Z].exercises=re[Z].exercises.filter((ye,We)=>We!==q),c(re)},$e=(Z,q,re)=>{const ye=[...u];ye[Z].exercises[q]=re,c(ye)},Ge=()=>g([...h,{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),be=Z=>g(h.filter((q,re)=>re!==Z)),ce=Z=>{if(!Z)return"";const q=new Date(Z);return new Date(q.getTime()-5*60*60*1e3).toISOString().slice(0,16)},J=(Z,q,re)=>{const ye=[...h];if(q==="updateDateTime"){const We=new Date(re),St=new Date(We.getTime()-5*60*60*1e3);ye[Z][q]=St.toISOString(),console.log(`Scheduled workout ${Z} updateDateTime set to (UTC): ${ye[Z][q]}`)}else ye[Z][q]=re;g(ye)},te=Z=>{const q=[...h];q[Z].sections.push({title:"",exercises:[""]}),g(q)},z=(Z,q)=>{const re=[...h];re[Z].sections=re[Z].sections.filter((ye,We)=>We!==q),g(re)},ne=(Z,q,re)=>{const ye=[...h];ye[Z].sections[q].title=re,g(ye)},fe=(Z,q)=>{const re=[...h];re[Z].sections[q].exercises.push(""),g(re)},Te=(Z,q,re)=>{const ye=[...h];ye[Z].sections[q].exercises=ye[Z].sections[q].exercises.filter((We,St)=>St!==re),g(ye)},je=(Z,q,re,ye)=>{const We=[...h];We[Z].sections[q].exercises[re]=ye,g(We)},ie=()=>k([...b,""]),oe=Z=>k(b.filter((q,re)=>re!==Z)),he=(Z,q)=>{const re=[...b];re[Z]=q,k(re)};return f.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),O&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:O}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),e.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>K(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${q+1}`}),f.jsx("button",{onClick:()=>B(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e.length===1,children:"Remove"})]},q)),f.jsx("button",{onClick:W,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),f.jsx("textarea",{value:v,onChange:Z=>x(Z.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),f.jsx("textarea",{value:r,onChange:Z=>s(Z.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),f.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),o.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>T(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${q+1}`}),f.jsx("button",{onClick:()=>S(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:o.length===1,children:"Remove"})]},`warmup-${q}`)),f.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),u.map((Z,q)=>f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("input",{type:"text",value:Z.title,onChange:re=>F(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),f.jsx("button",{onClick:()=>j(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:u.length===1,children:"Remove Section"})]}),Z.exercises.map((re,ye)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:re,onChange:We=>$e(q,ye,We.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${ye+1}`}),f.jsx("button",{onClick:()=>ge(q,ye),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Z.exercises.length===1,children:"Remove"})]},`section-${q}-exercise-${ye}`)),f.jsx("button",{onClick:()=>L(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`section-${q}`)),f.jsx("button",{onClick:R,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Workout Section"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),h.map((Z,q)=>f.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("input",{type:"datetime-local",value:ce(Z.updateDateTime),onChange:re=>J(q,"updateDateTime",re.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),f.jsx("textarea",{value:Z.description,onChange:re=>J(q,"description",re.target.value),className:`border p-2 w-full h-24 mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),Z.sections.map((re,ye)=>f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("input",{type:"text",value:re.title,onChange:We=>ne(q,ye,We.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),f.jsx("button",{onClick:()=>z(q,ye),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Z.sections.length===1,children:"Remove Section"})]}),re.exercises.map((We,St)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:We,onChange:vr=>je(q,ye,St,vr.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${St+1}`}),f.jsx("button",{onClick:()=>Te(q,ye,St),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:re.exercises.length===1,children:"Remove"})]},`scheduled-section-${q}-${ye}-exercise-${St}`)),f.jsx("button",{onClick:()=>fe(q,ye),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`scheduled-section-${q}-${ye}`)),f.jsx("button",{onClick:()=>te(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 mr-2",children:"Add Workout Section"}),f.jsx("button",{onClick:()=>be(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:h.length===1&&!h[0].description,children:"Remove Workout"})]},q)),f.jsx("button",{onClick:Ge,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),b.map((Z,q)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:Z,onChange:re=>he(q,re.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${q+1}`}),f.jsx("button",{onClick:()=>oe(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:b.length===1,children:"Remove"})]},q)),f.jsx("button",{onClick:ie,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),f.jsx("button",{onClick:V,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),f.jsx("button",{onClick:()=>D("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:$,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function J7(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState(null),[o,l]=A.useState(null),u=Qt();A.useEffect(()=>{const I=yp(cs,S=>{S||u("/admin")});return()=>I()},[u]),A.useEffect(()=>{(async()=>{try{const S=jt(ht,"content","blog","posts"),j=(await Vn(S)).docs.map(F=>({id:F.id,title:F.data().title||"",blocks:F.data().blocks||[{type:"paragraph",content:""}],date:F.data().date||"",lastEdited:F.data().lastEdited||""})).sort((F,L)=>{const ge=F.date?new Date(F.date):new Date(0);return(L.date?new Date(L.date):new Date(0))-ge});n(j.length?j:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:""}])}catch(S){l("Failed to load blog posts: "+S.message)}})()},[]);const c=async()=>{l(null);try{const I=jt(ht,"content","blog","posts"),S=await Vn(I);for(const T of S.docs)await Yh(T.ref);for(const T of e)if(T.title.trim()&&T.blocks.some(R=>R.type==="paragraph"||R.type==="image"||R.type==="link"?R.content.trim():R.content.some(j=>j.trim()))){const R=T.id||Date.now().toString();await Rf(Gn(I,R),{id:R,title:T.title,blocks:T.blocks.map(j=>({type:j.type,content:j.type==="paragraph"||j.type==="image"?j.content:j.type==="link"?{url:j.content.url,text:j.content.text}:j.content.filter(F=>F.trim()!=="")})),date:T.date||new Date().toISOString(),lastEdited:T.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),s(null),u("/admin")}catch(I){l("Error saving blog posts: "+I.message)}},h=async()=>{try{await vp(cs),u("/admin")}catch(I){l("Failed to log out: "+I.message)}},g=()=>{const I=[...e,{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:new Date().toISOString()}];n(I),s(I.length-1)},v=I=>{const S=e.filter((T,R)=>R!==I);n(S),s(null)},x=(I,S,T)=>{const R=[...e];R[I]={...R[I],[S]:T,lastEdited:new Date().toISOString()},n(R)},b=(I,S)=>{const T=[...e];T[I].blocks.push({type:S,content:S==="paragraph"||S==="image"?"":S==="link"?{url:"",text:""}:[""]}),T[I].lastEdited=new Date().toISOString(),n(T)},k=(I,S)=>{const T=[...e];T[I].blocks=T[I].blocks.filter((R,j)=>j!==S),T[I].lastEdited=new Date().toISOString(),n(T)},O=(I,S,T)=>{const R=[...e];R[I].blocks[S]={type:T,content:T==="paragraph"||T==="image"?"":T==="link"?{url:"",text:""}:[""]},R[I].lastEdited=new Date().toISOString(),n(R)},P=(I,S,T)=>{const R=[...e];R[I].blocks[S].content=T,R[I].lastEdited=new Date().toISOString(),n(R)},D=(I,S,T,R)=>{const j=[...e];j[I].blocks[S].content[T]=R,j[I].lastEdited=new Date().toISOString(),n(j)},V=(I,S)=>{const T=[...e];T[I].blocks[S].content.push(""),T[I].lastEdited=new Date().toISOString(),n(T)},$=(I,S,T)=>{const R=[...e];R[I].blocks[S].content=R[I].blocks[S].content.filter((j,F)=>F!==T),R[I].lastEdited=new Date().toISOString(),n(R)},W=(I,S,T,R)=>{const j=[...e];j[I].blocks[S].content[T]=R,j[I].lastEdited=new Date().toISOString(),n(j)},B=I=>I?new Date(I).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",K=I=>I?new Date(I).toLocaleDateString():"Not set";return f.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[f.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),o&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:o}),r===null?f.jsxs("div",{className:"mb-6",children:[e.length===0?f.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):f.jsx("div",{className:"grid gap-4",children:e.map((I,S)=>f.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>s(S),children:[f.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:I.title||"Untitled Post"}),f.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Publish Date: ",K(I.date)]}),f.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",B(I.lastEdited)]})]},S))}),f.jsx("button",{onClick:g,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),f.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[f.jsx("input",{type:"text",value:e[r].title,onChange:I=>x(r,"title",I.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Publish Date:"}),f.jsx("input",{type:"date",value:e[r].date.split("T")[0]||"",onChange:I=>x(r,"date",I.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`})]}),f.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",B(e[r].lastEdited)]}),f.jsxs("div",{className:"mb-2",children:[f.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Content Blocks"}),e[r].blocks.map((I,S)=>f.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[f.jsxs("div",{className:"flex items-center mb-2",children:[f.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Block Type:"}),f.jsxs("select",{value:I.type,onChange:T=>O(r,S,T.target.value),className:`border p-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[f.jsx("option",{value:"paragraph",children:"Paragraph"}),f.jsx("option",{value:"list",children:"Numbered List"}),f.jsx("option",{value:"bullet",children:"Bullet Points"}),f.jsx("option",{value:"image",children:"Image"}),f.jsx("option",{value:"link",children:"Link"})]}),f.jsx("button",{onClick:()=>k(r,S),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks.length===1,children:"Remove Block"})]}),I.type==="paragraph"?f.jsx("textarea",{value:I.content,onChange:T=>P(r,S,T.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):I.type==="image"?f.jsxs("div",{className:"space-y-2",children:[f.jsx("input",{type:"text",value:I.content,onChange:T=>P(r,S,T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),I.content&&f.jsx("img",{src:I.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):I.type==="link"?f.jsxs("div",{className:"space-y-2",children:[f.jsx("input",{type:"text",value:I.content.url,onChange:T=>D(r,S,"url",T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),f.jsx("input",{type:"text",value:I.content.text,onChange:T=>D(r,S,"text",T.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):f.jsxs("div",{children:[I.content.map((T,R)=>f.jsxs("div",{className:"flex mb-2",children:[f.jsx("input",{type:"text",value:T,onChange:j=>W(r,S,R,j.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${R+1}`}),f.jsx("button",{onClick:()=>$(r,S,R),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks[S].content.length===1,children:"Remove"})]},R)),f.jsx("button",{onClick:()=>V(r,S),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},S)),f.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[f.jsx("button",{onClick:()=>b(r,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),f.jsx("button",{onClick:()=>b(r,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),f.jsx("button",{onClick:()=>b(r,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),f.jsx("button",{onClick:()=>b(r,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 easement-in-out",children:"Add Image"}),f.jsx("button",{onClick:()=>b(r,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),f.jsx("button",{onClick:()=>v(r),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:e.length===1,children:"Remove Post"}),f.jsx("button",{onClick:()=>s(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),f.jsx("button",{onClick:c,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),f.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function Y7(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState([]),[o,l]=A.useState(""),[u,c]=A.useState({categoryId:"",name:"",price:"",description:"",image:null}),[h,g]=A.useState(null),[v,x]=A.useState(null),[b,k]=A.useState(null),O=Qt();A.useEffect(()=>{const T=yp(cs,R=>{R||O("/admin")});return()=>T()},[O]),A.useEffect(()=>{(async()=>{try{const j=(await Vn(jt(ht,"categories"))).docs.map(ge=>({id:ge.id,...ge.data()}));n(j);const L=(await Vn(jt(ht,"products"))).docs.map(ge=>({id:ge.id,...ge.data()}));s(L)}catch(R){k("Error fetching data from Firestore: "+R.message)}})()},[]);const P=async T=>{if(T.preventDefault(),!!o)try{const R=await jl(jt(ht,"categories"),{name:o});n([...e,{id:R.id,name:o}]),l("")}catch(R){k("Error adding category: "+R.message)}},D=async T=>{try{const R=Gn(ht,"categories",T.id);await MT(R,{name:T.name}),n(e.map(j=>j.id===T.id?{...j,name:T.name}:j)),g(null)}catch(R){k("Error updating category: "+R.message)}},V=async T=>{try{await Yh(Gn(ht,"categories",T)),n(e.filter(j=>j.id!==T));const R=r.filter(j=>j.categoryId===T);for(const j of R){if(j.image&&j.image!=="https://via.placeholder.com/80"){const F=j.image.split("/products%2F")[1].split("?")[0],L=Bg(qg,`products/${decodeURIComponent(F)}`);await uS(L).catch(ge=>{k(`Error deleting image for product ${j.id}: `+ge.message)})}await Yh(Gn(ht,"products",j.id))}s(r.filter(j=>j.categoryId!==T))}catch(R){k("Error deleting category: "+R.message)}},$=async T=>{if(!T)return null;const R=Bg(qg,`products/${T.name}`);return await H5(R,T),await q5(R)},W=T=>T.categoryId?T.name.trim()?T.description.trim()?!T.price||isNaN(T.price)||Number(T.price)<=0?"A valid price is required.":T.image?"":"An image is required.":"Description is required.":"Name is required.":"Category is required.",B=async T=>{T.preventDefault();const R=W(u);if(R){k(R);return}try{const j=await $(u.image),F=await jl(jt(ht,"products"),{categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description,image:j||"https://via.placeholder.com/80"});s([...r,{id:F.id,categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description,image:j||"https://via.placeholder.com/80"}]),c({categoryId:"",name:"",price:"",description:"",image:null}),k(null)}catch(j){k("Error adding product: "+j.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},K=async T=>{const R=W(T);if(R){k(R);return}try{const j=T.image instanceof File?await $(T.image):T.image,F=Gn(ht,"products",T.id);await MT(F,{categoryId:T.categoryId,name:T.name,price:parseFloat(T.price),description:T.description,image:j||"https://via.placeholder.com/80"}),s(r.map(L=>L.id===T.id?{...L,categoryId:T.categoryId,name:T.name,price:parseFloat(T.price),description:T.description,image:j||"https://via.placeholder.com/80"}:L)),x(null),k(null)}catch(j){k("Error updating product: "+j.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},I=async T=>{try{const R=r.find(j=>j.id===T);if(R.image&&R.image!=="https://via.placeholder.com/80"){const j=R.image.split("/products%2F")[1].split("?")[0],F=Bg(qg,`products/${decodeURIComponent(j)}`);await uS(F).catch(L=>{k(`Error deleting image for product ${T}: `+L.message)})}await Yh(Gn(ht,"products",T)),s(r.filter(j=>j.id!==T)),k(null)}catch(R){k("Error deleting product: "+R.message)}},S=async()=>{try{await vp(cs),O("/admin")}catch(T){k("Failed to log out: "+T.message)}};return f.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[f.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),b&&f.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:b}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Category"}),f.jsxs("form",{onSubmit:P,className:"flex gap-4",children:[f.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Categories"}),f.jsx("div",{className:"space-y-4",children:e.map(T=>f.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(h==null?void 0:h.id)===T.id?f.jsxs("div",{className:"flex gap-4",children:[f.jsx("input",{type:"text",value:h.name,onChange:R=>g({...h,name:R.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),f.jsx("button",{onClick:()=>D(h),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),f.jsx("button",{onClick:()=>g(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:T.name}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>g(T),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),f.jsx("button",{onClick:()=>V(T.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},T.id))})]}),f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Product"}),f.jsxs("form",{onSubmit:B,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),f.jsxs("select",{value:u.categoryId,onChange:T=>c({...u,categoryId:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[f.jsx("option",{value:"",children:"Select a category"}),e.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",value:u.name,onChange:T=>c({...u,name:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),f.jsx("input",{type:"number",step:"0.01",value:u.price,onChange:T=>c({...u,price:T.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),f.jsx("textarea",{value:u.description,onChange:T=>c({...u,description:T.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),f.jsx("input",{type:"file",accept:"image/*",onChange:T=>c({...u,image:T.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),f.jsxs("div",{children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Products"}),f.jsx("div",{className:"space-y-4",children:r.map(T=>{var R;return f.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(v==null?void 0:v.id)===T.id?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),f.jsxs("select",{value:v.categoryId,onChange:j=>x({...v,categoryId:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[f.jsx("option",{value:"",children:"Select a category"}),e.map(j=>f.jsx("option",{value:j.id,children:j.name},j.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),f.jsx("input",{type:"text",value:v.name,onChange:j=>x({...v,name:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),f.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:j=>x({...v,price:j.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),f.jsx("textarea",{value:v.description,onChange:j=>x({...v,description:j.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),f.jsx("input",{type:"file",accept:"image/*",onChange:j=>x({...v,image:j.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),v.image&&typeof v.image=="string"&&f.jsx("img",{src:v.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:()=>K(v),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),f.jsx("button",{onClick:()=>x(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[T.image&&T.image!=="https://via.placeholder.com/80"&&f.jsx("img",{src:T.image,alt:T.name,className:"w-16 h-16 object-cover rounded-md"}),f.jsxs("div",{children:[f.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:T.name}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((R=e.find(j=>j.id===T.categoryId))==null?void 0:R.name)||"Unknown"]}),f.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",T.price.toFixed(2)]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>x(T),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),f.jsx("button",{onClick:()=>I(T.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},T.id)})})]}),f.jsxs("div",{className:"mt-6 flex gap-4",children:[f.jsx("button",{onClick:()=>O("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),f.jsx("button",{onClick:S,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const X7=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),n=()=>{t("/fitness-tracker/create-custom-plan")};return f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),f.jsx("div",{className:"text-center",children:f.jsx("button",{onClick:n,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),f.jsxs("div",{className:"flex justify-center space-x-4",children:[f.jsx(ot,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),f.jsx(ot,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},Z7=()=>{const{id:t}=Uc(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0);A.useEffect(()=>{(async()=>{const h=Bo(),g=await Zc(Gn(h,"customPlans",t));g.exists()&&r({id:g.id,...g.data()}),o(!1)})()},[t]);const l=c=>{if(!(n!=null&&n.startDate))return"";const h=new Date(n.startDate);return h.setDate(h.getDate()+c*7),h.toLocaleDateString()},u=(c,h)=>{if(!(n!=null&&n.startDate))return"";const g=new Date(n.startDate);return g.setDate(g.getDate()+c*7+h),g.toLocaleDateString()};return s?f.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsx("p",{className:"text-xl",children:"Loading..."})}):n?f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:n.name}),f.jsx("div",{className:"max-w-4xl mx-auto",children:n.weeks.map((c,h)=>f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:["Week ",c.week," (",l(h),")"]}),c.days.map((g,v)=>f.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[g.day," (",u(h,v),")"]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h4",{className:`font-semibold mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),f.jsx("ul",{className:"list-disc pl-5",children:g.workouts.map((x,b)=>f.jsxs("li",{children:[x.name,": ",x.sets," sets x ",x.reps," ","reps"]},b))})]})]},v))]},h))})]})}):f.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsx("p",{className:"text-xl",children:"Plan not found."})})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},c)=>A.createElement("svg",{ref:c,...tz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:dI("lucide",s),...u},[...l.map(([h,g])=>A.createElement(h,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=(t,e)=>{const n=A.forwardRef(({className:r,...s},o)=>A.createElement(nz,{ref:o,iconNode:e,className:dI(`lucide-${ez(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ox=Gl("ChevronDown",rz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ax=Gl("ChevronUp",sz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wl=Gl("CircleCheckBig",iz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_l=Gl("CircleX",oz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lz=Gl("SquarePen",az);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],cz=Gl("Trash2",uz),dz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(""),[s,o]=A.useState(new Date().toISOString().split("T")[0]),[l,u]=A.useState([]),[c,h]=A.useState({}),[g,v]=A.useState(Array.from({length:6},(W,B)=>({week:B+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[x,b]=A.useState(Array(6).fill(!1));A.useEffect(()=>{(async()=>{const B=Bo(),I=(await Vn(jt(B,"workouts"))).docs.map(T=>({id:T.id,...T.data()})),S=I.reduce((T,R)=>{const j=R.muscleGroup||"Other";return T[j]||(T[j]=[]),T[j].push(R),T},{});u(I),h(S)})()},[]);const k=W=>{const B=[...x];B[W]=!B[W],b(B)},O=(W,B)=>{var I;const K=[...g];K[W].days[B].workouts.push({name:((I=l[0])==null?void 0:I.name)||"",sets:3,reps:10}),v(K)},P=(W,B,K,I,S)=>{const T=[...g];T[W].days[B].workouts[K][I]=S,v(T)},D=async W=>{W.preventDefault();const B=Bo(),K={userId:"anonymous",name:n,startDate:new Date(s).toISOString(),weeks:g},I=await jl(jt(B,"customPlans"),K);t(`/fitness-tracker/plan/${I.id}`)},V=W=>{const B=new Date(s);return B.setDate(B.getDate()+W*7),B.toLocaleDateString()},$=(W,B)=>{const K=new Date(s);return K.setDate(K.getDate()+W*7+B),K.toLocaleDateString()};return f.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),f.jsxs("form",{onSubmit:D,children:[f.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Plan Name"}),f.jsx("input",{type:"text",value:n,onChange:W=>r(W.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Start Date"}),f.jsx("input",{type:"date",value:s,onChange:W=>o(W.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((W,B)=>f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>k(B),children:[f.jsxs("h2",{className:`text-2xl font-semibold ${e?"text-red-400":"text-red-800"}`,children:["Week ",W.week," (",V(B),")"]}),x[B]?f.jsx(ax,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`}):f.jsx(ox,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`})]}),x[B]&&f.jsx("div",{className:"mt-4",children:W.days.map((K,I)=>f.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[K.day," (",$(B,I),")"]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("h4",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),K.workouts.length>0?K.workouts.map((S,T)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:S.name,onChange:R=>P(B,I,T,"name",R.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(c).map(R=>f.jsx("optgroup",{label:R,children:c[R].map(j=>f.jsx("option",{value:j.name,children:j.name},j.id))},R))}),f.jsx("input",{type:"number",value:S.sets,onChange:R=>P(B,I,T,"sets",Number(R.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),f.jsx("input",{type:"text",value:S.reps,onChange:R=>P(B,I,T,"reps",R.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},T)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),f.jsx("button",{type:"button",onClick:()=>O(B,I),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},I))})]},B))}),f.jsx("div",{className:"mt-8 max-w-md mx-auto",children:f.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},hz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),{user:n,loading:r}=A.useContext(zs),[s,o]=A.useState([]),[l,u]=A.useState([]),[c,h]=A.useState([]),[g,v]=A.useState([]),[x,b]=A.useState(new Date().toISOString().split("T")[0]);A.useEffect(()=>{(async()=>{try{const I=Bo(),S=await Vn(jt(I,"workouts")),T=await Vn(jt(I,"foods")),R=S.docs.map(F=>({id:F.id,...F.data()})),j=T.docs.map(F=>({id:F.id,...F.data()}));console.log("Fetched workouts from 'workouts' collection:",R),console.log("Fetched meals from 'foods' collection:",j),o(R),u(j),R.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),j.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(I){console.error("Error fetching data:",I)}})()},[]);const k=l.reduce((K,I)=>{const S=I.category||"Misc";return K[S]||(K[S]=[]),K[S].push(I),K},{}),O=["Meat","Fruit","Vegetable","Starch","Misc"],P=()=>{if(s.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}h([...c,{name:s[0].name,sets:0,reps:0}])},D=(K,I,S)=>{const T=[...c];T[K][I]=I==="sets"||I==="reps"?Number(S):S,h(T)},V=()=>{if(l.length===0){alert("No meals available to add. Please add meals in Firestore.");return}v([...g,{name:l[0].name,quantity:1}])},$=(K,I,S)=>{const T=[...g];T[K][I]=I==="quantity"?Number(S):S,v(T)},W=K=>{const I=l.find(S=>S.name===K.name);return I?{protein:I.macros.protein*K.quantity,carbs:I.macros.carbs*K.quantity,fats:I.macros.fats*K.quantity}:{protein:0,carbs:0,fats:0}},B=async K=>{if(K.preventDefault(),!n){alert("Please log in to save a fitness log."),t("/login");return}const I=Bo(),S={userId:n.uid,date:new Date(x).toISOString(),workouts:c,meals:g.map(T=>({...T,macros:W(T)}))};await jl(jt(I,"userLogs"),S),t("/fitness-tracker/history")};return r?f.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),f.jsxs("form",{onSubmit:B,className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Date"}),f.jsx("input",{type:"date",value:x,onChange:K=>b(K.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Workouts"}),s.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):c.length>0?c.map((K,I)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:K.name,onChange:S=>D(I,"name",S.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:s.map(S=>f.jsx("option",{value:S.name,children:S.name},S.id))}),f.jsx("input",{type:"number",value:K.sets,onChange:S=>D(I,"sets",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),f.jsx("input",{type:"number",value:K.reps,onChange:S=>D(I,"reps",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},I)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),f.jsx("button",{type:"button",onClick:P,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),f.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Meals"}),l.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):g.length>0?g.map((K,I)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[f.jsx("select",{value:K.name,onChange:S=>$(I,"name",S.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:O.map(S=>k[S]&&f.jsx("optgroup",{label:S,children:k[S].map(T=>f.jsx("option",{value:T.name,children:T.name},T.id))},S))}),f.jsx("input",{type:"number",value:K.quantity,onChange:S=>$(I,"quantity",S.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},I)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),f.jsx("button",{type:"button",onClick:V,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),f.jsx("div",{className:"text-center",children:f.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},fz=()=>{const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]);return A.useEffect(()=>{(async()=>{const s=Bo(),l=(await Vn(jt(s,"userLogs"))).docs.map(u=>({id:u.id,...u.data()}));n(l.sort((u,c)=>new Date(c.date)-new Date(u.date)))})()},[]),f.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:f.jsxs("div",{className:"container mx-auto px-4 py-10",children:[f.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Fitness History"}),f.jsx("div",{className:"max-w-2xl mx-auto",children:e.length>0?e.map(r=>f.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${t?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[f.jsx("h2",{className:`text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:new Date(r.date).toLocaleDateString()}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Workouts:"}),f.jsx("ul",{className:"list-disc pl-5",children:r.workouts.map((s,o)=>f.jsxs("li",{children:[s.name,": ",s.sets," sets x ",s.reps," ","reps"]},o))})]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Meals:"}),f.jsx("ul",{className:"list-disc pl-5",children:r.meals.map((s,o)=>f.jsxs("li",{children:[s.name," (",s.quantity,"g): Protein"," ",s.macros.protein.toFixed(1),"g, Carbs"," ",s.macros.carbs.toFixed(1),"g, Fats"," ",s.macros.fats.toFixed(1),"g"]},o))})]})]},r.id)):f.jsx("p",{className:`text-center text-lg ${t?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},pz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),{user:n,loading:r}=A.useContext(zs),[s,o]=A.useState(""),[l,u]=A.useState(new Date().toISOString().split("T")[0]),[c,h]=A.useState([]),[g,v]=A.useState([]),[x,b]=A.useState(!0),[k,O]=A.useState(!0),[P,D]=A.useState(null),[V,$]=A.useState(null),[W,B]=A.useState(Array.from({length:6},(ie,oe)=>({week:oe+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[K,I]=A.useState(Array(6).fill(!1)),[S,T]=A.useState(null);A.useEffect(()=>{(async()=>{try{b(!0),D(null);const{data:oe,error:he}=await Kn.from("foods").select("*");if(he)throw he;console.log("Fetched meals from Supabase 'foods' table:",oe),h(oe),oe.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(oe){console.error("Error fetching meals:",oe),D("Failed to load meals. Please try again later.")}finally{b(!1)}})()},[]),A.useEffect(()=>{(async()=>{if(n)try{O(!0),$(null);const{data:oe,error:he}=await Kn.from("nutrition_plans").select("*").eq("user_id",n.id);if(he)throw he;console.log("Fetched nutrition plans from Supabase:",oe),v(oe)}catch(oe){console.error("Error fetching nutrition plans:",oe),$("Failed to load your nutrition plans. Please try again later.")}finally{O(!1)}})()},[n]);const R=c.reduce((ie,oe)=>{const he=oe.category||"Misc";return ie[he]||(ie[he]=[]),ie[he].push(oe),ie},{}),j=["Meat","Fruit","Vegetable","Starch","Misc"],F=["Breakfast","Lunch","Dinner","Snacks"],L=ie=>{const oe=[...K];oe[ie]=!oe[ie],I(oe)},ge=(ie,oe)=>{if(c.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const he=[...W];he[ie].days[oe].meals.push({name:c[0].name,grams:c[0].portion||100,referencePortion:c[0].portion||100,macros:c[0].macros,mealTime:"Breakfast"}),B(he)},$e=(ie,oe,he,Z,q)=>{const re=[...W],ye=re[ie].days[oe].meals[he];if(Z==="name"){const We=c.find(St=>St.name===q);ye.name=q,ye.grams=We.portion||100,ye.referencePortion=We.portion||100,ye.macros=We.macros}else ye[Z]=Z==="grams"?Number(q):q;B(re)},Ge=(ie,oe,he,Z)=>{const q=[...W];q[ie].days[oe].macros[he]=Number(Z),B(q)},be=(ie,oe)=>{const he=[...W],Z=he[ie].days[oe],q={...Z.meals[Z.meals.length-1]};q.name&&(Z.loggedMeals[q.mealTime].push(q),Z.meals[Z.meals.length-1]={name:c[0].name,grams:c[0].portion||100,referencePortion:c[0].portion||100,macros:c[0].macros,mealTime:"Breakfast"},B(he))},ce=(ie,oe,he,Z,q)=>{T({weekIndex:ie,dayIndex:oe,mealTime:he,mealIndex:Z,meal:q})},J=()=>{if(!S)return;const{weekIndex:ie,dayIndex:oe,mealTime:he,mealIndex:Z,meal:q}=S,re=[...W];re[ie].days[oe].loggedMeals[he][Z]=q,B(re),T(null)},te=(ie,oe,he,Z)=>{const q=[...W];q[ie].days[oe].loggedMeals[he].splice(Z,1),B(q)},z=ie=>Object.values(ie).flat().reduce((he,Z)=>{const q=Z.grams/Z.referencePortion;return{protein:he.protein+Z.macros.protein*q,carbs:he.carbs+Z.macros.carbs*q,fats:he.fats+Z.macros.fats*q}},{protein:0,carbs:0,fats:0}),ne=(ie,oe)=>({protein:ie.protein>=oe.protein,carbs:ie.carbs>=oe.carbs,fats:ie.fats>=oe.fats}),fe=ie=>{const oe=new Date(l);return oe.setDate(oe.getDate()+ie*7),oe.toLocaleDateString()},Te=(ie,oe)=>{const he=new Date(l);return he.setDate(he.getDate()+ie*7+oe),he.toLocaleDateString()},je=async ie=>{if(ie.preventDefault(),!n){alert("Please log in to save a nutrition plan."),t("/login");return}try{const oe={user_id:n.id,name:s,start_date:new Date(l).toISOString().split("T")[0],weeks:JSON.stringify(W)},{data:he,error:Z}=await Kn.from("nutrition_plans").insert(oe).select();if(Z)throw Z;t(`/nutrition-plan/${he[0].id}`)}catch(oe){console.error("Error saving nutrition plan:",oe),alert("Failed to save nutrition plan. Please try again.")}};return r?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx($c,{color:e?"#f87171":"#b91c1c"})}):x||k?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx($c,{color:e?"#f87171":"#b91c1c"})}):P?f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:P}):f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),V?f.jsx("div",{className:"text-center text-red-500 mb-12",children:V}):g.length>0?f.jsxs("div",{className:"mb-12",children:[f.jsx("h2",{className:`text-3xl font-bold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(ie=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${e?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${e?"border-stone-700":"border-red-200"}`,onClick:()=>t(`/nutrition-plan/${ie.id}`),children:[f.jsx("h3",{className:`text-xl font-semibold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:ie.name}),f.jsxs("p",{className:`text-sm mt-2 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",ie.start_date]})]},ie.id))})]}):f.jsx("div",{className:"text-center text-lg mb-12",children:"No nutrition plans yet. Create one below!"}),f.jsxs("form",{onSubmit:je,children:[f.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"}`,children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),f.jsx("input",{type:"text",value:s,onChange:ie=>o(ie.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),f.jsx("input",{type:"date",value:l,onChange:ie=>u(ie.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:W.map((ie,oe)=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>L(oe),children:[f.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",ie.week," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",fe(oe),")"]})]}),K[oe]?f.jsx(ax,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):f.jsx(ox,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),K[oe]&&f.jsx("div",{className:"mt-6 space-y-6",children:ie.days.map((he,Z)=>f.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[he.day," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",Te(oe,Z),")"]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),f.jsx("input",{type:"number",value:he.macros.protein,onChange:q=>Ge(oe,Z,"protein",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),f.jsx("input",{type:"number",value:he.macros.carbs,onChange:q=>Ge(oe,Z,"carbs",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),f.jsx("input",{type:"number",value:he.macros.fats,onChange:q=>Ge(oe,Z,"fats",q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),c.length===0?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):he.meals.length>0?he.meals.map((q,re)=>f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[f.jsx("select",{value:q.name,onChange:ye=>$e(oe,Z,re,"name",ye.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:j.map(ye=>R[ye]&&f.jsx("optgroup",{label:ye,children:R[ye].map(We=>f.jsx("option",{value:We.name,children:We.name},We.id))},ye))}),f.jsx("input",{type:"number",value:q.grams,onChange:ye=>$e(oe,Z,re,"grams",ye.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),f.jsx("select",{value:q.mealTime,onChange:ye=>$e(oe,Z,re,"mealTime",ye.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(ye=>f.jsx("option",{value:ye,children:ye},ye))}),f.jsx("button",{type:"button",onClick:()=>be(oe,Z),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},re)):f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),f.jsx("button",{type:"button",onClick:()=>ge(oe,Z),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(he.loggedMeals).every(q=>he.loggedMeals[q].length===0)?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):F.map(q=>f.jsxs("div",{className:"mb-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:q}),he.loggedMeals[q].length>0?f.jsx("ul",{className:"space-y-2",children:he.loggedMeals[q].map((re,ye)=>f.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[f.jsxs("span",{className:"text-sm",children:[re.name,": ",re.grams,"g"]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{type:"button",onClick:()=>ce(oe,Z,q,ye,{...re}),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:f.jsx(lz,{className:"w-5 h-5"})}),f.jsx("button",{type:"button",onClick:()=>te(oe,Z,q,ye),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:f.jsx(cz,{className:"w-5 h-5"})})]})]},ye))}):f.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",q.toLowerCase()," logged."]})]},q)),f.jsxs("div",{className:"mt-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const q=z(he.loggedMeals),re=ne(q,he.macros);return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.protein/he.macros.protein*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.protein.toFixed(1),"g /"," ",he.macros.protein,"g"]}),re.protein?f.jsx(wl,{className:"w-5 h-5 text-green-500"}):f.jsx(_l,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.carbs/he.macros.carbs*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.carbs.toFixed(1),"g /"," ",he.macros.carbs,"g"]}),re.carbs?f.jsx(wl,{className:"w-5 h-5 text-green-500"}):f.jsx(_l,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${re.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(q.fats/he.macros.fats*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[q.fats.toFixed(1),"g /"," ",he.macros.fats,"g"]}),re.fats?f.jsx(wl,{className:"w-5 h-5 text-green-500"}):f.jsx(_l,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},Z))})]},oe))}),f.jsx("div",{className:"mt-12 max-w-md mx-auto",children:f.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),S&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:f.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${e?"bg-stone-800":"bg-red-50"} border ${e?"border-stone-700":"border-red-200"}`,children:[f.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),f.jsx("select",{value:S.meal.name,onChange:ie=>{const oe=c.find(he=>he.name===ie.target.value);T({...S,meal:{...S.meal,name:ie.target.value,grams:oe.portion||100,referencePortion:oe.portion||100,macros:oe.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:j.map(ie=>R[ie]&&f.jsx("optgroup",{label:ie,children:R[ie].map(oe=>f.jsx("option",{value:oe.name,children:oe.name},oe.id))},ie))})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),f.jsx("input",{type:"number",value:S.meal.grams,onChange:ie=>T({...S,meal:{...S.meal,grams:Number(ie.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),f.jsx("select",{value:S.meal.mealTime,onChange:ie=>T({...S,meal:{...S.meal,mealTime:ie.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(ie=>f.jsx("option",{value:ie,children:ie},ie))})]}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsx("button",{type:"button",onClick:J,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),f.jsx("button",{type:"button",onClick:()=>T(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},mz=()=>{const{id:t}=Uc(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0),[l,u]=A.useState(null),[c,h]=A.useState([]);A.useEffect(()=>{(async()=>{try{o(!0),u(null);const{data:D,error:V}=await Kn.from("nutrition_plans").select("*").eq("id",t).single();if(V)throw V;const $=JSON.parse(D.weeks);r({...D,weeks:$}),h(Array($.length).fill(!1))}catch(D){console.error("Error fetching nutrition plan:",D),u("Failed to load nutrition plan. Please try again later.")}finally{o(!1)}})()},[t]);const g=P=>{const D=[...c];D[P]=!D[P],h(D)},v=P=>Object.values(P).flat().reduce((V,$)=>{const W=$.grams/$.referencePortion;return{protein:V.protein+$.macros.protein*W,carbs:V.carbs+$.macros.carbs*W,fats:V.fats+$.macros.fats*W}},{protein:0,carbs:0,fats:0}),x=(P,D)=>({protein:P.protein>=D.protein,carbs:P.carbs>=D.carbs,fats:P.fats>=D.fats}),b=P=>{const D=new Date(n.start_date);return D.setDate(D.getDate()+P*7),D.toLocaleDateString()},k=(P,D)=>{const V=new Date(n.start_date);return V.setDate(V.getDate()+P*7+D),V.toLocaleDateString()};if(s)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:f.jsx($c,{color:e?"#f87171":"#b91c1c"})});if(l)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:l});if(!n)return f.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Nutrition plan not found."});const O=["Breakfast","Lunch","Dinner","Snacks"];return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:n.name}),f.jsxs("p",{className:`text-center text-lg mb-10 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(n.start_date).toLocaleDateString()]}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:n.weeks.map((P,D)=>f.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[f.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>g(D),children:[f.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",P.week," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",b(D),")"]})]}),c[D]?f.jsx(ax,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):f.jsx(ox,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),c[D]&&f.jsx("div",{className:"mt-6 space-y-6",children:P.days.map((V,$)=>f.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[f.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[V.day," ",f.jsxs("span",{className:"text-sm font-normal",children:["(",k(D,$),")"]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.protein,"g"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.carbs,"g"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),f.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.fats,"g"]})]})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(V.loggedMeals).every(W=>V.loggedMeals[W].length===0)?f.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):O.map(W=>f.jsxs("div",{className:"mb-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:W}),V.loggedMeals[W].length>0?f.jsx("ul",{className:"space-y-2",children:V.loggedMeals[W].map((B,K)=>f.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:f.jsxs("span",{className:"text-sm",children:[B.name,": ",B.grams,"g"]})},K))}):f.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",W.toLowerCase()," logged."]})]},W)),f.jsxs("div",{className:"mt-6",children:[f.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const W=v(V.loggedMeals),B=x(W,V.macros);return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.protein/V.macros.protein*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[W.protein.toFixed(1),"g /"," ",V.macros.protein,"g"]}),B.protein?f.jsx(wl,{className:"w-5 h-5 text-green-500"}):f.jsx(_l,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.carbs/V.macros.carbs*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[W.carbs.toFixed(1),"g /"," ",V.macros.carbs,"g"]}),B.carbs?f.jsx(wl,{className:"w-5 h-5 text-green-500"}):f.jsx(_l,{className:"w-5 h-5 text-red-500"})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),f.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:f.jsx("div",{className:`h-full ${B.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.fats/V.macros.fats*100,100)}%`}})}),f.jsxs("span",{className:"text-sm",children:[W.fats.toFixed(1),"g /"," ",V.macros.fats,"g"]}),B.fats?f.jsx(wl,{className:"w-5 h-5 text-green-500"}):f.jsx(_l,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},$))})]},D))})]})},gz=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(null),[l,u]=A.useState(!1),{login:c}=A.useContext(zs),{isDarkMode:h}=A.useContext(Ze),g=Qt(),v=async x=>{var b,k;x.preventDefault(),o(null),u(!0);try{await c(t,n);const O=((k=(b=location.state)==null?void 0:b.from)==null?void 0:k.pathname)||"/profile";g(O,{replace:!0})}catch(O){o(O.message),console.error("Login error:",O.message)}finally{u(!1)}};return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${h?"text-red-400":"text-red-800"}`,children:"Login"}),f.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${h?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsxs("form",{onSubmit:v,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),f.jsx("input",{type:"email",value:t,onChange:x=>e(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),f.jsx("input",{type:"password",value:n,onChange:x=>r(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),s&&f.jsx("p",{className:`text-center text-sm mb-4 ${h?"text-red-400":"text-red-800"}`,children:s}),f.jsx("button",{type:"submit",disabled:l,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${h?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:l?f.jsxs(f.Fragment,{children:[f.jsx(tO,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx(ot,{to:"/forgot-password",className:`text-sm hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),f.jsx("div",{className:"mt-2 text-center",children:f.jsxs("p",{className:`text-sm ${h?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",f.jsx(ot,{to:"/signup",className:`hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},yz=()=>{const t=Qt(),{isDarkMode:e}=A.useContext(Ze),{signup:n,user:r,loading:s}=A.useContext(zs),[o,l]=A.useState(""),[u,c]=A.useState(""),[h,g]=A.useState(null),v=async x=>{x.preventDefault(),g(null);try{await n(o,u),t("/login")}catch(b){b.message.includes("User already exists")?g("Email already in use. A confirmation email has been resent."):b.message.includes("rate limit")?g("Too many signup attempts. Please wait and try again later."):g("An error occurred during signup. Please try again.")}};return s?f.jsx("div",{children:"Loading..."}):r?(t("/nutrition"),null):f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Sign Up"}),f.jsxs("form",{onSubmit:v,className:"max-w-md mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),f.jsx("input",{type:"email",value:o,onChange:x=>l(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),f.jsx("input",{type:"password",value:u,onChange:x=>c(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),h&&f.jsx("p",{className:`text-center text-sm mb-6 ${e?"text-red-400":"text-red-800"}`,children:h}),f.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Sign Up"})]}),f.jsxs("p",{className:`text-center mt-6 text-sm ${e?"text-stone-400":"text-stone-600"}`,children:["Already have an account?"," ",f.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"Log in"})]})]})},vz=()=>{var O,P,D;const{user:t,loading:e,refreshUser:n}=A.useContext(zs),{isDarkMode:r}=A.useContext(Ze),s=Qt(),[o,l]=A.useState(((O=t==null?void 0:t.user_metadata)==null?void 0:O.displayName)||""),[u,c]=A.useState([]),[h,g]=A.useState(null),[v,x]=A.useState(null);if(A.useEffect(()=>{(async()=>{if(t)try{const{data:$,error:W}=await Kn.from("nutrition_plans").select("*").eq("user_id",t.id);if(W)throw W;c($||[])}catch($){console.error("Error fetching nutrition plans:",$.message)}})()},[t]),e)return f.jsx("div",{children:"Loading..."});if(!t)return s("/login"),null;const b=async V=>{V.preventDefault(),g(null),x(null);try{const{error:$}=await Kn.auth.updateUser({data:{displayName:o}});if($)throw $;x("Profile updated successfully!"),await n()}catch($){g("Failed to update profile. Please try again."),console.error("Update profile error:",$.message)}},k=(P=t==null?void 0:t.user_metadata)!=null&&P.displayName?t.user_metadata.displayName.charAt(0).toUpperCase()+t.user_metadata.displayName.slice(1):"User";return f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${r?"text-red-400":"text-red-800"}`,children:[k," - Dashboard "]}),f.jsxs("p",{className:`text-center text-lg mb-10 ${r?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",k,"!"]}),f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Email:"})," ",t.email]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Username:"})," ",((D=t.user_metadata)==null?void 0:D.displayName)||"Not set"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(t.created_at).toLocaleDateString()]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(t.updated_at).toLocaleDateString()]}),t.user_metadata&&Object.keys(t.user_metadata).length>0?f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Additional Info:"}),f.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(t.user_metadata).map(([V,$])=>f.jsxs("li",{children:[V,": ",$]},V))})]}):f.jsx("p",{children:"No additional user metadata available."})]})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),u.length>0?f.jsx("ul",{className:"space-y-2",children:u.map(V=>f.jsx("li",{children:f.jsx(Link,{to:`/nutrition-plan/${V.id}`,className:"hover:text-red-600 transition-colors duration-200",children:V.name||`Plan ${V.id}`})},V.id))}):f.jsx("p",{children:"No nutrition plans found."})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),f.jsxs("form",{onSubmit:b,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block text-lg font-semibold mb-2 ${r?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),f.jsx("input",{type:"text",value:o,onChange:V=>l(V.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${r?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),h&&f.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-red-400":"text-red-800"}`,children:h}),v&&f.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-green-400":"text-green-600"}`,children:v}),f.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),f.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[f.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),f.jsx("button",{onClick:()=>s("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),f.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),f.jsx("button",{onClick:()=>s("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},xz=()=>{const{user:t,loading:e}=A.useContext(zs),n=Ur();return e?f.jsx("div",{children:"Loading..."}):t?f.jsx(IS,{}):f.jsx(yN,{to:"/login",state:{from:n},replace:!0})},wz=()=>(A.useEffect(()=>{(async()=>{try{const e=jt(ht,"content","blog","posts"),r=(await Vn(e)).docs.map(h=>({id:h.id,date:h.data().date||new Date().toISOString()})),o=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  ${[{url:"https://yourdomain.com/",date:new Date().toISOString()},{url:"https://yourdomain.com/about",date:new Date().toISOString()},{url:"https://yourdomain.com/contact",date:new Date().toISOString()}].map(h=>`
  <url>
    <loc>${h.url}</loc>
    <lastmod>${h.date}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.8</priority>
  </url>`).join("")}
  ${r.map(h=>`
  <url>
    <loc>https://yourdomain.com/blog/${h.id}</loc>
    <lastmod>${new Date(h.date).toISOString()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.9</priority>
  </url>`).join("")}
</urlset>`,l=new Blob([o],{type:"application/xml"}),u=URL.createObjectURL(l),c=document.createElement("a");c.href=u,c.download="sitemap.xml",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u),console.log("Sitemap generated:",o)}catch(e){console.error("Error generating sitemap:",e)}})()},[]),f.jsx("div",{children:"Generating sitemap..."})),Ze=A.createContext();function _z(){const[t,e]=A.useState(()=>{const s=localStorage.getItem("theme");return s?JSON.parse(s):!0});A.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(t))},[t]);const n=()=>e(s=>!s),r="/AussieGutPack/";return console.log("Basename:",r),f.jsx(US,{children:f.jsx(g7,{children:f.jsx(UD,{children:f.jsx(Ze.Provider,{value:{isDarkMode:t,toggleTheme:n},children:f.jsx(zN,{basename:r,children:f.jsx(zf,{children:f.jsx(Bf,{classNames:"fade",timeout:300,children:f.jsx(xN,{children:f.jsxs(Ye,{path:"/",element:f.jsx(nO,{}),children:[f.jsx(Ye,{index:!0,element:f.jsx(m7,{})}),f.jsx(Ye,{path:"products",element:f.jsx(y7,{})}),f.jsx(Ye,{path:"cart",element:f.jsx(x7,{})}),f.jsx(Ye,{path:"checkout",element:f.jsx(w7,{})}),f.jsx(Ye,{path:"gut-health",element:f.jsx(_7,{})}),f.jsx(Ye,{path:"gut-health/:id",element:f.jsx(b7,{})}),f.jsx(Ye,{path:"purchase",element:f.jsx(T7,{})}),f.jsx(Ye,{path:"blog",element:f.jsx(I7,{})}),f.jsx(Ye,{path:"blog/:id",element:f.jsx(R7,{})}),f.jsx(Ye,{path:"/sitemap.xml",element:f.jsx(wz,{})}),f.jsx(Ye,{path:"faq",element:f.jsx(j7,{})}),f.jsx(Ye,{path:"contact",element:f.jsx(K7,{})}),f.jsx(Ye,{path:"admin",element:f.jsx(G7,{})}),f.jsx(Ye,{path:"admin/home",element:f.jsx(Q7,{})}),f.jsx(Ye,{path:"admin/blog",element:f.jsx(J7,{})}),f.jsx(Ye,{path:"admin/products",element:f.jsx(Y7,{})}),f.jsx(Ye,{path:"/shop/product/:id",element:f.jsx(v7,{})}),f.jsx(Ye,{path:"fitness-tracker",element:f.jsx(X7,{})}),f.jsx(Ye,{path:"fitness-tracker/plan/:id",element:f.jsx(Z7,{})}),f.jsx(Ye,{path:"fitness-tracker/create-custom-plan",element:f.jsx(dz,{})}),f.jsx(Ye,{path:"fitness-tracker/log",element:f.jsx(hz,{})}),f.jsx(Ye,{path:"fitness-tracker/history",element:f.jsx(fz,{})}),f.jsx(Ye,{path:"nutrition",element:f.jsx(pz,{})}),f.jsx(Ye,{path:"nutrition-plan/:id",element:f.jsx(mz,{})}),f.jsx(Ye,{path:"login",element:f.jsx(gz,{})}),f.jsx(Ye,{path:"signup",element:f.jsx(yz,{})}),f.jsx(Ye,{element:f.jsx(xz,{}),children:f.jsx(Ye,{path:"profile",element:f.jsx(vz,{})})}),f.jsx(Ye,{path:"*",element:f.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})})}console.log("Main.jsx is running");kR.createRoot(document.getElementById("root")).render(f.jsx(nt.StrictMode,{children:f.jsx(_z,{})}));export{Ko as g};
