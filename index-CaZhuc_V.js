import{c as Ve,r as o,j as e,R as qe,u as Z,L as z,a as Le,O as Ie,F as Ye,b as Qe,d as Ze,e as Ke,f as Xe,i as et,g as ue,h as tt,k as st,H as rt,l as oe,m as fe,s as Ne,n as Q,o as X,T as _e,C as Ge,p as je,q as be,t as pe,A as ot,v as He,w as nt,x as $e,y as at,z as ke,B as ve,D as Re,E as De,G as Ue,I as it,J as lt,K as Me,M as Ae,S as dt,N as ct,P as he,Q as ge,U as ut,V as mt,W as xt,X as ht,Y as gt,Z as q,_ as bt}from"./vendor-DTg2WrKA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))n(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const j of y.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&n(j)}).observe(document,{childList:!0,subtree:!0});function l(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerPolicy&&(y.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?y.credentials="include":m.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function n(m){if(m.ep)return;m.ep=!0;const y=l(m);fetch(m.href,y)}})();const pt={BASE_URL:"/AussieGutPack",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_PATH:"/AussieGutPack",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbWNleGNrZndvdXJwdXl4Ym1sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3NTk4NDcsImV4cCI6MjA2MzMzNTg0N30.zytGP9OKFOegCAyrs_SCvl9Sk88i29TzTIo8P7-7Ky4",VITE_SUPABASE_URL:"https://okmcexckfwourpuyxbml.supabase.co"},ft="https://okmcexckfwourpuyxbml.supabase.co",jt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbWNleGNrZndvdXJwdXl4Ym1sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3NTk4NDcsImV4cCI6MjA2MzMzNTg0N30.zytGP9OKFOegCAyrs_SCvl9Sk88i29TzTIo8P7-7Ky4";console.log("Supabase URL from import.meta.env:","https://okmcexckfwourpuyxbml.supabase.co");console.log("Supabase Anon Key from import.meta.env:","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbWNleGNrZndvdXJwdXl4Ym1sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3NTk4NDcsImV4cCI6MjA2MzMzNTg0N30.zytGP9OKFOegCAyrs_SCvl9Sk88i29TzTIo8P7-7Ky4");console.log("All env:",pt);const se=Ve(ft,jt),ce=o.createContext(),wt=({children:s})=>{const[t,l]=o.useState(null),[n,m]=o.useState(!0);o.useEffect(()=>{(async()=>{const{data:{session:a}}=await se.auth.getSession();l((a==null?void 0:a.user)??null),m(!1)})();const{data:{subscription:k}}=se.auth.onAuthStateChange((a,u)=>{l((u==null?void 0:u.user)??null),m(!1)});return()=>{k==null||k.unsubscribe()}},[]);const h={user:t,loading:n,signup:async(v,k)=>{console.log("Signup attempt with:",{email:v,password:k});const{data:a,error:u}=await se.auth.signUp({email:v,password:k,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(a,null,2)),u)throw console.error("Signup error:",u.message),u;if(a.user&&a.user.identities&&a.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const A=await se.auth.resend({type:"signup",email:v});throw console.log("Resend response:",JSON.stringify(A,null,2)),A.error?(console.error("Error resending confirmation email:",A.error.message),A.error):new Error("User already exists. A confirmation email has been resent.")}return a},login:async(v,k)=>{console.log("Login attempt with:",{email:v,password:k});const{data:a,error:u}=await se.auth.signInWithPassword({email:v,password:k});if(u)throw console.error("Login error:",u.message),u.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):u;return l(a.user),a},logout:async()=>{const{error:v}=await se.auth.signOut();if(v)throw console.error("Logout error:",v.message),v;l(null)},refreshUser:async()=>{const{data:{user:v}}=await se.auth.getUser();l(v)}};return e.jsx(ce.Provider,{value:h,children:s})},vt=qe.memo(({location:s})=>{var T;const[t,l]=o.useState(!1),{isDarkMode:n,toggleTheme:m}=o.useContext(I),{user:y,logout:j,loading:x}=o.useContext(ce),p=Z(),h=o.useRef(null),v=o.useRef(null);console.log("Rendering Navigation component. isMenuOpen:",t);const k=async()=>{try{await j(),p("/login")}catch(S){console.error("Logout error:",S.message)}},a=()=>{var S;t?(l(!1),(S=h.current)==null||S.focus()):(l(!0),setTimeout(()=>{var E;return(E=v.current)==null?void 0:E.focus()},100))};o.useEffect(()=>{const S=E=>{var C;E.key==="Escape"&&t&&(l(!1),(C=h.current)==null||C.focus())};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[t]);const u=S=>s.pathname===S,A=((T=y==null?void 0:y.user_metadata)==null?void 0:T.displayName)||"User";return e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#main-content",className:"fixed top-0 left-0 p-2 bg-red-600 text-white focus:top-4 focus:left-4 z-50 transition-all duration-200",children:"Skip to Content"}),e.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${n?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,"aria-label":"Main navigation",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center relative z-50",children:[e.jsx(z,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Primal Biome"}),e.jsxs("div",{className:"hidden lg:flex space-x-6 items-center",children:[e.jsx(z,{to:"/",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${u("/")?"text-red-600 font-semibold":""}`,children:"Home"}),e.jsx(z,{to:"/products",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${u("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),e.jsx(z,{to:"/blog",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${u("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),e.jsx(z,{to:"/contact",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${u("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),x?e.jsx("span",{children:"Loading..."}):y?e.jsxs(e.Fragment,{children:[e.jsxs(z,{to:"/profile",className:`nav-link text-sm hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${u("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",A]}),e.jsx("button",{onClick:k,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Logout"})]}):e.jsx(z,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Login"}),e.jsx("button",{onClick:m,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200","aria-label":n?"Switch to light mode":"Switch to dark mode",children:n?"☀️":"🌙"})]}),e.jsx("button",{ref:h,onClick:a,"aria-expanded":t,"aria-label":t?"Close menu":"Open menu",className:"lg:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 text-xl z-60",children:e.jsx("i",{className:t?"fas fa-times":"fas fa-bars"})})]}),t&&e.jsx("div",{className:"mobile-menu-backdrop active lg:hidden",onClick:a,tabIndex:0,onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&a()},"aria-label":"Close mobile menu"}),e.jsxs("div",{className:`lg:hidden px-4 py-4 ${t?"mobile-menu-open":"mobile-menu-closed"} ${n?"bg-stone-800 border-t border-stone-700":"bg-red-50 border-t border-red-200"} shadow-md`,children:[e.jsx(z,{ref:v,to:"/",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${u("/")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Home"}),e.jsx(z,{to:"/products",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${u("/products")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Products"}),e.jsx(z,{to:"/blog",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${u("/blog")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Blog"}),e.jsx(z,{to:"/faq",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${u("/faq")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"FAQ"}),e.jsx(z,{to:"/contact",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${u("/contact")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Contact"}),e.jsx(z,{to:"/nutrition",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${u("/nutrition")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Nutrition"}),y&&e.jsx(z,{to:"/profile",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${u("/profile")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Profile"}),e.jsx("button",{onClick:()=>{m(),a()},className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${n?"text-red-400":"text-red-800"}`,"aria-label":n?"Switch to light mode":"Switch to dark mode",children:n?"☀️ Light Mode":"🌙 Dark Mode"}),x?e.jsx("span",{className:"block py-2 px-3",children:"Loading..."}):y?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`block py-2 px-3 text-sm ${n?"text-red-400":"text-red-800"}`,children:["Welcome, ",A]}),e.jsx("button",{onClick:()=>{k(),a()},className:"block py-2 px-3 text-left w-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Logout"})]}):e.jsx(z,{to:"/login",onClick:a,className:"block py-2 px-3 text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Login"})]})]})]})}),Nt=()=>{const{isDarkMode:s}=o.useContext(I),{user:t,logout:l}=o.useContext(ce),n=Le();return e.jsx("div",{className:`${s?"dark":""}`,children:e.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[e.jsx(vt,{location:n}),e.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:e.jsx(Ie,{})}),e.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:e.jsx(Ye,{size:24})}),e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:e.jsx(Qe,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:e.jsx(Ze,{size:24})}),e.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:e.jsx(Ke,{size:24})}),e.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:e.jsx(Xe,{size:24})})]})}),e.jsxs("p",{children:["© ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function ae({to:s,children:t,variant:l,className:n,...m}){const y="px-4 py-2 rounded transition-colors duration-300 ease-in-out",j=l==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return s?e.jsx(z,{to:s,className:`${y} ${j} ${n}`,...m,children:t}):e.jsx("button",{className:`${y} ${j} ${n}`,...m,children:t})}const yt={apiKey:"AIzaSyAjVDbvzmbogD_lbGqB4MmVf3aTnTQzEh8",authDomain:"aussie-gut-pack-a896e.firebaseapp.com",projectId:"aussie-gut-pack-a896e",storageBucket:"aussie-gut-pack-a896e.firebasestorage.app",messagingSenderId:"817190270687",appId:"1:817190270687:web:357c740b79d6e243e3db6a",measurementId:"G-NEV6BN8ZKT"},Fe=et(yt),J=ue(Fe),ie=tt(Fe),Pe=st(Fe);function $t(){const{isDarkMode:s}=o.useContext(I),t=o.useRef(null),l=o.useRef(null),n=Le(),[m,y]=o.useState(!0),[j,x]=o.useState(null),[p,h]=o.useState(!1),[v,k]=o.useState(!1),[a,u]=o.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[A,T]=o.useState(0),[S,E]=o.useState(null),[C,B]=o.useState(null),[P,$]=o.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);o.useEffect(()=>{(async()=>{var c,b,R;y(!0),x(null);try{const U=oe(J,"content","home");console.log("Fetching content/home...");const Y=await fe(U);console.log("Document exists:",Y.exists());let _={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"Here at Primal Biome, we believe life should feel less like a chore and more like an adventure. We're dedicated to empowering your digestive health naturally through tips, workouts, and challenges.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin.","Eat a fiber-rich meal.","Practice 5 minutes of deep breathing."],lastUpdated:null};if(Y.exists()){const w=Y.data();console.log("Firestore data:",w),_={..._,...w,quotes:Array.isArray(w.quotes)?w.quotes:_.quotes,currentWorkout:{description:((c=w.currentWorkout)==null?void 0:c.description)||_.currentWorkout.description,warmup:Array.isArray((b=w.currentWorkout)==null?void 0:b.warmup)?w.currentWorkout.warmup:_.currentWorkout.warmup,main:Array.isArray((R=w.currentWorkout)==null?void 0:R.main)?w.currentWorkout.main:_.currentWorkout.main},scheduledWorkouts:Array.isArray(w.scheduledWorkouts)?w.scheduledWorkouts:[],aboutUs:w.aboutUs||_.aboutUs,dailyChallenges:Array.isArray(w.dailyChallenges)?w.dailyChallenges:_.dailyChallenges,lastUpdated:w.lastUpdated||_.lastUpdated}}else console.warn("No document found at content/home, initializing..."),await Ne(U,_);const ne=new Date,ee=[..._.scheduledWorkouts];let le=!1;if(ee.sort((w,W)=>new Date(w.updateDateTime)-new Date(W.updateDateTime)),ee.length>0){const w=ee[0],W=new Date(w.updateDateTime);ne>=W&&(!_.lastUpdated||new Date(_.lastUpdated)<W)&&(_.currentWorkout={description:w.description||"",warmup:w.warmup||[],main:w.main||[]},ee.shift(),_.scheduledWorkouts=ee,_.lastUpdated=ne.toISOString(),le=!0)}le&&(await Ne(U,_,{merge:!0}),console.log("Updated Firestore document with new workout")),console.log("Setting content:",_),u(_);try{const w=Q(J,"content","blog","posts"),W=await X(w);if(W.empty){console.log("No blog posts found"),E({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."});return}const G=W.docs.map(V=>({id:V.id,title:V.data().title||"Untitled Post",date:V.data().date||new Date().toISOString(),blocks:V.data().blocks||[]}));if(G.length>0){G.sort((M,D)=>new Date(D.date)-new Date(M.date));const V=G[0],de=L(V);E({...V,excerpt:de});const K=new Date("2025-04-16T00:00:00Z"),me=G.filter(M=>new Date(M.date)>K).sort((M,D)=>new Date(M.date)-new Date(D.date));if(me.length>0){const M=me[0],D=L(M);B({...M,excerpt:D})}}}catch(w){console.error("Error fetching blog posts:",w),E({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}}catch(U){console.error("Error in fetchAndUpdateContent:",U),x("Failed to load content. Please try again later.")}finally{y(!1),console.log("isLoading set to false")}})()},[]);const L=r=>{if(!r||!r.blocks||r.blocks.length===0)return"Read more...";const c=r.blocks.find(b=>b.type==="paragraph"||b.type==="list"||b.type==="bullet");return c?c.type==="paragraph"&&c.content?c.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(c.content)&&c.content.length>0?c.content[0]+(c.content.length>1?"...":""):"Read more...":"Read more..."};o.useEffect(()=>{const r=new IntersectionObserver(b=>{b.forEach(R=>{const U=R.isIntersecting;console.log(`IntersectionObserver: ${R.target===t.current?"headerRef":"roofRef"} isIntersecting: ${U}`),R.target===t.current&&h(U),R.target===l.current&&k(U)})},{threshold:.1});t.current&&r.observe(t.current),l.current&&r.observe(l.current);const c=setTimeout(()=>{v||(console.log("IntersectionObserver timeout: Forcing isRoofVisible to true"),k(!0)),p||(console.log("IntersectionObserver timeout: Forcing isHeaderVisible to true"),h(!0))},2e3);return()=>{t.current&&r.unobserve(t.current),l.current&&r.unobserve(l.current),clearTimeout(c)}},[p,v]),o.useEffect(()=>{const r=setInterval(()=>{T(c=>(c+1)%(a.quotes.length||1))},4e3);return()=>clearInterval(r)},[a.quotes.length]),o.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(P))},[P]),a.dailyChallenges.length>0&&P.length===a.dailyChallenges.length&&a.dailyChallenges.every((r,c)=>P.includes(c));const d="https://aussiegutpack.com",g=`${d}${n.pathname==="/"?"":n.pathname}`;return e.jsxs(e.Fragment,{children:[e.jsxs(rt,{children:[e.jsx("title",{children:"Primal Biome - Empowering Digestive Health Naturally"}),e.jsx("meta",{name:"description",content:"Join Primal Biome to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),e.jsx("meta",{name:"keywords",content:"gut health, digestive health, Australian Shepherd, wellness, fitness, daily challenges, Primal Biome"}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("meta",{property:"og:title",content:"Primal Biome - Empowering Digestive Health Naturally"}),e.jsx("meta",{property:"og:description",content:"Join Primal Biome to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:url",content:g}),e.jsx("meta",{property:"og:image",content:`${d}/images/og-image.jpg`}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:"Primal Biome - Empowering Digestive Health Naturally"}),e.jsx("meta",{name:"twitter:description",content:"Join Primal Biome to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),e.jsx("meta",{name:"twitter:image",content:`${d}/images/og-image.jpg`}),S&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:S.title,datePublished:S.date,description:S.excerpt,author:{"@type":"Organization",name:"Primal Biome"},publisher:{"@type":"Organization",name:"Primal Biome",logo:{"@type":"ImageObject",url:`${d}/images/creatine.png`}},mainEntityOfPage:{"@type":"WebPage","@id":`${d}/blog/${S.id}`}})})]}),e.jsx("main",{id:"main-content",className:`min-h-screen flex flex-col ${s?"bg-stone-900":"bg-white"}`,style:{minHeight:"100vh"},children:m?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("p",{className:`text-xl ${s?"text-white":"text-red-600"}`,children:"Loading content..."})}):j?e.jsx("div",{className:"text-center text-red-600 p-4",children:j}):e.jsxs(e.Fragment,{children:[console.log("Rendering sections, content:",a),e.jsx("section",{ref:t,className:`py-20 px-6 ${s?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:e.jsx("div",{className:"container mx-auto text-center",children:e.jsxs("header",{children:[e.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Welcome to Primal Biome"}),e.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Empowering Digestive Health Naturally"})]})})}),e.jsx("section",{ref:l,className:`py-20 px-6 ${s?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:e.jsx("div",{className:"container mx-auto text-center",children:e.jsxs("header",{children:[e.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Welcome to Primal Biome"}),e.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Empowering Digestive Health Naturally"})]})})}),e.jsxs("section",{className:"workout-section","aria-labelledby":"workout-heading",children:[e.jsx("h3",{id:"workout-heading",className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),e.jsx("p",{children:a.currentWorkout.description}),e.jsx("h4",{children:"Warm Up"}),e.jsx("ul",{children:a.currentWorkout.warmup.map(r=>e.jsx("li",{children:r}))}),e.jsx("h4",{children:"Main Workout"}),e.jsx("ul",{children:a.currentWorkout.main.map(r=>e.jsx("li",{children:r}))})]}),e.jsxs("section",{children:[e.jsx("h3",{children:"About Us"}),e.jsx("p",{children:a.aboutUs})]})]})})]})}const ze=o.createContext(),kt=({children:s})=>{const[t,l]=o.useState([]),n=p=>{l(h=>h.find(k=>k.id===p.id)?h.map(k=>k.id===p.id?{...k,quantity:k.quantity+1}:k):[...h,{...p,quantity:1}])},m=(p,h)=>{h<=0?y(p):l(v=>v.map(k=>k.id===p?{...k,quantity:h}:k))},y=p=>{l(h=>h.filter(v=>v.id!==p))},j=()=>{l([])},x=()=>t.reduce((p,h)=>p+h.price*h.quantity,0);return e.jsx(ze.Provider,{value:{cart:t,addToCart:n,updateQuantity:m,removeFromCart:y,clearCart:j,getTotalPrice:x},children:s})},Ce=()=>o.useContext(ze);function Ct(){var le;const{isDarkMode:s}=o.useContext(I),{cart:t,addToCart:l,updateQuantity:n,removeFromCart:m,getTotalPrice:y}=Ce(),[j,x]=o.useState([]),[p,h]=o.useState([]),[v,k]=o.useState(!1),[a,u]=o.useState(""),[A,T]=o.useState(""),[S,E]=o.useState(""),[C,B]=o.useState(!1),[P,$]=o.useState(!0),[L,d]=o.useState(!1),[g,r]=o.useState(!1),c=o.useRef(null),b=o.useRef(null),R=Z();o.useEffect(()=>{console.log("isMiniCartOpen updated to:",C)},[C]),o.useEffect(()=>{console.log("showAll updated to:",v)},[v]),o.useEffect(()=>{const w=W=>{const G=document.querySelector(".cart-button"),V=W.target.closest(".add-to-cart-button"),de=Date.now(),K=b.current?de-b.current:1/0;console.log("Outside click handler triggered, target:",W.target),console.log("Is target an Add to Cart button?",!!V),console.log("Time since last Add to Cart click:",K),console.log("IsMiniCartOpen?",C),console.log("OpenedByAdd?",L),C&&!W.target.closest(".mini-cart-sidebar")&&!(G!=null&&G.contains(W.target))&&!V&&K>100&&!L&&(console.log("Outside click detected, closing sidebar"),B(!1))};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[C,L]),o.useEffect(()=>{(async()=>{try{$(!0);const G=(await X(Q(J,"categories"))).docs.map(K=>({id:K.id,...K.data()}));x(G);const de=(await X(Q(J,"products"))).docs.map(K=>({id:K.id,...K.data()}));h(de)}catch(W){console.error("Error fetching data from Firestore:",W)}finally{$(!1)}})()},[]),o.useEffect(()=>(t.length>0&&(c.current&&clearTimeout(c.current),console.log("Cart updated, opening sidebar, cart length:",t.length),d(!0),B(!0),t.length!==1&&(c.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),B(!1),d(!1)},3e3))),()=>{c.current&&clearTimeout(c.current)}),[t]),o.useEffect(()=>{t.length===0&&C&&(console.log("Cart is empty, closing sidebar"),B(!1),d(!1))},[t,C]);const U=w=>{b.current=Date.now(),l(w)},Y=w=>{const W=[...w];switch(a){case"price-asc":return W.sort((G,V)=>G.price-V.price);case"price-desc":return W.sort((G,V)=>V.price-G.price);case"name-asc":return W.sort((G,V)=>G.name.localeCompare(V.name));case"name-desc":return W.sort((G,V)=>V.name.localeCompare(G.name));default:return W}},_=p.filter(w=>S?w.name.toLowerCase().includes(S.toLowerCase())||w.description.toLowerCase().includes(S.toLowerCase()):!0),ne=A?_.filter(w=>w.categoryId===A):_,ee=Y(ne);return e.jsxs("div",{className:`min-h-screen container mx-auto px-4 py-8 md:px-6 md:py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:`text-3xl md:text-4xl font-bold transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Gut Pack"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-3 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950 md:px-4",onClick:w=>{w.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",C),B(!C)},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("span",{className:"hidden md:inline",children:"Cart"}),Array.isArray(t)&&t.length>0&&e.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-5 w-5 md:h-6 md:w-6 flex items-center justify-center text-xs md:text-sm transition-all duration-300 ease-in-out ${t.length>0?"animate-bounce":""}`,children:t.reduce((w,W)=>w+W.quantity,0)})]}),e.jsx("button",{onClick:()=>r(!g),className:"md:hidden text-white focus:outline-none",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})})]})]}),e.jsxs("div",{className:`${g?"block":"hidden"} md:block mb-6 transition-all duration-300 ease-in-out`,children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Products"}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search products by name or description...",value:S,onChange:w=>E(w.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${s?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Filter by Section:"}),e.jsxs("select",{value:A,onChange:w=>T(w.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[e.jsx("option",{value:"",children:"All Sections"}),j.map(w=>e.jsx("option",{value:w.id,children:w.name},w.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Sort By:"}),e.jsxs("select",{value:a,onChange:w=>u(w.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"price-asc",children:"Price: Low to High"}),e.jsx("option",{value:"price-desc",children:"Price: High to Low"}),e.jsx("option",{value:"name-asc",children:"Name: A-Z"}),e.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),e.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",v),k(w=>{const W=!w;return console.log("Setting showAll to:",W),W&&(console.log("Resetting filterCategory to show all products"),T("")),W})},className:`w-full sm:w-auto px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${s?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:v?"Group by Category":"Show All Products"})]})]}),P?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):A?e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:((le=j.find(w=>w.id===A))==null?void 0:le.name)||"Section"}),ee.length===0?e.jsx("p",{className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:ee.map(w=>e.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("img",{src:w.image,alt:w.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:W=>{W.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${w.name}`)}}),e.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:w.name}),e.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:w.description}),e.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:["Price: $",w.price.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:W=>{W.stopPropagation(),b.current=Date.now(),U(w)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),e.jsx("button",{onClick:()=>R(`/shop/product/${w.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${s?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},w.id))})]}):v?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:ee.map(w=>e.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("img",{src:w.image,alt:w.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:W=>{W.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${w.name}`)}}),e.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:w.name}),e.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:w.description}),e.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:["Price: $",w.price.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:W=>{W.stopPropagation(),b.current=Date.now(),U(w)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),e.jsx("button",{onClick:()=>R(`/shop/product/${w.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${s?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},w.id))}):j.map(w=>e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:w.name}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:Y(p.filter(W=>W.categoryId===w.id)).map(W=>e.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("img",{src:W.image,alt:W.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:G=>{G.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${W.name}`)}}),e.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:W.name}),e.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:W.description}),e.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:["Price: $",W.price.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:G=>{G.stopPropagation(),b.current=Date.now(),U(W)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),e.jsx("button",{onClick:()=>R(`/shop/product/${W.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${s?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},W.id))})]},w.id)),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:w=>{w.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),B(!1)}}),e.jsx("div",{className:`mini-cart-sidebar w-64 md:w-80 p-4 md:p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${C?"translate-x-0":"translate-x-full"} ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:e.jsxs("div",{className:`mini-cart-content ${C?"active":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Your Cart"}),e.jsx("button",{onClick:w=>{w.stopPropagation(),console.log("Close button clicked, closing sidebar"),B(!1)},className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${s?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:"✕"})]}),!Array.isArray(t)||t.length===0?e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(_e,{component:null,children:t.map(w=>e.jsx(Ge,{timeout:300,classNames:"cart-item",children:e.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${s?"border-stone-600":"border-red-300"}`,children:[e.jsx("img",{src:w.image,alt:w.name,className:"w-12 h-12 md:w-16 md:h-16 object-cover rounded-md",onError:W=>{W.target.src="/UW_placeholder.jpg"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-xs md:text-sm font-medium transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:w.name}),e.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:["$",w.price.toFixed(2)," x ",w.quantity]}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[w.quantity===1?e.jsx("button",{onClick:W=>{W.stopPropagation(),m(w.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):e.jsx("button",{onClick:W=>{W.stopPropagation(),n(w.id,w.quantity-1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),e.jsx("span",{className:`text-xs md:text-sm mx-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:w.quantity}),e.jsx("button",{onClick:W=>{W.stopPropagation(),n(w.id,w.quantity+1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),e.jsx("button",{onClick:W=>{W.stopPropagation(),m(w.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:"✕"})]})},w.id))}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("p",{className:`text-base md:text-lg font-semibold transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:["Subtotal: $",y().toFixed(2)]}),e.jsx("button",{onClick:w=>{w.stopPropagation(),B(!1),R("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4 text-sm md:text-base",children:"Go to Cart"}),e.jsx("button",{onClick:w=>{w.stopPropagation(),B(!1),R("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2 text-sm md:text-base",children:"Proceed to Checkout"})]})]})]})})]})]})}function St(){const{id:s}=je(),{isDarkMode:t}=o.useContext(I),{addToCart:l}=Ce(),[n,m]=o.useState(null),[y,j]=o.useState(!0),[x,p]=o.useState([]),[h,v]=o.useState(0),[k,a]=o.useState(0),[u,A]=o.useState(""),[T,S]=o.useState(null),E=Z();o.useEffect(()=>{const $=ie.onAuthStateChanged(L=>{S(L)});return()=>$()},[]),o.useEffect(()=>{(async()=>{try{j(!0);const L=oe(J,"products",s),d=await fe(L);d.exists()?m({id:d.id,...d.data()}):(console.error("Product not found"),E("/products"));const g=Q(J,"products",s,"reviews"),c=(await X(g)).docs.map(b=>({id:b.id,...b.data()}));if(p(c),c.length>0){const b=c.reduce((R,U)=>R+U.rating,0);v(b/c.length)}else v(0)}catch(L){console.error("Error fetching product or reviews:",L),E("/products")}finally{j(!1)}})()},[s,E]);const C=$=>{a($)},B=$=>{a($)},P=async $=>{if($.preventDefault(),!T){alert("Please sign in to submit a review.");return}if(k<1||k>5){alert("Please select a rating between 1 and 5 stars.");return}if(!u.trim()){alert("Please enter a review comment.");return}try{const L={rating:k,comment:u,userId:T.uid,userEmail:T.email,timestamp:new Date().toISOString()},d=Q(J,"products",s,"reviews");await be(d,L),p([...x,L]);const g=[...x,L].reduce((r,c)=>r+c.rating,0);v(g/(x.length+1)),a(0),A("")}catch(L){console.error("Error submitting review:",L),alert("Failed to submit review. Please try again.")}};return y?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):n?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("button",{onClick:()=>E("/products"),className:`mb-6 text-sm font-semibold transition-colors duration-300 ease-in-out ${t?"text-red-400 hover:text-red-500":"text-red-600 hover:text-red-800"}`,children:"← Back to Products"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"md:w-1/2",children:e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-96 object-cover rounded-md",onError:$=>{$.target.src="https://via.placeholder.com/300x200.png?text=No+Image",console.error(`Failed to load image for ${n.name}`)}})}),e.jsxs("div",{className:"md:w-1/2",children:[e.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:n.name}),e.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:n.description}),e.jsxs("p",{className:`text-xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",n.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map($=>e.jsx("svg",{className:`w-6 h-6 ${$<=Math.round(h)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},$))}),e.jsxs("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["(",h.toFixed(1)," from ",x.length," reviews)"]})]}),e.jsx("button",{onClick:()=>l(n),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Add to Cart"})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Customer Reviews"}),e.jsxs("div",{className:`p-6 border rounded-md mb-8 ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("h3",{className:`text-lg font-medium mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Write a Review"}),T?e.jsxs("form",{onSubmit:P,children:[e.jsx("div",{className:"flex mb-4",children:[1,2,3,4,5].map($=>e.jsx("svg",{onMouseEnter:()=>C($),onMouseLeave:()=>C(k),onClick:()=>B($),className:`w-8 h-8 cursor-pointer ${$<=k?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},$))}),e.jsx("textarea",{value:u,onChange:$=>A($.target.value),placeholder:"Write your review here...",className:`w-full p-3 border rounded-md focus:outline-none transition-all duration-300 ease-in-out mb-4 ${t?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`,rows:"4"}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Submit Review"})]}):e.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Please"," ",e.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"sign in"})," ","to write a review."]})]}),x.length===0?e.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No reviews yet. Be the first to review this product!"}):e.jsx("div",{className:"space-y-6",children:x.map($=>e.jsxs("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(L=>e.jsx("svg",{className:`w-5 h-5 ${L<=$.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},L))}),e.jsx("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:new Date($.timestamp).toLocaleDateString()})]}),e.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:$.comment}),e.jsxs("p",{className:`text-xs mt-2 transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["By: ",$.userEmail]})]},$.id))})]})]}):null}function Dt(){const{isDarkMode:s}=o.useContext(I),{cart:t,updateQuantity:l,removeFromCart:n,clearCart:m,getTotalPrice:y}=Ce(),[j,x]=o.useState(!1),[p,h]=o.useState({name:"",email:"",address:""}),v=Z(),k=async a=>{if(a.preventDefault(),!p.name||!p.email||!p.address){alert("Please fill in all fields to proceed with checkout.");return}x(!0);try{const u={items:t,total:y(),customer:p,createdAt:new Date().toISOString(),status:"pending"};await be(Q(J,"orders"),u),m(),alert("Order placed successfully! Thank you for your purchase."),v("/")}catch(u){console.error("Error placing order:",u),alert("Failed to place order. Please try again.")}finally{x(!1),h({name:"",email:"",address:""})}};return e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Your Cart"}),t.length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-lg mb-4 ${s?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),e.jsx("button",{onClick:()=>v("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-20 h-20 object-cover rounded-md",onError:u=>{u.target.src="https://via.placeholder.com/80"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-lg font-medium ${s?"text-white":"text-red-600"}`,children:a.name}),e.jsxs("p",{className:`text-sm ${s?"text-stone-300":"text-stone-600"}`,children:["Price: $",a.price.toFixed(2)]}),e.jsxs("p",{className:`text-sm ${s?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(a.price*a.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(a.id,a.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:j,children:"-"}),e.jsx("span",{className:`text-lg ${s?"text-white":"text-red-600"}`,children:a.quantity}),e.jsx("button",{onClick:()=>l(a.id,a.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:j,children:"+"})]}),e.jsx("button",{onClick:()=>n(a.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:j,children:"Remove"})]},a.id))}),e.jsxs("div",{className:`p-6 border rounded-md ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${s?"text-white":"text-red-600"}`,children:"Order Summary"}),e.jsxs("p",{className:`text-lg mb-4 ${s?"text-stone-300":"text-stone-600"}`,children:["Total: $",y().toFixed(2)]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-white":"text-red-600"}`,children:"Full Name"}),e.jsx("input",{type:"text",value:p.name,onChange:a=>h({...p,name:a.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-white":"text-red-600"}`,children:"Email"}),e.jsx("input",{type:"email",value:p.email,onChange:a=>h({...p,email:a.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-white":"text-red-600"}`,children:"Shipping Address"}),e.jsx("textarea",{value:p.address,onChange:a=>h({...p,address:a.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:j})]}),e.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${j?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:j,children:j?"Processing...":"Place Order"})]})]})]})]})}function Pt(){const{isDarkMode:s}=o.useContext(I),{cart:t,updateQuantity:l,removeFromCart:n}=Ce(),m=Object.values(t).reduce((j,x)=>j+x.price*x.quantity,0),y=()=>{alert("Order placed successfully!"),Object.keys(t).forEach(j=>n(j))};return e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsxs("header",{className:"text-center mb-12",children:[e.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Checkout"}),e.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(t).length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),e.jsx(ae,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6",children:Object.entries(t).map(([j,x])=>e.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:e.jsx("img",{src:x.image||"https://via.placeholder.com/80",alt:x.name,className:"w-full h-full object-cover rounded"})}),e.jsxs("div",{className:"flex-1 ml-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:x.name}),e.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:["Color: ",x.color]}),e.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:["Size: ",x.size]})]}),e.jsx("button",{onClick:()=>n(j),className:`text-lg transition-colors duration-300 ease-in-out ${s?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:"✕"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("button",{onClick:()=>l(j,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${s?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),e.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${s?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:x.quantity}),e.jsx("button",{onClick:()=>l(j,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${s?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),e.jsx("div",{className:"text-right ml-4",children:x.originalPrice?e.jsxs("div",{children:[e.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:["$",(x.originalPrice*x.quantity).toFixed(2)]}),e.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:["$",(x.price*x.quantity).toFixed(2)]})]}):e.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:["$",(x.price*x.quantity).toFixed(2)]})})]},j))}),e.jsxs("div",{className:"mt-12 text-right",children:[e.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:["Total: $",m.toFixed(2)]}),e.jsx(ae,{onClick:y,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const Ee=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):","• Stress: Elevates cortisol, disrupting gut flora and increasing permeability","• Glyphosate: Kills beneficial bacteria, feeds pathogenic ones","• Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections","• Seed Oils: Feed pathogenic bacteria, have a long half-life","• Refined Sugars: Feed harmful bacteria, promote dysbiosis","• Long-term Restrictive Diets: Reduce microbiome diversity","• Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
• Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
• Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
• Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesn’t survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
• Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
• A nutrient-dense, diverse, unprocessed diet with prebiotics
• Healthy exercise, sleep, and an uplifting social life worth enjoying
• Sun exposure and skin contact with nature
• Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connected—good gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function ye({title:s,content:t,footer:l,className:n}){const{isDarkMode:m}=o.useContext(I);return e.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${m?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${n}`,children:[e.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${m?"text-red-400":"text-red-800"}`,children:s}),t&&e.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${m?"text-white":"text-red-600"}`,children:t}),l&&e.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${m?"text-white":"text-red-600"}`,children:l})]})}function Et(){const{isDarkMode:s}=o.useContext(I);o.useEffect(()=>{});const t=Ee.filter(n=>n.category==="Benefits"),l=Ee.filter(n=>n.category!=="Benefits");return e.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${s?"bg-stone-900":"bg-white"}`,children:[e.jsx("div",{className:"pt-16"}),e.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),e.jsxs("section",{className:"mb-8 flex-grow",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),e.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),e.jsxs("section",{className:"py-12 px-6 flex-grow",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:t.map(n=>e.jsx(z,{to:`/gut-health/${n.id}`,children:e.jsx(ye,{title:n.title,content:n.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},n.id))})]}),e.jsxs("section",{className:"flex-grow",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:l.map(n=>e.jsx(z,{to:`/gut-health/${n.id}`,children:e.jsx(ye,{title:n.title,content:n.content,footer:`Category: ${n.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${s?"bg-stone-800":"bg-stone-50"}`})},n.id))})]})]})}function Lt(){const{id:s}=je(),{isDarkMode:t}=o.useContext(I);Z();const l=Ee.find(n=>n.id.toString()===s);return l?e.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${t?"bg-stone-900":"bg-white"}`,children:[e.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:l.title}),e.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Category: ",l.category]}),Array.isArray(l.content)?e.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:l.content.map((n,m)=>e.jsx("li",{className:"mb-2",children:n},m))}):e.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:l.content}),e.jsx(ae,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):e.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${t?"bg-stone-900":"bg-white"}`,children:[e.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),e.jsx(ae,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const Mt=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function At(){const{isDarkMode:s}=o.useContext(I),[t,l]=o.useState([]),n=j=>l([...t,j]),m=j=>l(t.filter(x=>x.id!==j)),y=t.reduce((j,x)=>j+x.price,0);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:`text-3xl font-bold mb-6 ${s?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${s?"text-green-200":"text-green-700"}`,children:"Available Products"}),Mt.map(j=>e.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${s?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${s?"text-gray-300":"text-gray-800"}`,children:j.name}),e.jsxs("p",{className:`${s?"text-green-400":"text-green-700"}`,children:["$",j.price]})]}),e.jsx(ae,{onClick:()=>n(j),variant:"primary",children:"Add to Cart"})]},j.id))]}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${s?"text-green-200":"text-green-700"}`,children:"Your Cart"}),t.length===0?e.jsx("p",{className:`${s?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):e.jsxs(e.Fragment,{children:[t.map(j=>e.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${s?"border-gray-700":"border-gray-300"}`,children:[e.jsx("span",{className:`${s?"text-gray-300":"text-gray-800"}`,children:j.name}),e.jsxs("div",{children:[e.jsxs("span",{className:`mr-4 ${s?"text-green-400":"text-green-700"}`,children:["$",j.price]}),e.jsx("button",{onClick:()=>m(j.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},j.id)),e.jsxs("div",{className:`mt-4 font-bold ${s?"text-green-300":"text-green-800"}`,children:["Total: $",y.toFixed(2)]}),e.jsx(ae,{className:"mt-4 w-full",variant:"primary",disabled:t.length===0,children:"Checkout"})]})]})]})]})}const Ft=()=>{const{isDarkMode:s}=o.useContext(I),[t,l]=o.useState([]),[n,m]=o.useState(!0),[y,j]=o.useState(null);o.useEffect(()=>{(async()=>{try{const u=Q(J,"content","blog","posts"),T=(await X(u)).docs.map(S=>{var E,C;return{id:S.id,title:S.data().title,blocks:S.data().blocks||[{type:"paragraph",content:""}],date:S.data().date||"",lastEdited:S.data().lastEdited||"",image:((C=(E=S.data().blocks)==null?void 0:E.find(B=>B.type==="image"))==null?void 0:C.content)||""}});if(console.log("Fetched blog posts:",T),T.length>0){const S=T.sort((E,C)=>{const B=E.date?new Date(E.date):null,P=C.date?new Date(C.date):null;return console.log(`Sorting: ${E.title} (${E.date}) -> ${B}, ${C.title} (${C.date}) -> ${P}`),!B||isNaN(B.getTime())?1:!P||isNaN(P.getTime())?-1:P-B});console.log("Sorted blog posts:",S),l(S)}else l([])}catch(u){console.error("Error fetching blog posts:",u),j("Failed to load blog posts. Please try again later."),l([])}finally{m(!1)}})()},[]);const x=a=>{if(!a)return"Date not set";const u=new Date(a);return isNaN(u.getTime())?"Invalid Date":u.toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"})},p=a=>{if(!a)return"Never edited";const u=new Date(a);return isNaN(u.getTime())?"Invalid Timestamp":u.toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},h=a=>{if(!a.blocks||a.blocks.length===0)return"Read more...";const u=a.blocks.find(A=>A.type==="paragraph"||A.type==="list"||A.type==="bullet");return u?u.type==="paragraph"?u.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(u.content)?u.content[0]+(u.content.length>1?"...":""):"Read more...":"Read more..."},v=a=>{if(!a.date)return!1;const u=new Date("2025-04-16T00:00:00Z"),A=new Date(a.date);return isNaN(A.getTime())?!1:A>u},k={hidden:{opacity:0,y:20},visible:a=>({opacity:1,y:0,transition:{delay:a*.1,duration:.5,ease:"easeOut"}})};return n?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.jsx("div",{className:"text-center",children:e.jsx(pe,{color:s?"#f87171":"#b91c1c"})})]}):y?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-600"}`,children:y})]}):e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Our Blog"}),t.length===0?e.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:e.jsx(ot,{children:t.map((a,u)=>{const A=v(a);return e.jsx(He.div,{custom:u,initial:"hidden",animate:"visible",variants:k,className:"group",children:A?e.jsx(ye,{title:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-700"} group-hover:underline`,children:a.title}),e.jsx("span",{className:`ml-2 text-sm italic transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:"(Coming Soon)"})]}),footer:e.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:[e.jsxs("p",{children:["Publish Date: ",x(a.date)]}),e.jsxs("p",{children:["Last Edited: ",p(a.lastEdited)]})]}),content:e.jsxs(e.Fragment,{children:[a.image&&e.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:e.jsx("img",{src:a.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out"})}),e.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(a)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${s?"bg-stone-800 border-red-400/50 opacity-50":"bg-white border-red-800/50 opacity-50"} cursor-not-allowed overflow-hidden`}):e.jsx(z,{to:`/blog/${a.id}`,className:"block",children:e.jsx(ye,{title:e.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-stone-200":"text-stone-800"} group-hover:underline`,children:a.title}),footer:e.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:[e.jsxs("p",{children:["Published: ",x(a.date)]}),e.jsxs("p",{children:["Last Edited: ",p(a.lastEdited)]})]}),content:e.jsxs(e.Fragment,{children:[a.image&&e.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:e.jsx("img",{src:a.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"})}),e.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(a)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${s?"bg-stone-800 border-red-400/50 hover:bg-stone-700 hover:shadow-xl":"bg-white border-red-800/50 hover:bg-stone-100 hover:shadow-xl"} overflow-hidden`})})},a.id)})})})]})},Wt=()=>{const{id:s}=je(),{isDarkMode:t}=o.useContext(I),[l,n]=o.useState(null),[m,y]=o.useState(!0),[j,x]=o.useState(null),[p,h]=o.useState(!1);o.useEffect(()=>{(async()=>{try{y(!0),x(null);const A=oe(J,"content","blog","posts",s),T=await fe(A);if(T.exists()){const S={id:T.id,...T.data()},E=new Date("2025-04-16T00:00:00Z"),C=S.date?new Date(S.date):null;C&&C>E?h(!0):h(!1),n(S)}else n(null)}catch(A){console.error("Error fetching blog post:",A),x("Failed to load blog post. Please try again later.")}finally{y(!1)}})()},[s]);const v=u=>u?new Date(u).toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"}):"Date not set",k=u=>u?new Date(u).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",a={hidden:{opacity:0,y:20},visible:u=>({opacity:1,y:0,transition:{delay:u*.1,duration:.5,ease:"easeOut"}})};return m?e.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:e.jsx("div",{className:"text-center",children:e.jsx(pe,{color:t?"#f87171":"b91c1c"})})}):j?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Error"}),e.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:j}),e.jsx(ae,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):l?p?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Coming Soon"}),e.jsxs("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["This blog post will be available on ",v(l.date),"."]}),e.jsx(ae,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):e.jsx("div",{className:`min-h-screen container mx-auto px-4 sm:px-6 lg:px-8 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:`relative rounded-xl shadow-lg p-8 mb-12 overflow-hidden border-t-4 ${t?"bg-gradient-to-r from-stone-800 to-stone-700 border-red-400/50":"bg-gradient-to-r from-white to-stone-100 border-red-800/50"}`,children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:l.title}),e.jsxs("div",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"} flex flex-col sm:flex-row sm:items-center sm:space-x-4`,children:[e.jsxs("p",{children:["Published: ",v(l.date)]}),e.jsxs("p",{children:["Last Edited: ",k(l.lastEdited)]})]})]}),e.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${t?"text-stone-200 prose-invert":"text-stone-700"}`,children:l.blocks&&l.blocks.length>0?l.blocks.map((u,A)=>e.jsx(He.div,{custom:A,initial:"hidden",animate:"visible",variants:a,className:"mb-8",children:u.type==="paragraph"?e.jsx("p",{className:"leading-relaxed",children:u.content}):u.type==="list"&&Array.isArray(u.content)?e.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:u.content.map((T,S)=>e.jsx("li",{className:"leading-relaxed",children:T},S))}):u.type==="bullet"&&Array.isArray(u.content)?e.jsx("ul",{className:"list-disc pl-6 space-y-2",children:u.content.map((T,S)=>e.jsx("li",{className:"leading-relaxed",children:T},S))}):u.type==="image"&&u.content?e.jsx("div",{className:"my-6",children:e.jsx("img",{src:u.content,alt:"Blog content",className:"w-full max-w-lg mx-auto rounded-lg shadow-md"})}):u.type==="link"&&u.content.url?e.jsx(z,{to:u.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${t?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:u.content.text||u.content.url}):e.jsx("p",{className:"text-red-500",children:"Invalid block format"})},A)):e.jsx("p",{children:"No content available."})}),e.jsxs(ae,{to:"/blog",variant:"primary",className:"mt-12 inline-flex items-center px-6 py-3 rounded-lg shadow-md transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 hover:shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Blog"]})]})}):e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),e.jsx(ae,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},Bt=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function Ot(){const{isDarkMode:s}=o.useContext(I);return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${s?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:Bt.map((t,l)=>e.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${s?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[e.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${s?"group-open:text-green-400":"group-open:text-green-600"}`,children:[t.question,e.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:"▼"})]}),e.jsx("p",{className:"mt-2 text-gray-600",children:t.answer})]},l))})]})}function Tt(){const{isDarkMode:s}=o.useContext(I),[t,l]=o.useState({name:"",email:"",message:""}),[n,m]=o.useState(""),y=x=>{const{name:p,value:h}=x.target;l(v=>({...v,[p]:h}))},j=x=>{x.preventDefault(),m("Sending..."),nt.send("service_abc123","template_xyz789",{from_name:t.name,from_email:t.email,message:t.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(p=>{m("Thank you! Your inquiry has been sent."),l({name:"",email:"",message:""}),setTimeout(()=>m(""),3e3)},p=>{m("Failed to send message. Please try again."),console.error("EmailJS error:",p.text),setTimeout(()=>m(""),3e3)})};return e.jsx("div",{className:`min-h-screen py-12 px-4 ${s?"bg-stone-900":"bg-white"}`,children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Contact Us"}),e.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:y,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:y,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Message"}),e.jsx("textarea",{id:"message",name:"message",value:t.message,onChange:y,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),n&&e.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:n})]})]})})}function Rt(){const{isDarkMode:s}=o.useContext(I),[t,l]=o.useState(""),[n,m]=o.useState(""),[y,j]=o.useState(!1),[x,p]=o.useState(null),h=Z();o.useEffect(()=>{const a=$e(ie,u=>{j(!!u)});return()=>a()},[]);const v=async a=>{a.preventDefault(),p(null);try{await at(ie,t,n),j(!0)}catch(u){p("Failed to log in: "+u.message)}},k=async()=>{try{await ke(ie),j(!1),h("/admin")}catch(a){p("Failed to log out: "+a.message)}};return y?e.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${s?"bg-stone-900":"bg-white"}`,children:[e.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("button",{onClick:()=>h("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),e.jsx("button",{onClick:()=>h("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),e.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),e.jsx("button",{onClick:()=>h("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),e.jsx("button",{onClick:k,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):e.jsx("div",{className:`min-h-screen flex items-center justify-center ${s?"bg-stone-900":"bg-white"}`,children:e.jsxs("div",{className:`p-6 ${s?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[e.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),x&&e.jsx("p",{className:`text-red-500 mb-4 ${s?"text-red-400":"text-red-600"}`,children:x}),e.jsxs("form",{onSubmit:v,children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"email",value:t,onChange:a=>l(a.target.value),className:`border p-2 w-full mb-4 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"password",value:n,onChange:a=>m(a.target.value),className:`border p-2 w-full mb-4 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function Ut(){const{isDarkMode:s}=o.useContext(I),[t,l]=o.useState([""]),[n,m]=o.useState(""),[y,j]=o.useState([""]),[x,p]=o.useState([{title:"Main Workout",exercises:[""]}]),[h,v]=o.useState([]),[k,a]=o.useState(""),[u,A]=o.useState([""]),[T,S]=o.useState(null),E=Z();o.useEffect(()=>{const f=$e(ie,i=>{i||E("/admin")});return()=>f()},[E]),o.useEffect(()=>{(async()=>{var i,N,F,H,te,we,We,Be;try{const Se=oe(J,"content","home"),Oe=await fe(Se);if(Oe.exists()){const re=Oe.data();l((i=re.quotes)!=null&&i.length?re.quotes:[""]),m(((N=re.currentWorkout)==null?void 0:N.description)||""),j((H=(F=re.currentWorkout)==null?void 0:F.warmup)!=null&&H.length?re.currentWorkout.warmup:[""]),p((we=(te=re.currentWorkout)==null?void 0:te.sections)!=null&&we.length?re.currentWorkout.sections:[{title:"Main Workout",exercises:[""]}]),v((We=re.scheduledWorkouts)!=null&&We.length?re.scheduledWorkouts.map(xe=>{var Te;const Je=(Te=xe.sections)!=null&&Te.length?xe.sections:[{title:"Warm Up",exercises:xe.warmup||[""]},{title:"Main Workout",exercises:xe.main||[""]}];return{description:xe.description||"",sections:Je,updateDateTime:xe.updateDateTime||""}}):[{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),a(re.aboutUs||""),A((Be=re.dailyChallenges)!=null&&Be.length?re.dailyChallenges:[""])}}catch(Se){S("Failed to load content: "+Se.message)}})()},[]);const C=async()=>{S(null);const f={quotes:t.filter(i=>i.trim()!==""),currentWorkout:{description:n,warmup:y.filter(i=>i.trim()!==""),sections:x.filter(i=>i.title.trim()&&i.exercises.some(N=>N.trim())).map(i=>({title:i.title,exercises:i.exercises.filter(N=>N.trim()!=="")}))},scheduledWorkouts:h.filter(i=>i.description.trim()&&i.sections.some(N=>N.title.trim()&&N.exercises.some(F=>F.trim()))&&i.updateDateTime.trim()).map(i=>({description:i.description,sections:i.sections.filter(N=>N.title.trim()&&N.exercises.some(F=>F.trim())).map(N=>({title:N.title,exercises:N.exercises.filter(F=>F.trim()!=="")})),updateDateTime:i.updateDateTime})),aboutUs:k.trim(),dailyChallenges:u.filter(i=>i.trim()!==""),lastUpdated:new Date().toISOString()};try{await Ne(oe(J,"content","home"),f),alert("Home page content saved successfully!"),E("/admin")}catch(i){S("Error saving changes: "+i.message)}},B=async()=>{try{await ke(ie),E("/admin")}catch(f){S("Failed to log out: "+f.message)}},P=()=>l([...t,""]),$=f=>l(t.filter((i,N)=>N!==f)),L=(f,i)=>{const N=[...t];N[f]=i,l(N)},d=()=>j([...y,""]),g=f=>j(y.filter((i,N)=>N!==f)),r=(f,i)=>{const N=[...y];N[f]=i,j(N)},c=()=>p([...x,{title:"",exercises:[""]}]),b=f=>p(x.filter((i,N)=>N!==f)),R=(f,i)=>{const N=[...x];N[f].title=i,p(N)},U=f=>{const i=[...x];i[f].exercises.push(""),p(i)},Y=(f,i)=>{const N=[...x];N[f].exercises=N[f].exercises.filter((F,H)=>H!==i),p(N)},_=(f,i,N)=>{const F=[...x];F[f].exercises[i]=N,p(F)},ne=()=>v([...h,{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),ee=f=>v(h.filter((i,N)=>N!==f)),le=f=>{if(!f)return"";const i=new Date(f);return new Date(i.getTime()-5*60*60*1e3).toISOString().slice(0,16)},w=(f,i,N)=>{const F=[...h];if(i==="updateDateTime"){const H=new Date(N),te=new Date(H.getTime()-5*60*60*1e3);F[f][i]=te.toISOString(),console.log(`Scheduled workout ${f} updateDateTime set to (UTC): ${F[f][i]}`)}else F[f][i]=N;v(F)},W=f=>{const i=[...h];i[f].sections.push({title:"",exercises:[""]}),v(i)},G=(f,i)=>{const N=[...h];N[f].sections=N[f].sections.filter((F,H)=>H!==i),v(N)},V=(f,i,N)=>{const F=[...h];F[f].sections[i].title=N,v(F)},de=(f,i)=>{const N=[...h];N[f].sections[i].exercises.push(""),v(N)},K=(f,i,N)=>{const F=[...h];F[f].sections[i].exercises=F[f].sections[i].exercises.filter((H,te)=>te!==N),v(F)},me=(f,i,N,F)=>{const H=[...h];H[f].sections[i].exercises[N]=F,v(H)},M=()=>A([...u,""]),D=f=>A(u.filter((i,N)=>N!==f)),O=(f,i)=>{const N=[...u];N[f]=i,A(N)};return e.jsxs("div",{className:`min-h-screen p-6 ${s?"bg-stone-900":"bg-white"}`,children:[e.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),T&&e.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-600"}`,children:T}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),t.map((f,i)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:f,onChange:N=>L(i,N.target.value),className:`border p-2 w-full mr-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${i+1}`}),e.jsx("button",{onClick:()=>$(i),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:t.length===1,children:"Remove"})]},i)),e.jsx("button",{onClick:P,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),e.jsx("textarea",{value:k,onChange:f=>a(f.target.value),className:`border p-2 w-full h-24 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),e.jsx("textarea",{value:n,onChange:f=>m(f.target.value),className:`border p-2 w-full h-24 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),e.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${s?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),y.map((f,i)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:f,onChange:N=>r(i,N.target.value),className:`border p-2 w-full mr-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${i+1}`}),e.jsx("button",{onClick:()=>g(i),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:y.length===1,children:"Remove"})]},`warmup-${i}`)),e.jsx("button",{onClick:d,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),x.map((f,i)=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"text",value:f.title,onChange:N=>R(i,N.target.value),className:`border p-2 w-full mr-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),e.jsx("button",{onClick:()=>b(i),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:x.length===1,children:"Remove Section"})]}),f.exercises.map((N,F)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:N,onChange:H=>_(i,F,H.target.value),className:`border p-2 w-full mr-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${F+1}`}),e.jsx("button",{onClick:()=>Y(i,F),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:f.exercises.length===1,children:"Remove"})]},`section-${i}-exercise-${F}`)),e.jsx("button",{onClick:()=>U(i),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`section-${i}`)),e.jsx("button",{onClick:c,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Workout Section"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),h.map((f,i)=>e.jsxs("div",{className:`mb-4 border p-4 rounded ${s?"border-stone-600":"border-red-300"}`,children:[e.jsx("input",{type:"datetime-local",value:le(f.updateDateTime),onChange:N=>w(i,"updateDateTime",N.target.value),className:`border p-2 w-full mb-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),e.jsx("textarea",{value:f.description,onChange:N=>w(i,"description",N.target.value),className:`border p-2 w-full h-24 mb-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),f.sections.map((N,F)=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"text",value:N.title,onChange:H=>V(i,F,H.target.value),className:`border p-2 w-full mr-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),e.jsx("button",{onClick:()=>G(i,F),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:f.sections.length===1,children:"Remove Section"})]}),N.exercises.map((H,te)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:H,onChange:we=>me(i,F,te,we.target.value),className:`border p-2 w-full mr-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${te+1}`}),e.jsx("button",{onClick:()=>K(i,F,te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:N.exercises.length===1,children:"Remove"})]},`scheduled-section-${i}-${F}-exercise-${te}`)),e.jsx("button",{onClick:()=>de(i,F),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`scheduled-section-${i}-${F}`)),e.jsx("button",{onClick:()=>W(i),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 mr-2",children:"Add Workout Section"}),e.jsx("button",{onClick:()=>ee(i),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:h.length===1&&!h[0].description,children:"Remove Workout"})]},i)),e.jsx("button",{onClick:ne,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),u.map((f,i)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:f,onChange:N=>O(i,N.target.value),className:`border p-2 w-full mr-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${i+1}`}),e.jsx("button",{onClick:()=>D(i),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:u.length===1,children:"Remove"})]},i)),e.jsx("button",{onClick:M,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),e.jsx("button",{onClick:C,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),e.jsx("button",{onClick:()=>E("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),e.jsx("button",{onClick:B,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function qt(){const{isDarkMode:s}=o.useContext(I),[t,l]=o.useState([]),[n,m]=o.useState(null),[y,j]=o.useState(null),x=Z();o.useEffect(()=>{const d=$e(ie,g=>{g||x("/admin")});return()=>d()},[x]),o.useEffect(()=>{(async()=>{try{const g=Q(J,"content","blog","posts"),b=(await X(g)).docs.map(R=>({id:R.id,title:R.data().title||"",blocks:R.data().blocks||[{type:"paragraph",content:""}],date:R.data().date||"",lastEdited:R.data().lastEdited||""})).sort((R,U)=>{const Y=R.date?new Date(R.date):new Date(0);return(U.date?new Date(U.date):new Date(0))-Y});l(b.length?b:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:""}])}catch(g){j("Failed to load blog posts: "+g.message)}})()},[]);const p=async()=>{j(null);try{const d=Q(J,"content","blog","posts"),g=await X(d);for(const r of g.docs)await ve(r.ref);for(const r of t)if(r.title.trim()&&r.blocks.some(c=>c.type==="paragraph"||c.type==="image"||c.type==="link"?c.content.trim():c.content.some(b=>b.trim()))){const c=r.id||Date.now().toString();await Ne(oe(d,c),{id:c,title:r.title,blocks:r.blocks.map(b=>({type:b.type,content:b.type==="paragraph"||b.type==="image"?b.content:b.type==="link"?{url:b.content.url,text:b.content.text}:b.content.filter(R=>R.trim()!=="")})),date:r.date||new Date().toISOString(),lastEdited:r.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),m(null),x("/admin")}catch(d){j("Error saving blog posts: "+d.message)}},h=async()=>{try{await ke(ie),x("/admin")}catch(d){j("Failed to log out: "+d.message)}},v=()=>{const d=[...t,{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:new Date().toISOString()}];l(d),m(d.length-1)},k=d=>{const g=t.filter((r,c)=>c!==d);l(g),m(null)},a=(d,g,r)=>{const c=[...t];c[d]={...c[d],[g]:r,lastEdited:new Date().toISOString()},l(c)},u=(d,g)=>{const r=[...t];r[d].blocks.push({type:g,content:g==="paragraph"||g==="image"?"":g==="link"?{url:"",text:""}:[""]}),r[d].lastEdited=new Date().toISOString(),l(r)},A=(d,g)=>{const r=[...t];r[d].blocks=r[d].blocks.filter((c,b)=>b!==g),r[d].lastEdited=new Date().toISOString(),l(r)},T=(d,g,r)=>{const c=[...t];c[d].blocks[g]={type:r,content:r==="paragraph"||r==="image"?"":r==="link"?{url:"",text:""}:[""]},c[d].lastEdited=new Date().toISOString(),l(c)},S=(d,g,r)=>{const c=[...t];c[d].blocks[g].content=r,c[d].lastEdited=new Date().toISOString(),l(c)},E=(d,g,r,c)=>{const b=[...t];b[d].blocks[g].content[r]=c,b[d].lastEdited=new Date().toISOString(),l(b)},C=(d,g)=>{const r=[...t];r[d].blocks[g].content.push(""),r[d].lastEdited=new Date().toISOString(),l(r)},B=(d,g,r)=>{const c=[...t];c[d].blocks[g].content=c[d].blocks[g].content.filter((b,R)=>R!==r),c[d].lastEdited=new Date().toISOString(),l(c)},P=(d,g,r,c)=>{const b=[...t];b[d].blocks[g].content[r]=c,b[d].lastEdited=new Date().toISOString(),l(b)},$=d=>d?new Date(d).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",L=d=>d?new Date(d).toLocaleDateString():"Not set";return e.jsxs("div",{className:`min-h-screen p-6 ${s?"bg-stone-900":"bg-white"}`,children:[e.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),y&&e.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-600"}`,children:y}),n===null?e.jsxs("div",{className:"mb-6",children:[t.length===0?e.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):e.jsx("div",{className:"grid gap-4",children:t.map((d,g)=>e.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>m(g),children:[e.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:d.title||"Untitled Post"}),e.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:["Publish Date: ",L(d.date)]}),e.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",$(d.lastEdited)]})]},g))}),e.jsx("button",{onClick:v,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),e.jsx("button",{onClick:()=>x("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),e.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:`mb-4 border p-4 rounded ${s?"border-stone-600":"border-red-300"}`,children:[e.jsx("input",{type:"text",value:t[n].title,onChange:d=>a(n,"title",d.target.value),className:`border p-2 w-full mb-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block mb-1 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Publish Date:"}),e.jsx("input",{type:"date",value:t[n].date.split("T")[0]||"",onChange:d=>a(n,"date",d.target.value),className:`border p-2 w-full ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`})]}),e.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",$(t[n].lastEdited)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Content Blocks"}),t[n].blocks.map((d,g)=>e.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Block Type:"}),e.jsxs("select",{value:d.type,onChange:r=>T(n,g,r.target.value),className:`border p-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[e.jsx("option",{value:"paragraph",children:"Paragraph"}),e.jsx("option",{value:"list",children:"Numbered List"}),e.jsx("option",{value:"bullet",children:"Bullet Points"}),e.jsx("option",{value:"image",children:"Image"}),e.jsx("option",{value:"link",children:"Link"})]}),e.jsx("button",{onClick:()=>A(n,g),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:t[n].blocks.length===1,children:"Remove Block"})]}),d.type==="paragraph"?e.jsx("textarea",{value:d.content,onChange:r=>S(n,g,r.target.value),className:`border p-2 w-full h-24 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):d.type==="image"?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:d.content,onChange:r=>S(n,g,r.target.value),className:`border p-2 w-full ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),d.content&&e.jsx("img",{src:d.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):d.type==="link"?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:d.content.url,onChange:r=>E(n,g,"url",r.target.value),className:`border p-2 w-full ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),e.jsx("input",{type:"text",value:d.content.text,onChange:r=>E(n,g,"text",r.target.value),className:`border p-2 w-full ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):e.jsxs("div",{children:[d.content.map((r,c)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:r,onChange:b=>P(n,g,c,b.target.value),className:`border p-2 w-full mr-2 ${s?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${c+1}`}),e.jsx("button",{onClick:()=>B(n,g,c),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:t[n].blocks[g].content.length===1,children:"Remove"})]},c)),e.jsx("button",{onClick:()=>C(n,g),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},g)),e.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[e.jsx("button",{onClick:()=>u(n,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),e.jsx("button",{onClick:()=>u(n,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),e.jsx("button",{onClick:()=>u(n,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),e.jsx("button",{onClick:()=>u(n,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 easement-in-out",children:"Add Image"}),e.jsx("button",{onClick:()=>u(n,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),e.jsx("button",{onClick:()=>k(n),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:t.length===1,children:"Remove Post"}),e.jsx("button",{onClick:()=>m(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),e.jsx("button",{onClick:p,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),e.jsx("button",{onClick:()=>x("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),e.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function It(){const{isDarkMode:s}=o.useContext(I),[t,l]=o.useState([]),[n,m]=o.useState([]),[y,j]=o.useState(""),[x,p]=o.useState({categoryId:"",name:"",price:"",description:"",image:null}),[h,v]=o.useState(null),[k,a]=o.useState(null),[u,A]=o.useState(null),T=Z();o.useEffect(()=>{const r=$e(ie,c=>{c||T("/admin")});return()=>r()},[T]),o.useEffect(()=>{(async()=>{try{const b=(await X(Q(J,"categories"))).docs.map(Y=>({id:Y.id,...Y.data()}));l(b);const U=(await X(Q(J,"products"))).docs.map(Y=>({id:Y.id,...Y.data()}));m(U)}catch(c){A("Error fetching data from Firestore: "+c.message)}})()},[]);const S=async r=>{if(r.preventDefault(),!!y)try{const c=await be(Q(J,"categories"),{name:y});l([...t,{id:c.id,name:y}]),j("")}catch(c){A("Error adding category: "+c.message)}},E=async r=>{try{const c=oe(J,"categories",r.id);await Re(c,{name:r.name}),l(t.map(b=>b.id===r.id?{...b,name:r.name}:b)),v(null)}catch(c){A("Error updating category: "+c.message)}},C=async r=>{try{await ve(oe(J,"categories",r)),l(t.filter(b=>b.id!==r));const c=n.filter(b=>b.categoryId===r);for(const b of c){if(b.image&&b.image!=="https://via.placeholder.com/80"){const R=b.image.split("/products%2F")[1].split("?")[0],U=De(Pe,`products/${decodeURIComponent(R)}`);await Ue(U).catch(Y=>{A(`Error deleting image for product ${b.id}: `+Y.message)})}await ve(oe(J,"products",b.id))}m(n.filter(b=>b.categoryId!==r))}catch(c){A("Error deleting category: "+c.message)}},B=async r=>{if(!r)return null;const c=De(Pe,`products/${r.name}`);return await it(c,r),await lt(c)},P=r=>r.categoryId?r.name.trim()?r.description.trim()?!r.price||isNaN(r.price)||Number(r.price)<=0?"A valid price is required.":r.image?"":"An image is required.":"Description is required.":"Name is required.":"Category is required.",$=async r=>{r.preventDefault();const c=P(x);if(c){A(c);return}try{const b=await B(x.image),R=await be(Q(J,"products"),{categoryId:x.categoryId,name:x.name,price:parseFloat(x.price),description:x.description,image:b||"https://via.placeholder.com/80"});m([...n,{id:R.id,categoryId:x.categoryId,name:x.name,price:parseFloat(x.price),description:x.description,image:b||"https://via.placeholder.com/80"}]),p({categoryId:"",name:"",price:"",description:"",image:null}),A(null)}catch(b){A("Error adding product: "+b.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},L=async r=>{const c=P(r);if(c){A(c);return}try{const b=r.image instanceof File?await B(r.image):r.image,R=oe(J,"products",r.id);await Re(R,{categoryId:r.categoryId,name:r.name,price:parseFloat(r.price),description:r.description,image:b||"https://via.placeholder.com/80"}),m(n.map(U=>U.id===r.id?{...U,categoryId:r.categoryId,name:r.name,price:parseFloat(r.price),description:r.description,image:b||"https://via.placeholder.com/80"}:U)),a(null),A(null)}catch(b){A("Error updating product: "+b.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},d=async r=>{try{const c=n.find(b=>b.id===r);if(c.image&&c.image!=="https://via.placeholder.com/80"){const b=c.image.split("/products%2F")[1].split("?")[0],R=De(Pe,`products/${decodeURIComponent(b)}`);await Ue(R).catch(U=>{A(`Error deleting image for product ${r}: `+U.message)})}await ve(oe(J,"products",r)),m(n.filter(b=>b.id!==r)),A(null)}catch(c){A("Error deleting product: "+c.message)}},g=async()=>{try{await ke(ie),T("/admin")}catch(r){A("Failed to log out: "+r.message)}};return e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),u&&e.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-600"}`,children:u}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Add New Category"}),e.jsxs("form",{onSubmit:S,className:"flex gap-4",children:[e.jsx("input",{type:"text",value:y,onChange:r=>j(r.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Manage Categories"}),e.jsx("div",{className:"space-y-4",children:t.map(r=>e.jsx("div",{className:`p-4 border rounded-md ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(h==null?void 0:h.id)===r.id?e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:h.name,onChange:c=>v({...h,name:c.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),e.jsx("button",{onClick:()=>E(h),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),e.jsx("button",{onClick:()=>v(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-lg font-medium ${s?"text-white":"text-red-600"}`,children:r.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(r),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),e.jsx("button",{onClick:()=>C(r.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},r.id))})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Add New Product"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Category"}),e.jsxs("select",{value:x.categoryId,onChange:r=>p({...x,categoryId:r.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[e.jsx("option",{value:"",children:"Select a category"}),t.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Name"}),e.jsx("input",{type:"text",value:x.name,onChange:r=>p({...x,name:r.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:x.price,onChange:r=>p({...x,price:r.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Description"}),e.jsx("textarea",{value:x.description,onChange:r=>p({...x,description:r.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:r=>p({...x,image:r.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Manage Products"}),e.jsx("div",{className:"space-y-4",children:n.map(r=>{var c;return e.jsx("div",{className:`p-4 border rounded-md ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(k==null?void 0:k.id)===r.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Category"}),e.jsxs("select",{value:k.categoryId,onChange:b=>a({...k,categoryId:b.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[e.jsx("option",{value:"",children:"Select a category"}),t.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Name"}),e.jsx("input",{type:"text",value:k.name,onChange:b=>a({...k,name:b.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:k.price,onChange:b=>a({...k,price:b.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Description"}),e.jsx("textarea",{value:k.description,onChange:b=>a({...k,description:b.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:b=>a({...k,image:b.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${s?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),k.image&&typeof k.image=="string"&&e.jsx("img",{src:k.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>L(k),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),e.jsx("button",{onClick:()=>a(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[r.image&&r.image!=="https://via.placeholder.com/80"&&e.jsx("img",{src:r.image,alt:r.name,className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("div",{children:[e.jsx("span",{className:`text-lg font-medium ${s?"text-white":"text-red-600"}`,children:r.name}),e.jsxs("p",{className:`text-sm ${s?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((c=t.find(b=>b.id===r.categoryId))==null?void 0:c.name)||"Unknown"]}),e.jsxs("p",{className:`text-sm ${s?"text-stone-300":"text-stone-600"}`,children:["Price: $",r.price.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(r),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),e.jsx("button",{onClick:()=>d(r.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},r.id)})})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsx("button",{onClick:()=>T("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),e.jsx("button",{onClick:g,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const _t=()=>{const s=Z(),{isDarkMode:t}=o.useContext(I),l=()=>{s("/fitness-tracker/create-custom-plan")};return e.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${t?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${t?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:l,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),e.jsxs("div",{className:`p-6 rounded-lg shadow-md ${t?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${t?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(z,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),e.jsx(z,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},Gt=()=>{const{id:s}=je(),{isDarkMode:t}=o.useContext(I),[l,n]=o.useState(null),[m,y]=o.useState(!0);o.useEffect(()=>{(async()=>{const h=ue(),v=await fe(oe(h,"customPlans",s));v.exists()&&n({id:v.id,...v.data()}),y(!1)})()},[s]);const j=p=>{if(!(l!=null&&l.startDate))return"";const h=new Date(l.startDate);return h.setDate(h.getDate()+p*7),h.toLocaleDateString()},x=(p,h)=>{if(!(l!=null&&l.startDate))return"";const v=new Date(l.startDate);return v.setDate(v.getDate()+p*7+h),v.toLocaleDateString()};return m?e.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsx("p",{className:"text-xl",children:"Loading..."})}):l?e.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:l.name}),e.jsx("div",{className:"max-w-4xl mx-auto",children:l.weeks.map((p,h)=>e.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${t?"bg-stone-800":"bg-red-50"}`,children:[e.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-red-400":"text-red-800"}`,children:["Week ",p.week," (",j(h),")"]}),p.days.map((v,k)=>e.jsxs("div",{className:`border p-4 rounded-md mb-4 ${t?"border-stone-600":"border-red-200"}`,children:[e.jsxs("h3",{className:`text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:[v.day," (",x(h,k),")"]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h4",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Workouts:"}),e.jsx("ul",{className:"list-disc pl-5",children:v.workouts.map((a,u)=>e.jsxs("li",{children:[a.name,": ",a.sets," sets x ",a.reps," ","reps"]},u))})]})]},k))]},h))})]})}):e.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsx("p",{className:"text-xl",children:"Plan not found."})})},Ht=()=>{const s=Z(),{isDarkMode:t}=o.useContext(I),[l,n]=o.useState(""),[m,y]=o.useState(new Date().toISOString().split("T")[0]),[j,x]=o.useState([]),[p,h]=o.useState({}),[v,k]=o.useState(Array.from({length:6},(P,$)=>({week:$+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[a,u]=o.useState(Array(6).fill(!1));o.useEffect(()=>{(async()=>{const $=ue(),d=(await X(Q($,"workouts"))).docs.map(r=>({id:r.id,...r.data()})),g=d.reduce((r,c)=>{const b=c.muscleGroup||"Other";return r[b]||(r[b]=[]),r[b].push(c),r},{});x(d),h(g)})()},[]);const A=P=>{const $=[...a];$[P]=!$[P],u($)},T=(P,$)=>{var d;const L=[...v];L[P].days[$].workouts.push({name:((d=j[0])==null?void 0:d.name)||"",sets:3,reps:10}),k(L)},S=(P,$,L,d,g)=>{const r=[...v];r[P].days[$].workouts[L][d]=g,k(r)},E=async P=>{P.preventDefault();const $=ue(),L={userId:"anonymous",name:l,startDate:new Date(m).toISOString(),weeks:v},d=await be(Q($,"customPlans"),L);s(`/fitness-tracker/plan/${d.id}`)},C=P=>{const $=new Date(m);return $.setDate($.getDate()+P*7),$.toLocaleDateString()},B=(P,$)=>{const L=new Date(m);return L.setDate(L.getDate()+P*7+$),L.toLocaleDateString()};return e.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),e.jsxs("form",{onSubmit:E,children:[e.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${t?"bg-stone-800":"bg-red-50"}`,children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:"Plan Name"}),e.jsx("input",{type:"text",value:l,onChange:P=>n(P.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:"Start Date"}),e.jsx("input",{type:"date",value:m,onChange:P=>y(P.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.map((P,$)=>e.jsxs("div",{className:`p-6 rounded-lg shadow-md ${t?"bg-stone-800":"bg-red-50"}`,children:[e.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${t?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>A($),children:[e.jsxs("h2",{className:`text-2xl font-semibold ${t?"text-red-400":"text-red-800"}`,children:["Week ",P.week," (",C($),")"]}),a[$]?e.jsx(Me,{className:`w-6 h-6 ${t?"text-red-400":"text-red-800"}`}):e.jsx(Ae,{className:`w-6 h-6 ${t?"text-red-400":"text-red-800"}`})]}),a[$]&&e.jsx("div",{className:"mt-4",children:P.days.map((L,d)=>e.jsxs("div",{className:`border p-4 rounded-md mb-4 ${t?"border-stone-600":"border-red-200"}`,children:[e.jsxs("h3",{className:`text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:[L.day," (",B($,d),")"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:`text-base font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:"Workouts:"}),L.workouts.length>0?L.workouts.map((g,r)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[e.jsx("select",{value:g.name,onChange:c=>S($,d,r,"name",c.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(p).map(c=>e.jsx("optgroup",{label:c,children:p[c].map(b=>e.jsx("option",{value:b.name,children:b.name},b.id))},c))}),e.jsx("input",{type:"number",value:g.sets,onChange:c=>S($,d,r,"sets",Number(c.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),e.jsx("input",{type:"text",value:g.reps,onChange:c=>S($,d,r,"reps",c.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},r)):e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),e.jsx("button",{type:"button",onClick:()=>T($,d),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},d))})]},$))}),e.jsx("div",{className:"mt-8 max-w-md mx-auto",children:e.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},zt=()=>{const s=Z(),{isDarkMode:t}=o.useContext(I),{user:l,loading:n}=o.useContext(ce),[m,y]=o.useState([]),[j,x]=o.useState([]),[p,h]=o.useState([]),[v,k]=o.useState([]),[a,u]=o.useState(new Date().toISOString().split("T")[0]);o.useEffect(()=>{(async()=>{try{const d=ue(),g=await X(Q(d,"workouts")),r=await X(Q(d,"foods")),c=g.docs.map(R=>({id:R.id,...R.data()})),b=r.docs.map(R=>({id:R.id,...R.data()}));console.log("Fetched workouts from 'workouts' collection:",c),console.log("Fetched meals from 'foods' collection:",b),y(c),x(b),c.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),b.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(d){console.error("Error fetching data:",d)}})()},[]);const A=j.reduce((L,d)=>{const g=d.category||"Misc";return L[g]||(L[g]=[]),L[g].push(d),L},{}),T=["Meat","Fruit","Vegetable","Starch","Misc"],S=()=>{if(m.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}h([...p,{name:m[0].name,sets:0,reps:0}])},E=(L,d,g)=>{const r=[...p];r[L][d]=d==="sets"||d==="reps"?Number(g):g,h(r)},C=()=>{if(j.length===0){alert("No meals available to add. Please add meals in Firestore.");return}k([...v,{name:j[0].name,quantity:1}])},B=(L,d,g)=>{const r=[...v];r[L][d]=d==="quantity"?Number(g):g,k(r)},P=L=>{const d=j.find(g=>g.name===L.name);return d?{protein:d.macros.protein*L.quantity,carbs:d.macros.carbs*L.quantity,fats:d.macros.fats*L.quantity}:{protein:0,carbs:0,fats:0}},$=async L=>{if(L.preventDefault(),!l){alert("Please log in to save a fitness log."),s("/login");return}const d=ue(),g={userId:l.uid,date:new Date(a).toISOString(),workouts:p,meals:v.map(r=>({...r,macros:P(r)}))};await be(Q(d,"userLogs"),g),s("/fitness-tracker/history")};return n?e.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),e.jsxs("form",{onSubmit:$,className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${t?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("label",{className:`block text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:"Date"}),e.jsx("input",{type:"date",value:a,onChange:L=>u(L.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),e.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${t?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-red-400":"text-red-800"}`,children:"Workouts"}),m.length===0?e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):p.length>0?p.map((L,d)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[e.jsx("select",{value:L.name,onChange:g=>E(d,"name",g.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:m.map(g=>e.jsx("option",{value:g.name,children:g.name},g.id))}),e.jsx("input",{type:"number",value:L.sets,onChange:g=>E(d,"sets",g.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),e.jsx("input",{type:"number",value:L.reps,onChange:g=>E(d,"reps",g.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},d)):e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),e.jsx("button",{type:"button",onClick:S,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),e.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${t?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-red-400":"text-red-800"}`,children:"Meals"}),j.length===0?e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):v.length>0?v.map((L,d)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[e.jsx("select",{value:L.name,onChange:g=>B(d,"name",g.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:T.map(g=>A[g]&&e.jsx("optgroup",{label:g,children:A[g].map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))},g))}),e.jsx("input",{type:"number",value:L.quantity,onChange:g=>B(d,"quantity",g.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${t?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},d)):e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),e.jsx("button",{type:"button",onClick:C,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},Jt=()=>{const{isDarkMode:s}=o.useContext(I),[t,l]=o.useState([]);return o.useEffect(()=>{(async()=>{const m=ue(),j=(await X(Q(m,"userLogs"))).docs.map(x=>({id:x.id,...x.data()}));l(j.sort((x,p)=>new Date(p.date)-new Date(x.date)))})()},[]),e.jsx("div",{className:`min-h-screen pt-20 ${s?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${s?"text-red-400":"text-red-800"}`,children:"Fitness History"}),e.jsx("div",{className:"max-w-2xl mx-auto",children:t.length>0?t.map(n=>e.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${s?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[e.jsx("h2",{className:`text-xl font-semibold mb-2 ${s?"text-red-400":"text-red-800"}`,children:new Date(n.date).toLocaleDateString()}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:`font-semibold mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Workouts:"}),e.jsx("ul",{className:"list-disc pl-5",children:n.workouts.map((m,y)=>e.jsxs("li",{children:[m.name,": ",m.sets," sets x ",m.reps," ","reps"]},y))})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:`font-semibold mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Meals:"}),e.jsx("ul",{className:"list-disc pl-5",children:n.meals.map((m,y)=>e.jsxs("li",{children:[m.name," (",m.quantity,"g): Protein"," ",m.macros.protein.toFixed(1),"g, Carbs"," ",m.macros.carbs.toFixed(1),"g, Fats"," ",m.macros.fats.toFixed(1),"g"]},y))})]})]},n.id)):e.jsx("p",{className:`text-center text-lg ${s?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},Vt=()=>{const s=Z(),{isDarkMode:t}=o.useContext(I),{user:l,loading:n}=o.useContext(ce),[m,y]=o.useState(""),[j,x]=o.useState(new Date().toISOString().split("T")[0]),[p,h]=o.useState([]),[v,k]=o.useState([]),[a,u]=o.useState(!0),[A,T]=o.useState(!0),[S,E]=o.useState(null),[C,B]=o.useState(null),[P,$]=o.useState(Array.from({length:6},(M,D)=>({week:D+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[L,d]=o.useState(Array(6).fill(!1)),[g,r]=o.useState(null);o.useEffect(()=>{(async()=>{try{u(!0),E(null);const{data:D,error:O}=await se.from("foods").select("*");if(O)throw O;console.log("Fetched meals from Supabase 'foods' table:",D),h(D),D.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(D){console.error("Error fetching meals:",D),E("Failed to load meals. Please try again later.")}finally{u(!1)}})()},[]),o.useEffect(()=>{(async()=>{if(l)try{T(!0),B(null);const{data:D,error:O}=await se.from("nutrition_plans").select("*").eq("user_id",l.id);if(O)throw O;console.log("Fetched nutrition plans from Supabase:",D),k(D)}catch(D){console.error("Error fetching nutrition plans:",D),B("Failed to load your nutrition plans. Please try again later.")}finally{T(!1)}})()},[l]);const c=p.reduce((M,D)=>{const O=D.category||"Misc";return M[O]||(M[O]=[]),M[O].push(D),M},{}),b=["Meat","Fruit","Vegetable","Starch","Misc"],R=["Breakfast","Lunch","Dinner","Snacks"],U=M=>{const D=[...L];D[M]=!D[M],d(D)},Y=(M,D)=>{if(p.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const O=[...P];O[M].days[D].meals.push({name:p[0].name,grams:p[0].portion||100,referencePortion:p[0].portion||100,macros:p[0].macros,mealTime:"Breakfast"}),$(O)},_=(M,D,O,f,i)=>{const N=[...P],F=N[M].days[D].meals[O];if(f==="name"){const H=p.find(te=>te.name===i);F.name=i,F.grams=H.portion||100,F.referencePortion=H.portion||100,F.macros=H.macros}else F[f]=f==="grams"?Number(i):i;$(N)},ne=(M,D,O,f)=>{const i=[...P];i[M].days[D].macros[O]=Number(f),$(i)},ee=(M,D)=>{const O=[...P],f=O[M].days[D],i={...f.meals[f.meals.length-1]};i.name&&(f.loggedMeals[i.mealTime].push(i),f.meals[f.meals.length-1]={name:p[0].name,grams:p[0].portion||100,referencePortion:p[0].portion||100,macros:p[0].macros,mealTime:"Breakfast"},$(O))},le=(M,D,O,f,i)=>{r({weekIndex:M,dayIndex:D,mealTime:O,mealIndex:f,meal:i})},w=()=>{if(!g)return;const{weekIndex:M,dayIndex:D,mealTime:O,mealIndex:f,meal:i}=g,N=[...P];N[M].days[D].loggedMeals[O][f]=i,$(N),r(null)},W=(M,D,O,f)=>{const i=[...P];i[M].days[D].loggedMeals[O].splice(f,1),$(i)},G=M=>Object.values(M).flat().reduce((O,f)=>{const i=f.grams/f.referencePortion;return{protein:O.protein+f.macros.protein*i,carbs:O.carbs+f.macros.carbs*i,fats:O.fats+f.macros.fats*i}},{protein:0,carbs:0,fats:0}),V=(M,D)=>({protein:M.protein>=D.protein,carbs:M.carbs>=D.carbs,fats:M.fats>=D.fats}),de=M=>{const D=new Date(j);return D.setDate(D.getDate()+M*7),D.toLocaleDateString()},K=(M,D)=>{const O=new Date(j);return O.setDate(O.getDate()+M*7+D),O.toLocaleDateString()},me=async M=>{if(M.preventDefault(),!l){alert("Please log in to save a nutrition plan."),s("/login");return}try{const D={user_id:l.id,name:m,start_date:new Date(j).toISOString().split("T")[0],weeks:JSON.stringify(P)},{data:O,error:f}=await se.from("nutrition_plans").insert(D).select();if(f)throw f;s(`/nutrition-plan/${O[0].id}`)}catch(D){console.error("Error saving nutrition plan:",D),alert("Failed to save nutrition plan. Please try again.")}};return n?e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:e.jsx(pe,{color:t?"#f87171":"#b91c1c"})}):a||A?e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:e.jsx(pe,{color:t?"#f87171":"#b91c1c"})}):S?e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:S}):e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${t?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),C?e.jsx("div",{className:"text-center text-red-500 mb-12",children:C}):v.length>0?e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 ${t?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(M=>e.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${t?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${t?"border-stone-700":"border-red-200"}`,onClick:()=>s(`/nutrition-plan/${M.id}`),children:[e.jsx("h3",{className:`text-xl font-semibold ${t?"text-red-400":"text-red-800"} tracking-tight`,children:M.name}),e.jsxs("p",{className:`text-sm mt-2 ${t?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",M.start_date]})]},M.id))})]}):e.jsx("div",{className:"text-center text-lg mb-12",children:"No nutrition plans yet. Create one below!"}),e.jsxs("form",{onSubmit:me,children:[e.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${t?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${t?"border-stone-700":"border-red-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),e.jsx("input",{type:"text",value:m,onChange:M=>y(M.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),e.jsx("input",{type:"date",value:j,onChange:M=>x(M.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:P.map((M,D)=>e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${t?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${t?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[e.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${t?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>U(D),children:[e.jsxs("h2",{className:`text-2xl font-bold ${t?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",M.week," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",de(D),")"]})]}),L[D]?e.jsx(Me,{className:`w-6 h-6 ${t?"text-red-400":"text-red-800"} transition-transform duration-200`}):e.jsx(Ae,{className:`w-6 h-6 ${t?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),L[D]&&e.jsx("div",{className:"mt-6 space-y-6",children:M.days.map((O,f)=>e.jsxs("div",{className:`border p-6 rounded-lg ${t?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[e.jsxs("h3",{className:`text-xl font-semibold mb-4 ${t?"text-red-400":"text-red-800"} tracking-tight`,children:[O.day," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",K(D,f),")"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),e.jsx("input",{type:"number",value:O.macros.protein,onChange:i=>ne(D,f,"protein",i.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),e.jsx("input",{type:"number",value:O.macros.carbs,onChange:i=>ne(D,f,"carbs",i.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),e.jsx("input",{type:"number",value:O.macros.fats,onChange:i=>ne(D,f,"fats",i.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),p.length===0?e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):O.meals.length>0?O.meals.map((i,N)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[e.jsx("select",{value:i.name,onChange:F=>_(D,f,N,"name",F.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:b.map(F=>c[F]&&e.jsx("optgroup",{label:F,children:c[F].map(H=>e.jsx("option",{value:H.name,children:H.name},H.id))},F))}),e.jsx("input",{type:"number",value:i.grams,onChange:F=>_(D,f,N,"grams",F.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),e.jsx("select",{value:i.mealTime,onChange:F=>_(D,f,N,"mealTime",F.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:R.map(F=>e.jsx("option",{value:F,children:F},F))}),e.jsx("button",{type:"button",onClick:()=>ee(D,f),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${t?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},N)):e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),e.jsx("button",{type:"button",onClick:()=>Y(D,f),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${t?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(O.loggedMeals).every(i=>O.loggedMeals[i].length===0)?e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):R.map(i=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:`text-base font-semibold mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide border-b ${t?"border-stone-600":"border-red-200"} pb-1`,children:i}),O.loggedMeals[i].length>0?e.jsx("ul",{className:"space-y-2",children:O.loggedMeals[i].map((N,F)=>e.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${t?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[e.jsxs("span",{className:"text-sm",children:[N.name,": ",N.grams,"g"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>le(D,f,i,F,{...N}),className:`p-1 rounded-md transition-colors duration-200 ${t?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:e.jsx(dt,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>W(D,f,i,F),className:`p-1 rounded-md transition-colors duration-200 ${t?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:e.jsx(ct,{className:"w-5 h-5"})})]})]},F))}):e.jsxs("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:["No ",i.toLowerCase()," logged."]})]},i)),e.jsxs("div",{className:"mt-6",children:[e.jsx("h5",{className:`text-base font-semibold mb-3 ${t?"text-red-400":"text-red-800"} tracking-wide border-b ${t?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const i=G(O.loggedMeals),N=V(i,O.macros);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${N.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(i.protein/O.macros.protein*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[i.protein.toFixed(1),"g /"," ",O.macros.protein,"g"]}),N.protein?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${N.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(i.carbs/O.macros.carbs*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[i.carbs.toFixed(1),"g /"," ",O.macros.carbs,"g"]}),N.carbs?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${N.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(i.fats/O.macros.fats*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[i.fats.toFixed(1),"g /"," ",O.macros.fats,"g"]}),N.fats?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},f))})]},D))}),e.jsx("div",{className:"mt-12 max-w-md mx-auto",children:e.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${t?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:e.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${t?"bg-stone-800":"bg-red-50"} border ${t?"border-stone-700":"border-red-200"}`,children:[e.jsx("h3",{className:`text-2xl font-semibold mb-6 ${t?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),e.jsx("select",{value:g.meal.name,onChange:M=>{const D=p.find(O=>O.name===M.target.value);r({...g,meal:{...g.meal,name:M.target.value,grams:D.portion||100,referencePortion:D.portion||100,macros:D.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:b.map(M=>c[M]&&e.jsx("optgroup",{label:M,children:c[M].map(D=>e.jsx("option",{value:D.name,children:D.name},D.id))},M))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),e.jsx("input",{type:"number",value:g.meal.grams,onChange:M=>r({...g,meal:{...g.meal,grams:Number(M.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),e.jsx("select",{value:g.meal.mealTime,onChange:M=>r({...g,meal:{...g.meal,mealTime:M.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:R.map(M=>e.jsx("option",{value:M,children:M},M))})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:w,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${t?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),e.jsx("button",{type:"button",onClick:()=>r(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${t?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},Yt=()=>{const{id:s}=je(),{isDarkMode:t}=o.useContext(I),[l,n]=o.useState(null),[m,y]=o.useState(!0),[j,x]=o.useState(null),[p,h]=o.useState([]);o.useEffect(()=>{(async()=>{try{y(!0),x(null);const{data:E,error:C}=await se.from("nutrition_plans").select("*").eq("id",s).single();if(C)throw C;const B=JSON.parse(E.weeks);n({...E,weeks:B}),h(Array(B.length).fill(!1))}catch(E){console.error("Error fetching nutrition plan:",E),x("Failed to load nutrition plan. Please try again later.")}finally{y(!1)}})()},[s]);const v=S=>{const E=[...p];E[S]=!E[S],h(E)},k=S=>Object.values(S).flat().reduce((C,B)=>{const P=B.grams/B.referencePortion;return{protein:C.protein+B.macros.protein*P,carbs:C.carbs+B.macros.carbs*P,fats:C.fats+B.macros.fats*P}},{protein:0,carbs:0,fats:0}),a=(S,E)=>({protein:S.protein>=E.protein,carbs:S.carbs>=E.carbs,fats:S.fats>=E.fats}),u=S=>{const E=new Date(l.start_date);return E.setDate(E.getDate()+S*7),E.toLocaleDateString()},A=(S,E)=>{const C=new Date(l.start_date);return C.setDate(C.getDate()+S*7+E),C.toLocaleDateString()};if(m)return e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:e.jsx(pe,{color:t?"#f87171":"#b91c1c"})});if(j)return e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:j});if(!l)return e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Nutrition plan not found."});const T=["Breakfast","Lunch","Dinner","Snacks"];return e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${t?"text-red-400":"text-red-800"}`,children:l.name}),e.jsxs("p",{className:`text-center text-lg mb-10 ${t?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(l.start_date).toLocaleDateString()]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:l.weeks.map((S,E)=>e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${t?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${t?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[e.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${t?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>v(E),children:[e.jsxs("h2",{className:`text-2xl font-bold ${t?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",S.week," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",u(E),")"]})]}),p[E]?e.jsx(Me,{className:`w-6 h-6 ${t?"text-red-400":"text-red-800"} transition-transform duration-200`}):e.jsx(Ae,{className:`w-6 h-6 ${t?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),p[E]&&e.jsx("div",{className:"mt-6 space-y-6",children:S.days.map((C,B)=>e.jsxs("div",{className:`border p-6 rounded-lg ${t?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[e.jsxs("h3",{className:`text-xl font-semibold mb-4 ${t?"text-red-400":"text-red-800"} tracking-tight`,children:[C.day," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",A(E,B),")"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),e.jsxs("p",{className:`text-sm ${t?"text-stone-400":"text-stone-600"}`,children:[C.macros.protein,"g"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),e.jsxs("p",{className:`text-sm ${t?"text-stone-400":"text-stone-600"}`,children:[C.macros.carbs,"g"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),e.jsxs("p",{className:`text-sm ${t?"text-stone-400":"text-stone-600"}`,children:[C.macros.fats,"g"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(C.loggedMeals).every(P=>C.loggedMeals[P].length===0)?e.jsx("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):T.map(P=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:`text-base font-semibold mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide border-b ${t?"border-stone-600":"border-red-200"} pb-1`,children:P}),C.loggedMeals[P].length>0?e.jsx("ul",{className:"space-y-2",children:C.loggedMeals[P].map(($,L)=>e.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${t?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:e.jsxs("span",{className:"text-sm",children:[$.name,": ",$.grams,"g"]})},L))}):e.jsxs("p",{className:`text-sm italic ${t?"text-red-400":"text-red-800"}`,children:["No ",P.toLowerCase()," logged."]})]},P)),e.jsxs("div",{className:"mt-6",children:[e.jsx("h5",{className:`text-base font-semibold mb-3 ${t?"text-red-400":"text-red-800"} tracking-wide border-b ${t?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const P=k(C.loggedMeals),$=a(P,C.macros);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${$.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(P.protein/C.macros.protein*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[P.protein.toFixed(1),"g /"," ",C.macros.protein,"g"]}),$.protein?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${$.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(P.carbs/C.macros.carbs*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[P.carbs.toFixed(1),"g /"," ",C.macros.carbs,"g"]}),$.carbs?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${$.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(P.fats/C.macros.fats*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[P.fats.toFixed(1),"g /"," ",C.macros.fats,"g"]}),$.fats?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},B))})]},E))})]})},Qt=()=>{const[s,t]=o.useState(""),[l,n]=o.useState(""),[m,y]=o.useState(null),[j,x]=o.useState(!1),{login:p}=o.useContext(ce),{isDarkMode:h}=o.useContext(I),v=Z(),k=async a=>{var u,A;a.preventDefault(),y(null),x(!0);try{await p(s,l);const T=((A=(u=location.state)==null?void 0:u.from)==null?void 0:A.pathname)||"/profile";v(T,{replace:!0})}catch(T){y(T.message),console.error("Login error:",T.message)}finally{x(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${h?"text-red-400":"text-red-800"}`,children:"Login"}),e.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${h?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),e.jsx("input",{type:"email",value:s,onChange:a=>t(a.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),e.jsx("input",{type:"password",value:l,onChange:a=>n(a.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),m&&e.jsx("p",{className:`text-center text-sm mb-4 ${h?"text-red-400":"text-red-800"}`,children:m}),e.jsx("button",{type:"submit",disabled:j,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${h?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:j?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(z,{to:"/forgot-password",className:`text-sm hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),e.jsx("div",{className:"mt-2 text-center",children:e.jsxs("p",{className:`text-sm ${h?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",e.jsx(z,{to:"/signup",className:`hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},Zt=()=>{const s=Z(),{isDarkMode:t}=o.useContext(I),{signup:l,user:n,loading:m}=o.useContext(ce),[y,j]=o.useState(""),[x,p]=o.useState(""),[h,v]=o.useState(null),k=async a=>{a.preventDefault(),v(null);try{await l(y,x),s("/login")}catch(u){u.message.includes("User already exists")?v("Email already in use. A confirmation email has been resent."):u.message.includes("rate limit")?v("Too many signup attempts. Please wait and try again later."):v("An error occurred during signup. Please try again.")}};return m?e.jsx("div",{children:"Loading..."}):n?(s("/nutrition"),null):e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${t?"text-red-400":"text-red-800"}`,children:"Sign Up"}),e.jsxs("form",{onSubmit:k,className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),e.jsx("input",{type:"email",value:y,onChange:a=>j(a.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${t?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),e.jsx("input",{type:"password",value:x,onChange:a=>p(a.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${t?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),h&&e.jsx("p",{className:`text-center text-sm mb-6 ${t?"text-red-400":"text-red-800"}`,children:h}),e.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${t?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Sign Up"})]}),e.jsxs("p",{className:`text-center mt-6 text-sm ${t?"text-stone-400":"text-stone-600"}`,children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"Log in"})]})]})},Kt=()=>{var T,S,E;const{user:s,loading:t,refreshUser:l}=o.useContext(ce),{isDarkMode:n}=o.useContext(I),m=Z(),[y,j]=o.useState(((T=s==null?void 0:s.user_metadata)==null?void 0:T.displayName)||""),[x,p]=o.useState([]),[h,v]=o.useState(null),[k,a]=o.useState(null);if(o.useEffect(()=>{(async()=>{if(s)try{const{data:B,error:P}=await se.from("nutrition_plans").select("*").eq("user_id",s.id);if(P)throw P;p(B||[])}catch(B){console.error("Error fetching nutrition plans:",B.message)}})()},[s]),t)return e.jsx("div",{children:"Loading..."});if(!s)return m("/login"),null;const u=async C=>{C.preventDefault(),v(null),a(null);try{const{error:B}=await se.auth.updateUser({data:{displayName:y}});if(B)throw B;a("Profile updated successfully!"),await l()}catch(B){v("Failed to update profile. Please try again."),console.error("Update profile error:",B.message)}},A=(S=s==null?void 0:s.user_metadata)!=null&&S.displayName?s.user_metadata.displayName.charAt(0).toUpperCase()+s.user_metadata.displayName.slice(1):"User";return e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${n?"text-red-400":"text-red-800"}`,children:[A," - Dashboard "]}),e.jsxs("p",{className:`text-center text-lg mb-10 ${n?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",A,"!"]}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${n?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",((E=s.user_metadata)==null?void 0:E.displayName)||"Not set"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(s.updated_at).toLocaleDateString()]}),s.user_metadata&&Object.keys(s.user_metadata).length>0?e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Additional Info:"}),e.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(s.user_metadata).map(([C,B])=>e.jsxs("li",{children:[C,": ",B]},C))})]}):e.jsx("p",{children:"No additional user metadata available."})]})]}),e.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${n?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),x.length>0?e.jsx("ul",{className:"space-y-2",children:x.map(C=>e.jsx("li",{children:e.jsx(Link,{to:`/nutrition-plan/${C.id}`,className:"hover:text-red-600 transition-colors duration-200",children:C.name||`Plan ${C.id}`})},C.id))}):e.jsx("p",{children:"No nutrition plans found."})]}),e.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${n?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${n?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),e.jsx("input",{type:"text",value:y,onChange:C=>j(C.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${n?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),h&&e.jsx("p",{className:`text-center text-sm mb-4 ${n?"text-red-400":"text-red-800"}`,children:h}),k&&e.jsx("p",{className:`text-center text-sm mb-4 ${n?"text-green-400":"text-green-600"}`,children:k}),e.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),e.jsxs("div",{className:`p-6 rounded-lg shadow-md ${n?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>m("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),e.jsx("button",{onClick:()=>m("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),e.jsx("button",{onClick:()=>m("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),e.jsx("button",{onClick:()=>m("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},Xt=()=>{const{user:s,loading:t}=o.useContext(ce),l=Le();return t?e.jsx("div",{children:"Loading..."}):s?e.jsx(Ie,{}):e.jsx(mt,{to:"/login",state:{from:l},replace:!0})},es=()=>(o.useEffect(()=>{(async()=>{try{const t=Q(J,"content","blog","posts"),n=(await X(t)).docs.map(h=>({id:h.id,date:h.data().date||new Date().toISOString()})),y=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  ${[{url:"https://yourdomain.com/",date:new Date().toISOString()},{url:"https://yourdomain.com/about",date:new Date().toISOString()},{url:"https://yourdomain.com/contact",date:new Date().toISOString()}].map(h=>`
  <url>
    <loc>${h.url}</loc>
    <lastmod>${h.date}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.8</priority>
  </url>`).join("")}
  ${n.map(h=>`
  <url>
    <loc>https://yourdomain.com/blog/${h.id}</loc>
    <lastmod>${new Date(h.date).toISOString()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.9</priority>
  </url>`).join("")}
</urlset>`,j=new Blob([y],{type:"application/xml"}),x=URL.createObjectURL(j),p=document.createElement("a");p.href=x,p.download="sitemap.xml",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(x),console.log("Sitemap generated:",y)}catch(t){console.error("Error generating sitemap:",t)}})()},[]),e.jsx("div",{children:"Generating sitemap..."})),I=o.createContext();function ts(){const[s,t]=o.useState(()=>{const m=localStorage.getItem("theme");return m?JSON.parse(m):!0});o.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(s))},[s]);const l=()=>t(m=>!m),n="/AussieGutPack";return console.log("Final Basename used:",n),e.jsx(xt,{children:e.jsx(kt,{children:e.jsx(wt,{children:e.jsx(I.Provider,{value:{isDarkMode:s,toggleTheme:l},children:e.jsx(ht,{basename:n,children:e.jsx(_e,{children:e.jsx(Ge,{classNames:"fade",timeout:300,children:e.jsx(gt,{children:e.jsxs(q,{path:"/",element:e.jsx(Nt,{}),children:[e.jsx(q,{index:!0,element:e.jsx($t,{})}),e.jsx(q,{path:"products",element:e.jsx(Ct,{})}),e.jsx(q,{path:"cart",element:e.jsx(Dt,{})}),e.jsx(q,{path:"checkout",element:e.jsx(Pt,{})}),e.jsx(q,{path:"gut-health",element:e.jsx(Et,{})}),e.jsx(q,{path:"gut-health/:id",element:e.jsx(Lt,{})}),e.jsx(q,{path:"purchase",element:e.jsx(At,{})}),e.jsx(q,{path:"blog",element:e.jsx(Ft,{})}),e.jsx(q,{path:"blog/:id",element:e.jsx(Wt,{})}),e.jsx(q,{path:"/sitemap.xml",element:e.jsx(es,{})}),e.jsx(q,{path:"faq",element:e.jsx(Ot,{})}),e.jsx(q,{path:"contact",element:e.jsx(Tt,{})}),e.jsx(q,{path:"admin",element:e.jsx(Rt,{})}),e.jsx(q,{path:"admin/home",element:e.jsx(Ut,{})}),e.jsx(q,{path:"admin/blog",element:e.jsx(qt,{})}),e.jsx(q,{path:"admin/products",element:e.jsx(It,{})}),e.jsx(q,{path:"/shop/product/:id",element:e.jsx(St,{})}),e.jsx(q,{path:"fitness-tracker",element:e.jsx(_t,{})}),e.jsx(q,{path:"fitness-tracker/plan/:id",element:e.jsx(Gt,{})}),e.jsx(q,{path:"fitness-tracker/create-custom-plan",element:e.jsx(Ht,{})}),e.jsx(q,{path:"fitness-tracker/log",element:e.jsx(zt,{})}),e.jsx(q,{path:"fitness-tracker/history",element:e.jsx(Jt,{})}),e.jsx(q,{path:"nutrition",element:e.jsx(Vt,{})}),e.jsx(q,{path:"nutrition-plan/:id",element:e.jsx(Yt,{})}),e.jsx(q,{path:"login",element:e.jsx(Qt,{})}),e.jsx(q,{path:"signup",element:e.jsx(Zt,{})}),e.jsx(q,{element:e.jsx(Xt,{}),children:e.jsx(q,{path:"profile",element:e.jsx(Kt,{})})}),e.jsx(q,{path:"*",element:e.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})})}console.log("Main.jsx is running");bt.createRoot(document.getElementById("root")).render(e.jsx(qe.StrictMode,{children:e.jsx(ts,{})}));
