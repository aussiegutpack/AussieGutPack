import{c as Ke,r,j as e,u as ee,L as J,a as Me,O as Ie,F as Ze,b as Xe,d as et,e as tt,f as st,i as rt,g as me,h as ot,k as nt,H as at,A as Ae,m as Ne,l as ie,n as fe,s as ye,o as K,p as re,T as He,C as ze,q as je,t as be,v as pe,w as it,x as ke,y as lt,z as Ce,B as ve,D as qe,E as Pe,G as _e,I as dt,J as ct,K as We,M as Fe,S as ut,N as mt,P as he,Q as ge,R as xt,U as ht,V as gt,W as bt,X as pt,Y as G,Z as ft,_ as jt}from"./vendor-Bq58u8Wb.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const y of u)if(y.type==="childList")for(const j of y.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&n(j)}).observe(document,{childList:!0,subtree:!0});function l(u){const y={};return u.integrity&&(y.integrity=u.integrity),u.referrerPolicy&&(y.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?y.credentials="include":u.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function n(u){if(u.ep)return;u.ep=!0;const y=l(u);fetch(u.href,y)}})();const wt={BASE_URL:"/AussieGutPack",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_PATH:"/AussieGutPack",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbWNleGNrZndvdXJwdXl4Ym1sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3NTk4NDcsImV4cCI6MjA2MzMzNTg0N30.zytGP9OKFOegCAyrs_SCvl9Sk88i29TzTIo8P7-7Ky4",VITE_SUPABASE_URL:"https://okmcexckfwourpuyxbml.supabase.co"},Je="https://okmcexckfwourpuyxbml.supabase.co",Ve="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbWNleGNrZndvdXJwdXl4Ym1sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3NTk4NDcsImV4cCI6MjA2MzMzNTg0N30.zytGP9OKFOegCAyrs_SCvl9Sk88i29TzTIo8P7-7Ky4";console.log("Supabase URL:",Je);console.log("Supabase Anon Key:",Ve);console.log("All env:",wt);const ne=Ke(Je,Ve),ce=r.createContext(),vt=({children:t})=>{const[s,l]=r.useState(null),[n,u]=r.useState(!0);r.useEffect(()=>{(async()=>{const{data:{session:a}}=await ne.auth.getSession();l((a==null?void 0:a.user)??null),u(!1)})();const{data:{subscription:S}}=ne.auth.onAuthStateChange((a,c)=>{l((c==null?void 0:c.user)??null),u(!1)});return()=>{S==null||S.unsubscribe()}},[]);const x={user:s,loading:n,signup:async(v,S)=>{console.log("Signup attempt with:",{email:v,password:S});const{data:a,error:c}=await ne.auth.signUp({email:v,password:S,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(a,null,2)),c)throw console.error("Signup error:",c.message),c;if(a.user&&a.user.identities&&a.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const E=await ne.auth.resend({type:"signup",email:v});throw console.log("Resend response:",JSON.stringify(E,null,2)),E.error?(console.error("Error resending confirmation email:",E.error.message),E.error):new Error("User already exists. A confirmation email has been resent.")}return a},login:async(v,S)=>{console.log("Login attempt with:",{email:v,password:S});const{data:a,error:c}=await ne.auth.signInWithPassword({email:v,password:S});if(c)throw console.error("Login error:",c.message),c.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):c;return l(a.user),a},logout:async()=>{const{error:v}=await ne.auth.signOut();if(v)throw console.error("Logout error:",v.message),v;l(null)},refreshUser:async()=>{const{data:{user:v}}=await ne.auth.getUser();l(v)}};return e.jsx(ce.Provider,{value:x,children:t})},Nt=({location:t})=>{var T;const[s,l]=r.useState(!1),{isDarkMode:n,toggleTheme:u}=r.useContext(I),{user:y,logout:j,loading:m}=r.useContext(ce),b=ee(),x=r.useRef(null),v=r.useRef(null);console.log("Rendering Navigation component. isMenuOpen:",s);const S=async()=>{try{await j(),b("/login")}catch($){console.error("Logout error:",$.message)}},a=()=>{var $;s?(l(!1),($=x.current)==null||$.focus()):(l(!0),setTimeout(()=>{var A;return(A=v.current)==null?void 0:A.focus()},100))};r.useEffect(()=>{const $=A=>{var k;A.key==="Escape"&&s&&(l(!1),(k=x.current)==null||k.focus())};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[s]);const c=$=>t.pathname===$,E=((T=y==null?void 0:y.user_metadata)==null?void 0:T.displayName)||"User";return e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#main-content",className:"fixed top-0 left-0 p-2 bg-red-600 text-white focus:top-4 focus:left-4 z-50 transition-all duration-200",children:"Skip to Content"}),e.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${n?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,"aria-label":"Main navigation",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center relative z-50",children:[e.jsx(J,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Aussie Gut Pack"}),e.jsxs("div",{className:"hidden lg:flex space-x-6 items-center",children:[e.jsx(J,{to:"/",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${c("/")?"text-red-600 font-semibold":""}`,children:"Home"}),e.jsx(J,{to:"/products",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${c("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),e.jsx(J,{to:"/blog",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${c("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),e.jsx(J,{to:"/contact",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${c("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),m?e.jsx("span",{children:"Loading..."}):y?e.jsxs(e.Fragment,{children:[e.jsxs(J,{to:"/profile",className:`nav-link text-sm hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${c("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",E]}),e.jsx("button",{onClick:S,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Logout"})]}):e.jsx(J,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Login"}),e.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200","aria-label":n?"Switch to light mode":"Switch to dark mode",children:n?"â˜€ï¸":"ðŸŒ™"})]}),e.jsx("button",{ref:x,onClick:a,"aria-expanded":s,"aria-label":s?"Close menu":"Open menu",className:"lg:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 text-xl z-60",children:e.jsx("i",{className:s?"fas fa-times":"fas fa-bars"})})]}),s&&e.jsx("div",{className:"mobile-menu-backdrop active lg:hidden",onClick:a,tabIndex:0,onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&a()},"aria-label":"Close mobile menu"}),e.jsxs("div",{className:`lg:hidden px-4 py-4 ${s?"mobile-menu-open":"mobile-menu-closed"} ${n?"bg-stone-800 border-t border-stone-700":"bg-red-50 border-t border-red-200"} shadow-md`,children:[e.jsx(J,{ref:v,to:"/",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${c("/")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Home"}),e.jsx(J,{to:"/products",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${c("/products")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Products"}),e.jsx(J,{to:"/blog",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${c("/blog")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Blog"}),e.jsx(J,{to:"/faq",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${c("/faq")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"FAQ"}),e.jsx(J,{to:"/contact",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${c("/contact")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Contact"}),e.jsx(J,{to:"/nutrition",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${c("/nutrition")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Nutrition"}),y&&e.jsx(J,{to:"/profile",onClick:a,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${c("/profile")?"text-red-600 font-semibold":""} ${n?"text-red-400":"text-red-800"}`,children:"Profile"}),e.jsx("button",{onClick:()=>{u(),a()},className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${n?"text-red-400":"text-red-800"}`,"aria-label":n?"Switch to light mode":"Switch to dark mode",children:n?"â˜€ï¸ Light Mode":"ðŸŒ™ Dark Mode"}),m?e.jsx("span",{className:"block py-2 px-3",children:"Loading..."}):y?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`block py-2 px-3 text-sm ${n?"text-red-400":"text-red-800"}`,children:["Welcome, ",E]}),e.jsx("button",{onClick:()=>{S(),a()},className:"block py-2 px-3 text-left w-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Logout"})]}):e.jsx(J,{to:"/login",onClick:a,className:"block py-2 px-3 text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Login"})]})]})]})},yt=()=>{const{isDarkMode:t}=r.useContext(I),{user:s,logout:l}=r.useContext(ce),n=Me();return e.jsx("div",{className:`${t?"dark":""}`,children:e.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[e.jsx(Nt,{location:n}),e.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:e.jsx(Ie,{})}),e.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:e.jsx(Ze,{size:24})}),e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:e.jsx(Xe,{size:24})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:e.jsx(et,{size:24})}),e.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:e.jsx(tt,{size:24})}),e.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:e.jsx(st,{size:24})})]})}),e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function se({to:t,children:s,variant:l,className:n,...u}){const y="px-4 py-2 rounded transition-colors duration-300 ease-in-out",j=l==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return t?e.jsx(J,{to:t,className:`${y} ${j} ${n}`,...u,children:s}):e.jsx("button",{className:`${y} ${j} ${n}`,...u,children:s})}const $t="/AussieGutPack/aussie-BleX4DhZ.png",kt="/AussieGutPack/goggins-BJp9afAd.png",Ge=[{src:$t,alt:"Australian Shepherd dog"},{src:kt,alt:"David Goggins running"}],Ct=({className:t})=>{const[s,l]=r.useState(0);return r.useEffect(()=>{const n=setInterval(()=>{l(u=>(u+1)%Ge.length)},5e3);return()=>clearInterval(n)},[]),e.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:Ge.map((n,u)=>e.jsx("img",{src:n.src,alt:n.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${u===s?"opacity-100":"opacity-0"} ${t||""}`},u))})},St={apiKey:"AIzaSyAjVDbvzmbogD_lbGqB4MmVf3aTnTQzEh8",authDomain:"aussie-gut-pack-a896e.firebaseapp.com",projectId:"aussie-gut-pack-a896e",storageBucket:"aussie-gut-pack-a896e.firebasestorage.app",messagingSenderId:"817190270687",appId:"1:817190270687:web:357c740b79d6e243e3db6a",measurementId:"G-NEV6BN8ZKT"},Be=rt(St),V=me(Be),de=ot(Be),Ee=nt(Be);function Dt(){const{isDarkMode:t}=r.useContext(I),s=r.useRef(null),l=r.useRef(null),n=Me(),[u,y]=r.useState(!0),[j,m]=r.useState(null),[b,x]=r.useState(!1),[v,S]=r.useState(!1),[a,c]=r.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[E,T]=r.useState(0),[$,A]=r.useState(null),[k,B]=r.useState(null),[D,C]=r.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);r.useEffect(()=>{(async()=>{var R,Y,te;y(!0),m(null);try{const X=ie(V,"content","home");console.log("Fetching content/home...");const le=await fe(X);console.log("Document exists:",le.exists());let N={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"Here at Aussie Gut Pack, we believe life should beâ€¦eel less like a chore and more like an adventure.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin.","Eat a fiber-rich meal.","Practice 5 minutes of deep breathing."],lastUpdated:null};if(le.exists()){const _=le.data();console.log("Firestore data:",_),N={...N,..._,quotes:Array.isArray(_.quotes)?_.quotes:N.quotes,currentWorkout:{description:((R=_.currentWorkout)==null?void 0:R.description)||N.currentWorkout.description,warmup:Array.isArray((Y=_.currentWorkout)==null?void 0:Y.warmup)?_.currentWorkout.warmup:N.currentWorkout.warmup,main:Array.isArray((te=_.currentWorkout)==null?void 0:te.main)?_.currentWorkout.main:N.currentWorkout.main},scheduledWorkouts:Array.isArray(_.scheduledWorkouts)?_.scheduledWorkouts:[],aboutUs:_.aboutUs||N.aboutUs,dailyChallenges:Array.isArray(_.dailyChallenges)?_.dailyChallenges:N.dailyChallenges,lastUpdated:_.lastUpdated||N.lastUpdated}}else console.warn("No document found at content/home, initializing..."),await ye(X,N);const O=new Date,H=[...N.scheduledWorkouts];let Z=!1;if(H.sort((_,Q)=>new Date(_.updateDateTime)-new Date(Q.updateDateTime)),H.length>0){const _=H[0],Q=new Date(_.updateDateTime);O>=Q&&(!N.lastUpdated||new Date(N.lastUpdated)<Q)&&(N.currentWorkout={description:_.description||"",warmup:_.warmup||[],main:_.main||[]},H.shift(),N.scheduledWorkouts=H,N.lastUpdated=O.toISOString(),Z=!0)}Z&&(await ye(X,N,{merge:!0}),console.log("Updated Firestore document with new workout")),console.log("Setting content:",N),c(N);try{const _=K(V,"content","blog","posts"),Q=await re(_);if(Q.empty){console.log("No blog posts found"),A({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."});return}const ue=Q.docs.map(M=>({id:M.id,title:M.data().title||"Untitled Post",date:M.data().date||new Date().toISOString(),blocks:M.data().blocks||[]}));if(ue.length>0){ue.sort((i,w)=>new Date(w.date)-new Date(i.date));const M=ue[0],P=L(M);A({...M,excerpt:P});const F=new Date("2025-04-16T00:00:00Z"),g=ue.filter(i=>new Date(i.date)>F).sort((i,w)=>new Date(i.date)-new Date(w.date));if(g.length>0){const i=g[0],w=L(i);B({...i,excerpt:w})}}}catch(_){console.error("Error fetching blog posts:",_),A({id:"1",title:"The Importance of Gut Health",date:"2025-01-15",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}}catch(X){console.error("Error in fetchAndUpdateContent:",X),m("Failed to load content. Please try again later.")}finally{y(!1),console.log("isLoading set to false")}})()},[]);const L=U=>{if(!U||!U.blocks||U.blocks.length===0)return"Read more...";const R=U.blocks.find(Y=>Y.type==="paragraph"||Y.type==="list"||Y.type==="bullet");return R?R.type==="paragraph"&&R.content?R.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(R.content)&&R.content.length>0?R.content[0]+(R.content.length>1?"...":""):"Read more...":"Read more..."};r.useEffect(()=>{const U=new IntersectionObserver(Y=>{Y.forEach(te=>{const X=te.isIntersecting;console.log(`IntersectionObserver: ${te.target===s.current?"headerRef":"roofRef"} isIntersecting: ${X}`),te.target===s.current&&x(X),te.target===l.current&&S(X)})},{threshold:.1});s.current&&U.observe(s.current),l.current&&U.observe(l.current);const R=setTimeout(()=>{v||(console.log("IntersectionObserver timeout: Forcing isRoofVisible to true"),S(!0)),b||(console.log("IntersectionObserver timeout: Forcing isHeaderVisible to true"),x(!0))},2e3);return()=>{s.current&&U.unobserve(s.current),l.current&&U.unobserve(l.current),clearTimeout(R)}},[b,v]),r.useEffect(()=>{const U=setInterval(()=>{T(R=>(R+1)%(a.quotes.length||1))},4e3);return()=>clearInterval(U)},[a.quotes.length]),r.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(D))},[D]);const d={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},h={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},o=U=>{C(R=>R.includes(U)?R.filter(Y=>Y!==U):[...R,U])},p=a.dailyChallenges.length>0&&D.length===a.dailyChallenges.length&&a.dailyChallenges.every((U,R)=>D.includes(R)),f="https://aussiegutpack.com",q=`${f}${n.pathname==="/"?"":n.pathname}`;return e.jsxs(e.Fragment,{children:[e.jsxs(at,{children:[e.jsx("title",{children:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),e.jsx("meta",{name:"description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),e.jsx("meta",{name:"keywords",content:"gut health, digestive health, Australian Shepherd, wellness, fitness, daily challenges, Aussie Gut Pack"}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("meta",{property:"og:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),e.jsx("meta",{property:"og:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:url",content:q}),e.jsx("meta",{property:"og:image",content:`${f}/images/og-image.jpg`}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),e.jsx("meta",{name:"twitter:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),e.jsx("meta",{name:"twitter:image",content:`${f}/images/og-image.jpg`}),$&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:$.title,datePublished:$.date,description:$.excerpt,author:{"@type":"Organization",name:"Aussie Gut Pack"},publisher:{"@type":"Organization",name:"Aussie Gut Pack",logo:{"@type":"ImageObject",url:`${f}/images/creatine.png`}},mainEntityOfPage:{"@type":"WebPage","@id":`${f}/blog/${$.id}`}})})]}),e.jsx("main",{id:"main-content",className:`min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"100vh"},children:u?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("p",{className:`text-xl ${t?"text-white":"text-red-600"}`,children:"Loading content..."})}):j?e.jsx("div",{className:"text-center text-red-600 p-4",children:j}):e.jsxs(e.Fragment,{children:[console.log("Rendering sections, content:",a),e.jsx("section",{ref:s,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:e.jsxs("div",{className:"container mx-auto text-center",children:[e.jsxs("header",{children:[e.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),e.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."})]}),e.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${b?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[e.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[e.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"About Us"}),e.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:a.aboutUs||"No about us content available."}),e.jsx("div",{className:"flex justify-center gap-4 mt-6",children:e.jsx(se,{to:"/login",variant:"primary",className:"join-the-pack-button","aria-label":"Join the Aussie Gut Pack community",children:"Join the Pack"})})]}),e.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:e.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:e.jsx(Ct,{className:"w-full h-full object-cover"})})})]})]})}),e.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),e.jsx("section",{ref:l,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:e.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${v?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[e.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),e.jsx("div",{className:"max-w-2xl mx-auto mb-8",style:{minHeight:"80px"},children:e.jsx(Ae,{mode:"wait",children:a.quotes.length>0?e.jsxs(Ne.p,{variants:d,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:['"',a.quotes[E],'"']},E):e.jsx("p",{className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No quotes available."})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[e.jsxs("section",{className:"workout-section","aria-labelledby":"workout-heading",children:[e.jsx("h3",{id:"workout-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),a.currentWorkout.description?e.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:a.currentWorkout.description}):e.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No workout description available."}),e.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Warm Up"}),a.currentWorkout.warmup.length>0?e.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:a.currentWorkout.warmup.map((U,R)=>e.jsx("li",{className:"mb-2 text-lg",children:U},`warmup-${R}`))}):e.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No warmup exercises available."}),e.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Main Workout"}),a.currentWorkout.main.length>0?e.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:a.currentWorkout.main.map((U,R)=>e.jsx("li",{className:"mb-2 text-lg",children:U},`main-${R}`))}):e.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No main workout exercises available."}),e.jsx(se,{to:"/fitness-tips",variant:"primary",className:"mx-auto btn-primary bg-red-800 text-white hover:bg-red-900","aria-label":"View more fitness tips",children:"More Fitness Tips"})]}),e.jsxs("section",{className:"challenges-section","aria-labelledby":"challenges-heading",children:[e.jsx("h3",{id:"challenges-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),a.dailyChallenges.length>0?e.jsx("ul",{className:`text-left list-none pl-6 mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,role:"list",children:a.dailyChallenges.map((U,R)=>e.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[e.jsx("input",{type:"checkbox",id:`challenge-${R}`,checked:D.includes(R),onChange:()=>o(R),className:"mr-2","aria-label":`Mark challenge as completed: ${U}`,"aria-checked":D.includes(R)}),e.jsx("label",{htmlFor:`challenge-${R}`,children:U})]},`challenge-${R}`))}):e.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No challenges available."}),e.jsx(Ae,{children:p&&e.jsx(Ne.p,{variants:h,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-green-400":"text-green-600"}`,"aria-live":"polite",children:"Great job, Pack Leader!"})})]})]})]})}),e.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),e.jsx("section",{className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,style:{minHeight:"400px"},children:e.jsxs("div",{className:"container mx-auto text-center",children:[e.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),$?e.jsxs("article",{className:"mb-8",children:[e.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:$.title}),e.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:new Date($.date).toLocaleDateString()}),e.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:$.excerpt}),e.jsx(se,{to:`/blog/${$.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900","aria-label":`Read more about ${$.title}`,children:"Read More"})]}):e.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No blog posts available."}),k?e.jsxs("article",{children:[e.jsxs("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Upcoming: ",k.title]}),e.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:["Coming on"," ",new Date(k.date).toLocaleDateString()]}),e.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:k.excerpt}),e.jsx("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-500"}`,children:"Stay tuned for this upcoming post!"})]}):e.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No upcoming blog posts at this time."})]})}),e.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),e.jsxs("section",{className:`py-8 ${t?"bg-stone-800":"bg-stone-100"} text-center`,children:[e.jsx("p",{className:`text-lg mb-4 ${t?"text-white":"text-red-600"}`,children:"Want more? Sign up with us today!"}),e.jsx(se,{to:"/login",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900","aria-label":"Sign up for Aussie Gut Pack",children:"Sign Up"})]})]})})]})}const Ye=r.createContext(),Pt=({children:t})=>{const[s,l]=r.useState([]),n=b=>{l(x=>x.find(S=>S.id===b.id)?x.map(S=>S.id===b.id?{...S,quantity:S.quantity+1}:S):[...x,{...b,quantity:1}])},u=(b,x)=>{x<=0?y(b):l(v=>v.map(S=>S.id===b?{...S,quantity:x}:S))},y=b=>{l(x=>x.filter(v=>v.id!==b))},j=()=>{l([])},m=()=>s.reduce((b,x)=>b+x.price*x.quantity,0);return e.jsx(Ye.Provider,{value:{cart:s,addToCart:n,updateQuantity:u,removeFromCart:y,clearCart:j,getTotalPrice:m},children:t})},Se=()=>r.useContext(Ye);function Et(){var le;const{isDarkMode:t}=r.useContext(I),{cart:s,addToCart:l,updateQuantity:n,removeFromCart:u,getTotalPrice:y}=Se(),[j,m]=r.useState([]),[b,x]=r.useState([]),[v,S]=r.useState(!1),[a,c]=r.useState(""),[E,T]=r.useState(""),[$,A]=r.useState(""),[k,B]=r.useState(!1),[D,C]=r.useState(!0),[L,d]=r.useState(!1),[h,o]=r.useState(!1),p=r.useRef(null),f=r.useRef(null),q=ee();r.useEffect(()=>{console.log("isMiniCartOpen updated to:",k)},[k]),r.useEffect(()=>{console.log("showAll updated to:",v)},[v]),r.useEffect(()=>{const N=O=>{const H=document.querySelector(".cart-button"),Z=O.target.closest(".add-to-cart-button"),_=Date.now(),Q=f.current?_-f.current:1/0;console.log("Outside click handler triggered, target:",O.target),console.log("Is target an Add to Cart button?",!!Z),console.log("Time since last Add to Cart click:",Q),console.log("IsMiniCartOpen?",k),console.log("OpenedByAdd?",L),k&&!O.target.closest(".mini-cart-sidebar")&&!(H!=null&&H.contains(O.target))&&!Z&&Q>100&&!L&&(console.log("Outside click detected, closing sidebar"),B(!1))};return document.addEventListener("click",N),()=>document.removeEventListener("click",N)},[k,L]),r.useEffect(()=>{(async()=>{try{C(!0);const H=(await re(K(V,"categories"))).docs.map(Q=>({id:Q.id,...Q.data()}));m(H);const _=(await re(K(V,"products"))).docs.map(Q=>({id:Q.id,...Q.data()}));x(_)}catch(O){console.error("Error fetching data from Firestore:",O)}finally{C(!1)}})()},[]),r.useEffect(()=>(s.length>0&&(p.current&&clearTimeout(p.current),console.log("Cart updated, opening sidebar, cart length:",s.length),d(!0),B(!0),s.length!==1&&(p.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),B(!1),d(!1)},3e3))),()=>{p.current&&clearTimeout(p.current)}),[s]),r.useEffect(()=>{s.length===0&&k&&(console.log("Cart is empty, closing sidebar"),B(!1),d(!1))},[s,k]);const U=N=>{f.current=Date.now(),l(N)},R=N=>{const O=[...N];switch(a){case"price-asc":return O.sort((H,Z)=>H.price-Z.price);case"price-desc":return O.sort((H,Z)=>Z.price-H.price);case"name-asc":return O.sort((H,Z)=>H.name.localeCompare(Z.name));case"name-desc":return O.sort((H,Z)=>Z.name.localeCompare(H.name));default:return O}},Y=b.filter(N=>$?N.name.toLowerCase().includes($.toLowerCase())||N.description.toLowerCase().includes($.toLowerCase()):!0),te=E?Y.filter(N=>N.categoryId===E):Y,X=R(te);return e.jsxs("div",{className:`min-h-screen container mx-auto px-4 py-8 md:px-6 md:py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:`text-3xl md:text-4xl font-bold transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Pack"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-3 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950 md:px-4",onClick:N=>{N.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",k),B(!k)},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("span",{className:"hidden md:inline",children:"Cart"}),Array.isArray(s)&&s.length>0&&e.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-5 w-5 md:h-6 md:w-6 flex items-center justify-center text-xs md:text-sm transition-all duration-300 ease-in-out ${s.length>0?"animate-bounce":""}`,children:s.reduce((N,O)=>N+O.quantity,0)})]}),e.jsx("button",{onClick:()=>o(!h),className:"md:hidden text-white focus:outline-none",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})})]})]}),e.jsxs("div",{className:`${h?"block":"hidden"} md:block mb-6 transition-all duration-300 ease-in-out`,children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Products"}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search products by name or description...",value:$,onChange:N=>A(N.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Filter by Section:"}),e.jsxs("select",{value:E,onChange:N=>T(N.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[e.jsx("option",{value:"",children:"All Sections"}),j.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("label",{className:`text-base md:text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Sort By:"}),e.jsxs("select",{value:a,onChange:N=>c(N.target.value),className:`w-full sm:w-auto px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"price-asc",children:"Price: Low to High"}),e.jsx("option",{value:"price-desc",children:"Price: High to Low"}),e.jsx("option",{value:"name-asc",children:"Name: A-Z"}),e.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),e.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",v),S(N=>{const O=!N;return console.log("Setting showAll to:",O),O&&(console.log("Resetting filterCategory to show all products"),T("")),O})},className:`w-full sm:w-auto px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${t?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:v?"Group by Category":"Show All Products"})]})]}),D?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):E?e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:((le=j.find(N=>N.id===E))==null?void 0:le.name)||"Section"}),X.length===0?e.jsx("p",{className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:X.map(N=>e.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("img",{src:N.image,alt:N.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:O=>{O.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${N.name}`)}}),e.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:N.name}),e.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:N.description}),e.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",N.price.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:O=>{O.stopPropagation(),f.current=Date.now(),U(N)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),e.jsx("button",{onClick:()=>q(`/shop/product/${N.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},N.id))})]}):v?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:X.map(N=>e.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("img",{src:N.image,alt:N.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:O=>{O.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${N.name}`)}}),e.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:N.name}),e.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:N.description}),e.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",N.price.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:O=>{O.stopPropagation(),f.current=Date.now(),U(N)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),e.jsx("button",{onClick:()=>q(`/shop/product/${N.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},N.id))}):j.map(N=>e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-xl md:text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:N.name}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:R(b.filter(O=>O.categoryId===N.id)).map(O=>e.jsxs("div",{className:`p-3 md:p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("img",{src:O.image,alt:O.name,className:"w-full h-40 md:h-48 object-cover rounded-md mb-3 md:mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:H=>{H.target.src="/UW_placeholder.jpg",console.error(`Failed to load image for ${O.name}`)}}),e.jsx("h3",{className:`text-base md:text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:O.name}),e.jsx("p",{className:`text-xs md:text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:O.description}),e.jsxs("p",{className:`text-xs md:text-sm mb-3 md:mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",O.price.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:H=>{H.stopPropagation(),f.current=Date.now(),U(O)},className:"add-to-cart-button bg-red-800 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base",children:"Add to Cart"}),e.jsx("button",{onClick:()=>q(`/shop/product/${O.id}`),className:`bg-gray-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md font-semibold hover:bg-gray-700 active:bg-gray-800 transition-all duration-300 ease-in-out flex-1 text-sm md:text-base ${t?"bg-gray-500":"bg-gray-600"}`,children:"View Details"})]})]},O.id))})]},N.id)),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:N=>{N.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),B(!1)}}),e.jsx("div",{className:`mini-cart-sidebar w-64 md:w-80 p-4 md:p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${k?"translate-x-0":"translate-x-full"} ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:e.jsxs("div",{className:`mini-cart-content ${k?"active":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Your Cart"}),e.jsx("button",{onClick:N=>{N.stopPropagation(),console.log("Close button clicked, closing sidebar"),B(!1)},className:`text-base md:text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:"âœ•"})]}),!Array.isArray(s)||s.length===0?e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(He,{component:null,children:s.map(N=>e.jsx(ze,{timeout:300,classNames:"cart-item",children:e.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${t?"border-stone-600":"border-red-300"}`,children:[e.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 md:w-16 md:h-16 object-cover rounded-md",onError:O=>{O.target.src="/UW_placeholder.jpg"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-xs md:text-sm font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:N.name}),e.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["$",N.price.toFixed(2)," x ",N.quantity]}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[N.quantity===1?e.jsx("button",{onClick:O=>{O.stopPropagation(),u(N.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):e.jsx("button",{onClick:O=>{O.stopPropagation(),n(N.id,N.quantity-1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),e.jsx("span",{className:`text-xs md:text-sm mx-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:N.quantity}),e.jsx("button",{onClick:O=>{O.stopPropagation(),n(N.id,N.quantity+1)},className:"text-black px-1 md:px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),e.jsx("button",{onClick:O=>{O.stopPropagation(),u(N.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:"âœ•"})]})},N.id))}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("p",{className:`text-base md:text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Subtotal: $",y().toFixed(2)]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),B(!1),q("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4 text-sm md:text-base",children:"Go to Cart"}),e.jsx("button",{onClick:N=>{N.stopPropagation(),B(!1),q("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2 text-sm md:text-base",children:"Proceed to Checkout"})]})]})]})})]})]})}function At(){const{id:t}=je(),{isDarkMode:s}=r.useContext(I),{addToCart:l}=Se(),[n,u]=r.useState(null),[y,j]=r.useState(!0),[m,b]=r.useState([]),[x,v]=r.useState(0),[S,a]=r.useState(0),[c,E]=r.useState(""),[T,$]=r.useState(null),A=ee();r.useEffect(()=>{const C=de.onAuthStateChanged(L=>{$(L)});return()=>C()},[]),r.useEffect(()=>{(async()=>{try{j(!0);const L=ie(V,"products",t),d=await fe(L);d.exists()?u({id:d.id,...d.data()}):(console.error("Product not found"),A("/products"));const h=K(V,"products",t,"reviews"),p=(await re(h)).docs.map(f=>({id:f.id,...f.data()}));if(b(p),p.length>0){const f=p.reduce((q,U)=>q+U.rating,0);v(f/p.length)}else v(0)}catch(L){console.error("Error fetching product or reviews:",L),A("/products")}finally{j(!1)}})()},[t,A]);const k=C=>{a(C)},B=C=>{a(C)},D=async C=>{if(C.preventDefault(),!T){alert("Please sign in to submit a review.");return}if(S<1||S>5){alert("Please select a rating between 1 and 5 stars.");return}if(!c.trim()){alert("Please enter a review comment.");return}try{const L={rating:S,comment:c,userId:T.uid,userEmail:T.email,timestamp:new Date().toISOString()},d=K(V,"products",t,"reviews");await be(d,L),b([...m,L]);const h=[...m,L].reduce((o,p)=>o+p.rating,0);v(h/(m.length+1)),a(0),E("")}catch(L){console.error("Error submitting review:",L),alert("Failed to submit review. Please try again.")}};return y?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):n?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("button",{onClick:()=>A("/products"),className:`mb-6 text-sm font-semibold transition-colors duration-300 ease-in-out ${s?"text-red-400 hover:text-red-500":"text-red-600 hover:text-red-800"}`,children:"â† Back to Products"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"md:w-1/2",children:e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-96 object-cover rounded-md",onError:C=>{C.target.src="https://via.placeholder.com/300x200.png?text=No+Image",console.error(`Failed to load image for ${n.name}`)}})}),e.jsxs("div",{className:"md:w-1/2",children:[e.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:n.name}),e.jsx("p",{className:`text-lg mb-4 transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:n.description}),e.jsxs("p",{className:`text-xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:["Price: $",n.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(C=>e.jsx("svg",{className:`w-6 h-6 ${C<=Math.round(x)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},C))}),e.jsxs("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:["(",x.toFixed(1)," from ",m.length," reviews)"]})]}),e.jsx("button",{onClick:()=>l(n),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Add to Cart"})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-6 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Customer Reviews"}),e.jsxs("div",{className:`p-6 border rounded-md mb-8 ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("h3",{className:`text-lg font-medium mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:"Write a Review"}),T?e.jsxs("form",{onSubmit:D,children:[e.jsx("div",{className:"flex mb-4",children:[1,2,3,4,5].map(C=>e.jsx("svg",{onMouseEnter:()=>k(C),onMouseLeave:()=>k(S),onClick:()=>B(C),className:`w-8 h-8 cursor-pointer ${C<=S?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},C))}),e.jsx("textarea",{value:c,onChange:C=>E(C.target.value),placeholder:"Write your review here...",className:`w-full p-3 border rounded-md focus:outline-none transition-all duration-300 ease-in-out mb-4 ${s?"bg-stone-700 border-stone-600 text-white placeholder-stone-400 focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 placeholder-stone-400 focus:ring-red-500 focus:border-red-500"}`,rows:"4"}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out",children:"Submit Review"})]}):e.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:["Please"," ",e.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"sign in"})," ","to write a review."]})]}),m.length===0?e.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:"No reviews yet. Be the first to review this product!"}):e.jsx("div",{className:"space-y-6",children:m.map(C=>e.jsxs("div",{className:`p-4 border rounded-md ${s?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(L=>e.jsx("svg",{className:`w-5 h-5 ${L<=C.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.15c.969 0 1.371 1.24.588 1.81l-3.357 2.44a1 1 0 00-.364 1.118l1.287 3.971c.3.921-.755 1.688-1.54 1.118l-3.357-2.44a1 1 0 00-1.175 0l-3.357 2.44c-.784.57-1.838-.197-1.54-1.118l1.287-3.971a1 1 0 00-.364-1.118L2.31 9.397c-.784-.57-.38-1.81.588-1.81h4.15a1 1 0 00.95-.69l1.286-3.97z"})},L))}),e.jsx("span",{className:`ml-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:new Date(C.timestamp).toLocaleDateString()})]}),e.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:C.comment}),e.jsxs("p",{className:`text-xs mt-2 transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"}`,children:["By: ",C.userEmail]})]},C.id))})]})]}):null}function Lt(){const{isDarkMode:t}=r.useContext(I),{cart:s,updateQuantity:l,removeFromCart:n,clearCart:u,getTotalPrice:y}=Se(),[j,m]=r.useState(!1),[b,x]=r.useState({name:"",email:"",address:""}),v=ee(),S=async a=>{if(a.preventDefault(),!b.name||!b.email||!b.address){alert("Please fill in all fields to proceed with checkout.");return}m(!0);try{const c={items:s,total:y(),customer:b,createdAt:new Date().toISOString(),status:"pending"};await be(K(V,"orders"),c),u(),alert("Order placed successfully! Thank you for your purchase."),v("/")}catch(c){console.error("Error placing order:",c),alert("Failed to place order. Please try again.")}finally{m(!1),x({name:"",email:"",address:""})}};return e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Your Cart"}),s.length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),e.jsx("button",{onClick:()=>v("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-20 h-20 object-cover rounded-md",onError:c=>{c.target.src="https://via.placeholder.com/80"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:a.name}),e.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",a.price.toFixed(2)]}),e.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(a.price*a.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(a.id,a.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:j,children:"-"}),e.jsx("span",{className:`text-lg ${t?"text-white":"text-red-600"}`,children:a.quantity}),e.jsx("button",{onClick:()=>l(a.id,a.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:j,children:"+"})]}),e.jsx("button",{onClick:()=>n(a.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:j,children:"Remove"})]},a.id))}),e.jsxs("div",{className:`p-6 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-white":"text-red-600"}`,children:"Order Summary"}),e.jsxs("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:["Total: $",y().toFixed(2)]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Full Name"}),e.jsx("input",{type:"text",value:b.name,onChange:a=>x({...b,name:a.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Email"}),e.jsx("input",{type:"email",value:b.email,onChange:a=>x({...b,email:a.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Shipping Address"}),e.jsx("textarea",{value:b.address,onChange:a=>x({...b,address:a.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:j})]}),e.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${j?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:j,children:j?"Processing...":"Place Order"})]})]})]})]})}function Mt(){const{isDarkMode:t}=r.useContext(I),{cart:s,updateQuantity:l,removeFromCart:n}=Se(),u=Object.values(s).reduce((j,m)=>j+m.price*m.quantity,0),y=()=>{alert("Order placed successfully!"),Object.keys(s).forEach(j=>n(j))};return e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsxs("header",{className:"text-center mb-12",children:[e.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Checkout"}),e.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(s).length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),e.jsx(se,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6",children:Object.entries(s).map(([j,m])=>e.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:e.jsx("img",{src:m.image||"https://via.placeholder.com/80",alt:m.name,className:"w-full h-full object-cover rounded"})}),e.jsxs("div",{className:"flex-1 ml-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:m.name}),e.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Color: ",m.color]}),e.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Size: ",m.size]})]}),e.jsx("button",{onClick:()=>n(j),className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:"âœ•"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("button",{onClick:()=>l(j,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),e.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${t?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:m.quantity}),e.jsx("button",{onClick:()=>l(j,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),e.jsx("div",{className:"text-right ml-4",children:m.originalPrice?e.jsxs("div",{children:[e.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["$",(m.originalPrice*m.quantity).toFixed(2)]}),e.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(m.price*m.quantity).toFixed(2)]})]}):e.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(m.price*m.quantity).toFixed(2)]})})]},j))}),e.jsxs("div",{className:"mt-12 text-right",children:[e.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Total: $",u.toFixed(2)]}),e.jsx(se,{onClick:y,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const Le=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):","â€¢ Stress: Elevates cortisol, disrupting gut flora and increasing permeability","â€¢ Glyphosate: Kills beneficial bacteria, feeds pathogenic ones","â€¢ Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections","â€¢ Seed Oils: Feed pathogenic bacteria, have a long half-life","â€¢ Refined Sugars: Feed harmful bacteria, promote dysbiosis","â€¢ Long-term Restrictive Diets: Reduce microbiome diversity","â€¢ Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
â€¢ Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
â€¢ Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
â€¢ Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesnâ€™t survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
â€¢ Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
â€¢ A nutrient-dense, diverse, unprocessed diet with prebiotics
â€¢ Healthy exercise, sleep, and an uplifting social life worth enjoying
â€¢ Sun exposure and skin contact with nature
â€¢ Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connectedâ€”good gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function $e({title:t,content:s,footer:l,className:n}){const{isDarkMode:u}=r.useContext(I);return e.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${u?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${n}`,children:[e.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${u?"text-red-400":"text-red-800"}`,children:t}),s&&e.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${u?"text-white":"text-red-600"}`,children:s}),l&&e.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${u?"text-white":"text-red-600"}`,children:l})]})}function Wt(){const{isDarkMode:t}=r.useContext(I);r.useEffect(()=>{});const s=Le.filter(n=>n.category==="Benefits"),l=Le.filter(n=>n.category!=="Benefits");return e.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,children:[e.jsx("div",{className:"pt-16"}),e.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),e.jsxs("section",{className:"mb-8 flex-grow",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),e.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),e.jsxs("section",{className:"py-12 px-6 flex-grow",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:s.map(n=>e.jsx(J,{to:`/gut-health/${n.id}`,children:e.jsx($e,{title:n.title,content:n.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},n.id))})]}),e.jsxs("section",{className:"flex-grow",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:l.map(n=>e.jsx(J,{to:`/gut-health/${n.id}`,children:e.jsx($e,{title:n.title,content:n.content,footer:`Category: ${n.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${t?"bg-stone-800":"bg-stone-50"}`})},n.id))})]})]})}function Ft(){const{id:t}=je(),{isDarkMode:s}=r.useContext(I);ee();const l=Le.find(n=>n.id.toString()===t);return l?e.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${s?"bg-stone-900":"bg-white"}`,children:[e.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:l.title}),e.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:["Category: ",l.category]}),Array.isArray(l.content)?e.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:l.content.map((n,u)=>e.jsx("li",{className:"mb-2",children:n},u))}):e.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:l.content}),e.jsx(se,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):e.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${s?"bg-stone-900":"bg-white"}`,children:[e.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),e.jsx(se,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const Bt=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function Ot(){const{isDarkMode:t}=r.useContext(I),[s,l]=r.useState([]),n=j=>l([...s,j]),u=j=>l(s.filter(m=>m.id!==j)),y=s.reduce((j,m)=>j+m.price,0);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:`text-3xl font-bold mb-6 ${t?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Available Products"}),Bt.map(j=>e.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${t?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${t?"text-gray-300":"text-gray-800"}`,children:j.name}),e.jsxs("p",{className:`${t?"text-green-400":"text-green-700"}`,children:["$",j.price]})]}),e.jsx(se,{onClick:()=>n(j),variant:"primary",children:"Add to Cart"})]},j.id))]}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Your Cart"}),s.length===0?e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):e.jsxs(e.Fragment,{children:[s.map(j=>e.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${t?"border-gray-700":"border-gray-300"}`,children:[e.jsx("span",{className:`${t?"text-gray-300":"text-gray-800"}`,children:j.name}),e.jsxs("div",{children:[e.jsxs("span",{className:`mr-4 ${t?"text-green-400":"text-green-700"}`,children:["$",j.price]}),e.jsx("button",{onClick:()=>u(j.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},j.id)),e.jsxs("div",{className:`mt-4 font-bold ${t?"text-green-300":"text-green-800"}`,children:["Total: $",y.toFixed(2)]}),e.jsx(se,{className:"mt-4 w-full",variant:"primary",disabled:s.length===0,children:"Checkout"})]})]})]})]})}const Tt=()=>{const{isDarkMode:t}=r.useContext(I),[s,l]=r.useState([]),[n,u]=r.useState(!0),[y,j]=r.useState(null);r.useEffect(()=>{(async()=>{try{const c=K(V,"content","blog","posts"),T=(await re(c)).docs.map($=>{var A,k;return{id:$.id,title:$.data().title,blocks:$.data().blocks||[{type:"paragraph",content:""}],date:$.data().date||"",lastEdited:$.data().lastEdited||"",image:((k=(A=$.data().blocks)==null?void 0:A.find(B=>B.type==="image"))==null?void 0:k.content)||""}});if(console.log("Fetched blog posts:",T),T.length>0){const $=T.sort((A,k)=>{const B=A.date?new Date(A.date):null,D=k.date?new Date(k.date):null;return console.log(`Sorting: ${A.title} (${A.date}) -> ${B}, ${k.title} (${k.date}) -> ${D}`),!B||isNaN(B.getTime())?1:!D||isNaN(D.getTime())?-1:D-B});console.log("Sorted blog posts:",$),l($)}else l([])}catch(c){console.error("Error fetching blog posts:",c),j("Failed to load blog posts. Please try again later."),l([])}finally{u(!1)}})()},[]);const m=a=>{if(!a)return"Date not set";const c=new Date(a);return isNaN(c.getTime())?"Invalid Date":c.toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"})},b=a=>{if(!a)return"Never edited";const c=new Date(a);return isNaN(c.getTime())?"Invalid Timestamp":c.toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},x=a=>{if(!a.blocks||a.blocks.length===0)return"Read more...";const c=a.blocks.find(E=>E.type==="paragraph"||E.type==="list"||E.type==="bullet");return c?c.type==="paragraph"?c.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(c.content)?c.content[0]+(c.content.length>1?"...":""):"Read more...":"Read more..."},v=a=>{if(!a.date)return!1;const c=new Date("2025-04-16T00:00:00Z"),E=new Date(a.date);return isNaN(E.getTime())?!1:E>c},S={hidden:{opacity:0,y:20},visible:a=>({opacity:1,y:0,transition:{delay:a*.1,duration:.5,ease:"easeOut"}})};return n?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.jsx("div",{className:"text-center",children:e.jsx(pe,{color:t?"#f87171":"#b91c1c"})})]}):y?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:y})]}):e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),s.length===0?e.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:e.jsx(Ae,{children:s.map((a,c)=>{const E=v(a);return e.jsx(Ne.div,{custom:c,initial:"hidden",animate:"visible",variants:S,className:"group",children:E?e.jsx($e,{title:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-700"} group-hover:underline`,children:a.title}),e.jsx("span",{className:`ml-2 text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:"(Coming Soon)"})]}),footer:e.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[e.jsxs("p",{children:["Publish Date: ",m(a.date)]}),e.jsxs("p",{children:["Last Edited: ",b(a.lastEdited)]})]}),content:e.jsxs(e.Fragment,{children:[a.image&&e.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:e.jsx("img",{src:a.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out"})}),e.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:x(a)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 opacity-50":"bg-white border-red-800/50 opacity-50"} cursor-not-allowed overflow-hidden`}):e.jsx(J,{to:`/blog/${a.id}`,className:"block",children:e.jsx($e,{title:e.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-200":"text-stone-800"} group-hover:underline`,children:a.title}),footer:e.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[e.jsxs("p",{children:["Published: ",m(a.date)]}),e.jsxs("p",{children:["Last Edited: ",b(a.lastEdited)]})]}),content:e.jsxs(e.Fragment,{children:[a.image&&e.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:e.jsx("img",{src:a.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"})}),e.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:x(a)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 hover:bg-stone-700 hover:shadow-xl":"bg-white border-red-800/50 hover:bg-stone-100 hover:shadow-xl"} overflow-hidden`})})},a.id)})})})]})},Rt=()=>{const{id:t}=je(),{isDarkMode:s}=r.useContext(I),[l,n]=r.useState(null),[u,y]=r.useState(!0),[j,m]=r.useState(null),[b,x]=r.useState(!1);r.useEffect(()=>{(async()=>{try{y(!0),m(null);const E=ie(V,"content","blog","posts",t),T=await fe(E);if(T.exists()){const $={id:T.id,...T.data()},A=new Date("2025-04-16T00:00:00Z"),k=$.date?new Date($.date):null;k&&k>A?x(!0):x(!1),n($)}else n(null)}catch(E){console.error("Error fetching blog post:",E),m("Failed to load blog post. Please try again later.")}finally{y(!1)}})()},[t]);const v=c=>c?new Date(c).toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"}):"Date not set",S=c=>c?new Date(c).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",a={hidden:{opacity:0,y:20},visible:c=>({opacity:1,y:0,transition:{delay:c*.1,duration:.5,ease:"easeOut"}})};return u?e.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:e.jsx("div",{className:"text-center",children:e.jsx(pe,{color:s?"#f87171":"b91c1c"})})}):j?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Error"}),e.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-600"}`,children:j}),e.jsx(se,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):l?b?e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Coming Soon"}),e.jsxs("p",{className:`text-lg transition-colors duration-300 ease-in-out ${s?"text-stone-300":"text-stone-600"}`,children:["This blog post will be available on ",v(l.date),"."]}),e.jsx(se,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):e.jsx("div",{className:`min-h-screen container mx-auto px-4 sm:px-6 lg:px-8 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:`relative rounded-xl shadow-lg p-8 mb-12 overflow-hidden border-t-4 ${s?"bg-gradient-to-r from-stone-800 to-stone-700 border-red-400/50":"bg-gradient-to-r from-white to-stone-100 border-red-800/50"}`,children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:l.title}),e.jsxs("div",{className:`text-lg transition-colors duration-300 ease-in-out ${s?"text-stone-400":"text-stone-500"} flex flex-col sm:flex-row sm:items-center sm:space-x-4`,children:[e.jsxs("p",{children:["Published: ",v(l.date)]}),e.jsxs("p",{children:["Last Edited: ",S(l.lastEdited)]})]})]}),e.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${s?"text-stone-200 prose-invert":"text-stone-700"}`,children:l.blocks&&l.blocks.length>0?l.blocks.map((c,E)=>e.jsx(Ne.div,{custom:E,initial:"hidden",animate:"visible",variants:a,className:"mb-8",children:c.type==="paragraph"?e.jsx("p",{className:"leading-relaxed",children:c.content}):c.type==="list"&&Array.isArray(c.content)?e.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:c.content.map((T,$)=>e.jsx("li",{className:"leading-relaxed",children:T},$))}):c.type==="bullet"&&Array.isArray(c.content)?e.jsx("ul",{className:"list-disc pl-6 space-y-2",children:c.content.map((T,$)=>e.jsx("li",{className:"leading-relaxed",children:T},$))}):c.type==="image"&&c.content?e.jsx("div",{className:"my-6",children:e.jsx("img",{src:c.content,alt:"Blog content",className:"w-full max-w-lg mx-auto rounded-lg shadow-md"})}):c.type==="link"&&c.content.url?e.jsx(J,{to:c.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${s?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:c.content.text||c.content.url}):e.jsx("p",{className:"text-red-500",children:"Invalid block format"})},E)):e.jsx("p",{children:"No content available."})}),e.jsxs(se,{to:"/blog",variant:"primary",className:"mt-12 inline-flex items-center px-6 py-3 rounded-lg shadow-md transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 hover:shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Blog"]})]})}):e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${s?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),e.jsx(se,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},Ut=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function qt(){const{isDarkMode:t}=r.useContext(I);return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${t?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:Ut.map((s,l)=>e.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${t?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[e.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${t?"group-open:text-green-400":"group-open:text-green-600"}`,children:[s.question,e.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:"â–¼"})]}),e.jsx("p",{className:"mt-2 text-gray-600",children:s.answer})]},l))})]})}function _t(){const{isDarkMode:t}=r.useContext(I),[s,l]=r.useState({name:"",email:"",message:""}),[n,u]=r.useState(""),y=m=>{const{name:b,value:x}=m.target;l(v=>({...v,[b]:x}))},j=m=>{m.preventDefault(),u("Sending..."),it.send("service_abc123","template_xyz789",{from_name:s.name,from_email:s.email,message:s.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(b=>{u("Thank you! Your inquiry has been sent."),l({name:"",email:"",message:""}),setTimeout(()=>u(""),3e3)},b=>{u("Failed to send message. Please try again."),console.error("EmailJS error:",b.text),setTimeout(()=>u(""),3e3)})};return e.jsx("div",{className:`min-h-screen py-12 px-4 ${t?"bg-stone-900":"bg-white"}`,children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Contact Us"}),e.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:y,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:y,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Message"}),e.jsx("textarea",{id:"message",name:"message",value:s.message,onChange:y,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),n&&e.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:n})]})]})})}function Gt(){const{isDarkMode:t}=r.useContext(I),[s,l]=r.useState(""),[n,u]=r.useState(""),[y,j]=r.useState(!1),[m,b]=r.useState(null),x=ee();r.useEffect(()=>{const a=ke(de,c=>{j(!!c)});return()=>a()},[]);const v=async a=>{a.preventDefault(),b(null);try{await lt(de,s,n),j(!0)}catch(c){b("Failed to log in: "+c.message)}},S=async()=>{try{await Ce(de),j(!1),x("/admin")}catch(a){b("Failed to log out: "+a.message)}};return y?e.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:[e.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("button",{onClick:()=>x("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),e.jsx("button",{onClick:()=>x("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),e.jsx("button",{onClick:()=>x("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),e.jsx("button",{onClick:()=>x("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),e.jsx("button",{onClick:S,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:e.jsxs("div",{className:`p-6 ${t?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[e.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),m&&e.jsx("p",{className:`text-red-500 mb-4 ${t?"text-red-400":"text-red-600"}`,children:m}),e.jsxs("form",{onSubmit:v,children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"email",value:s,onChange:a=>l(a.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"password",value:n,onChange:a=>u(a.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function It(){const{isDarkMode:t}=r.useContext(I),[s,l]=r.useState([""]),[n,u]=r.useState(""),[y,j]=r.useState([""]),[m,b]=r.useState([{title:"Main Workout",exercises:[""]}]),[x,v]=r.useState([]),[S,a]=r.useState(""),[c,E]=r.useState([""]),[T,$]=r.useState(null),A=ee();r.useEffect(()=>{const g=ke(de,i=>{i||A("/admin")});return()=>g()},[A]),r.useEffect(()=>{(async()=>{var i,w,W,z,oe,we,Oe,Te;try{const De=ie(V,"content","home"),Re=await fe(De);if(Re.exists()){const ae=Re.data();l((i=ae.quotes)!=null&&i.length?ae.quotes:[""]),u(((w=ae.currentWorkout)==null?void 0:w.description)||""),j((z=(W=ae.currentWorkout)==null?void 0:W.warmup)!=null&&z.length?ae.currentWorkout.warmup:[""]),b((we=(oe=ae.currentWorkout)==null?void 0:oe.sections)!=null&&we.length?ae.currentWorkout.sections:[{title:"Main Workout",exercises:[""]}]),v((Oe=ae.scheduledWorkouts)!=null&&Oe.length?ae.scheduledWorkouts.map(xe=>{var Ue;const Qe=(Ue=xe.sections)!=null&&Ue.length?xe.sections:[{title:"Warm Up",exercises:xe.warmup||[""]},{title:"Main Workout",exercises:xe.main||[""]}];return{description:xe.description||"",sections:Qe,updateDateTime:xe.updateDateTime||""}}):[{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),a(ae.aboutUs||""),E((Te=ae.dailyChallenges)!=null&&Te.length?ae.dailyChallenges:[""])}}catch(De){$("Failed to load content: "+De.message)}})()},[]);const k=async()=>{$(null);const g={quotes:s.filter(i=>i.trim()!==""),currentWorkout:{description:n,warmup:y.filter(i=>i.trim()!==""),sections:m.filter(i=>i.title.trim()&&i.exercises.some(w=>w.trim())).map(i=>({title:i.title,exercises:i.exercises.filter(w=>w.trim()!=="")}))},scheduledWorkouts:x.filter(i=>i.description.trim()&&i.sections.some(w=>w.title.trim()&&w.exercises.some(W=>W.trim()))&&i.updateDateTime.trim()).map(i=>({description:i.description,sections:i.sections.filter(w=>w.title.trim()&&w.exercises.some(W=>W.trim())).map(w=>({title:w.title,exercises:w.exercises.filter(W=>W.trim()!=="")})),updateDateTime:i.updateDateTime})),aboutUs:S.trim(),dailyChallenges:c.filter(i=>i.trim()!==""),lastUpdated:new Date().toISOString()};try{await ye(ie(V,"content","home"),g),alert("Home page content saved successfully!"),A("/admin")}catch(i){$("Error saving changes: "+i.message)}},B=async()=>{try{await Ce(de),A("/admin")}catch(g){$("Failed to log out: "+g.message)}},D=()=>l([...s,""]),C=g=>l(s.filter((i,w)=>w!==g)),L=(g,i)=>{const w=[...s];w[g]=i,l(w)},d=()=>j([...y,""]),h=g=>j(y.filter((i,w)=>w!==g)),o=(g,i)=>{const w=[...y];w[g]=i,j(w)},p=()=>b([...m,{title:"",exercises:[""]}]),f=g=>b(m.filter((i,w)=>w!==g)),q=(g,i)=>{const w=[...m];w[g].title=i,b(w)},U=g=>{const i=[...m];i[g].exercises.push(""),b(i)},R=(g,i)=>{const w=[...m];w[g].exercises=w[g].exercises.filter((W,z)=>z!==i),b(w)},Y=(g,i,w)=>{const W=[...m];W[g].exercises[i]=w,b(W)},te=()=>v([...x,{description:"",sections:[{title:"Warm Up",exercises:[""]},{title:"Main Workout",exercises:[""]}],updateDateTime:new Date().toISOString()}]),X=g=>v(x.filter((i,w)=>w!==g)),le=g=>{if(!g)return"";const i=new Date(g);return new Date(i.getTime()-5*60*60*1e3).toISOString().slice(0,16)},N=(g,i,w)=>{const W=[...x];if(i==="updateDateTime"){const z=new Date(w),oe=new Date(z.getTime()-5*60*60*1e3);W[g][i]=oe.toISOString(),console.log(`Scheduled workout ${g} updateDateTime set to (UTC): ${W[g][i]}`)}else W[g][i]=w;v(W)},O=g=>{const i=[...x];i[g].sections.push({title:"",exercises:[""]}),v(i)},H=(g,i)=>{const w=[...x];w[g].sections=w[g].sections.filter((W,z)=>z!==i),v(w)},Z=(g,i,w)=>{const W=[...x];W[g].sections[i].title=w,v(W)},_=(g,i)=>{const w=[...x];w[g].sections[i].exercises.push(""),v(w)},Q=(g,i,w)=>{const W=[...x];W[g].sections[i].exercises=W[g].sections[i].exercises.filter((z,oe)=>oe!==w),v(W)},ue=(g,i,w,W)=>{const z=[...x];z[g].sections[i].exercises[w]=W,v(z)},M=()=>E([...c,""]),P=g=>E(c.filter((i,w)=>w!==g)),F=(g,i)=>{const w=[...c];w[g]=i,E(w)};return e.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[e.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),T&&e.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:T}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),s.map((g,i)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:g,onChange:w=>L(i,w.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${i+1}`}),e.jsx("button",{onClick:()=>C(i),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:s.length===1,children:"Remove"})]},i)),e.jsx("button",{onClick:D,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),e.jsx("textarea",{value:S,onChange:g=>a(g.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),e.jsx("textarea",{value:n,onChange:g=>u(g.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),e.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),y.map((g,i)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:g,onChange:w=>o(i,w.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${i+1}`}),e.jsx("button",{onClick:()=>h(i),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:y.length===1,children:"Remove"})]},`warmup-${i}`)),e.jsx("button",{onClick:d,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),m.map((g,i)=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"text",value:g.title,onChange:w=>q(i,w.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),e.jsx("button",{onClick:()=>f(i),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:m.length===1,children:"Remove Section"})]}),g.exercises.map((w,W)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:w,onChange:z=>Y(i,W,z.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${W+1}`}),e.jsx("button",{onClick:()=>R(i,W),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:g.exercises.length===1,children:"Remove"})]},`section-${i}-exercise-${W}`)),e.jsx("button",{onClick:()=>U(i),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`section-${i}`)),e.jsx("button",{onClick:p,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Workout Section"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),x.map((g,i)=>e.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[e.jsx("input",{type:"datetime-local",value:le(g.updateDateTime),onChange:w=>N(i,"updateDateTime",w.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),e.jsx("textarea",{value:g.description,onChange:w=>N(i,"description",w.target.value),className:`border p-2 w-full h-24 mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),g.sections.map((w,W)=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"text",value:w.title,onChange:z=>Z(i,W,z.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),e.jsx("button",{onClick:()=>H(i,W),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:g.sections.length===1,children:"Remove Section"})]}),w.exercises.map((z,oe)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:z,onChange:we=>ue(i,W,oe,we.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${oe+1}`}),e.jsx("button",{onClick:()=>Q(i,W,oe),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:w.exercises.length===1,children:"Remove"})]},`scheduled-section-${i}-${W}-exercise-${oe}`)),e.jsx("button",{onClick:()=>_(i,W),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`scheduled-section-${i}-${W}`)),e.jsx("button",{onClick:()=>O(i),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 mr-2",children:"Add Workout Section"}),e.jsx("button",{onClick:()=>X(i),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:x.length===1&&!x[0].description,children:"Remove Workout"})]},i)),e.jsx("button",{onClick:te,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),c.map((g,i)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:g,onChange:w=>F(i,w.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${i+1}`}),e.jsx("button",{onClick:()=>P(i),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:c.length===1,children:"Remove"})]},i)),e.jsx("button",{onClick:M,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),e.jsx("button",{onClick:k,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),e.jsx("button",{onClick:()=>A("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),e.jsx("button",{onClick:B,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function Ht(){const{isDarkMode:t}=r.useContext(I),[s,l]=r.useState([]),[n,u]=r.useState(null),[y,j]=r.useState(null),m=ee();r.useEffect(()=>{const d=ke(de,h=>{h||m("/admin")});return()=>d()},[m]),r.useEffect(()=>{(async()=>{try{const h=K(V,"content","blog","posts"),f=(await re(h)).docs.map(q=>({id:q.id,title:q.data().title||"",blocks:q.data().blocks||[{type:"paragraph",content:""}],date:q.data().date||"",lastEdited:q.data().lastEdited||""})).sort((q,U)=>{const R=q.date?new Date(q.date):new Date(0);return(U.date?new Date(U.date):new Date(0))-R});l(f.length?f:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:""}])}catch(h){j("Failed to load blog posts: "+h.message)}})()},[]);const b=async()=>{j(null);try{const d=K(V,"content","blog","posts"),h=await re(d);for(const o of h.docs)await ve(o.ref);for(const o of s)if(o.title.trim()&&o.blocks.some(p=>p.type==="paragraph"||p.type==="image"||p.type==="link"?p.content.trim():p.content.some(f=>f.trim()))){const p=o.id||Date.now().toString();await ye(ie(d,p),{id:p,title:o.title,blocks:o.blocks.map(f=>({type:f.type,content:f.type==="paragraph"||f.type==="image"?f.content:f.type==="link"?{url:f.content.url,text:f.content.text}:f.content.filter(q=>q.trim()!=="")})),date:o.date||new Date().toISOString(),lastEdited:o.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),u(null),m("/admin")}catch(d){j("Error saving blog posts: "+d.message)}},x=async()=>{try{await Ce(de),m("/admin")}catch(d){j("Failed to log out: "+d.message)}},v=()=>{const d=[...s,{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:new Date().toISOString()}];l(d),u(d.length-1)},S=d=>{const h=s.filter((o,p)=>p!==d);l(h),u(null)},a=(d,h,o)=>{const p=[...s];p[d]={...p[d],[h]:o,lastEdited:new Date().toISOString()},l(p)},c=(d,h)=>{const o=[...s];o[d].blocks.push({type:h,content:h==="paragraph"||h==="image"?"":h==="link"?{url:"",text:""}:[""]}),o[d].lastEdited=new Date().toISOString(),l(o)},E=(d,h)=>{const o=[...s];o[d].blocks=o[d].blocks.filter((p,f)=>f!==h),o[d].lastEdited=new Date().toISOString(),l(o)},T=(d,h,o)=>{const p=[...s];p[d].blocks[h]={type:o,content:o==="paragraph"||o==="image"?"":o==="link"?{url:"",text:""}:[""]},p[d].lastEdited=new Date().toISOString(),l(p)},$=(d,h,o)=>{const p=[...s];p[d].blocks[h].content=o,p[d].lastEdited=new Date().toISOString(),l(p)},A=(d,h,o,p)=>{const f=[...s];f[d].blocks[h].content[o]=p,f[d].lastEdited=new Date().toISOString(),l(f)},k=(d,h)=>{const o=[...s];o[d].blocks[h].content.push(""),o[d].lastEdited=new Date().toISOString(),l(o)},B=(d,h,o)=>{const p=[...s];p[d].blocks[h].content=p[d].blocks[h].content.filter((f,q)=>q!==o),p[d].lastEdited=new Date().toISOString(),l(p)},D=(d,h,o,p)=>{const f=[...s];f[d].blocks[h].content[o]=p,f[d].lastEdited=new Date().toISOString(),l(f)},C=d=>d?new Date(d).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",L=d=>d?new Date(d).toLocaleDateString():"Not set";return e.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[e.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),y&&e.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:y}),n===null?e.jsxs("div",{className:"mb-6",children:[s.length===0?e.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):e.jsx("div",{className:"grid gap-4",children:s.map((d,h)=>e.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>u(h),children:[e.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:d.title||"Untitled Post"}),e.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Publish Date: ",L(d.date)]}),e.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",C(d.lastEdited)]})]},h))}),e.jsx("button",{onClick:v,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),e.jsx("button",{onClick:()=>m("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),e.jsx("button",{onClick:x,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[e.jsx("input",{type:"text",value:s[n].title,onChange:d=>a(n,"title",d.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block mb-1 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Publish Date:"}),e.jsx("input",{type:"date",value:s[n].date.split("T")[0]||"",onChange:d=>a(n,"date",d.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`})]}),e.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",C(s[n].lastEdited)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Content Blocks"}),s[n].blocks.map((d,h)=>e.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Block Type:"}),e.jsxs("select",{value:d.type,onChange:o=>T(n,h,o.target.value),className:`border p-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[e.jsx("option",{value:"paragraph",children:"Paragraph"}),e.jsx("option",{value:"list",children:"Numbered List"}),e.jsx("option",{value:"bullet",children:"Bullet Points"}),e.jsx("option",{value:"image",children:"Image"}),e.jsx("option",{value:"link",children:"Link"})]}),e.jsx("button",{onClick:()=>E(n,h),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:s[n].blocks.length===1,children:"Remove Block"})]}),d.type==="paragraph"?e.jsx("textarea",{value:d.content,onChange:o=>$(n,h,o.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):d.type==="image"?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:d.content,onChange:o=>$(n,h,o.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),d.content&&e.jsx("img",{src:d.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):d.type==="link"?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:d.content.url,onChange:o=>A(n,h,"url",o.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),e.jsx("input",{type:"text",value:d.content.text,onChange:o=>A(n,h,"text",o.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):e.jsxs("div",{children:[d.content.map((o,p)=>e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:o,onChange:f=>D(n,h,p,f.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${p+1}`}),e.jsx("button",{onClick:()=>B(n,h,p),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:s[n].blocks[h].content.length===1,children:"Remove"})]},p)),e.jsx("button",{onClick:()=>k(n,h),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},h)),e.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[e.jsx("button",{onClick:()=>c(n,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),e.jsx("button",{onClick:()=>c(n,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),e.jsx("button",{onClick:()=>c(n,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),e.jsx("button",{onClick:()=>c(n,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 easement-in-out",children:"Add Image"}),e.jsx("button",{onClick:()=>c(n,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),e.jsx("button",{onClick:()=>S(n),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:s.length===1,children:"Remove Post"}),e.jsx("button",{onClick:()=>u(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),e.jsx("button",{onClick:b,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),e.jsx("button",{onClick:()=>m("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),e.jsx("button",{onClick:x,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function zt(){const{isDarkMode:t}=r.useContext(I),[s,l]=r.useState([]),[n,u]=r.useState([]),[y,j]=r.useState(""),[m,b]=r.useState({categoryId:"",name:"",price:"",description:"",image:null}),[x,v]=r.useState(null),[S,a]=r.useState(null),[c,E]=r.useState(null),T=ee();r.useEffect(()=>{const o=ke(de,p=>{p||T("/admin")});return()=>o()},[T]),r.useEffect(()=>{(async()=>{try{const f=(await re(K(V,"categories"))).docs.map(R=>({id:R.id,...R.data()}));l(f);const U=(await re(K(V,"products"))).docs.map(R=>({id:R.id,...R.data()}));u(U)}catch(p){E("Error fetching data from Firestore: "+p.message)}})()},[]);const $=async o=>{if(o.preventDefault(),!!y)try{const p=await be(K(V,"categories"),{name:y});l([...s,{id:p.id,name:y}]),j("")}catch(p){E("Error adding category: "+p.message)}},A=async o=>{try{const p=ie(V,"categories",o.id);await qe(p,{name:o.name}),l(s.map(f=>f.id===o.id?{...f,name:o.name}:f)),v(null)}catch(p){E("Error updating category: "+p.message)}},k=async o=>{try{await ve(ie(V,"categories",o)),l(s.filter(f=>f.id!==o));const p=n.filter(f=>f.categoryId===o);for(const f of p){if(f.image&&f.image!=="https://via.placeholder.com/80"){const q=f.image.split("/products%2F")[1].split("?")[0],U=Pe(Ee,`products/${decodeURIComponent(q)}`);await _e(U).catch(R=>{E(`Error deleting image for product ${f.id}: `+R.message)})}await ve(ie(V,"products",f.id))}u(n.filter(f=>f.categoryId!==o))}catch(p){E("Error deleting category: "+p.message)}},B=async o=>{if(!o)return null;const p=Pe(Ee,`products/${o.name}`);return await dt(p,o),await ct(p)},D=o=>o.categoryId?o.name.trim()?o.description.trim()?!o.price||isNaN(o.price)||Number(o.price)<=0?"A valid price is required.":o.image?"":"An image is required.":"Description is required.":"Name is required.":"Category is required.",C=async o=>{o.preventDefault();const p=D(m);if(p){E(p);return}try{const f=await B(m.image),q=await be(K(V,"products"),{categoryId:m.categoryId,name:m.name,price:parseFloat(m.price),description:m.description,image:f||"https://via.placeholder.com/80"});u([...n,{id:q.id,categoryId:m.categoryId,name:m.name,price:parseFloat(m.price),description:m.description,image:f||"https://via.placeholder.com/80"}]),b({categoryId:"",name:"",price:"",description:"",image:null}),E(null)}catch(f){E("Error adding product: "+f.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},L=async o=>{const p=D(o);if(p){E(p);return}try{const f=o.image instanceof File?await B(o.image):o.image,q=ie(V,"products",o.id);await qe(q,{categoryId:o.categoryId,name:o.name,price:parseFloat(o.price),description:o.description,image:f||"https://via.placeholder.com/80"}),u(n.map(U=>U.id===o.id?{...U,categoryId:o.categoryId,name:o.name,price:parseFloat(o.price),description:o.description,image:f||"https://via.placeholder.com/80"}:U)),a(null),E(null)}catch(f){E("Error updating product: "+f.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},d=async o=>{try{const p=n.find(f=>f.id===o);if(p.image&&p.image!=="https://via.placeholder.com/80"){const f=p.image.split("/products%2F")[1].split("?")[0],q=Pe(Ee,`products/${decodeURIComponent(f)}`);await _e(q).catch(U=>{E(`Error deleting image for product ${o}: `+U.message)})}await ve(ie(V,"products",o)),u(n.filter(f=>f.id!==o)),E(null)}catch(p){E("Error deleting product: "+p.message)}},h=async()=>{try{await Ce(de),T("/admin")}catch(o){E("Failed to log out: "+o.message)}};return e.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[e.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),c&&e.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:c}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Category"}),e.jsxs("form",{onSubmit:$,className:"flex gap-4",children:[e.jsx("input",{type:"text",value:y,onChange:o=>j(o.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Categories"}),e.jsx("div",{className:"space-y-4",children:s.map(o=>e.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(x==null?void 0:x.id)===o.id?e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:x.name,onChange:p=>v({...x,name:p.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),e.jsx("button",{onClick:()=>A(x),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),e.jsx("button",{onClick:()=>v(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:o.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(o),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),e.jsx("button",{onClick:()=>k(o.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},o.id))})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Product"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),e.jsxs("select",{value:m.categoryId,onChange:o=>b({...m,categoryId:o.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[e.jsx("option",{value:"",children:"Select a category"}),s.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),e.jsx("input",{type:"text",value:m.name,onChange:o=>b({...m,name:o.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:m.price,onChange:o=>b({...m,price:o.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),e.jsx("textarea",{value:m.description,onChange:o=>b({...m,description:o.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:o=>b({...m,image:o.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),e.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Products"}),e.jsx("div",{className:"space-y-4",children:n.map(o=>{var p;return e.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(S==null?void 0:S.id)===o.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),e.jsxs("select",{value:S.categoryId,onChange:f=>a({...S,categoryId:f.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[e.jsx("option",{value:"",children:"Select a category"}),s.map(f=>e.jsx("option",{value:f.id,children:f.name},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),e.jsx("input",{type:"text",value:S.name,onChange:f=>a({...S,name:f.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:S.price,onChange:f=>a({...S,price:f.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),e.jsx("textarea",{value:S.description,onChange:f=>a({...S,description:f.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:f=>a({...S,image:f.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),S.image&&typeof S.image=="string"&&e.jsx("img",{src:S.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>L(S),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),e.jsx("button",{onClick:()=>a(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[o.image&&o.image!=="https://via.placeholder.com/80"&&e.jsx("img",{src:o.image,alt:o.name,className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("div",{children:[e.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:o.name}),e.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((p=s.find(f=>f.id===o.categoryId))==null?void 0:p.name)||"Unknown"]}),e.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",o.price.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(o),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),e.jsx("button",{onClick:()=>d(o.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},o.id)})})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsx("button",{onClick:()=>T("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),e.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const Jt=()=>{const t=ee(),{isDarkMode:s}=r.useContext(I),l=()=>{t("/fitness-tracker/create-custom-plan")};return e.jsx("div",{className:`min-h-screen pt-20 ${s?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${s?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${s?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${s?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:l,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),e.jsxs("div",{className:`p-6 rounded-lg shadow-md ${s?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${s?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(J,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),e.jsx(J,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},Vt=()=>{const{id:t}=je(),{isDarkMode:s}=r.useContext(I),[l,n]=r.useState(null),[u,y]=r.useState(!0);r.useEffect(()=>{(async()=>{const x=me(),v=await fe(ie(x,"customPlans",t));v.exists()&&n({id:v.id,...v.data()}),y(!1)})()},[t]);const j=b=>{if(!(l!=null&&l.startDate))return"";const x=new Date(l.startDate);return x.setDate(x.getDate()+b*7),x.toLocaleDateString()},m=(b,x)=>{if(!(l!=null&&l.startDate))return"";const v=new Date(l.startDate);return v.setDate(v.getDate()+b*7+x),v.toLocaleDateString()};return u?e.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${s?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsx("p",{className:"text-xl",children:"Loading..."})}):l?e.jsx("div",{className:`min-h-screen pt-20 ${s?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${s?"text-red-400":"text-red-800"}`,children:l.name}),e.jsx("div",{className:"max-w-4xl mx-auto",children:l.weeks.map((b,x)=>e.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${s?"bg-stone-800":"bg-red-50"}`,children:[e.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${s?"text-red-400":"text-red-800"}`,children:["Week ",b.week," (",j(x),")"]}),b.days.map((v,S)=>e.jsxs("div",{className:`border p-4 rounded-md mb-4 ${s?"border-stone-600":"border-red-200"}`,children:[e.jsxs("h3",{className:`text-xl font-semibold mb-2 ${s?"text-red-400":"text-red-800"}`,children:[v.day," (",m(x,S),")"]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h4",{className:`font-semibold mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Workouts:"}),e.jsx("ul",{className:"list-disc pl-5",children:v.workouts.map((a,c)=>e.jsxs("li",{children:[a.name,": ",a.sets," sets x ",a.reps," ","reps"]},c))})]})]},S))]},x))})]})}):e.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${s?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsx("p",{className:"text-xl",children:"Plan not found."})})},Yt=()=>{const t=ee(),{isDarkMode:s}=r.useContext(I),[l,n]=r.useState(""),[u,y]=r.useState(new Date().toISOString().split("T")[0]),[j,m]=r.useState([]),[b,x]=r.useState({}),[v,S]=r.useState(Array.from({length:6},(D,C)=>({week:C+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[a,c]=r.useState(Array(6).fill(!1));r.useEffect(()=>{(async()=>{const C=me(),d=(await re(K(C,"workouts"))).docs.map(o=>({id:o.id,...o.data()})),h=d.reduce((o,p)=>{const f=p.muscleGroup||"Other";return o[f]||(o[f]=[]),o[f].push(p),o},{});m(d),x(h)})()},[]);const E=D=>{const C=[...a];C[D]=!C[D],c(C)},T=(D,C)=>{var d;const L=[...v];L[D].days[C].workouts.push({name:((d=j[0])==null?void 0:d.name)||"",sets:3,reps:10}),S(L)},$=(D,C,L,d,h)=>{const o=[...v];o[D].days[C].workouts[L][d]=h,S(o)},A=async D=>{D.preventDefault();const C=me(),L={userId:"anonymous",name:l,startDate:new Date(u).toISOString(),weeks:v},d=await be(K(C,"customPlans"),L);t(`/fitness-tracker/plan/${d.id}`)},k=D=>{const C=new Date(u);return C.setDate(C.getDate()+D*7),C.toLocaleDateString()},B=(D,C)=>{const L=new Date(u);return L.setDate(L.getDate()+D*7+C),L.toLocaleDateString()};return e.jsx("div",{className:`min-h-screen pt-20 ${s?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${s?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),e.jsxs("form",{onSubmit:A,children:[e.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${s?"bg-stone-800":"bg-red-50"}`,children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xl font-semibold mb-2 ${s?"text-red-400":"text-red-800"}`,children:"Plan Name"}),e.jsx("input",{type:"text",value:l,onChange:D=>n(D.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xl font-semibold mb-2 ${s?"text-red-400":"text-red-800"}`,children:"Start Date"}),e.jsx("input",{type:"date",value:u,onChange:D=>y(D.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.map((D,C)=>e.jsxs("div",{className:`p-6 rounded-lg shadow-md ${s?"bg-stone-800":"bg-red-50"}`,children:[e.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${s?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>E(C),children:[e.jsxs("h2",{className:`text-2xl font-semibold ${s?"text-red-400":"text-red-800"}`,children:["Week ",D.week," (",k(C),")"]}),a[C]?e.jsx(We,{className:`w-6 h-6 ${s?"text-red-400":"text-red-800"}`}):e.jsx(Fe,{className:`w-6 h-6 ${s?"text-red-400":"text-red-800"}`})]}),a[C]&&e.jsx("div",{className:"mt-4",children:D.days.map((L,d)=>e.jsxs("div",{className:`border p-4 rounded-md mb-4 ${s?"border-stone-600":"border-red-200"}`,children:[e.jsxs("h3",{className:`text-xl font-semibold mb-2 ${s?"text-red-400":"text-red-800"}`,children:[L.day," (",B(C,d),")"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:`text-base font-semibold mb-2 ${s?"text-red-400":"text-red-800"}`,children:"Workouts:"}),L.workouts.length>0?L.workouts.map((h,o)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[e.jsx("select",{value:h.name,onChange:p=>$(C,d,o,"name",p.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(b).map(p=>e.jsx("optgroup",{label:p,children:b[p].map(f=>e.jsx("option",{value:f.name,children:f.name},f.id))},p))}),e.jsx("input",{type:"number",value:h.sets,onChange:p=>$(C,d,o,"sets",Number(p.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),e.jsx("input",{type:"text",value:h.reps,onChange:p=>$(C,d,o,"reps",p.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},o)):e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),e.jsx("button",{type:"button",onClick:()=>T(C,d),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},d))})]},C))}),e.jsx("div",{className:"mt-8 max-w-md mx-auto",children:e.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},Qt=()=>{const t=ee(),{isDarkMode:s}=r.useContext(I),{user:l,loading:n}=r.useContext(ce),[u,y]=r.useState([]),[j,m]=r.useState([]),[b,x]=r.useState([]),[v,S]=r.useState([]),[a,c]=r.useState(new Date().toISOString().split("T")[0]);r.useEffect(()=>{(async()=>{try{const d=me(),h=await re(K(d,"workouts")),o=await re(K(d,"foods")),p=h.docs.map(q=>({id:q.id,...q.data()})),f=o.docs.map(q=>({id:q.id,...q.data()}));console.log("Fetched workouts from 'workouts' collection:",p),console.log("Fetched meals from 'foods' collection:",f),y(p),m(f),p.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),f.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(d){console.error("Error fetching data:",d)}})()},[]);const E=j.reduce((L,d)=>{const h=d.category||"Misc";return L[h]||(L[h]=[]),L[h].push(d),L},{}),T=["Meat","Fruit","Vegetable","Starch","Misc"],$=()=>{if(u.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}x([...b,{name:u[0].name,sets:0,reps:0}])},A=(L,d,h)=>{const o=[...b];o[L][d]=d==="sets"||d==="reps"?Number(h):h,x(o)},k=()=>{if(j.length===0){alert("No meals available to add. Please add meals in Firestore.");return}S([...v,{name:j[0].name,quantity:1}])},B=(L,d,h)=>{const o=[...v];o[L][d]=d==="quantity"?Number(h):h,S(o)},D=L=>{const d=j.find(h=>h.name===L.name);return d?{protein:d.macros.protein*L.quantity,carbs:d.macros.carbs*L.quantity,fats:d.macros.fats*L.quantity}:{protein:0,carbs:0,fats:0}},C=async L=>{if(L.preventDefault(),!l){alert("Please log in to save a fitness log."),t("/login");return}const d=me(),h={userId:l.uid,date:new Date(a).toISOString(),workouts:b,meals:v.map(o=>({...o,macros:D(o)}))};await be(K(d,"userLogs"),h),t("/fitness-tracker/history")};return n?e.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${s?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),e.jsxs("form",{onSubmit:C,className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${s?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("label",{className:`block text-xl font-semibold mb-2 ${s?"text-red-400":"text-red-800"}`,children:"Date"}),e.jsx("input",{type:"date",value:a,onChange:L=>c(L.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),e.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${s?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${s?"text-red-400":"text-red-800"}`,children:"Workouts"}),u.length===0?e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):b.length>0?b.map((L,d)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[e.jsx("select",{value:L.name,onChange:h=>A(d,"name",h.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:u.map(h=>e.jsx("option",{value:h.name,children:h.name},h.id))}),e.jsx("input",{type:"number",value:L.sets,onChange:h=>A(d,"sets",h.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),e.jsx("input",{type:"number",value:L.reps,onChange:h=>A(d,"reps",h.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},d)):e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),e.jsx("button",{type:"button",onClick:$,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),e.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${s?"bg-stone-800":"bg-red-50"}`,children:[e.jsx("h2",{className:`text-2xl font-semibold mb-4 ${s?"text-red-400":"text-red-800"}`,children:"Meals"}),j.length===0?e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):v.length>0?v.map((L,d)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[e.jsx("select",{value:L.name,onChange:h=>B(d,"name",h.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:T.map(h=>E[h]&&e.jsx("optgroup",{label:h,children:E[h].map(o=>e.jsx("option",{value:o.name,children:o.name},o.id))},h))}),e.jsx("input",{type:"number",value:L.quantity,onChange:h=>B(d,"quantity",h.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${s?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},d)):e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),e.jsx("button",{type:"button",onClick:k,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},Kt=()=>{const{isDarkMode:t}=r.useContext(I),[s,l]=r.useState([]);return r.useEffect(()=>{(async()=>{const u=me(),j=(await re(K(u,"userLogs"))).docs.map(m=>({id:m.id,...m.data()}));l(j.sort((m,b)=>new Date(b.date)-new Date(m.date)))})()},[]),e.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Fitness History"}),e.jsx("div",{className:"max-w-2xl mx-auto",children:s.length>0?s.map(n=>e.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${t?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[e.jsx("h2",{className:`text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:new Date(n.date).toLocaleDateString()}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Workouts:"}),e.jsx("ul",{className:"list-disc pl-5",children:n.workouts.map((u,y)=>e.jsxs("li",{children:[u.name,": ",u.sets," sets x ",u.reps," ","reps"]},y))})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Meals:"}),e.jsx("ul",{className:"list-disc pl-5",children:n.meals.map((u,y)=>e.jsxs("li",{children:[u.name," (",u.quantity,"g): Protein"," ",u.macros.protein.toFixed(1),"g, Carbs"," ",u.macros.carbs.toFixed(1),"g, Fats"," ",u.macros.fats.toFixed(1),"g"]},y))})]})]},n.id)):e.jsx("p",{className:`text-center text-lg ${t?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},Zt=()=>{const t=ee(),{isDarkMode:s}=r.useContext(I),{user:l,loading:n}=r.useContext(ce),[u,y]=r.useState(""),[j,m]=r.useState(new Date().toISOString().split("T")[0]),[b,x]=r.useState([]),[v,S]=r.useState([]),[a,c]=r.useState(!0),[E,T]=r.useState(!0),[$,A]=r.useState(null),[k,B]=r.useState(null),[D,C]=r.useState(Array.from({length:6},(M,P)=>({week:P+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[L,d]=r.useState(Array(6).fill(!1)),[h,o]=r.useState(null);r.useEffect(()=>{(async()=>{try{c(!0),A(null);const{data:P,error:F}=await ne.from("foods").select("*");if(F)throw F;console.log("Fetched meals from Supabase 'foods' table:",P),x(P),P.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(P){console.error("Error fetching meals:",P),A("Failed to load meals. Please try again later.")}finally{c(!1)}})()},[]),r.useEffect(()=>{(async()=>{if(l)try{T(!0),B(null);const{data:P,error:F}=await ne.from("nutrition_plans").select("*").eq("user_id",l.id);if(F)throw F;console.log("Fetched nutrition plans from Supabase:",P),S(P)}catch(P){console.error("Error fetching nutrition plans:",P),B("Failed to load your nutrition plans. Please try again later.")}finally{T(!1)}})()},[l]);const p=b.reduce((M,P)=>{const F=P.category||"Misc";return M[F]||(M[F]=[]),M[F].push(P),M},{}),f=["Meat","Fruit","Vegetable","Starch","Misc"],q=["Breakfast","Lunch","Dinner","Snacks"],U=M=>{const P=[...L];P[M]=!P[M],d(P)},R=(M,P)=>{if(b.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const F=[...D];F[M].days[P].meals.push({name:b[0].name,grams:b[0].portion||100,referencePortion:b[0].portion||100,macros:b[0].macros,mealTime:"Breakfast"}),C(F)},Y=(M,P,F,g,i)=>{const w=[...D],W=w[M].days[P].meals[F];if(g==="name"){const z=b.find(oe=>oe.name===i);W.name=i,W.grams=z.portion||100,W.referencePortion=z.portion||100,W.macros=z.macros}else W[g]=g==="grams"?Number(i):i;C(w)},te=(M,P,F,g)=>{const i=[...D];i[M].days[P].macros[F]=Number(g),C(i)},X=(M,P)=>{const F=[...D],g=F[M].days[P],i={...g.meals[g.meals.length-1]};i.name&&(g.loggedMeals[i.mealTime].push(i),g.meals[g.meals.length-1]={name:b[0].name,grams:b[0].portion||100,referencePortion:b[0].portion||100,macros:b[0].macros,mealTime:"Breakfast"},C(F))},le=(M,P,F,g,i)=>{o({weekIndex:M,dayIndex:P,mealTime:F,mealIndex:g,meal:i})},N=()=>{if(!h)return;const{weekIndex:M,dayIndex:P,mealTime:F,mealIndex:g,meal:i}=h,w=[...D];w[M].days[P].loggedMeals[F][g]=i,C(w),o(null)},O=(M,P,F,g)=>{const i=[...D];i[M].days[P].loggedMeals[F].splice(g,1),C(i)},H=M=>Object.values(M).flat().reduce((F,g)=>{const i=g.grams/g.referencePortion;return{protein:F.protein+g.macros.protein*i,carbs:F.carbs+g.macros.carbs*i,fats:F.fats+g.macros.fats*i}},{protein:0,carbs:0,fats:0}),Z=(M,P)=>({protein:M.protein>=P.protein,carbs:M.carbs>=P.carbs,fats:M.fats>=P.fats}),_=M=>{const P=new Date(j);return P.setDate(P.getDate()+M*7),P.toLocaleDateString()},Q=(M,P)=>{const F=new Date(j);return F.setDate(F.getDate()+M*7+P),F.toLocaleDateString()},ue=async M=>{if(M.preventDefault(),!l){alert("Please log in to save a nutrition plan."),t("/login");return}try{const P={user_id:l.id,name:u,start_date:new Date(j).toISOString().split("T")[0],weeks:JSON.stringify(D)},{data:F,error:g}=await ne.from("nutrition_plans").insert(P).select();if(g)throw g;t(`/nutrition-plan/${F[0].id}`)}catch(P){console.error("Error saving nutrition plan:",P),alert("Failed to save nutrition plan. Please try again.")}};return n?e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:e.jsx(pe,{color:s?"#f87171":"#b91c1c"})}):a||E?e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:e.jsx(pe,{color:s?"#f87171":"#b91c1c"})}):$?e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:$}):e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${s?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),k?e.jsx("div",{className:"text-center text-red-500 mb-12",children:k}):v.length>0?e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`text-3xl font-bold mb-6 ${s?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(M=>e.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${s?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${s?"border-stone-700":"border-red-200"}`,onClick:()=>t(`/nutrition-plan/${M.id}`),children:[e.jsx("h3",{className:`text-xl font-semibold ${s?"text-red-400":"text-red-800"} tracking-tight`,children:M.name}),e.jsxs("p",{className:`text-sm mt-2 ${s?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",M.start_date]})]},M.id))})]}):e.jsx("div",{className:"text-center text-lg mb-12",children:"No nutrition plans yet. Create one below!"}),e.jsxs("form",{onSubmit:ue,children:[e.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${s?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${s?"border-stone-700":"border-red-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),e.jsx("input",{type:"text",value:u,onChange:M=>y(M.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),e.jsx("input",{type:"date",value:j,onChange:M=>m(M.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:D.map((M,P)=>e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${s?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${s?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[e.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${s?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>U(P),children:[e.jsxs("h2",{className:`text-2xl font-bold ${s?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",M.week," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",_(P),")"]})]}),L[P]?e.jsx(We,{className:`w-6 h-6 ${s?"text-red-400":"text-red-800"} transition-transform duration-200`}):e.jsx(Fe,{className:`w-6 h-6 ${s?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),L[P]&&e.jsx("div",{className:"mt-6 space-y-6",children:M.days.map((F,g)=>e.jsxs("div",{className:`border p-6 rounded-lg ${s?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[e.jsxs("h3",{className:`text-xl font-semibold mb-4 ${s?"text-red-400":"text-red-800"} tracking-tight`,children:[F.day," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",Q(P,g),")"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),e.jsx("input",{type:"number",value:F.macros.protein,onChange:i=>te(P,g,"protein",i.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),e.jsx("input",{type:"number",value:F.macros.carbs,onChange:i=>te(P,g,"carbs",i.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),e.jsx("input",{type:"number",value:F.macros.fats,onChange:i=>te(P,g,"fats",i.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),b.length===0?e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):F.meals.length>0?F.meals.map((i,w)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[e.jsx("select",{value:i.name,onChange:W=>Y(P,g,w,"name",W.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:f.map(W=>p[W]&&e.jsx("optgroup",{label:W,children:p[W].map(z=>e.jsx("option",{value:z.name,children:z.name},z.id))},W))}),e.jsx("input",{type:"number",value:i.grams,onChange:W=>Y(P,g,w,"grams",W.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),e.jsx("select",{value:i.mealTime,onChange:W=>Y(P,g,w,"mealTime",W.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:q.map(W=>e.jsx("option",{value:W,children:W},W))}),e.jsx("button",{type:"button",onClick:()=>X(P,g),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${s?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},w)):e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),e.jsx("button",{type:"button",onClick:()=>R(P,g),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${s?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(F.loggedMeals).every(i=>F.loggedMeals[i].length===0)?e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):q.map(i=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:`text-base font-semibold mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide border-b ${s?"border-stone-600":"border-red-200"} pb-1`,children:i}),F.loggedMeals[i].length>0?e.jsx("ul",{className:"space-y-2",children:F.loggedMeals[i].map((w,W)=>e.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${s?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[e.jsxs("span",{className:"text-sm",children:[w.name,": ",w.grams,"g"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>le(P,g,i,W,{...w}),className:`p-1 rounded-md transition-colors duration-200 ${s?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:e.jsx(ut,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>O(P,g,i,W),className:`p-1 rounded-md transition-colors duration-200 ${s?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:e.jsx(mt,{className:"w-5 h-5"})})]})]},W))}):e.jsxs("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:["No ",i.toLowerCase()," logged."]})]},i)),e.jsxs("div",{className:"mt-6",children:[e.jsx("h5",{className:`text-base font-semibold mb-3 ${s?"text-red-400":"text-red-800"} tracking-wide border-b ${s?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const i=H(F.loggedMeals),w=Z(i,F.macros);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${w.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(i.protein/F.macros.protein*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[i.protein.toFixed(1),"g /"," ",F.macros.protein,"g"]}),w.protein?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${w.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(i.carbs/F.macros.carbs*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[i.carbs.toFixed(1),"g /"," ",F.macros.carbs,"g"]}),w.carbs?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${w.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(i.fats/F.macros.fats*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[i.fats.toFixed(1),"g /"," ",F.macros.fats,"g"]}),w.fats?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},g))})]},P))}),e.jsx("div",{className:"mt-12 max-w-md mx-auto",children:e.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${s?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:e.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${s?"bg-stone-800":"bg-red-50"} border ${s?"border-stone-700":"border-red-200"}`,children:[e.jsx("h3",{className:`text-2xl font-semibold mb-6 ${s?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),e.jsx("select",{value:h.meal.name,onChange:M=>{const P=b.find(F=>F.name===M.target.value);o({...h,meal:{...h.meal,name:M.target.value,grams:P.portion||100,referencePortion:P.portion||100,macros:P.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:f.map(M=>p[M]&&e.jsx("optgroup",{label:M,children:p[M].map(P=>e.jsx("option",{value:P.name,children:P.name},P.id))},M))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),e.jsx("input",{type:"number",value:h.meal.grams,onChange:M=>o({...h,meal:{...h.meal,grams:Number(M.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),e.jsx("select",{value:h.meal.mealTime,onChange:M=>o({...h,meal:{...h.meal,mealTime:M.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:q.map(M=>e.jsx("option",{value:M,children:M},M))})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:N,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${s?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),e.jsx("button",{type:"button",onClick:()=>o(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${s?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},Xt=()=>{const{id:t}=je(),{isDarkMode:s}=r.useContext(I),[l,n]=r.useState(null),[u,y]=r.useState(!0),[j,m]=r.useState(null),[b,x]=r.useState([]);r.useEffect(()=>{(async()=>{try{y(!0),m(null);const{data:A,error:k}=await ne.from("nutrition_plans").select("*").eq("id",t).single();if(k)throw k;const B=JSON.parse(A.weeks);n({...A,weeks:B}),x(Array(B.length).fill(!1))}catch(A){console.error("Error fetching nutrition plan:",A),m("Failed to load nutrition plan. Please try again later.")}finally{y(!1)}})()},[t]);const v=$=>{const A=[...b];A[$]=!A[$],x(A)},S=$=>Object.values($).flat().reduce((k,B)=>{const D=B.grams/B.referencePortion;return{protein:k.protein+B.macros.protein*D,carbs:k.carbs+B.macros.carbs*D,fats:k.fats+B.macros.fats*D}},{protein:0,carbs:0,fats:0}),a=($,A)=>({protein:$.protein>=A.protein,carbs:$.carbs>=A.carbs,fats:$.fats>=A.fats}),c=$=>{const A=new Date(l.start_date);return A.setDate(A.getDate()+$*7),A.toLocaleDateString()},E=($,A)=>{const k=new Date(l.start_date);return k.setDate(k.getDate()+$*7+A),k.toLocaleDateString()};if(u)return e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:e.jsx(pe,{color:s?"#f87171":"#b91c1c"})});if(j)return e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:j});if(!l)return e.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Nutrition plan not found."});const T=["Breakfast","Lunch","Dinner","Snacks"];return e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${s?"text-red-400":"text-red-800"}`,children:l.name}),e.jsxs("p",{className:`text-center text-lg mb-10 ${s?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(l.start_date).toLocaleDateString()]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:l.weeks.map(($,A)=>e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${s?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${s?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[e.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${s?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>v(A),children:[e.jsxs("h2",{className:`text-2xl font-bold ${s?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",$.week," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",c(A),")"]})]}),b[A]?e.jsx(We,{className:`w-6 h-6 ${s?"text-red-400":"text-red-800"} transition-transform duration-200`}):e.jsx(Fe,{className:`w-6 h-6 ${s?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),b[A]&&e.jsx("div",{className:"mt-6 space-y-6",children:$.days.map((k,B)=>e.jsxs("div",{className:`border p-6 rounded-lg ${s?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[e.jsxs("h3",{className:`text-xl font-semibold mb-4 ${s?"text-red-400":"text-red-800"} tracking-tight`,children:[k.day," ",e.jsxs("span",{className:"text-sm font-normal",children:["(",E(A,B),")"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),e.jsxs("p",{className:`text-sm ${s?"text-stone-400":"text-stone-600"}`,children:[k.macros.protein,"g"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),e.jsxs("p",{className:`text-sm ${s?"text-stone-400":"text-stone-600"}`,children:[k.macros.carbs,"g"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${s?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),e.jsxs("p",{className:`text-sm ${s?"text-stone-400":"text-stone-600"}`,children:[k.macros.fats,"g"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(k.loggedMeals).every(D=>k.loggedMeals[D].length===0)?e.jsx("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):T.map(D=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:`text-base font-semibold mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide border-b ${s?"border-stone-600":"border-red-200"} pb-1`,children:D}),k.loggedMeals[D].length>0?e.jsx("ul",{className:"space-y-2",children:k.loggedMeals[D].map((C,L)=>e.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${s?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:e.jsxs("span",{className:"text-sm",children:[C.name,": ",C.grams,"g"]})},L))}):e.jsxs("p",{className:`text-sm italic ${s?"text-red-400":"text-red-800"}`,children:["No ",D.toLowerCase()," logged."]})]},D)),e.jsxs("div",{className:"mt-6",children:[e.jsx("h5",{className:`text-base font-semibold mb-3 ${s?"text-red-400":"text-red-800"} tracking-wide border-b ${s?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const D=S(k.loggedMeals),C=a(D,k.macros);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${C.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(D.protein/k.macros.protein*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[D.protein.toFixed(1),"g /"," ",k.macros.protein,"g"]}),C.protein?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${C.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(D.carbs/k.macros.carbs*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[D.carbs.toFixed(1),"g /"," ",k.macros.carbs,"g"]}),C.carbs?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),e.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full ${C.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(D.fats/k.macros.fats*100,100)}%`}})}),e.jsxs("span",{className:"text-sm",children:[D.fats.toFixed(1),"g /"," ",k.macros.fats,"g"]}),C.fats?e.jsx(he,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},B))})]},A))})]})},es=()=>{const[t,s]=r.useState(""),[l,n]=r.useState(""),[u,y]=r.useState(null),[j,m]=r.useState(!1),{login:b}=r.useContext(ce),{isDarkMode:x}=r.useContext(I),v=ee(),S=async a=>{var c,E;a.preventDefault(),y(null),m(!0);try{await b(t,l);const T=((E=(c=location.state)==null?void 0:c.from)==null?void 0:E.pathname)||"/profile";v(T,{replace:!0})}catch(T){y(T.message),console.error("Login error:",T.message)}finally{m(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${x?"text-red-400":"text-red-800"}`,children:"Login"}),e.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${x?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${x?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),e.jsx("input",{type:"email",value:t,onChange:a=>s(a.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${x?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${x?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),e.jsx("input",{type:"password",value:l,onChange:a=>n(a.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${x?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),u&&e.jsx("p",{className:`text-center text-sm mb-4 ${x?"text-red-400":"text-red-800"}`,children:u}),e.jsx("button",{type:"submit",disabled:j,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${x?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:j?e.jsxs(e.Fragment,{children:[e.jsx(xt,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(J,{to:"/forgot-password",className:`text-sm hover:underline ${x?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),e.jsx("div",{className:"mt-2 text-center",children:e.jsxs("p",{className:`text-sm ${x?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",e.jsx(J,{to:"/signup",className:`hover:underline ${x?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},ts=()=>{const t=ee(),{isDarkMode:s}=r.useContext(I),{signup:l,user:n,loading:u}=r.useContext(ce),[y,j]=r.useState(""),[m,b]=r.useState(""),[x,v]=r.useState(null),S=async a=>{a.preventDefault(),v(null);try{await l(y,m),t("/login")}catch(c){c.message.includes("User already exists")?v("Email already in use. A confirmation email has been resent."):c.message.includes("rate limit")?v("Too many signup attempts. Please wait and try again later."):v("An error occurred during signup. Please try again.")}};return u?e.jsx("div",{children:"Loading..."}):n?(t("/nutrition"),null):e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${s?"text-red-400":"text-red-800"}`,children:"Sign Up"}),e.jsxs("form",{onSubmit:S,className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),e.jsx("input",{type:"email",value:y,onChange:a=>j(a.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${s?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),e.jsx("input",{type:"password",value:m,onChange:a=>b(a.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${s?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),x&&e.jsx("p",{className:`text-center text-sm mb-6 ${s?"text-red-400":"text-red-800"}`,children:x}),e.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${s?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Sign Up"})]}),e.jsxs("p",{className:`text-center mt-6 text-sm ${s?"text-stone-400":"text-stone-600"}`,children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"Log in"})]})]})},ss=()=>{var T,$,A;const{user:t,loading:s,refreshUser:l}=r.useContext(ce),{isDarkMode:n}=r.useContext(I),u=ee(),[y,j]=r.useState(((T=t==null?void 0:t.user_metadata)==null?void 0:T.displayName)||""),[m,b]=r.useState([]),[x,v]=r.useState(null),[S,a]=r.useState(null);if(r.useEffect(()=>{(async()=>{if(t)try{const{data:B,error:D}=await ne.from("nutrition_plans").select("*").eq("user_id",t.id);if(D)throw D;b(B||[])}catch(B){console.error("Error fetching nutrition plans:",B.message)}})()},[t]),s)return e.jsx("div",{children:"Loading..."});if(!t)return u("/login"),null;const c=async k=>{k.preventDefault(),v(null),a(null);try{const{error:B}=await ne.auth.updateUser({data:{displayName:y}});if(B)throw B;a("Profile updated successfully!"),await l()}catch(B){v("Failed to update profile. Please try again."),console.error("Update profile error:",B.message)}},E=($=t==null?void 0:t.user_metadata)!=null&&$.displayName?t.user_metadata.displayName.charAt(0).toUpperCase()+t.user_metadata.displayName.slice(1):"User";return e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${n?"text-red-400":"text-red-800"}`,children:[E," - Dashboard "]}),e.jsxs("p",{className:`text-center text-lg mb-10 ${n?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",E,"!"]}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${n?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",((A=t.user_metadata)==null?void 0:A.displayName)||"Not set"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(t.created_at).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(t.updated_at).toLocaleDateString()]}),t.user_metadata&&Object.keys(t.user_metadata).length>0?e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Additional Info:"}),e.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(t.user_metadata).map(([k,B])=>e.jsxs("li",{children:[k,": ",B]},k))})]}):e.jsx("p",{children:"No additional user metadata available."})]})]}),e.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${n?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),m.length>0?e.jsx("ul",{className:"space-y-2",children:m.map(k=>e.jsx("li",{children:e.jsx(Link,{to:`/nutrition-plan/${k.id}`,className:"hover:text-red-600 transition-colors duration-200",children:k.name||`Plan ${k.id}`})},k.id))}):e.jsx("p",{children:"No nutrition plans found."})]}),e.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${n?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-lg font-semibold mb-2 ${n?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),e.jsx("input",{type:"text",value:y,onChange:k=>j(k.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${n?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),x&&e.jsx("p",{className:`text-center text-sm mb-4 ${n?"text-red-400":"text-red-800"}`,children:x}),S&&e.jsx("p",{className:`text-center text-sm mb-4 ${n?"text-green-400":"text-green-600"}`,children:S}),e.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),e.jsxs("div",{className:`p-6 rounded-lg shadow-md ${n?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>u("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),e.jsx("button",{onClick:()=>u("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),e.jsx("button",{onClick:()=>u("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),e.jsx("button",{onClick:()=>u("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},rs=()=>{const{user:t,loading:s}=r.useContext(ce),l=Me();return s?e.jsx("div",{children:"Loading..."}):t?e.jsx(Ie,{}):e.jsx(ht,{to:"/login",state:{from:l},replace:!0})},os=()=>(r.useEffect(()=>{(async()=>{try{const s=K(V,"content","blog","posts"),n=(await re(s)).docs.map(x=>({id:x.id,date:x.data().date||new Date().toISOString()})),y=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  ${[{url:"https://yourdomain.com/",date:new Date().toISOString()},{url:"https://yourdomain.com/about",date:new Date().toISOString()},{url:"https://yourdomain.com/contact",date:new Date().toISOString()}].map(x=>`
  <url>
    <loc>${x.url}</loc>
    <lastmod>${x.date}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.8</priority>
  </url>`).join("")}
  ${n.map(x=>`
  <url>
    <loc>https://yourdomain.com/blog/${x.id}</loc>
    <lastmod>${new Date(x.date).toISOString()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.9</priority>
  </url>`).join("")}
</urlset>`,j=new Blob([y],{type:"application/xml"}),m=URL.createObjectURL(j),b=document.createElement("a");b.href=m,b.download="sitemap.xml",document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(m),console.log("Sitemap generated:",y)}catch(s){console.error("Error generating sitemap:",s)}})()},[]),e.jsx("div",{children:"Generating sitemap..."})),I=r.createContext();function ns(){const[t,s]=r.useState(()=>{const u=localStorage.getItem("theme");return u?JSON.parse(u):!0});r.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(t))},[t]);const l=()=>s(u=>!u),n="/AussieGutPack";return console.log("Basename:",n),e.jsx(gt,{children:e.jsx(Pt,{children:e.jsx(vt,{children:e.jsx(I.Provider,{value:{isDarkMode:t,toggleTheme:l},children:e.jsx(bt,{basename:n,children:e.jsx(He,{children:e.jsx(ze,{classNames:"fade",timeout:300,children:e.jsx(pt,{children:e.jsxs(G,{path:"/",element:e.jsx(yt,{}),children:[e.jsx(G,{index:!0,element:e.jsx(Dt,{})}),e.jsx(G,{path:"products",element:e.jsx(Et,{})}),e.jsx(G,{path:"cart",element:e.jsx(Lt,{})}),e.jsx(G,{path:"checkout",element:e.jsx(Mt,{})}),e.jsx(G,{path:"gut-health",element:e.jsx(Wt,{})}),e.jsx(G,{path:"gut-health/:id",element:e.jsx(Ft,{})}),e.jsx(G,{path:"purchase",element:e.jsx(Ot,{})}),e.jsx(G,{path:"blog",element:e.jsx(Tt,{})}),e.jsx(G,{path:"blog/:id",element:e.jsx(Rt,{})}),e.jsx(G,{path:"/sitemap.xml",element:e.jsx(os,{})}),e.jsx(G,{path:"faq",element:e.jsx(qt,{})}),e.jsx(G,{path:"contact",element:e.jsx(_t,{})}),e.jsx(G,{path:"admin",element:e.jsx(Gt,{})}),e.jsx(G,{path:"admin/home",element:e.jsx(It,{})}),e.jsx(G,{path:"admin/blog",element:e.jsx(Ht,{})}),e.jsx(G,{path:"admin/products",element:e.jsx(zt,{})}),e.jsx(G,{path:"/shop/product/:id",element:e.jsx(At,{})}),e.jsx(G,{path:"fitness-tracker",element:e.jsx(Jt,{})}),e.jsx(G,{path:"fitness-tracker/plan/:id",element:e.jsx(Vt,{})}),e.jsx(G,{path:"fitness-tracker/create-custom-plan",element:e.jsx(Yt,{})}),e.jsx(G,{path:"fitness-tracker/log",element:e.jsx(Qt,{})}),e.jsx(G,{path:"fitness-tracker/history",element:e.jsx(Kt,{})}),e.jsx(G,{path:"nutrition",element:e.jsx(Zt,{})}),e.jsx(G,{path:"nutrition-plan/:id",element:e.jsx(Xt,{})}),e.jsx(G,{path:"login",element:e.jsx(es,{})}),e.jsx(G,{path:"signup",element:e.jsx(ts,{})}),e.jsx(G,{element:e.jsx(rs,{}),children:e.jsx(G,{path:"profile",element:e.jsx(ss,{})})}),e.jsx(G,{path:"*",element:e.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})})}console.log("Main.jsx is running");ft.createRoot(document.getElementById("root")).render(e.jsx(jt.StrictMode,{children:e.jsx(ns,{})}));
